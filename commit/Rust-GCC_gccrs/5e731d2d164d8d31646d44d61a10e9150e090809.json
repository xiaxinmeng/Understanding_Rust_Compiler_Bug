{"sha": "5e731d2d164d8d31646d44d61a10e9150e090809", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWU3MzFkMmQxNjRkOGQzMTY0NmQ0NGQ2MWExMGU5MTUwZTA5MDgwOQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2015-01-06T02:27:02Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2015-01-06T02:27:02Z"}, "message": "compiler: Use function receiver name in mangled named type descriptor.\n\nIf named types with similar names are defined inside of methods\nwith similar names, it was possible that the mangled type names would be\nthe same, leading to multiple definitions of type descriptor and\ngarbage collection info variables.\nThis can only occur with similarly named methods across different\nreceivers, so we use the receiver name to distinguish.\n\nFixes issue 33.\n\nFrom-SVN: r219214", "tree": {"sha": "8ac20b6a5361978137e8458af8f60f82153cd3cb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8ac20b6a5361978137e8458af8f60f82153cd3cb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5e731d2d164d8d31646d44d61a10e9150e090809", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e731d2d164d8d31646d44d61a10e9150e090809", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e731d2d164d8d31646d44d61a10e9150e090809", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e731d2d164d8d31646d44d61a10e9150e090809/comments", "author": null, "committer": null, "parents": [{"sha": "2f42e5de44255be86141a2d2468d0dd575981dc4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f42e5de44255be86141a2d2468d0dd575981dc4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2f42e5de44255be86141a2d2468d0dd575981dc4"}], "stats": {"total": 16, "additions": 16, "deletions": 0}, "files": [{"sha": "f9877fa3c1bf52662a4e3809e26e516213869ba2", "filename": "gcc/go/gofrontend/types.cc", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e731d2d164d8d31646d44d61a10e9150e090809/gcc%2Fgo%2Fgofrontend%2Ftypes.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e731d2d164d8d31646d44d61a10e9150e090809/gcc%2Fgo%2Fgofrontend%2Ftypes.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Ftypes.cc?ref=5e731d2d164d8d31646d44d61a10e9150e090809", "patch": "@@ -1296,6 +1296,14 @@ Type::type_descriptor_var_name(Gogo* gogo, Named_type* nt)\n       ret.append(1, '.');\n       if (in_function != NULL)\n \t{\n+\t  const Typed_identifier* rcvr =\n+\t    in_function->func_value()->type()->receiver();\n+\t  if (rcvr != NULL)\n+\t    {\n+\t      Named_type* rcvr_type = rcvr->type()->deref()->named_type();\n+\t      ret.append(Gogo::unpack_hidden_name(rcvr_type->name()));\n+\t      ret.append(1, '.');\n+\t    }\n \t  ret.append(Gogo::unpack_hidden_name(in_function->name()));\n \t  ret.append(1, '.');\n \t  if (index > 0)\n@@ -9170,6 +9178,14 @@ Named_type::do_mangled_name(Gogo* gogo, std::string* ret) const\n       name.append(1, '.');\n       if (this->in_function_ != NULL)\n \t{\n+\t  const Typed_identifier* rcvr =\n+\t    this->in_function_->func_value()->type()->receiver();\n+\t  if (rcvr != NULL)\n+\t    {\n+\t      Named_type* rcvr_type = rcvr->type()->deref()->named_type();\n+\t      name.append(Gogo::unpack_hidden_name(rcvr_type->name()));\n+\t      name.append(1, '.');\n+\t    }\n \t  name.append(Gogo::unpack_hidden_name(this->in_function_->name()));\n \t  name.append(1, '$');\n \t  if (this->in_function_index_ > 0)"}]}