{"sha": "8633c31574501e823ed7f28ed949c30e3b0b3430", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODYzM2MzMTU3NDUwMWU4MjNlZDdmMjhlZDk0OWMzMGUzYjBiMzQzMA==", "commit": {"author": {"name": "Richard Sandiford", "email": "r.sandiford@uk.ibm.com", "date": "2009-06-02T19:15:26Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2009-06-02T19:15:26Z"}, "message": "pa-hpux.h (LINK_SPEC): Remove \"%<fwhole-program\".\n\ngcc/\n\t* config/pa/pa-hpux.h (LINK_SPEC): Remove \"%<fwhole-program\".\n\t* config/pa/pa-hpux10.h (LINK_SPEC): Likewise.\n\t* config/pa/pa-hpux11.h (LINK_SPEC): Likewise.\n\t* gcc.c (set_collect_gcc_options): Don't add -fwhole-program\n\tto COLLECT_GCC_OPTIONS.\n\nFrom-SVN: r148099", "tree": {"sha": "0f4771a15f743ed65ea96df6b7040943f74fd530", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0f4771a15f743ed65ea96df6b7040943f74fd530"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8633c31574501e823ed7f28ed949c30e3b0b3430", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8633c31574501e823ed7f28ed949c30e3b0b3430", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8633c31574501e823ed7f28ed949c30e3b0b3430", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8633c31574501e823ed7f28ed949c30e3b0b3430/comments", "author": null, "committer": null, "parents": [{"sha": "70ed7339f79de8805e22745fa6ab4275ca002a46", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/70ed7339f79de8805e22745fa6ab4275ca002a46", "html_url": "https://github.com/Rust-GCC/gccrs/commit/70ed7339f79de8805e22745fa6ab4275ca002a46"}], "stats": {"total": 28, "additions": 18, "deletions": 10}, "files": [{"sha": "825c7b664922432e4b16d68cab7ab8f16e46b4be", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8633c31574501e823ed7f28ed949c30e3b0b3430/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8633c31574501e823ed7f28ed949c30e3b0b3430/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8633c31574501e823ed7f28ed949c30e3b0b3430", "patch": "@@ -1,3 +1,11 @@\n+2009-06-02  Richard Sandiford  <r.sandiford@uk.ibm.com>\n+\n+\t* config/pa/pa-hpux.h (LINK_SPEC): Remove \"%<fwhole-program\".\n+\t* config/pa/pa-hpux10.h (LINK_SPEC): Likewise.\n+\t* config/pa/pa-hpux11.h (LINK_SPEC): Likewise.\n+\t* gcc.c (set_collect_gcc_options): Don't add -fwhole-program\n+\tto COLLECT_GCC_OPTIONS.\n+\n 2009-06-02  Richard Sandiford  <r.sandiford@uk.ibm.com>\n \n \t* collect2.c (target_system_root): New variable."}, {"sha": "b600b0e3d4c543e06c28aba5a3ffbb9ce376e526", "filename": "gcc/config/pa/pa-hpux.h", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8633c31574501e823ed7f28ed949c30e3b0b3430/gcc%2Fconfig%2Fpa%2Fpa-hpux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8633c31574501e823ed7f28ed949c30e3b0b3430/gcc%2Fconfig%2Fpa%2Fpa-hpux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa-hpux.h?ref=8633c31574501e823ed7f28ed949c30e3b0b3430", "patch": "@@ -95,12 +95,10 @@ along with GCC; see the file COPYING3.  If not see\n #undef LINK_SPEC\n #if ((TARGET_DEFAULT | TARGET_CPU_DEFAULT) & MASK_PA_11)\n #define LINK_SPEC \\\n-  \"%<fwhole-program\\\n-   %{!mpa-risc-1-0:%{!march=1.0:%{static:-L/lib/pa1.1 -L/usr/lib/pa1.1 }}}%{mlinker-opt:-O} %{!shared:-u main} %{static:-a archive} %{g*:-a archive} %{shared:-b}\"\n+  \"%{!mpa-risc-1-0:%{!march=1.0:%{static:-L/lib/pa1.1 -L/usr/lib/pa1.1 }}}%{mlinker-opt:-O} %{!shared:-u main} %{static:-a archive} %{g*:-a archive} %{shared:-b}\"\n #else\n #define LINK_SPEC \\\n-  \"%<fwhole-program\\\n-   %{mlinker-opt:-O} %{!shared:-u main} %{static:-a archive} %{g*:-a archive} %{shared:-b}\"\n+  \"%{mlinker-opt:-O} %{!shared:-u main} %{static:-a archive} %{g*:-a archive} %{shared:-b}\"\n #endif\n \n /* hpux8 and later have C++ compatible include files, so do not"}, {"sha": "df36ea2e8a9cbf78c77ad858ed267a2134e63fb8", "filename": "gcc/config/pa/pa-hpux10.h", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8633c31574501e823ed7f28ed949c30e3b0b3430/gcc%2Fconfig%2Fpa%2Fpa-hpux10.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8633c31574501e823ed7f28ed949c30e3b0b3430/gcc%2Fconfig%2Fpa%2Fpa-hpux10.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa-hpux10.h?ref=8633c31574501e823ed7f28ed949c30e3b0b3430", "patch": "@@ -82,8 +82,7 @@ along with GCC; see the file COPYING3.  If not see\n #undef LINK_SPEC\n #if ((TARGET_DEFAULT | TARGET_CPU_DEFAULT) & MASK_PA_11)\n #define LINK_SPEC \\\n-  \"%<fwhole-program\\\n-   %{!mpa-risc-1-0:%{!march=1.0:%{static:-L/lib/pa1.1 -L/usr/lib/pa1.1 }}}\\\n+  \"%{!mpa-risc-1-0:%{!march=1.0:%{static:-L/lib/pa1.1 -L/usr/lib/pa1.1 }}}\\\n    %{!shared:%{p:-L/lib/libp %{!static:\\\n      %nWarning: consider linking with `-static' as system libraries with\\n\\\n      %n  profiling support are only provided in archive format}}}\\\n@@ -94,8 +93,7 @@ along with GCC; see the file COPYING3.  If not see\n    %{static:-a archive} %{shared:-b}\"\n #else\n #define LINK_SPEC \\\n-  \"%<fwhole-program\\\n-   %{!shared:%{p:-L/lib/libp %{!static:\\\n+  \"%{!shared:%{p:-L/lib/libp %{!static:\\\n      %nWarning: consider linking with `-static' as system libraries with\\n\\\n      %n  profiling support are only provided in archive format}}}\\\n    %{!shared:%{pg:-L/lib/libp %{!static:\\"}, {"sha": "09b414cb00a43f4f1ec2695eda0c25b6378e39a9", "filename": "gcc/config/pa/pa-hpux11.h", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8633c31574501e823ed7f28ed949c30e3b0b3430/gcc%2Fconfig%2Fpa%2Fpa-hpux11.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8633c31574501e823ed7f28ed949c30e3b0b3430/gcc%2Fconfig%2Fpa%2Fpa-hpux11.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa-hpux11.h?ref=8633c31574501e823ed7f28ed949c30e3b0b3430", "patch": "@@ -104,8 +104,7 @@ along with GCC; see the file COPYING3.  If not see\n    want dereferencing of a NULL pointer to cause a SEGV.  */\n #undef LINK_SPEC\n #define LINK_SPEC \\\n-  \"%<fwhole-program\\\n-   %{!shared:%{p:-L/lib/libp -L/usr/lib/libp %{!static:\\\n+  \"%{!shared:%{p:-L/lib/libp -L/usr/lib/libp %{!static:\\\n      %nWarning: consider linking with `-static' as system libraries with\\n\\\n      %n  profiling support are only provided in archive format}}}\\\n    %{!shared:%{pg:-L/lib/libp -L/usr/lib/libp %{!static:\\"}, {"sha": "f0d986c259a0f73981dacbdad874d22fd866d3fc", "filename": "gcc/gcc.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8633c31574501e823ed7f28ed949c30e3b0b3430/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8633c31574501e823ed7f28ed949c30e3b0b3430/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=8633c31574501e823ed7f28ed949c30e3b0b3430", "patch": "@@ -4434,6 +4434,11 @@ set_collect_gcc_options (void)\n       if ((switches[i].live_cond & SWITCH_IGNORE) != 0)\n \tcontinue;\n \n+      /* Don't use -fwhole-program when compiling the init and fini routines,\n+\t since we'd wrongly assume that the routines aren't needed.  */\n+      if (strcmp (switches[i].part1, \"fwhole-program\") == 0)\n+\tcontinue;\n+\n       obstack_grow (&collect_obstack, \"'-\", 2);\n       q = switches[i].part1;\n       while ((p = strchr (q, '\\'')))"}]}