{"sha": "9029d3424fac933a8bd5fb6ea63583f7812b6ef6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTAyOWQzNDI0ZmFjOTMzYThiZDVmYjZlYTYzNTgzZjc4MTJiNmVmNg==", "commit": {"author": {"name": "Thomas Preud'homme", "email": "thomas.preudhomme@arm.com", "date": "2018-02-22T16:31:56Z"}, "committer": {"name": "Thomas Preud'homme", "email": "thopre01@gcc.gnu.org", "date": "2018-02-22T16:31:56Z"}, "message": "[ARM] Multilib mapping for Armv8-R\n\nDue to there being no multilib mapping for Armv8-R, default multilib\nbuilts for -march=armv4t with softfloat floating-point arithmetic is\nbeing used. This patch maps it instead to the existing Armv7 multilibs.\nNote that mapping for single-precision Armv8-R has been left out due to\nthere being no Arm implementation of that architecture variant.\n\n2018-02-22  Thomas Preud'homme  <thomas.preudhomme@arm.com>\n\n    gcc/\n    * config/arm/t-multilib: Map Armv8-R to Armv7 multilibs.\n\n    gcc/testsuite/\n    * gcc.target/arm/multilib.exp: Add tests for Armv8-R multilib mappings.\n\nFrom-SVN: r257904", "tree": {"sha": "6ee24104fcc1c21d78cfee87601517af5e14a69d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6ee24104fcc1c21d78cfee87601517af5e14a69d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9029d3424fac933a8bd5fb6ea63583f7812b6ef6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9029d3424fac933a8bd5fb6ea63583f7812b6ef6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9029d3424fac933a8bd5fb6ea63583f7812b6ef6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9029d3424fac933a8bd5fb6ea63583f7812b6ef6/comments", "author": {"login": "RoboTux", "id": 272327, "node_id": "MDQ6VXNlcjI3MjMyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/272327?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RoboTux", "html_url": "https://github.com/RoboTux", "followers_url": "https://api.github.com/users/RoboTux/followers", "following_url": "https://api.github.com/users/RoboTux/following{/other_user}", "gists_url": "https://api.github.com/users/RoboTux/gists{/gist_id}", "starred_url": "https://api.github.com/users/RoboTux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RoboTux/subscriptions", "organizations_url": "https://api.github.com/users/RoboTux/orgs", "repos_url": "https://api.github.com/users/RoboTux/repos", "events_url": "https://api.github.com/users/RoboTux/events{/privacy}", "received_events_url": "https://api.github.com/users/RoboTux/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6cc22cf4dfcfecda589cd0fc023abbeff7779279", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6cc22cf4dfcfecda589cd0fc023abbeff7779279", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6cc22cf4dfcfecda589cd0fc023abbeff7779279"}], "stats": {"total": 36, "additions": 36, "deletions": 0}, "files": [{"sha": "4643dd12eb2d75239fcf91ea539f23067dee82bf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9029d3424fac933a8bd5fb6ea63583f7812b6ef6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9029d3424fac933a8bd5fb6ea63583f7812b6ef6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9029d3424fac933a8bd5fb6ea63583f7812b6ef6", "patch": "@@ -1,3 +1,7 @@\n+2018-02-22  Thomas Preud'homme  <thomas.preudhomme@arm.com>\n+\n+\t* config/arm/t-multilib: Map Armv8-R to Armv7 multilibs.\n+\n 2018-02-22  Martin Liska  <mliska@suse.cz>\n \n \tPR driver/83193"}, {"sha": "3d0c824b4ec8cacfadbbe765d9ad6fb3d83f4328", "filename": "gcc/config/arm/t-multilib", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9029d3424fac933a8bd5fb6ea63583f7812b6ef6/gcc%2Fconfig%2Farm%2Ft-multilib", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9029d3424fac933a8bd5fb6ea63583f7812b6ef6/gcc%2Fconfig%2Farm%2Ft-multilib", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Ft-multilib?ref=9029d3424fac933a8bd5fb6ea63583f7812b6ef6", "patch": "@@ -70,6 +70,7 @@ v8_a_simd_variants\t:= $(call all_feat_combs, simd crypto)\n v8_1_a_simd_variants\t:= $(call all_feat_combs, simd crypto)\n v8_2_a_simd_variants\t:= $(call all_feat_combs, simd fp16 fp16fml crypto dotprod)\n v8_4_a_simd_variants\t:= $(call all_feat_combs, simd fp16 crypto)\n+v8_r_nosimd_variants\t:= +crc\n \n ifneq (,$(HAS_APROFILE))\n include $(srcdir)/config/arm/t-aprofile\n@@ -105,6 +106,14 @@ MULTILIB_MATCHES\t+= march?armv7+fp=march?armv7-r+fp+idiv\n \n MULTILIB_MATCHES\t+= $(foreach ARCH, $(all_early_arch), \\\n \t\t\t     march?armv5te+fp=march?$(ARCH)+fp)\n+# Map v8-r down onto common v7 code.\n+MULTILIB_MATCHES\t+= march?armv7=march?armv8-r\n+MULTILIB_MATCHES\t+= $(foreach ARCH, $(v8_r_nosimd_variants), \\\n+\t\t\t     march?armv7=march?armv8-r$(ARCH))\n+MULTILIB_MATCHES\t+= $(foreach ARCH,+simd +crypto, \\\n+\t\t\t     march?armv7+fp=march?armv8-r$(ARCH) \\\n+\t\t\t     march?armv7+fp=march?armv8-r+crc$(ARCH))\n+\n \n ifeq (,$(HAS_APROFILE))\n # Map all v7-a"}, {"sha": "4e40a1f78e27291ef6deede21afe4777974f10d7", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9029d3424fac933a8bd5fb6ea63583f7812b6ef6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9029d3424fac933a8bd5fb6ea63583f7812b6ef6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9029d3424fac933a8bd5fb6ea63583f7812b6ef6", "patch": "@@ -1,3 +1,7 @@\n+2018-02-22  Thomas Preud'homme  <thomas.preudhomme@arm.com>\n+\n+\t* gcc.target/arm/multilib.exp: Add tests for Armv8-R multilib mappings.\n+\n 2018-02-22  Marek Polacek  <polacek@redhat.com>\n \n \tPR c++/84493"}, {"sha": "04da2b0a20eda299c5749e8702ac1c5a8c937900", "filename": "gcc/testsuite/gcc.target/arm/multilib.exp", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9029d3424fac933a8bd5fb6ea63583f7812b6ef6/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fmultilib.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9029d3424fac933a8bd5fb6ea63583f7812b6ef6/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fmultilib.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fmultilib.exp?ref=9029d3424fac933a8bd5fb6ea63583f7812b6ef6", "patch": "@@ -422,6 +422,7 @@ if {[multilib_config \"rmprofile\"] } {\n \t{-mcpu=cortex-m23 -mfpu=auto -mfloat-abi=soft} \"thumb/v8-m.base/nofp\"\n \t{-mcpu=cortex-m33 -mfpu=auto -mfloat-abi=soft} \"thumb/v8-m.main/nofp\"\n \t{-mcpu=cortex-m7+nofp.dp -mfpu=auto -mfloat-abi=soft} \"thumb/v7e-m/nofp\"\n+\t{-mcpu=cortex-r52 -mfpu=auto -mfloat-abi=soft} \"thumb/v7/nofp\"\n \t{-mcpu=cortex-m0 -mfpu=vfpv3xd -mfloat-abi=soft} \"thumb/v6-m/nofp\"\n \t{-mcpu=cortex-m1 -mfpu=vfpv3xd -mfloat-abi=soft} \"thumb/v6-m/nofp\"\n \t{-mcpu=cortex-m3 -mfpu=vfpv3xd -mfloat-abi=soft} \"thumb/v7-m/nofp\"\n@@ -466,6 +467,7 @@ if {[multilib_config \"rmprofile\"] } {\n \t{-mcpu=cortex-m7 -mfpu=auto -mfloat-abi=hard} \"thumb/v7e-m+dp/hard\"\n \t{-mcpu=cortex-m33 -mfpu=auto -mfloat-abi=hard} \"thumb/v8-m.main+fp/hard\"\n \t{-mcpu=cortex-m7+nofp.dp -mfpu=auto -mfloat-abi=hard} \"thumb/v7e-m+fp/hard\"\n+\t{-mcpu=cortex-r52 -mfpu=auto -mfloat-abi=hard} \"thumb/v7+fp/hard\"\n \t{-mcpu=cortex-m4 -mfpu=vfpv3xd -mfloat-abi=hard} \"thumb/v7e-m+fp/hard\"\n \t{-mcpu=cortex-m7 -mfpu=vfpv3xd -mfloat-abi=hard} \"thumb/v7e-m+fp/hard\"\n \t{-mcpu=cortex-m33 -mfpu=vfpv3xd -mfloat-abi=hard} \"thumb/v8-m.main+fp/hard\"\n@@ -494,6 +496,7 @@ if {[multilib_config \"rmprofile\"] } {\n \t{-mcpu=cortex-m23 -mfpu=auto -mfloat-abi=softfp} \"thumb/v8-m.base/nofp\"\n \t{-mcpu=cortex-m33 -mfpu=auto -mfloat-abi=softfp} \"thumb/v8-m.main+fp/softfp\"\n \t{-mcpu=cortex-m7+nofp.dp -mfpu=auto -mfloat-abi=softfp} \"thumb/v7e-m+fp/softfp\"\n+\t{-mcpu=cortex-r52 -mfpu=auto -mfloat-abi=softfp} \"thumb/v7+fp/softfp\"\n \t{-mcpu=cortex-m0 -mfpu=vfpv3xd -mfloat-abi=softfp} \"thumb/v6-m/nofp\"\n \t{-mcpu=cortex-m1 -mfpu=vfpv3xd -mfloat-abi=softfp} \"thumb/v6-m/nofp\"\n \t{-mcpu=cortex-m3 -mfpu=vfpv3xd -mfloat-abi=softfp} \"thumb/v7-m/nofp\"\n@@ -545,6 +548,12 @@ if {[multilib_config \"rmprofile\"] } {\n \t{-march=armv8-m.main+fp.dp -mfpu=auto -mfloat-abi=soft} \"thumb/v8-m.main/nofp\"\n \t{-march=armv8-m.main+fp+dsp -mfpu=auto -mfloat-abi=soft} \"thumb/v8-m.main/nofp\"\n \t{-march=armv8-m.main+fp.dp+dsp -mfpu=auto -mfloat-abi=soft} \"thumb/v8-m.main/nofp\"\n+\t{-march=armv8-r -mfpu=auto -mfloat-abi=soft} \"thumb/v7/nofp\"\n+\t{-march=armv8-r+crc -mfpu=auto -mfloat-abi=soft} \"thumb/v7/nofp\"\n+\t{-march=armv8-r+simd -mfpu=auto -mfloat-abi=soft} \"thumb/v7/nofp\"\n+\t{-march=armv8-r+crc+simd -mfpu=auto -mfloat-abi=soft} \"thumb/v7/nofp\"\n+\t{-march=armv8-r+crypto -mfpu=auto -mfloat-abi=soft} \"thumb/v7/nofp\"\n+\t{-march=armv8-r+crc+crypto -mfpu=auto -mfloat-abi=soft} \"thumb/v7/nofp\"\n \t{-march=armv6-m -mfpu=vfpv3xd -mfloat-abi=soft} \"thumb/v6-m/nofp\"\n \t{-march=armv7-m -mfpu=vfpv3xd -mfloat-abi=soft} \"thumb/v7-m/nofp\"\n \t{-march=armv7e-m -mfpu=vfpv3xd -mfloat-abi=soft} \"thumb/v7e-m/nofp\"\n@@ -606,6 +615,10 @@ if {[multilib_config \"rmprofile\"] } {\n \t{-march=armv8-m.main+fp.dp -mfpu=auto -mfloat-abi=hard} \"thumb/v8-m.main+dp/hard\"\n \t{-march=armv8-m.main+fp+dsp -mfpu=auto -mfloat-abi=hard} \"thumb/v8-m.main+fp/hard\"\n \t{-march=armv8-m.main+fp.dp+dsp -mfpu=auto -mfloat-abi=hard} \"thumb/v8-m.main+dp/hard\"\n+\t{-march=armv8-r+simd -mfpu=auto -mfloat-abi=hard} \"thumb/v7+fp/hard\"\n+\t{-march=armv8-r+crc+simd -mfpu=auto -mfloat-abi=hard} \"thumb/v7+fp/hard\"\n+\t{-march=armv8-r+crypto -mfpu=auto -mfloat-abi=hard} \"thumb/v7+fp/hard\"\n+\t{-march=armv8-r+crc+crypto -mfpu=auto -mfloat-abi=hard} \"thumb/v7+fp/hard\"\n \t{-march=armv7e-m -mfpu=vfpv3xd -mfloat-abi=hard} \"thumb/v7e-m+fp/hard\"\n \t{-march=armv8-m.main -mfpu=vfpv3xd -mfloat-abi=hard} \"thumb/v8-m.main+fp/hard\"\n \t{-march=armv7e-m+fp -mfpu=vfpv3xd -mfloat-abi=hard} \"thumb/v7e-m+fp/hard\"\n@@ -657,6 +670,12 @@ if {[multilib_config \"rmprofile\"] } {\n \t{-march=armv8-m.main+fp.dp -mfpu=auto -mfloat-abi=softfp} \"thumb/v8-m.main+dp/softfp\"\n \t{-march=armv8-m.main+fp+dsp -mfpu=auto -mfloat-abi=softfp} \"thumb/v8-m.main+fp/softfp\"\n \t{-march=armv8-m.main+fp.dp+dsp -mfpu=auto -mfloat-abi=softfp} \"thumb/v8-m.main+dp/softfp\"\n+\t{-march=armv8-r -mfpu=auto -mfloat-abi=softfp} \"thumb/v7/nofp\"\n+\t{-march=armv8-r+crc -mfpu=auto -mfloat-abi=softfp} \"thumb/v7/nofp\"\n+\t{-march=armv8-r+simd -mfpu=auto -mfloat-abi=softfp} \"thumb/v7+fp/softfp\"\n+\t{-march=armv8-r+crc+simd -mfpu=auto -mfloat-abi=softfp} \"thumb/v7+fp/softfp\"\n+\t{-march=armv8-r+crypto -mfpu=auto -mfloat-abi=softfp} \"thumb/v7+fp/softfp\"\n+\t{-march=armv8-r+crc+crypto -mfpu=auto -mfloat-abi=softfp} \"thumb/v7+fp/softfp\"\n \t{-march=armv6-m -mfpu=vfpv3xd -mfloat-abi=softfp} \"thumb/v6-m/nofp\"\n \t{-march=armv7-m -mfpu=vfpv3xd -mfloat-abi=softfp} \"thumb/v7-m/nofp\"\n \t{-march=armv7e-m -mfpu=vfpv3xd -mfloat-abi=softfp} \"thumb/v7e-m+fp/softfp\""}]}