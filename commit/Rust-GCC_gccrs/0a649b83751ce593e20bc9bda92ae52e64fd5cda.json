{"sha": "0a649b83751ce593e20bc9bda92ae52e64fd5cda", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGE2NDliODM3NTFjZTU5M2UyMGJjOWJkYTkyYWU1MmU2NGZkNWNkYQ==", "commit": {"author": {"name": "Alexandre Oliva", "email": "oliva@adacore.com", "date": "2020-02-13T18:52:18Z"}, "committer": {"name": "Alexandre Oliva", "email": "oliva@gnu.org", "date": "2020-02-13T18:52:18Z"}, "message": "skip fixinc on vxworks7*, amend mkheaders\n\nvxworks7 headers haven't required fixes, and we've decided to avoid\nrunning fixinc on them.\n\nThe problem with that is that, with a dummy fixinc, mkheaders wipes\nout include-fixed but then multi_dir subdirs are not created again, so\nwe end up with a limits.h named after each multi_dir, when there are\nnon-default multilibs.  Oops.\n\nThis patch arranges for a dummy fixinc to be created for *-*-vxworks7*\ntargets, and fixes mkheaders so as to create multi_dir subdirs in\ninclude-fixed after wiping them out, and to copy limits.h so that it\nwon't take the name that should be of a subdir (unless the multi_dir\nis limits.h, but that's hopefully never the case ;-)\n\n\nfor  fixincludes/ChangeLog\n\n\t* mkheaders.in: Re-create subdirs, copy limits.h into subdir.\n\t* mkfixinc.sh: Create dummy fixinc for *-*-vxworks7*.", "tree": {"sha": "ca7b97965cb4f56589f694fd2f388a448dfdbb10", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ca7b97965cb4f56589f694fd2f388a448dfdbb10"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0a649b83751ce593e20bc9bda92ae52e64fd5cda", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0a649b83751ce593e20bc9bda92ae52e64fd5cda", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0a649b83751ce593e20bc9bda92ae52e64fd5cda", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0a649b83751ce593e20bc9bda92ae52e64fd5cda/comments", "author": null, "committer": null, "parents": [{"sha": "bb97ad35ead015075ee4747136c9fc75faa27411", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb97ad35ead015075ee4747136c9fc75faa27411", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bb97ad35ead015075ee4747136c9fc75faa27411"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "b3db80b29c108e4d51a0d342dfc1d8a8fcb135ed", "filename": "fixincludes/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0a649b83751ce593e20bc9bda92ae52e64fd5cda/fixincludes%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0a649b83751ce593e20bc9bda92ae52e64fd5cda/fixincludes%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2FChangeLog?ref=0a649b83751ce593e20bc9bda92ae52e64fd5cda", "patch": "@@ -1,3 +1,8 @@\n+2020-02-13  Alexandre Oliva <oliva@adacore.com>\n+\n+\t* mkheaders.in: Re-create subdirs, copy limits.h into subdir.\n+\t* mkfixinc.sh: Create dummy fixinc for *-*-vxworks7*.\n+\n 2020-01-25  John David Anglin  <danglin@gcc.gnu.org>\n \n \t* inclhack.def (hpux_c99_inttypes4): New, add missing SCNuMAX defines."}, {"sha": "df90720b716f2386f343f5ba46a2d8d706188dd5", "filename": "fixincludes/mkfixinc.sh", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0a649b83751ce593e20bc9bda92ae52e64fd5cda/fixincludes%2Fmkfixinc.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0a649b83751ce593e20bc9bda92ae52e64fd5cda/fixincludes%2Fmkfixinc.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Fmkfixinc.sh?ref=0a649b83751ce593e20bc9bda92ae52e64fd5cda", "patch": "@@ -19,6 +19,7 @@ case $machine in\n     powerpc-*-rtems*   | \\\n     powerpcle-*-eabisim* | \\\n     powerpcle-*-eabi* | \\\n+    *-*-vxworks7* | \\\n     *-musl* )\n \t#  IF there is no include fixing,\n \t#  THEN create a no-op fixer and exit"}, {"sha": "a293a57a73b4c06f56ffa686b2334ef8c236e657", "filename": "fixincludes/mkheaders.in", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0a649b83751ce593e20bc9bda92ae52e64fd5cda/fixincludes%2Fmkheaders.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0a649b83751ce593e20bc9bda92ae52e64fd5cda/fixincludes%2Fmkheaders.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Fmkheaders.in?ref=0a649b83751ce593e20bc9bda92ae52e64fd5cda", "patch": "@@ -86,6 +86,7 @@ for ml in `cat ${itoolsdatadir}/fixinc_list`; do\n   sysroot_headers_suffix=`echo ${ml} | sed -e 's/;.*$//'`\n   multi_dir=`echo ${ml} | sed -e 's/^[^;]*;//'`\n   subincdir=${incdir}${multi_dir}\n+  ${mkinstalldirs} ${subincdir}\n   . ${itoolsdatadir}/mkheaders.conf\n   if [ x${STMP_FIXINC} != x ] ; then\n \tTARGET_MACHINE=\"${target}\" target_canonical=\"${target}\" \\\n@@ -100,5 +101,5 @@ for ml in `cat ${itoolsdatadir}/fixinc_list`; do\n \tfi\n   fi\n \n-  cp ${itoolsdatadir}/include${multi_dir}/limits.h ${subincdir}\n+  cp ${itoolsdatadir}/include${multi_dir}/limits.h ${subincdir}/limits.h\n done"}]}