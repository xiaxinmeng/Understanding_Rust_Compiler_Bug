{"sha": "60478b9caf9da70dc1301c863bb7c26a1ab5da9f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjA0NzhiOWNhZjlkYTcwZGMxMzAxYzg2M2JiN2MyNmExYWI1ZGE5Zg==", "commit": {"author": {"name": "Dehao Chen", "email": "dehao@google.com", "date": "2012-09-24T20:50:46Z"}, "committer": {"name": "Dehao Chen", "email": "dehao@gcc.gnu.org", "date": "2012-09-24T20:50:46Z"}, "message": "tree-cfg.c (move_stmt_op): Reset the expr block only when necessary.\n\n2012-09-24  Dehao Chen  <dehao@google.com>\n\n\t* tree-cfg.c (move_stmt_op): Reset the expr block only\n\twhen necessary.\n\t(move_block_to_fn): Reset the edge's goto block even\n\twhen the goto locus is unknown.\n\nFrom-SVN: r191680", "tree": {"sha": "80f00a7cc662e1da1a5ad8e49fc56fc350f8d920", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/80f00a7cc662e1da1a5ad8e49fc56fc350f8d920"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/60478b9caf9da70dc1301c863bb7c26a1ab5da9f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60478b9caf9da70dc1301c863bb7c26a1ab5da9f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/60478b9caf9da70dc1301c863bb7c26a1ab5da9f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60478b9caf9da70dc1301c863bb7c26a1ab5da9f/comments", "author": {"login": "danielcdh", "id": 694263, "node_id": "MDQ6VXNlcjY5NDI2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/694263?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danielcdh", "html_url": "https://github.com/danielcdh", "followers_url": "https://api.github.com/users/danielcdh/followers", "following_url": "https://api.github.com/users/danielcdh/following{/other_user}", "gists_url": "https://api.github.com/users/danielcdh/gists{/gist_id}", "starred_url": "https://api.github.com/users/danielcdh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danielcdh/subscriptions", "organizations_url": "https://api.github.com/users/danielcdh/orgs", "repos_url": "https://api.github.com/users/danielcdh/repos", "events_url": "https://api.github.com/users/danielcdh/events{/privacy}", "received_events_url": "https://api.github.com/users/danielcdh/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "55826ab6d1d050a8892e6dc45cf035c94db98dd0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55826ab6d1d050a8892e6dc45cf035c94db98dd0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/55826ab6d1d050a8892e6dc45cf035c94db98dd0"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "36a918635b98fe7a19bbd96b93f90bad8f3bfa46", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60478b9caf9da70dc1301c863bb7c26a1ab5da9f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60478b9caf9da70dc1301c863bb7c26a1ab5da9f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=60478b9caf9da70dc1301c863bb7c26a1ab5da9f", "patch": "@@ -1,3 +1,10 @@\n+2012-09-24  Dehao Chen  <dehao@google.com>\n+\n+\t* tree-cfg.c (move_stmt_op): Reset the expr block only\n+\twhen necessary.\n+\t(move_block_to_fn): Reset the edge's goto block even\n+\twhen the goto locus is unknown.\n+\n 2012-09-24  Lawrence Crowl  <crowl@google.com>\n \n \t* double-int.h (double_int::from_pair): New."}, {"sha": "774e74f2a545d8ceaed32e26aa29ec71e5b52a8d", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60478b9caf9da70dc1301c863bb7c26a1ab5da9f/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60478b9caf9da70dc1301c863bb7c26a1ab5da9f/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=60478b9caf9da70dc1301c863bb7c26a1ab5da9f", "patch": "@@ -6013,7 +6013,9 @@ move_stmt_op (tree *tp, int *walk_subtrees, void *data)\n \n   if (EXPR_P (t))\n     {\n-      if (TREE_BLOCK (t))\n+      if (TREE_BLOCK (t) == p->orig_block\n+\t  || (p->orig_block == NULL_TREE\n+\t  && TREE_BLOCK (t) == NULL_TREE))\n \tTREE_SET_BLOCK (t, p->new_block);\n     }\n   else if (DECL_P (t) || TREE_CODE (t) == SSA_NAME)\n@@ -6315,7 +6317,7 @@ move_block_to_fn (struct function *dest_cfun, basic_block bb,\n     }\n \n   FOR_EACH_EDGE (e, ei, bb->succs)\n-    if (!IS_UNKNOWN_LOCATION (e->goto_locus))\n+    if (e->goto_locus != UNKNOWN_LOCATION)\n       {\n \ttree block = LOCATION_BLOCK (e->goto_locus);\n \tif (d->orig_block == NULL_TREE"}]}