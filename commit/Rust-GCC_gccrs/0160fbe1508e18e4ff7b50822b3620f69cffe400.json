{"sha": "0160fbe1508e18e4ff7b50822b3620f69cffe400", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDE2MGZiZTE1MDhlMThlNGZmN2I1MDgyMmIzNjIwZjY5Y2ZmZTQwMA==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "2000-11-04T04:56:25Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2000-11-04T04:56:25Z"}, "message": "class.c (cxx_keyword_p): Accept keywords with trailing `$'s.\n\n\t* class.c (cxx_keyword_p): Accept keywords with trailing `$'s.\n\t* gjavah.c (cxx_keyword_subst): Handle any number of trailing\n\t`$'.\n\nFrom-SVN: r37243", "tree": {"sha": "b9112af0216cc95c9d4df1196c09dc07277d8cf7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b9112af0216cc95c9d4df1196c09dc07277d8cf7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0160fbe1508e18e4ff7b50822b3620f69cffe400", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0160fbe1508e18e4ff7b50822b3620f69cffe400", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0160fbe1508e18e4ff7b50822b3620f69cffe400", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0160fbe1508e18e4ff7b50822b3620f69cffe400/comments", "author": null, "committer": null, "parents": [{"sha": "f132f529e0f604f68eef0aa780b86dabeb00d964", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f132f529e0f604f68eef0aa780b86dabeb00d964", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f132f529e0f604f68eef0aa780b86dabeb00d964"}], "stats": {"total": 50, "additions": 41, "deletions": 9}, "files": [{"sha": "3aeede4d23ec7df4b673b9573afa59655dde3f91", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0160fbe1508e18e4ff7b50822b3620f69cffe400/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0160fbe1508e18e4ff7b50822b3620f69cffe400/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=0160fbe1508e18e4ff7b50822b3620f69cffe400", "patch": "@@ -1,5 +1,9 @@\n 2000-11-03  Tom Tromey  <tromey@cygnus.com>\n \n+\t* class.c (cxx_keyword_p): Accept keywords with trailing `$'s.\n+\t* gjavah.c (cxx_keyword_subst): Handle any number of trailing\n+\t`$'.\n+\n \t* lex.h (_JAVA_IDENTIFIER_IGNORABLE): New macro.\n \t(JAVA_ID_CHAR_P): Also try java_ignorable_control_p.\n \t* lex.c (java_read_unicode): Removed `term_context' argument."}, {"sha": "00cf42e6e8096766c6c346e30c84e978813af51d", "filename": "gcc/java/class.c", "status": "modified", "additions": 15, "deletions": 3, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0160fbe1508e18e4ff7b50822b3620f69cffe400/gcc%2Fjava%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0160fbe1508e18e4ff7b50822b3620f69cffe400/gcc%2Fjava%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fclass.c?ref=0160fbe1508e18e4ff7b50822b3620f69cffe400", "patch": "@@ -1961,11 +1961,23 @@ cxx_keyword_p (name, length)\n        mid != old;\n        old = mid, mid = (last + first) / 2)\n     {\n-      int r = utf8_cmp (name, length, cxx_keywords[mid]);\n+      int kwl = strlen (cxx_keywords[mid]);\n+      int min_length = kwl > length ? length : kwl;\n+      int r = utf8_cmp (name, min_length, cxx_keywords[mid]);\n \n       if (r == 0)\n-\treturn 1;\n-      else if (r < 0)\n+\t{\n+\t  int i;\n+\t  /* We've found a match if all the remaining characters are\n+\t     `$'.  */\n+\t  for (i = min_length; i < length && name[i] == '$'; ++i)\n+\t    ;\n+\t  if (i == length)\n+\t    return 1;\n+\t  r = 1;\n+\t}\n+\n+      if (r < 0)\n \tlast = mid;\n       else\n \tfirst = mid;"}, {"sha": "f49b717c1999ddabc6cc91ef66e07edfba791a4a", "filename": "gcc/java/gjavah.c", "status": "modified", "additions": 22, "deletions": 6, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0160fbe1508e18e4ff7b50822b3620f69cffe400/gcc%2Fjava%2Fgjavah.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0160fbe1508e18e4ff7b50822b3620f69cffe400/gcc%2Fjava%2Fgjavah.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fgjavah.c?ref=0160fbe1508e18e4ff7b50822b3620f69cffe400", "patch": "@@ -440,16 +440,32 @@ cxx_keyword_subst (str, length)\n        mid != old;\n        old = mid, mid = (last + first) / 2)\n     {\n-      int r = utf8_cmp (str, length, cxx_keywords[mid]);\n+      int kwl = strlen (cxx_keywords[mid]);\n+      int min_length = kwl > length ? length : kwl;\n+      int r = utf8_cmp (str, min_length, cxx_keywords[mid]);\n \n       if (r == 0)\n \t{\n-\t  char *str = xmalloc (2 + strlen (cxx_keywords[mid]));\n-\t  strcpy (str, cxx_keywords[mid]);\n-\t  strcat (str, \"$\");\n-\t  return str;\n+\t  int i;\n+\n+\t  /* Skip all trailing `$'.  */\n+\t  for (i = min_length; i < length && str[i] == '$'; ++i)\n+\t    ;\n+\t  /* We've only found a match if all the remaining characters\n+\t     are `$'.  */\n+\t  if (i == length)\n+\t    {\n+\t      char *dup = xmalloc (2 + length - min_length + kwl);\n+\t      strcpy (dup, cxx_keywords[mid]);\n+\t      for (i = kwl; i < length + 1; ++i)\n+\t\tdup[i] = '$';\n+\t      dup[i] = '\\0';\n+\t      return dup;\n+\t    }\n+\t  r = 1;\n \t}\n-      else if (r < 0)\n+\t\n+      if (r < 0)\n \tlast = mid;\n       else\n \tfirst = mid;"}]}