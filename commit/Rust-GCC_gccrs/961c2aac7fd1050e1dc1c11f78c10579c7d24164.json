{"sha": "961c2aac7fd1050e1dc1c11f78c10579c7d24164", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTYxYzJhYWM3ZmQxMDUwZTFkYzFjMTFmNzhjMTA1NzljN2QyNDE2NA==", "commit": {"author": {"name": "Andrew Stubbs", "email": "ams@codesourcery.com", "date": "2020-05-18T13:05:02Z"}, "committer": {"name": "Andrew Stubbs", "email": "ams@codesourcery.com", "date": "2020-05-29T11:17:06Z"}, "message": "amdgcn: Fix VCC early clobber\n\ngcc/ChangeLog:\n\n2020-05-28  Andrew Stubbs  <ams@codesourcery.com>\n\n\t* config/gcn/gcn-valu.md (add<mode>3_vcc_zext_dup): Add early clobber.\n\t(add<mode>3_vcc_zext_dup_exec): Likewise.\n\t(add<mode>3_vcc_zext_dup2): Likewise.\n\t(add<mode>3_vcc_zext_dup2_exec): Likewise.", "tree": {"sha": "ad5febe862b5eeca3662f44605b6731a03fb8052", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ad5febe862b5eeca3662f44605b6731a03fb8052"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/961c2aac7fd1050e1dc1c11f78c10579c7d24164", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/961c2aac7fd1050e1dc1c11f78c10579c7d24164", "html_url": "https://github.com/Rust-GCC/gccrs/commit/961c2aac7fd1050e1dc1c11f78c10579c7d24164", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/961c2aac7fd1050e1dc1c11f78c10579c7d24164/comments", "author": {"login": "ams-cs", "id": 2235130, "node_id": "MDQ6VXNlcjIyMzUxMzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2235130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ams-cs", "html_url": "https://github.com/ams-cs", "followers_url": "https://api.github.com/users/ams-cs/followers", "following_url": "https://api.github.com/users/ams-cs/following{/other_user}", "gists_url": "https://api.github.com/users/ams-cs/gists{/gist_id}", "starred_url": "https://api.github.com/users/ams-cs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ams-cs/subscriptions", "organizations_url": "https://api.github.com/users/ams-cs/orgs", "repos_url": "https://api.github.com/users/ams-cs/repos", "events_url": "https://api.github.com/users/ams-cs/events{/privacy}", "received_events_url": "https://api.github.com/users/ams-cs/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ams-cs", "id": 2235130, "node_id": "MDQ6VXNlcjIyMzUxMzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2235130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ams-cs", "html_url": "https://github.com/ams-cs", "followers_url": "https://api.github.com/users/ams-cs/followers", "following_url": "https://api.github.com/users/ams-cs/following{/other_user}", "gists_url": "https://api.github.com/users/ams-cs/gists{/gist_id}", "starred_url": "https://api.github.com/users/ams-cs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ams-cs/subscriptions", "organizations_url": "https://api.github.com/users/ams-cs/orgs", "repos_url": "https://api.github.com/users/ams-cs/repos", "events_url": "https://api.github.com/users/ams-cs/events{/privacy}", "received_events_url": "https://api.github.com/users/ams-cs/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7688e5e8c4d46102a0cc0b9c25191ac7dde0d285", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7688e5e8c4d46102a0cc0b9c25191ac7dde0d285", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7688e5e8c4d46102a0cc0b9c25191ac7dde0d285"}], "stats": {"total": 32, "additions": 16, "deletions": 16}, "files": [{"sha": "6d7fecaa12c2037acc029df6631b03a4d3c231fa", "filename": "gcc/config/gcn/gcn-valu.md", "status": "modified", "additions": 16, "deletions": 16, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/961c2aac7fd1050e1dc1c11f78c10579c7d24164/gcc%2Fconfig%2Fgcn%2Fgcn-valu.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/961c2aac7fd1050e1dc1c11f78c10579c7d24164/gcc%2Fconfig%2Fgcn%2Fgcn-valu.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fgcn%2Fgcn-valu.md?ref=961c2aac7fd1050e1dc1c11f78c10579c7d24164", "patch": "@@ -1380,13 +1380,13 @@\n    (set_attr \"length\" \"8\")])\n \n (define_insn_and_split \"add<mode>3_vcc_zext_dup\"\n-  [(set (match_operand:V_DI 0 \"register_operand\"    \"=   v,   v\")\n+  [(set (match_operand:V_DI 0 \"register_operand\"    \"=    v,    v\")\n \t(plus:V_DI\n \t  (zero_extend:V_DI\n \t    (vec_duplicate:<VnSI>\n-\t      (match_operand:SI 1 \"gcn_alu_operand\" \"  BSv, ASv\")))\n-\t  (match_operand:V_DI 2 \"gcn_alu_operand\"   \"  vDA, vDb\")))\n-   (set (match_operand:DI 3 \"register_operand\"\t    \"=SgcV,SgcV\")\n+\t      (match_operand:SI 1 \"gcn_alu_operand\" \"   BSv,  ASv\")))\n+\t  (match_operand:V_DI 2 \"gcn_alu_operand\"   \"   vDA,  vDb\")))\n+   (set (match_operand:DI 3 \"register_operand\"\t    \"=&SgcV,&SgcV\")\n \t(ltu:DI (plus:V_DI \n \t\t  (zero_extend:V_DI (vec_duplicate:<VnSI> (match_dup 1)))\n \t\t  (match_dup 2))\n@@ -1424,16 +1424,16 @@\n   })\n \n (define_insn_and_split \"add<mode>3_vcc_zext_dup_exec\"\n-  [(set (match_operand:V_DI 0 \"register_operand\"\t\t\"=   v,   v\")\n+  [(set (match_operand:V_DI 0 \"register_operand\"\t      \"=    v,    v\")\n \t(vec_merge:V_DI\n \t  (plus:V_DI\n \t    (zero_extend:V_DI\n \t      (vec_duplicate:<VnSI>\n-\t\t(match_operand:SI 1 \"gcn_alu_operand\"\t\t\"  ASv, BSv\")))\n-\t    (match_operand:V_DI 2 \"gcn_alu_operand\"\t\t\"  vDb, vDA\"))\n-\t  (match_operand:V_DI 4 \"gcn_register_or_unspec_operand\" \"  U0,  U0\")\n-\t  (match_operand:DI 5 \"gcn_exec_reg_operand\"\t\t\"    e,   e\")))\n-   (set (match_operand:DI 3 \"register_operand\"\t\t\t\"=SgcV,SgcV\")\n+\t\t(match_operand:SI 1 \"gcn_alu_operand\"\t      \"   ASv,  BSv\")))\n+\t    (match_operand:V_DI 2 \"gcn_alu_operand\"\t      \"   vDb,  vDA\"))\n+\t  (match_operand:V_DI 4 \"gcn_register_or_unspec_operand\" \" U0,   U0\")\n+\t  (match_operand:DI 5 \"gcn_exec_reg_operand\"\t      \"     e,    e\")))\n+   (set (match_operand:DI 3 \"register_operand\"\t\t      \"=&SgcV,&SgcV\")\n \t(and:DI\n \t  (ltu:DI (plus:V_DI \n \t\t    (zero_extend:V_DI (vec_duplicate:<VnSI> (match_dup 1)))\n@@ -1481,11 +1481,11 @@\n   })\n \n (define_insn_and_split \"add<mode>3_vcc_zext_dup2\"\n-  [(set (match_operand:V_DI 0 \"register_operand\"\t\t    \"=   v\")\n+  [(set (match_operand:V_DI 0 \"register_operand\"\t\t   \"=    v\")\n \t(plus:V_DI\n \t  (zero_extend:V_DI (match_operand:<VnSI> 1 \"gcn_alu_operand\" \" vA\"))\n \t  (vec_duplicate:V_DI (match_operand:DI 2 \"gcn_alu_operand\" \" DbSv\"))))\n-   (set (match_operand:DI 3 \"register_operand\"\t\t\t    \"=SgcV\")\n+   (set (match_operand:DI 3 \"register_operand\"\t\t\t   \"=&SgcV\")\n \t(ltu:DI (plus:V_DI \n \t\t  (zero_extend:V_DI (match_dup 1))\n \t\t  (vec_duplicate:V_DI (match_dup 2)))\n@@ -1523,14 +1523,14 @@\n   })\n \n (define_insn_and_split \"add<mode>3_vcc_zext_dup2_exec\"\n-  [(set (match_operand:V_DI 0 \"register_operand\"\t\t     \"=   v\")\n+  [(set (match_operand:V_DI 0 \"register_operand\"\t\t    \"=    v\")\n \t(vec_merge:V_DI\n \t  (plus:V_DI\n \t    (zero_extend:V_DI (match_operand:<VnSI> 1 \"gcn_alu_operand\" \"vA\"))\n \t    (vec_duplicate:V_DI (match_operand:DI 2 \"gcn_alu_operand\"  \"BSv\")))\n-\t  (match_operand:V_DI 4 \"gcn_register_or_unspec_operand\"     \"   U0\")\n-\t  (match_operand:DI 5 \"gcn_exec_reg_operand\"\t\t     \"    e\")))\n-   (set (match_operand:DI 3 \"register_operand\"\t\t\t     \"=SgcV\")\n+\t  (match_operand:V_DI 4 \"gcn_register_or_unspec_operand\"    \"    U0\")\n+\t  (match_operand:DI 5 \"gcn_exec_reg_operand\"\t\t    \"     e\")))\n+   (set (match_operand:DI 3 \"register_operand\"\t\t\t    \"=&SgcV\")\n \t(and:DI\n \t  (ltu:DI (plus:V_DI \n \t\t    (zero_extend:V_DI (match_dup 1))"}]}