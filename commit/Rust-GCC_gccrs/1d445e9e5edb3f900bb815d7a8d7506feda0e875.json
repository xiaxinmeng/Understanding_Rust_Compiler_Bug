{"sha": "1d445e9e5edb3f900bb815d7a8d7506feda0e875", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWQ0NDVlOWU1ZWRiM2Y5MDBiYjgxNWQ3YThkNzUwNmZlZGEwZTg3NQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "1993-10-07T21:05:34Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "1993-10-07T21:05:34Z"}, "message": "Move in initialization of byte_mode and word_mode from rtl.c\n\nFrom-SVN: r5662", "tree": {"sha": "48efa73b34823850cb1e773fab63bd3a1ca6763b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/48efa73b34823850cb1e773fab63bd3a1ca6763b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1d445e9e5edb3f900bb815d7a8d7506feda0e875", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1d445e9e5edb3f900bb815d7a8d7506feda0e875", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1d445e9e5edb3f900bb815d7a8d7506feda0e875", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1d445e9e5edb3f900bb815d7a8d7506feda0e875/comments", "author": null, "committer": null, "parents": [{"sha": "d3d63026f5c383c11e1d6ecdaf4dd1c7bb2afa45", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3d63026f5c383c11e1d6ecdaf4dd1c7bb2afa45", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d3d63026f5c383c11e1d6ecdaf4dd1c7bb2afa45"}], "stats": {"total": 22, "additions": 22, "deletions": 0}, "files": [{"sha": "cc988317d1ca47c6f2a1a6fff48c39f00678fee2", "filename": "gcc/emit-rtl.c", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1d445e9e5edb3f900bb815d7a8d7506feda0e875/gcc%2Femit-rtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1d445e9e5edb3f900bb815d7a8d7506feda0e875/gcc%2Femit-rtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Femit-rtl.c?ref=1d445e9e5edb3f900bb815d7a8d7506feda0e875", "patch": "@@ -65,6 +65,11 @@ char *opcode_name[] =\n #endif\n \n \n+/* Commonly used modes.  */\n+\n+enum machine_mode byte_mode;\t/* Mode whose width is BITS_PER_UNIT */\n+enum machine_mode word_mode;\t/* Mode whose width is BITS_PER_WORD */\n+\n /* This is reset to LAST_VIRTUAL_REGISTER + 1 at the start of each function.\n    After rtl generation, it is 1 plus the largest register number used.  */\n \n@@ -3100,6 +3105,23 @@ init_emit_once (line_numbers)\n \n   sequence_stack = NULL;\n \n+  /* Compute the word and byte modes.  */\n+\n+  byte_mode = VOIDmode;\n+  word_mode = VOIDmode;\n+\n+  for (mode = GET_CLASS_NARROWEST_MODE (MODE_INT); mode != VOIDmode;\n+       mode = GET_MODE_WIDER_MODE (mode))\n+    {\n+      if (GET_MODE_BITSIZE (mode) == BITS_PER_UNIT\n+\t  && byte_mode == VOIDmode)\n+\tbyte_mode = mode;\n+\n+      if (GET_MODE_BITSIZE (mode) == BITS_PER_WORD\n+\t  && word_mode == VOIDmode)\n+\tword_mode = mode;\n+    }\n+\n   /* Create the unique rtx's for certain rtx codes and operand values.  */\n \n   pc_rtx = gen_rtx (PC, VOIDmode);"}]}