{"sha": "a2163d83a300310199ae507af05691166a8287dd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTIxNjNkODNhMzAwMzEwMTk5YWU1MDdhZjA1NjkxMTY2YTgyODdkZA==", "commit": {"author": {"name": "Matt Kraai", "email": "kraai@alumni.cmu.edu", "date": "2004-11-29T00:37:54Z"}, "committer": {"name": "Matt Kraai", "email": "kraai@gcc.gnu.org", "date": "2004-11-29T00:37:54Z"}, "message": "re PR other/17594 (GCC does not error about unknown options which starts with a valid option)\n\n(gcc)\n\n\tPR diagnostic/17594\n\t* opts.c (find_opt): Require that the input match a switch exactly\n\tor that the switch take a joined option to be interpreted as a\n\tmatch for another language.\n\n(gcc/testsuite)\n\n\t* gcc.dg/funroll-loops-all.c: New.\n\nFrom-SVN: r91444", "tree": {"sha": "c7bfd8aba2f8ca93263b770a18023dfb54d9a4c1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c7bfd8aba2f8ca93263b770a18023dfb54d9a4c1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a2163d83a300310199ae507af05691166a8287dd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2163d83a300310199ae507af05691166a8287dd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a2163d83a300310199ae507af05691166a8287dd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2163d83a300310199ae507af05691166a8287dd/comments", "author": null, "committer": null, "parents": [{"sha": "77109b506986bd02bd9ba811e270407bf3b9470c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77109b506986bd02bd9ba811e270407bf3b9470c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77109b506986bd02bd9ba811e270407bf3b9470c"}], "stats": {"total": 27, "additions": 21, "deletions": 6}, "files": [{"sha": "73e6ad9f1d91ecf2e62f760610aa8ba8412fbb3d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2163d83a300310199ae507af05691166a8287dd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2163d83a300310199ae507af05691166a8287dd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a2163d83a300310199ae507af05691166a8287dd", "patch": "@@ -1,3 +1,10 @@\n+2004-11-28  Matt Kraai  <kraai@alumni.cmu.edu>\n+\n+\tPR diagnostic/17594\n+\t* opts.c (find_opt): Require that the input match a switch exactly\n+\tor that the switch take a joined option to be interpreted as a\n+\tmatch for another language.\n+\n 2004-11-28  Andrew Pinski  <pinskia@physics.uc.edu>\n \n \t* timevar.def (TV_TREE_REDPHI): New timevar."}, {"sha": "e930c44c0fc118701d1ca0b768987939dd8b0d4e", "filename": "gcc/opts.c", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2163d83a300310199ae507af05691166a8287dd/gcc%2Fopts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2163d83a300310199ae507af05691166a8287dd/gcc%2Fopts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fopts.c?ref=a2163d83a300310199ae507af05691166a8287dd", "patch": "@@ -176,13 +176,13 @@ find_opt (const char *input, int lang_mask)\n     {\n       const struct cl_option *opt = &cl_options[mn];\n \n-      /* Is this switch a prefix of the input?  */\n-      if (!strncmp (input, opt->opt_text + 1, opt->opt_len))\n+      /* Is the input either an exact match or a prefix that takes a\n+\t joined argument?  */\n+      if (!strncmp (input, opt->opt_text + 1, opt->opt_len)\n+\t  && (input[opt->opt_len] == '\\0' || (opt->flags & CL_JOINED)))\n \t{\n-\t  /* If language is OK, and the match is exact or the switch\n-\t     takes a joined argument, return it.  */\n-\t  if ((opt->flags & lang_mask)\n-\t      && (input[opt->opt_len] == '\\0' || (opt->flags & CL_JOINED)))\n+\t  /* If language is OK, return it.  */\n+\t  if (opt->flags & lang_mask)\n \t    return mn;\n \n \t  /* If we haven't remembered a prior match, remember this"}, {"sha": "94174d9725948bc29efcd95343d701f22f991fe6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2163d83a300310199ae507af05691166a8287dd/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2163d83a300310199ae507af05691166a8287dd/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a2163d83a300310199ae507af05691166a8287dd", "patch": "@@ -1,3 +1,7 @@\n+2004-11-28  Matt Kraai  <kraai@alumni.cmu.edu>\n+\n+\t* gcc.dg/funroll-loops-all.c: New.\n+\n 2004-11-28  Hans-Peter Nilsson  <hp@bitrange.com>\n \n \tPR target/18489"}, {"sha": "c6276759e6c0e26222c66baae4e4875cbc8c7bf9", "filename": "gcc/testsuite/gcc.dg/funroll-loops-all.c", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2163d83a300310199ae507af05691166a8287dd/gcc%2Ftestsuite%2Fgcc.dg%2Ffunroll-loops-all.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2163d83a300310199ae507af05691166a8287dd/gcc%2Ftestsuite%2Fgcc.dg%2Ffunroll-loops-all.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ffunroll-loops-all.c?ref=a2163d83a300310199ae507af05691166a8287dd", "patch": "@@ -0,0 +1,4 @@\n+/* PR 17594 */\n+/* { dg-do compile } */\n+/* { dg-options \"-funroll-loops-all\" } */\n+/* { dg-error \"unrecognized command line option \\\"-funroll-loops-all\\\"\" \"\" { target *-*-* } 0 } */"}]}