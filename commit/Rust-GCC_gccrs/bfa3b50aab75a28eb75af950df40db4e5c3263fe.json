{"sha": "bfa3b50aab75a28eb75af950df40db4e5c3263fe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmZhM2I1MGFhYjc1YTI4ZWI3NWFmOTUwZGY0MGRiNGU1YzMyNjNmZQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2013-08-20T21:41:36Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2013-08-20T21:41:36Z"}, "message": "re PR bootstrap/58186 (LTO profiledbootstrap fails in stage feedback for fortran/frontend-passes.c with \"edge ... has no corresponding call_stmt\")\n\n\n\tPR bootstrap/58186\n\t* cgraph.c (cgraph_add_edge_to_call_site_hash): Overwrite hash\n\tentry for direct edges.\n\t(cgraph_turn_edge_to_speculative): Fix setting of can_throw_external.\n\nFrom-SVN: r201891", "tree": {"sha": "390d24e3283c74189b8a80d82ac67e07c242a513", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/390d24e3283c74189b8a80d82ac67e07c242a513"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bfa3b50aab75a28eb75af950df40db4e5c3263fe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bfa3b50aab75a28eb75af950df40db4e5c3263fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bfa3b50aab75a28eb75af950df40db4e5c3263fe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bfa3b50aab75a28eb75af950df40db4e5c3263fe/comments", "author": null, "committer": null, "parents": [{"sha": "8bc16536d66fce30459a3d35a4a648f4a9e95703", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8bc16536d66fce30459a3d35a4a648f4a9e95703", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8bc16536d66fce30459a3d35a4a648f4a9e95703"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "77dd86cf9c81d68be2b5b11fd9efd9dcbebf7e2b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bfa3b50aab75a28eb75af950df40db4e5c3263fe/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bfa3b50aab75a28eb75af950df40db4e5c3263fe/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bfa3b50aab75a28eb75af950df40db4e5c3263fe", "patch": "@@ -1,3 +1,10 @@\n+2013-08-20  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR bootstrap/58186\n+\t* cgraph.c (cgraph_add_edge_to_call_site_hash): Overwrite hash\n+\tentry for direct edges.\n+\t(cgraph_turn_edge_to_speculative): Fix setting of can_throw_external.\n+\n 2013-08-20  David Malcolm  <dmalcolm@redhat.com>\n \n \tRevert my last two changes, r201865 and r201864:"}, {"sha": "19e64b7977629a085448dc7b191eb054a0a48a81", "filename": "gcc/cgraph.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bfa3b50aab75a28eb75af950df40db4e5c3263fe/gcc%2Fcgraph.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bfa3b50aab75a28eb75af950df40db4e5c3263fe/gcc%2Fcgraph.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraph.c?ref=bfa3b50aab75a28eb75af950df40db4e5c3263fe", "patch": "@@ -701,6 +701,8 @@ cgraph_add_edge_to_call_site_hash (struct cgraph_edge *e)\n   if (*slot)\n     {\n       gcc_assert (((struct cgraph_edge *)*slot)->speculative);\n+      if (e->callee)\n+\t*slot = e;\n       return;\n     }\n   gcc_assert (!*slot || e->speculative);\n@@ -1083,8 +1085,10 @@ cgraph_turn_edge_to_speculative (struct cgraph_edge *e,\n   e2 = cgraph_create_edge (n, n2, e->call_stmt, direct_count, direct_frequency);\n   initialize_inline_failed (e2);\n   e2->speculative = true;\n-  e2->call_stmt = e->call_stmt;\n-  e2->can_throw_external = e->can_throw_external;\n+  if (TREE_NOTHROW (n2->symbol.decl))\n+    e2->can_throw_external = false;\n+  else\n+    e2->can_throw_external = e->can_throw_external;\n   e2->lto_stmt_uid = e->lto_stmt_uid;\n   e->count -= e2->count;\n   e->frequency -= e2->frequency;"}]}