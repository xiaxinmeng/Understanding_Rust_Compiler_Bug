{"sha": "a2155f7dd3d8d031607036d40b0fa32f0cb8da52", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTIxNTVmN2RkM2Q4ZDAzMTYwNzAzNmQ0MGIwZmEzMmYwY2I4ZGE1Mg==", "commit": {"author": {"name": "Bin Cheng", "email": "bin.cheng@linux.alibaba.com", "date": "2020-02-05T10:45:08Z"}, "committer": {"name": "Bin Cheng", "email": "bin.cheng@linux.alibaba.com", "date": "2020-02-05T10:48:02Z"}, "message": "Increase index number for creating temp vars' name.\n\ngcc/cp\n    * coroutines.cc (maybe_promote_captured_temps): Increase the index\n    number for temporary variables' name.", "tree": {"sha": "2f0909d15c974bc6620fdaff26db0663dd49de8e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2f0909d15c974bc6620fdaff26db0663dd49de8e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a2155f7dd3d8d031607036d40b0fa32f0cb8da52", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2155f7dd3d8d031607036d40b0fa32f0cb8da52", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a2155f7dd3d8d031607036d40b0fa32f0cb8da52", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2155f7dd3d8d031607036d40b0fa32f0cb8da52/comments", "author": null, "committer": null, "parents": [{"sha": "bfce27245b07beb03c41fef0f9f833849b05c28d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bfce27245b07beb03c41fef0f9f833849b05c28d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bfce27245b07beb03c41fef0f9f833849b05c28d"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "7c24ab8b33bc381cec9dea3d3e6a8e39bba908d1", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2155f7dd3d8d031607036d40b0fa32f0cb8da52/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2155f7dd3d8d031607036d40b0fa32f0cb8da52/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a2155f7dd3d8d031607036d40b0fa32f0cb8da52", "patch": "@@ -1,3 +1,8 @@\n+2020-02-05  Bin Cheng  <bin.cheng@linux.alibaba.com>\n+\n+\t* coroutines.cc (maybe_promote_captured_temps): Increase the index\n+\tnumber for temporary variables' name.\n+\n 2020-02-05  Jun Ma <JunMa@linux.alibaba.com>\n \n \t* coroutines.cc (build_co_await): Call convert_from_reference"}, {"sha": "0a8a531d6d78575754041f65fa75c82f3a3f1bb2", "filename": "gcc/cp/coroutines.cc", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2155f7dd3d8d031607036d40b0fa32f0cb8da52/gcc%2Fcp%2Fcoroutines.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2155f7dd3d8d031607036d40b0fa32f0cb8da52/gcc%2Fcp%2Fcoroutines.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcoroutines.cc?ref=a2155f7dd3d8d031607036d40b0fa32f0cb8da52", "patch": "@@ -2676,12 +2676,12 @@ maybe_promote_captured_temps (tree *stmt, void *d)\n       /* Collected the scope vars we need move the temps to regular. */\n       tree aw_bind_body = push_stmt_list ();\n       tree varlist = NULL_TREE;\n-      unsigned vnum = 0;\n+      int vnum = -1;\n       while (!awpts->to_replace->is_empty ())\n \t{\n \t  size_t bufsize = sizeof (\"__aw_.tmp.\") + 20;\n \t  char *buf = (char *) alloca (bufsize);\n-\t  snprintf (buf, bufsize, \"__aw_%d.tmp.%d\", awpts->count, vnum);\n+\t  snprintf (buf, bufsize, \"__aw_%d.tmp.%d\", awpts->count, ++vnum);\n \t  tree to_replace = awpts->to_replace->pop ();\n \t  tree orig_temp;\n \t  if (TREE_CODE (to_replace) == CO_AWAIT_EXPR)"}]}