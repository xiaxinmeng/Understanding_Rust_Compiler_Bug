{"sha": "240a513f871a0204915f635d41e61814a1f460f7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjQwYTUxM2Y4NzFhMDIwNDkxNWY2MzVkNDFlNjE4MTRhMWY0NjBmNw==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2014-08-25T20:00:46Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@gcc.gnu.org", "date": "2014-08-25T20:00:46Z"}, "message": "config/xtensa: Use rtx_insn and rtx_code_label\n\ngcc/\n\t* config/xtensa/xtensa-protos.h (xtensa_emit_loop_end): Strengthen\n\tfirst param from rtx to rtx_insn *.\n\t* config/xtensa/xtensa.c (struct machine_function): Likewise for\n\tfield \"set_frame_ptr_insn\".\n\t(xtensa_expand_compare_and_swap): Strengthen locals \"csloop\" and\n\t\"csend\" from rtx to rtx_code_label *.\n\t(xtensa_expand_atomic): Likewise for local \"csloop\".\n\t(xtensa_emit_loop_end): Strengthen param \"insn\" from rtx to\n\trtx_insn *.\n\t(xtensa_call_tls_desc): Likewise for return type and locals\n\t\"call_insn\", \"insns\".\n\t(xtensa_legitimize_tls_address): Likewise for local \"insns\".\n\t(xtensa_expand_prologue): Likewise for locals \"insn\", \"first\".\n\nFrom-SVN: r214467", "tree": {"sha": "caacf0031ff11c2abf68fe39f60ae627944fe2e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/caacf0031ff11c2abf68fe39f60ae627944fe2e0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/240a513f871a0204915f635d41e61814a1f460f7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/240a513f871a0204915f635d41e61814a1f460f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/240a513f871a0204915f635d41e61814a1f460f7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/240a513f871a0204915f635d41e61814a1f460f7/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5dc2bb454a43f8e931f409ce9ff8c272423cb8b4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5dc2bb454a43f8e931f409ce9ff8c272423cb8b4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5dc2bb454a43f8e931f409ce9ff8c272423cb8b4"}], "stats": {"total": 41, "additions": 30, "deletions": 11}, "files": [{"sha": "1f1c6e6a4570f34a264e378ae2bb6ab3a97f2c94", "filename": "gcc/ChangeLog", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/240a513f871a0204915f635d41e61814a1f460f7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/240a513f871a0204915f635d41e61814a1f460f7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=240a513f871a0204915f635d41e61814a1f460f7", "patch": "@@ -1,3 +1,19 @@\n+2014-08-25  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* config/xtensa/xtensa-protos.h (xtensa_emit_loop_end): Strengthen\n+\tfirst param from rtx to rtx_insn *.\n+\t* config/xtensa/xtensa.c (struct machine_function): Likewise for\n+\tfield \"set_frame_ptr_insn\".\n+\t(xtensa_expand_compare_and_swap): Strengthen locals \"csloop\" and\n+\t\"csend\" from rtx to rtx_code_label *.\n+\t(xtensa_expand_atomic): Likewise for local \"csloop\".\n+\t(xtensa_emit_loop_end): Strengthen param \"insn\" from rtx to\n+\trtx_insn *.\n+\t(xtensa_call_tls_desc): Likewise for return type and locals\n+\t\"call_insn\", \"insns\".\n+\t(xtensa_legitimize_tls_address): Likewise for local \"insns\".\n+\t(xtensa_expand_prologue): Likewise for locals \"insn\", \"first\".\n+\n 2014-08-25  David Malcolm  <dmalcolm@redhat.com>\n \n \t* config/v850/v850-protos.h (v850_adjust_insn_length): Strengthen"}, {"sha": "e684af809140f53a5b2b9a15fd95e9cc1f64ad0e", "filename": "gcc/config/xtensa/xtensa-protos.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/240a513f871a0204915f635d41e61814a1f460f7/gcc%2Fconfig%2Fxtensa%2Fxtensa-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/240a513f871a0204915f635d41e61814a1f460f7/gcc%2Fconfig%2Fxtensa%2Fxtensa-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Fxtensa-protos.h?ref=240a513f871a0204915f635d41e61814a1f460f7", "patch": "@@ -47,7 +47,7 @@ extern rtx xtensa_copy_incoming_a7 (rtx);\n extern void xtensa_expand_nonlocal_goto (rtx *);\n extern void xtensa_expand_compare_and_swap (rtx, rtx, rtx, rtx);\n extern void xtensa_expand_atomic (enum rtx_code, rtx, rtx, rtx, bool);\n-extern void xtensa_emit_loop_end (rtx, rtx *);\n+extern void xtensa_emit_loop_end (rtx_insn *, rtx *);\n extern char *xtensa_emit_branch (bool, bool, rtx *);\n extern char *xtensa_emit_bit_branch (bool, bool, rtx *);\n extern char *xtensa_emit_movcc (bool, bool, bool, rtx *);"}, {"sha": "dc0629a0b8a11e62e3be42b93bca664dc8702e84", "filename": "gcc/config/xtensa/xtensa.c", "status": "modified", "additions": 13, "deletions": 10, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/240a513f871a0204915f635d41e61814a1f460f7/gcc%2Fconfig%2Fxtensa%2Fxtensa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/240a513f871a0204915f635d41e61814a1f460f7/gcc%2Fconfig%2Fxtensa%2Fxtensa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Fxtensa.c?ref=240a513f871a0204915f635d41e61814a1f460f7", "patch": "@@ -99,7 +99,7 @@ struct GTY(()) machine_function\n   bool need_a7_copy;\n   bool vararg_a7;\n   rtx vararg_a7_copy;\n-  rtx set_frame_ptr_insn;\n+  rtx_insn *set_frame_ptr_insn;\n };\n \n /* Vector, indexed by hard register number, which contains 1 for a\n@@ -1463,8 +1463,8 @@ xtensa_expand_compare_and_swap (rtx target, rtx mem, rtx cmp, rtx new_rtx)\n   rtx tmp, cmpv, newv, val;\n   rtx oldval = gen_reg_rtx (SImode);\n   rtx res = gen_reg_rtx (SImode);\n-  rtx csloop = gen_label_rtx ();\n-  rtx csend = gen_label_rtx ();\n+  rtx_code_label *csloop = gen_label_rtx ();\n+  rtx_code_label *csend = gen_label_rtx ();\n \n   init_alignment_context (&ac, mem);\n \n@@ -1524,7 +1524,7 @@ xtensa_expand_atomic (enum rtx_code code, rtx target, rtx mem, rtx val,\n {\n   enum machine_mode mode = GET_MODE (mem);\n   struct alignment_context ac;\n-  rtx csloop = gen_label_rtx ();\n+  rtx_code_label *csloop = gen_label_rtx ();\n   rtx cmp, tmp;\n   rtx old = gen_reg_rtx (SImode);\n   rtx new_rtx = gen_reg_rtx (SImode);\n@@ -1642,7 +1642,7 @@ xtensa_setup_frame_addresses (void)\n    when the branch is taken.  */\n \n void\n-xtensa_emit_loop_end (rtx insn, rtx *operands)\n+xtensa_emit_loop_end (rtx_insn *insn, rtx *operands)\n {\n   char done = 0;\n \n@@ -1862,10 +1862,11 @@ xtensa_tls_module_base (void)\n }\n \n \n-static rtx\n+static rtx_insn *\n xtensa_call_tls_desc (rtx sym, rtx *retp)\n {\n-  rtx fn, arg, a10, call_insn, insns;\n+  rtx fn, arg, a10;\n+  rtx_insn *call_insn, *insns;\n \n   start_sequence ();\n   fn = gen_reg_rtx (Pmode);\n@@ -1889,7 +1890,8 @@ static rtx\n xtensa_legitimize_tls_address (rtx x)\n {\n   unsigned int model = SYMBOL_REF_TLS_MODEL (x);\n-  rtx dest, tp, ret, modbase, base, addend, insns;\n+  rtx dest, tp, ret, modbase, base, addend;\n+  rtx_insn *insns;\n \n   dest = gen_reg_rtx (Pmode);\n   switch (model)\n@@ -2648,7 +2650,8 @@ xtensa_expand_prologue (void)\n {\n   HOST_WIDE_INT total_size;\n   rtx size_rtx;\n-  rtx insn, note_rtx;\n+  rtx_insn *insn;\n+  rtx note_rtx;\n \n   total_size = compute_frame_size (get_frame_size ());\n   size_rtx = GEN_INT (total_size);\n@@ -2669,7 +2672,7 @@ xtensa_expand_prologue (void)\n     {\n       if (cfun->machine->set_frame_ptr_insn)\n \t{\n-\t  rtx first;\n+\t  rtx_insn *first;\n \n \t  push_topmost_sequence ();\n \t  first = get_insns ();"}]}