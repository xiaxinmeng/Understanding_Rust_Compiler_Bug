{"sha": "8ba38e8c8b737df2734c06486a7fc39f4be78f43", "node_id": "C_kwDOANBUbNoAKDhiYTM4ZThjOGI3MzdkZjI3MzRjMDY0ODZhN2ZjMzlmNGJlNzhmNDM", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@adacore.com", "date": "2021-11-13T13:33:29Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2021-12-01T10:24:41Z"}, "message": "[Ada] Create object file for ignored ghost compilation unit\n\ngcc/ada/\n\n\t* gnat1drv.adb (Gnat1drv): Force generation of object file if\n\tcompilation unit is an ignored ghost.", "tree": {"sha": "4e119f06e625c55091906dea0f13183d61a14698", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4e119f06e625c55091906dea0f13183d61a14698"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8ba38e8c8b737df2734c06486a7fc39f4be78f43", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ba38e8c8b737df2734c06486a7fc39f4be78f43", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8ba38e8c8b737df2734c06486a7fc39f4be78f43", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ba38e8c8b737df2734c06486a7fc39f4be78f43/comments", "author": {"login": "richardkenner", "id": 56170968, "node_id": "MDQ6VXNlcjU2MTcwOTY4", "avatar_url": "https://avatars.githubusercontent.com/u/56170968?v=4", "gravatar_id": "", "url": "https://api.github.com/users/richardkenner", "html_url": "https://github.com/richardkenner", "followers_url": "https://api.github.com/users/richardkenner/followers", "following_url": "https://api.github.com/users/richardkenner/following{/other_user}", "gists_url": "https://api.github.com/users/richardkenner/gists{/gist_id}", "starred_url": "https://api.github.com/users/richardkenner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/richardkenner/subscriptions", "organizations_url": "https://api.github.com/users/richardkenner/orgs", "repos_url": "https://api.github.com/users/richardkenner/repos", "events_url": "https://api.github.com/users/richardkenner/events{/privacy}", "received_events_url": "https://api.github.com/users/richardkenner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "621cccba3f8b0cd2757feda171e66e3820b55c2c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/621cccba3f8b0cd2757feda171e66e3820b55c2c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/621cccba3f8b0cd2757feda171e66e3820b55c2c"}], "stats": {"total": 11, "additions": 6, "deletions": 5}, "files": [{"sha": "12ec98b1e61cb09bdddf50157b11e9ce12ce2e45", "filename": "gcc/ada/gnat1drv.adb", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ba38e8c8b737df2734c06486a7fc39f4be78f43/gcc%2Fada%2Fgnat1drv.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ba38e8c8b737df2734c06486a7fc39f4be78f43/gcc%2Fada%2Fgnat1drv.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat1drv.adb?ref=8ba38e8c8b737df2734c06486a7fc39f4be78f43", "patch": "@@ -1415,18 +1415,19 @@ begin\n \n       if Back_End_Mode = Skip then\n \n-         --  An ignored Ghost unit is rewritten into a null statement because\n-         --  it must not produce an ALI or object file. Do not emit any errors\n-         --  related to code generation because the unit does not exist.\n+         --  An ignored Ghost unit is rewritten into a null statement. Do\n+         --  not emit any errors related to code generation because the\n+         --  unit does not exist.\n \n          if Is_Ignored_Ghost_Unit (Main_Unit_Node) then\n \n             --  Exit the gnat driver with success, otherwise external builders\n             --  such as gnatmake and gprbuild will treat the compilation of an\n-            --  ignored Ghost unit as a failure. Note that this will produce\n-            --  an empty object file for the unit.\n+            --  ignored Ghost unit as a failure. Be sure we produce an empty\n+            --  object file for the unit.\n \n             Ecode := E_Success;\n+            Back_End.Gen_Or_Update_Object_File;\n \n          --  Otherwise the unit is missing a crucial piece that prevents code\n          --  generation."}]}