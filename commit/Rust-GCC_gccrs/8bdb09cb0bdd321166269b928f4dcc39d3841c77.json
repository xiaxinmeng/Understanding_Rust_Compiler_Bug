{"sha": "8bdb09cb0bdd321166269b928f4dcc39d3841c77", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGJkYjA5Y2IwYmRkMzIxMTY2MjY5YjkyOGY0ZGNjMzlkMzg0MWM3Nw==", "commit": {"author": {"name": "Volker Reichelt", "email": "reichelt@igpm.rwth-aachen.de", "date": "2006-06-12T20:50:53Z"}, "committer": {"name": "Volker Reichelt", "email": "reichelt@gcc.gnu.org", "date": "2006-06-12T20:50:53Z"}, "message": "re PR c++/27951 (ICE with invalid anonymous union)\n\n\tPR c++/27951\n\t* decl2.c (finish_anon_union): Return early if build_anon_union_vars\n\tfails.\n\n\t* g++.dg/other/anon4.C: New test.\n\nFrom-SVN: r114577", "tree": {"sha": "aedcb4e5b3f8cbd956e7c884f3cd5ab9e6b1ddee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aedcb4e5b3f8cbd956e7c884f3cd5ab9e6b1ddee"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8bdb09cb0bdd321166269b928f4dcc39d3841c77", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8bdb09cb0bdd321166269b928f4dcc39d3841c77", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8bdb09cb0bdd321166269b928f4dcc39d3841c77", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8bdb09cb0bdd321166269b928f4dcc39d3841c77/comments", "author": null, "committer": null, "parents": [{"sha": "02a5eac4833861df9a1ce8721dc9a7d0b3de26d6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02a5eac4833861df9a1ce8721dc9a7d0b3de26d6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/02a5eac4833861df9a1ce8721dc9a7d0b3de26d6"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "b1ed4f08446e78b1e07eb1c7f722052e3a02f979", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8bdb09cb0bdd321166269b928f4dcc39d3841c77/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8bdb09cb0bdd321166269b928f4dcc39d3841c77/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=8bdb09cb0bdd321166269b928f4dcc39d3841c77", "patch": "@@ -1,3 +1,9 @@\n+2006-06-12  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n+\n+\tPR c++/27951\n+\t* decl2.c (finish_anon_union): Return early if build_anon_union_vars\n+\tfails.\n+\n 2006-06-12  Roger Sayle  <roger@eyesopen.com>\n \n \tPR c++/21210"}, {"sha": "49e320cfd1c13f8cd152b09990b4cc0e1d58d58c", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8bdb09cb0bdd321166269b928f4dcc39d3841c77/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8bdb09cb0bdd321166269b928f4dcc39d3841c77/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=8bdb09cb0bdd321166269b928f4dcc39d3841c77", "patch": "@@ -1109,6 +1109,8 @@ finish_anon_union (tree anon_union_decl)\n     }\n \n   main_decl = build_anon_union_vars (type, anon_union_decl);\n+  if (main_decl == error_mark_node)\n+    return;\n   if (main_decl == NULL_TREE)\n     {\n       warning (0, \"anonymous union with no members\");"}, {"sha": "b43e5191ccb8b3f7a6898537b3f258b762e59753", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8bdb09cb0bdd321166269b928f4dcc39d3841c77/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8bdb09cb0bdd321166269b928f4dcc39d3841c77/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8bdb09cb0bdd321166269b928f4dcc39d3841c77", "patch": "@@ -1,3 +1,8 @@\n+2006-06-12  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n+\n+\tPR c++/27951\n+\t* g++.dg/other/anon4.C: New test.\n+\n 2006-06-12  Roger Sayle  <roger@eyesopen.com>\n \n \tPR c++/21210"}, {"sha": "571f4ae65fb6a176c53b49109659255d93cfc7fa", "filename": "gcc/testsuite/g++.dg/other/anon4.C", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8bdb09cb0bdd321166269b928f4dcc39d3841c77/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fanon4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8bdb09cb0bdd321166269b928f4dcc39d3841c77/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fanon4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fanon4.C?ref=8bdb09cb0bdd321166269b928f4dcc39d3841c77", "patch": "@@ -0,0 +1,8 @@\n+// PR c++/27951\n+// { dg-do compile }\n+\n+void foo()\n+{\n+    int i;             // { dg-error \"previously\" }\n+    union { int i; };  // { dg-error \"redeclaration\" }\n+}"}]}