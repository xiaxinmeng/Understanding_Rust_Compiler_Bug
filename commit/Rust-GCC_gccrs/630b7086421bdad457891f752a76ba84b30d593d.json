{"sha": "630b7086421bdad457891f752a76ba84b30d593d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjMwYjcwODY0MjFiZGFkNDU3ODkxZjc1MmE3NmJhODRiMzBkNTkzZA==", "commit": {"author": {"name": "Erik Edelmann", "email": "erik.edelmann@iki.fi", "date": "2005-09-18T05:50:04Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2005-09-18T05:50:04Z"}, "message": "re PR fortran/15975 ([4.0 only] ICE in trans-array.c    pointer array initialization stuff)\n\n2005-09-18  Erik Edelmann  <erik.edelmann@iki.fi>\n\n\tPR fortran/15975\n\t* resolve.c (resolve_symbol): Don't assign default\n\tinitializer to pointers.\n\n2005-09-18  Erik Edelmann  <erik.edelmann@iki.fi>\n\n\tPR fortran/15975\n\t* gfortran.dg/der_pointer_2.f90: New test.\n\nFrom-SVN: r104389", "tree": {"sha": "abc062abcfc430d56a8f9f397df682c35b0f4ef9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/abc062abcfc430d56a8f9f397df682c35b0f4ef9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/630b7086421bdad457891f752a76ba84b30d593d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/630b7086421bdad457891f752a76ba84b30d593d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/630b7086421bdad457891f752a76ba84b30d593d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/630b7086421bdad457891f752a76ba84b30d593d/comments", "author": null, "committer": null, "parents": [{"sha": "6cda231ed91ad7e3c1b5357b0ffc04a925ff34f7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6cda231ed91ad7e3c1b5357b0ffc04a925ff34f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6cda231ed91ad7e3c1b5357b0ffc04a925ff34f7"}], "stats": {"total": 34, "additions": 33, "deletions": 1}, "files": [{"sha": "0863e275ef25f0639239eaec194bdca75bc02899", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/630b7086421bdad457891f752a76ba84b30d593d/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/630b7086421bdad457891f752a76ba84b30d593d/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=630b7086421bdad457891f752a76ba84b30d593d", "patch": "@@ -1,3 +1,9 @@\n+2005-09-18  Erik Edelmann  <erik.edelmann@iki.fi>\n+\n+\tPR fortran/15975\n+\t* resolve.c (resolve_symbol): Don't assign default\n+\tinitializer to pointers.\n+\n 2005-09-18  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/16861"}, {"sha": "e342a1e8d575e91a542648f3324d8a0603502821", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/630b7086421bdad457891f752a76ba84b30d593d/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/630b7086421bdad457891f752a76ba84b30d593d/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=630b7086421bdad457891f752a76ba84b30d593d", "patch": "@@ -4328,7 +4328,8 @@ resolve_symbol (gfc_symbol * sym)\n \t}\n \n       /* Assign default initializer.  */\n-      if (sym->ts.type == BT_DERIVED && !(sym->value || whynot))\n+      if (sym->ts.type == BT_DERIVED && !(sym->value || whynot)\n+          && !sym->attr.pointer)\n \tsym->value = gfc_default_initializer (&sym->ts);\n       break;\n "}, {"sha": "4424bd8ec92e615e4b8a64eb3b08776fbdbd931d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/630b7086421bdad457891f752a76ba84b30d593d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/630b7086421bdad457891f752a76ba84b30d593d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=630b7086421bdad457891f752a76ba84b30d593d", "patch": "@@ -1,3 +1,8 @@\n+2005-09-18  Erik Edelmann  <erik.edelmann@iki.fi>\n+\n+\tPR fortran/15975\n+\t* gfortran.dg/der_pointer_2.f90: New test.\n+\n 2005-09-18  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/16861"}, {"sha": "3749fc24ff83c44f0a14e93db493405efd30b860", "filename": "gcc/testsuite/gfortran.dg/der_pointer_2.f90", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/630b7086421bdad457891f752a76ba84b30d593d/gcc%2Ftestsuite%2Fgfortran.dg%2Fder_pointer_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/630b7086421bdad457891f752a76ba84b30d593d/gcc%2Ftestsuite%2Fgfortran.dg%2Fder_pointer_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fder_pointer_2.f90?ref=630b7086421bdad457891f752a76ba84b30d593d", "patch": "@@ -0,0 +1,20 @@\n+! { dg-do compile }\n+! PR 15975, PR 16606\n+! Pointers to derived types with initialized components\n+!\n+! Contributed by Erik Edelmann <erik.edelmann@iki.fi>\n+!\n+SUBROUTINE N\n+  TYPE T\n+    INTEGER :: I = 99\n+  END TYPE T\n+  TYPE(T), POINTER :: P\n+  TYPE(T), TARGET  :: Q\n+  P => Q\n+  if (P%I.ne.99) call abort ()\n+END SUBROUTINE N\n+\n+program test_pr15975\n+  call n ()\n+end program test_pr15975\n+"}]}