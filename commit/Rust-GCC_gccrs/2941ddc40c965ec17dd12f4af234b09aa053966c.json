{"sha": "2941ddc40c965ec17dd12f4af234b09aa053966c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mjk0MWRkYzQwYzk2NWVjMTdkZDEyZjRhZjIzNGIwOWFhMDUzOTY2Yw==", "commit": {"author": {"name": "Casey Marshall", "email": "csm@gnu.org", "date": "2004-11-12T19:15:27Z"}, "committer": {"name": "Bryce McKinlay", "email": "bryce@gcc.gnu.org", "date": "2004-11-12T19:15:27Z"}, "message": "FileLock.java (isValid): locks are valid if the channel is open.\n\n2004-11-11  Casey Marshall  <csm@gnu.org>\n\n\t* gnu/java/nio/FileLock.java (isValid): locks are valid if the\n\tchannel is open.\n\t* gnu/java/nio/channels/natFileChannelPosix.cc (lock): use\n\t'F_RDLCK' for shared locks, 'F_WRLCK' for exclusive locks.\n\nFrom-SVN: r90538", "tree": {"sha": "a74e9b7a3d337de58e31ea8e168feb672a001e1a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a74e9b7a3d337de58e31ea8e168feb672a001e1a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2941ddc40c965ec17dd12f4af234b09aa053966c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2941ddc40c965ec17dd12f4af234b09aa053966c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2941ddc40c965ec17dd12f4af234b09aa053966c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2941ddc40c965ec17dd12f4af234b09aa053966c/comments", "author": null, "committer": null, "parents": [{"sha": "556f03c4f01a0bb64dbdbc198eb7b44ce3ff9e2c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/556f03c4f01a0bb64dbdbc198eb7b44ce3ff9e2c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/556f03c4f01a0bb64dbdbc198eb7b44ce3ff9e2c"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "6d130ff2d62cbf52958fc41acfc6bb423ccacd53", "filename": "libjava/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2941ddc40c965ec17dd12f4af234b09aa053966c/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2941ddc40c965ec17dd12f4af234b09aa053966c/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=2941ddc40c965ec17dd12f4af234b09aa053966c", "patch": "@@ -1,3 +1,10 @@\n+2004-11-11  Casey Marshall  <csm@gnu.org>\n+\n+\t* gnu/java/nio/FileLock.java (isValid): locks are valid if the\n+\tchannel is open.\n+\t* gnu/java/nio/channels/natFileChannelPosix.cc (lock): use\n+\t'F_RDLCK' for shared locks, 'F_WRLCK' for exclusive locks.\n+\n 2004-11-11  Robert Schuster <thebohemian@gmx.net>\n   \n   \tFixed regression:"}, {"sha": "8591dac43b8be617fc54e33f913ed50dfee95195", "filename": "libjava/gnu/java/nio/FileLockImpl.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2941ddc40c965ec17dd12f4af234b09aa053966c/libjava%2Fgnu%2Fjava%2Fnio%2FFileLockImpl.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2941ddc40c965ec17dd12f4af234b09aa053966c/libjava%2Fgnu%2Fjava%2Fnio%2FFileLockImpl.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fjava%2Fnio%2FFileLockImpl.java?ref=2941ddc40c965ec17dd12f4af234b09aa053966c", "patch": "@@ -72,7 +72,7 @@ protected void finalize()\n   \n   public boolean isValid ()\n   {\n-    return !channel().isOpen();\n+    return channel().isOpen();\n   }\n \n   public synchronized void release () throws IOException"}, {"sha": "742201bde94c15a22f0e99a0f1c1362a4951a31a", "filename": "libjava/gnu/java/nio/channels/natFileChannelPosix.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2941ddc40c965ec17dd12f4af234b09aa053966c/libjava%2Fgnu%2Fjava%2Fnio%2Fchannels%2FnatFileChannelPosix.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2941ddc40c965ec17dd12f4af234b09aa053966c/libjava%2Fgnu%2Fjava%2Fnio%2Fchannels%2FnatFileChannelPosix.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fjava%2Fnio%2Fchannels%2FnatFileChannelPosix.cc?ref=2941ddc40c965ec17dd12f4af234b09aa053966c", "patch": "@@ -457,7 +457,7 @@ FileChannelImpl::lock\n {\n   struct flock lockdata;\n \n-  lockdata.l_type = shared ? F_WRLCK : F_RDLCK;\n+  lockdata.l_type = shared ? F_RDLCK : F_WRLCK;\n   lockdata.l_whence = SEEK_SET;\n   lockdata.l_start = pos;\n   lockdata.l_len = len;"}]}