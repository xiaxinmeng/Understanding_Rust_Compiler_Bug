{"sha": "c49445e0012a736c72876d6ebb28a3ee554c1e67", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzQ5NDQ1ZTAwMTJhNzM2YzcyODc2ZDZlYmIyOGEzZWU1NTRjMWU2Nw==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@rabi.phys.columbia.edu", "date": "1998-12-15T11:23:27Z"}, "committer": {"name": "Dave Brolley", "email": "brolley@gcc.gnu.org", "date": "1998-12-15T11:23:27Z"}, "message": "cppalloc.c: Add xstrdup here.\n\n1998-12-15  Zack Weinberg  <zack@rabi.phys.columbia.edu>\n\t* cppalloc.c: Add xstrdup here.\n\t* cpplib.h: Remove savestring prototype.\n\t* cpplib.c: Remove savestring function. s/savestring/xstrdup/\n\t  throughout.\n\t* cppfiles.c: s/savestring/xstrdup/ throughout.\n\nFrom-SVN: r24327", "tree": {"sha": "5c481c8ca58453f070db1b092bbe2a81d08d45ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5c481c8ca58453f070db1b092bbe2a81d08d45ca"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c49445e0012a736c72876d6ebb28a3ee554c1e67", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c49445e0012a736c72876d6ebb28a3ee554c1e67", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c49445e0012a736c72876d6ebb28a3ee554c1e67", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c49445e0012a736c72876d6ebb28a3ee554c1e67/comments", "author": null, "committer": null, "parents": [{"sha": "941e09b65f4e06def819f5624d6fb6d25417b1e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/941e09b65f4e06def819f5624d6fb6d25417b1e1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/941e09b65f4e06def819f5624d6fb6d25417b1e1"}], "stats": {"total": 46, "additions": 24, "deletions": 22}, "files": [{"sha": "0b4e5a84db9dd6667e3a6b110bb2574ea665e6d6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c49445e0012a736c72876d6ebb28a3ee554c1e67/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c49445e0012a736c72876d6ebb28a3ee554c1e67/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c49445e0012a736c72876d6ebb28a3ee554c1e67", "patch": "@@ -1,3 +1,11 @@\n+1998-12-15  Zack Weinberg  <zack@rabi.phys.columbia.edu>\n+\n+\t* cppalloc.c: Add xstrdup here.\n+\t* cpplib.h: Remove savestring prototype.\n+\t* cpplib.c: Remove savestring function. s/savestring/xstrdup/\n+\t  throughout. \n+\t* cppfiles.c: s/savestring/xstrdup/ throughout.\n+\n 1998-12-15  Zack Weinberg  <zack@rabi.phys.columbia.edu>\n \n \t* cpplib.c: Make all directive handlers read their own"}, {"sha": "880a56dba62752dbd8da9507326b226b12203ee1", "filename": "gcc/cppalloc.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c49445e0012a736c72876d6ebb28a3ee554c1e67/gcc%2Fcppalloc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c49445e0012a736c72876d6ebb28a3ee554c1e67/gcc%2Fcppalloc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcppalloc.c?ref=c49445e0012a736c72876d6ebb28a3ee554c1e67", "patch": "@@ -65,3 +65,13 @@ xrealloc (old, size)\n     memory_full ();\n   return ptr;\n }\n+\n+char *\n+xstrdup (input)\n+  const char *input;\n+{\n+  unsigned size = strlen (input);\n+  char *output = xmalloc (size + 1);\n+  strcpy (output, input);\n+  return output;\n+}"}, {"sha": "108bf8751fb581330d7617dc5623096042ce7ac0", "filename": "gcc/cppfiles.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c49445e0012a736c72876d6ebb28a3ee554c1e67/gcc%2Fcppfiles.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c49445e0012a736c72876d6ebb28a3ee554c1e67/gcc%2Fcppfiles.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcppfiles.c?ref=c49445e0012a736c72876d6ebb28a3ee554c1e67", "patch": "@@ -74,7 +74,7 @@ append_include_chain (pfile, list, dir, sysp)\n   struct stat st;\n   unsigned int len;\n \n-  dir = savestring (dir);\n+  dir = xstrdup (dir);\n   simplify_pathname (dir);\n   if (stat (dir, &st))\n     {\n@@ -410,7 +410,7 @@ find_include_file (pfile, fname, search_start, ihash, before)\n     }\n   *before = 0;\n   *ihash = ih;\n-  ih->nshort = savestring (fname);\n+  ih->nshort = xstrdup (fname);\n   ih->control_macro = NULL;\n   \n   /* If the pathname is absolute, just open it. */ \n@@ -539,7 +539,7 @@ read_name_map (pfile, dirname)\n \n   map_list_ptr = ((struct file_name_map_list *)\n \t\t  xmalloc (sizeof (struct file_name_map_list)));\n-  map_list_ptr->map_list_name = savestring (dirname);\n+  map_list_ptr->map_list_name = xstrdup (dirname);\n \n   name = (char *) alloca (strlen (dirname) + strlen (FILE_NAME_MAP_FILE) + 2);\n   strcpy (name, dirname);\n@@ -772,7 +772,7 @@ actual_directory (pfile, fname)\n   size_t dlen;\n   struct file_name_list *x;\n   \n-  dir = savestring (fname);\n+  dir = xstrdup (fname);\n   last_slash = rindex (dir, '/');\n   if (last_slash)\n     {"}, {"sha": "fb85bf56ffb1358fc3d97ed1eeafa359c81152ed", "filename": "gcc/cpplib.c", "status": "modified", "additions": 2, "deletions": 16, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c49445e0012a736c72876d6ebb28a3ee554c1e67/gcc%2Fcpplib.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c49445e0012a736c72876d6ebb28a3ee554c1e67/gcc%2Fcpplib.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpplib.c?ref=c49445e0012a736c72876d6ebb28a3ee554c1e67", "patch": "@@ -4892,7 +4892,7 @@ cpp_start_read (pfile, fname)\n \t  else\n \t    nstore[endp-startp] = '\\0';\n \n-\t  include_defaults[num_dirs].fname = savestring (nstore);\n+\t  include_defaults[num_dirs].fname = xstrdup (nstore);\n \t  include_defaults[num_dirs].component = 0;\n \t  include_defaults[num_dirs].cplusplus = opts->cplusplus;\n \t  include_defaults[num_dirs].cxx_aware = 1;\n@@ -4915,7 +4915,7 @@ cpp_start_read (pfile, fname)\n   if (!opts->no_standard_includes) {\n     struct default_include *p = include_defaults;\n     char *specd_prefix = opts->include_prefix;\n-    char *default_prefix = savestring (GCC_INCLUDE_DIR);\n+    char *default_prefix = xstrdup (GCC_INCLUDE_DIR);\n     int default_len = 0;\n     /* Remove the `include' from /usr/local/lib/gcc.../include.  */\n     if (!strcmp (default_prefix + strlen (default_prefix) - 8, \"/include\")) {\n@@ -6164,20 +6164,6 @@ cpp_read_check_assertion (pfile)\n   return result;\n }\n \n-/* FIXME: savestring() should be renamed strdup() and should\n-   be moved into cppalloc.c.  We can't do that right now because\n-   then we'd get multiple-symbol clashes with toplev.c and several\n-   other people. */\n-char *\n-savestring (input)\n-     char *input;\n-{\n-  unsigned size = strlen (input);\n-  char *output = xmalloc (size + 1);\n-  strcpy (output, input);\n-  return output;\n-}\n-\f\n /* Initialize PMARK to remember the current position of PFILE.  */\n \n void"}, {"sha": "68c77a1aeab9b1c0b6383dc34c8ab3b8c5b8fd94", "filename": "gcc/cpplib.h", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c49445e0012a736c72876d6ebb28a3ee554c1e67/gcc%2Fcpplib.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c49445e0012a736c72876d6ebb28a3ee554c1e67/gcc%2Fcpplib.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpplib.h?ref=c49445e0012a736c72876d6ebb28a3ee554c1e67", "patch": "@@ -725,8 +725,6 @@ extern int finclude\t\t\tPROTO ((cpp_reader *, int,\n extern void deps_output\t\t\tPROTO ((cpp_reader *, char *, int));\n extern struct include_hash *include_hash PROTO ((cpp_reader *, char *, int));\n \n-/* Bleargh. */\n-extern char *savestring\t\t\tPROTO ((char *));\n #ifndef INCLUDE_LEN_FUDGE\n #define INCLUDE_LEN_FUDGE 0\n #endif"}]}