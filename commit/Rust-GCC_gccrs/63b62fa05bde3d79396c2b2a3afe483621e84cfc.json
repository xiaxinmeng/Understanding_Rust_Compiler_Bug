{"sha": "63b62fa05bde3d79396c2b2a3afe483621e84cfc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjNiNjJmYTA1YmRlM2Q3OTM5NmMyYjJhM2FmZTQ4MzYyMWU4NGNmYw==", "commit": {"author": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2017-09-26T20:28:00Z"}, "committer": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2017-09-26T20:28:00Z"}, "message": "re PR fortran/82143 (add a -fdefault-real-16 flag)\n\n2017-09-26  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/82143\n\tPR fortran/82324\n\t* doc/sourcebuild.texi: Document fortran_real_10 and fortran_real_16.\n\n2017-09-26  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/82143\n\tPR fortran/82324\n\t* lib/target-supports.exp (check_effective_target_fortran_real_10): New.\n\t* gfortran.dg/promotion_3.f90: Only run if real(16) is available.\n\t* gfortran.dg/promotion_4.f90: Only run if real(10) is available.\n\tDon't assume that DOUBLE PRECISION has kind=16.\n\nFrom-SVN: r253214", "tree": {"sha": "238d812153fa167503db41049576d7e190bd4d9c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/238d812153fa167503db41049576d7e190bd4d9c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/63b62fa05bde3d79396c2b2a3afe483621e84cfc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63b62fa05bde3d79396c2b2a3afe483621e84cfc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/63b62fa05bde3d79396c2b2a3afe483621e84cfc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63b62fa05bde3d79396c2b2a3afe483621e84cfc/comments", "author": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "57e6b981a37579907ae8a63aef3a78fa76cadfb8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57e6b981a37579907ae8a63aef3a78fa76cadfb8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57e6b981a37579907ae8a63aef3a78fa76cadfb8"}], "stats": {"total": 39, "additions": 38, "deletions": 1}, "files": [{"sha": "d80b6a07c139d8e714cadae0efabcfe1ed485ef9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63b62fa05bde3d79396c2b2a3afe483621e84cfc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63b62fa05bde3d79396c2b2a3afe483621e84cfc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=63b62fa05bde3d79396c2b2a3afe483621e84cfc", "patch": "@@ -1,3 +1,9 @@\n+2017-09-26  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/82143\n+\tPR fortran/82324\n+\t* doc/sourcebuild.texi: Document fortran_real_10 and fortran_real_16.\n+\n 2017-09-26  Michael Meissner  <meissner@linux.vnet.ibm.com>\n \n \t* config/rs6000/rs6000.md (extendsi<mode>2): Add a splitter to do"}, {"sha": "56e1b4eb103ab412b29d6dcd9b556515ebc2ac63", "filename": "gcc/doc/sourcebuild.texi", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63b62fa05bde3d79396c2b2a3afe483621e84cfc/gcc%2Fdoc%2Fsourcebuild.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63b62fa05bde3d79396c2b2a3afe483621e84cfc/gcc%2Fdoc%2Fsourcebuild.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fsourcebuild.texi?ref=63b62fa05bde3d79396c2b2a3afe483621e84cfc", "patch": "@@ -1357,6 +1357,12 @@ Target has runtime support for any options added with\n @item fortran_integer_16\n Target supports Fortran @code{integer} that is 16 bytes or longer.\n \n+@item fortran_real_10\n+Target supports Fortran @code{real} that is 10 bytes or longer.\n+\n+@item fortran_real_16\n+Target supports Fortran @code{real} that is 16 bytes or longer.\n+\n @item fortran_large_int\n Target supports Fortran @code{integer} kinds larger than @code{integer(8)}.\n "}, {"sha": "38591f42c89c88a5ad73565e4a244a1c824c0f2f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63b62fa05bde3d79396c2b2a3afe483621e84cfc/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63b62fa05bde3d79396c2b2a3afe483621e84cfc/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=63b62fa05bde3d79396c2b2a3afe483621e84cfc", "patch": "@@ -1,3 +1,12 @@\n+2017-09-26  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/82143\n+\tPR fortran/82324\n+\t* lib/target-supports.exp (check_effective_target_fortran_real_10): New.\n+\t* gfortran.dg/promotion_3.f90: Only run if real(16) is available.\n+\t* gfortran.dg/promotion_4.f90: Only run if real(10) is available.\n+\tDon't assume that DOUBLE PRECISION has kind=16.\n+\n 2017-09-26  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \t* gfortran.dg/gomp/associate1.f90: Really commit change"}, {"sha": "3571bd175b27ce6a1dd3c2b004f77a1a6835872d", "filename": "gcc/testsuite/gfortran.dg/promotion_3.f90", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63b62fa05bde3d79396c2b2a3afe483621e84cfc/gcc%2Ftestsuite%2Fgfortran.dg%2Fpromotion_3.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63b62fa05bde3d79396c2b2a3afe483621e84cfc/gcc%2Ftestsuite%2Fgfortran.dg%2Fpromotion_3.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpromotion_3.f90?ref=63b62fa05bde3d79396c2b2a3afe483621e84cfc", "patch": "@@ -1,5 +1,6 @@\n ! { dg-do run }\n ! { dg-options \"-fdefault-real-16\" }\n+! { dg-require-effective-target fortran_real_16 }\n !\n ! PR 82143: add a -fdefault-real-16 flag\n !"}, {"sha": "8378cdd264a762f02d4cb1c04808518dfb82ddc0", "filename": "gcc/testsuite/gfortran.dg/promotion_4.f90", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63b62fa05bde3d79396c2b2a3afe483621e84cfc/gcc%2Ftestsuite%2Fgfortran.dg%2Fpromotion_4.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63b62fa05bde3d79396c2b2a3afe483621e84cfc/gcc%2Ftestsuite%2Fgfortran.dg%2Fpromotion_4.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpromotion_4.f90?ref=63b62fa05bde3d79396c2b2a3afe483621e84cfc", "patch": "@@ -1,5 +1,6 @@\n ! { dg-do run }\n ! { dg-options \"-fdefault-real-10\" }\n+! { dg-require-effective-target fortran_real_10 }\n !\n ! PR 82143: add a -fdefault-real-16 flag\n !\n@@ -12,5 +13,5 @@\n if (kind(r4) /= 4) call abort\n if (kind(r8) /= 8) call abort\n if (kind(r) /= 10) call abort\n-if (kind(d) /= 16) call abort\n+if (kind(d)  < 10) call abort\n end"}, {"sha": "57f646ce2df5bcd5619870403242e73f6e91ff77", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63b62fa05bde3d79396c2b2a3afe483621e84cfc/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63b62fa05bde3d79396c2b2a3afe483621e84cfc/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=63b62fa05bde3d79396c2b2a3afe483621e84cfc", "patch": "@@ -1464,6 +1464,20 @@ proc check_effective_target_fortran_real_16 { } {\n     }]\n }\n \n+# Return 1 if the target supports Fortran real kind 10,\n+# 0 otherwise. Contrary to check_effective_target_fortran_large_real\n+# this checks for real(10) only.\n+#\n+# When the target name changes, replace the cached result.\n+\n+proc check_effective_target_fortran_real_10 { } {\n+    return [check_no_compiler_messages fortran_real_10 executable {\n+\t! Fortran\n+\treal(kind=10) :: x\n+\tx = cos (x)\n+\tend\n+    }]\n+}\n \n # Return 1 if the target supports Fortran's IEEE modules,\n # 0 otherwise."}]}