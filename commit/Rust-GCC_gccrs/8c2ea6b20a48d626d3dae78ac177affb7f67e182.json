{"sha": "8c2ea6b20a48d626d3dae78ac177affb7f67e182", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGMyZWE2YjIwYTQ4ZDYyNmQzZGFlNzhhYzE3N2FmZmI3ZjY3ZTE4Mg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@golang.org", "date": "2017-09-22T13:38:10Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2017-09-22T13:38:10Z"}, "message": "re PR sanitizer/77631 (no symbols in backtrace shown by ASan when debug info is split)\n\n\tPR sanitizer/77631\n\t* configure.ac: Check for lstat and readlink.\n\t* elf.c (lstat, readlink): Provide dummy versions if real versions\n\tare not available.\n\t* configure, config.h.in: Rebuild.\n\nFrom-SVN: r253095", "tree": {"sha": "45668dec72f6f6dbdf72fb967ca86b70695798e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/45668dec72f6f6dbdf72fb967ca86b70695798e0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8c2ea6b20a48d626d3dae78ac177affb7f67e182", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c2ea6b20a48d626d3dae78ac177affb7f67e182", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8c2ea6b20a48d626d3dae78ac177affb7f67e182", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c2ea6b20a48d626d3dae78ac177affb7f67e182/comments", "author": {"login": "ianlancetaylor", "id": 3194333, "node_id": "MDQ6VXNlcjMxOTQzMzM=", "avatar_url": "https://avatars.githubusercontent.com/u/3194333?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ianlancetaylor", "html_url": "https://github.com/ianlancetaylor", "followers_url": "https://api.github.com/users/ianlancetaylor/followers", "following_url": "https://api.github.com/users/ianlancetaylor/following{/other_user}", "gists_url": "https://api.github.com/users/ianlancetaylor/gists{/gist_id}", "starred_url": "https://api.github.com/users/ianlancetaylor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ianlancetaylor/subscriptions", "organizations_url": "https://api.github.com/users/ianlancetaylor/orgs", "repos_url": "https://api.github.com/users/ianlancetaylor/repos", "events_url": "https://api.github.com/users/ianlancetaylor/events{/privacy}", "received_events_url": "https://api.github.com/users/ianlancetaylor/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4d6e2f33a437fc6ead8218bf5f0e2cdb3e834d9e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d6e2f33a437fc6ead8218bf5f0e2cdb3e834d9e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4d6e2f33a437fc6ead8218bf5f0e2cdb3e834d9e"}], "stats": {"total": 57, "additions": 57, "deletions": 0}, "files": [{"sha": "ed996781c06f7e07bd56430625ed28c72aabf8b1", "filename": "libbacktrace/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c2ea6b20a48d626d3dae78ac177affb7f67e182/libbacktrace%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c2ea6b20a48d626d3dae78ac177affb7f67e182/libbacktrace%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libbacktrace%2FChangeLog?ref=8c2ea6b20a48d626d3dae78ac177affb7f67e182", "patch": "@@ -1,3 +1,11 @@\n+2017-09-22  Ian Lance Taylor  <iant@golang.org>\n+\n+\tPR sanitizer/77631\n+\t* configure.ac: Check for lstat and readlink.\n+\t* elf.c (lstat, readlink): Provide dummy versions if real versions\n+\tare not available.\n+\t* configure, config.h.in: Rebuild.\n+\n 2017-09-21  Ian Lance Taylor  <iant@google.com>\n \n \tPR go/82284"}, {"sha": "1c38e8ed3b54fdfdfc4d7eb3a7eaf106bd6110d8", "filename": "libbacktrace/config.h.in", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c2ea6b20a48d626d3dae78ac177affb7f67e182/libbacktrace%2Fconfig.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c2ea6b20a48d626d3dae78ac177affb7f67e182/libbacktrace%2Fconfig.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libbacktrace%2Fconfig.h.in?ref=8c2ea6b20a48d626d3dae78ac177affb7f67e182", "patch": "@@ -37,9 +37,15 @@\n /* Define if AIX loadquery is available. */\n #undef HAVE_LOADQUERY\n \n+/* Define to 1 if you have the `lstat' function. */\n+#undef HAVE_LSTAT\n+\n /* Define to 1 if you have the <memory.h> header file. */\n #undef HAVE_MEMORY_H\n \n+/* Define to 1 if you have the `readlink' function. */\n+#undef HAVE_READLINK\n+\n /* Define to 1 if you have the <stdint.h> header file. */\n #undef HAVE_STDINT_H\n "}, {"sha": "660a7786d76eeec3e6a819e0a25b27f2aceadc5f", "filename": "libbacktrace/configure", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c2ea6b20a48d626d3dae78ac177affb7f67e182/libbacktrace%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c2ea6b20a48d626d3dae78ac177affb7f67e182/libbacktrace%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libbacktrace%2Fconfigure?ref=8c2ea6b20a48d626d3dae78ac177affb7f67e182", "patch": "@@ -12708,6 +12708,19 @@ cat >>confdefs.h <<_ACEOF\n #define HAVE_DECL_STRNLEN $ac_have_decl\n _ACEOF\n \n+for ac_func in lstat readlink\n+do :\n+  as_ac_var=`$as_echo \"ac_cv_func_$ac_func\" | $as_tr_sh`\n+ac_fn_c_check_func \"$LINENO\" \"$ac_func\" \"$as_ac_var\"\n+eval as_val=\\$$as_ac_var\n+   if test \"x$as_val\" = x\"\"yes; then :\n+  cat >>confdefs.h <<_ACEOF\n+#define `$as_echo \"HAVE_$ac_func\" | $as_tr_cpp` 1\n+_ACEOF\n+\n+fi\n+done\n+\n \n # Check for getexecname function.\n if test -n \"${with_target_subdir}\"; then"}, {"sha": "c88122d8555dcc0edc15682a7d0617eae1d1f5c3", "filename": "libbacktrace/configure.ac", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c2ea6b20a48d626d3dae78ac177affb7f67e182/libbacktrace%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c2ea6b20a48d626d3dae78ac177affb7f67e182/libbacktrace%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libbacktrace%2Fconfigure.ac?ref=8c2ea6b20a48d626d3dae78ac177affb7f67e182", "patch": "@@ -373,6 +373,7 @@ if test \"$have_fcntl\" = \"yes\"; then\n fi\n \n AC_CHECK_DECLS(strnlen)\n+AC_CHECK_FUNCS(lstat readlink)\n \n # Check for getexecname function.\n if test -n \"${with_target_subdir}\"; then"}, {"sha": "fac46860a541a4b2a6c98351c3285337c91ab8c0", "filename": "libbacktrace/elf.c", "status": "modified", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c2ea6b20a48d626d3dae78ac177affb7f67e182/libbacktrace%2Felf.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c2ea6b20a48d626d3dae78ac177affb7f67e182/libbacktrace%2Felf.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libbacktrace%2Felf.c?ref=8c2ea6b20a48d626d3dae78ac177affb7f67e182", "patch": "@@ -75,6 +75,35 @@ xstrnlen (const char *s, size_t maxlen)\n \n #endif\n \n+#ifndef HAVE_LSTAT\n+\n+/* Dummy version of lstat for systems that don't have it.  */\n+\n+static int\n+xlstat (const char *path ATTRIBUTE_UNUSED, struct stat *st ATTRIBUTE_UNUSED)\n+{\n+  return -1;\n+}\n+\n+#define lstat xlstat\n+\n+#endif\n+\n+#ifndef HAVE_READLINK\n+\n+/* Dummy version of readlink for systems that don't have it.  */\n+\n+static ssize_t\n+xreadlink (const char *path ATTRIBUTE_UNUSED, char *buf ATTRIBUTE_UNUSED,\n+\t   size_t bufsz ATTRIBUTE_UNUSED)\n+{\n+  return -1;\n+}\n+\n+#define readlink xreadlink\n+\n+#endif\n+\n #ifndef HAVE_DL_ITERATE_PHDR\n \n /* Dummy version of dl_iterate_phdr for systems that don't have it.  */"}]}