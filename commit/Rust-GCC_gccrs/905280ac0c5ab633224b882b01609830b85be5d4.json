{"sha": "905280ac0c5ab633224b882b01609830b85be5d4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTA1MjgwYWMwYzVhYjYzMzIyNGI4ODJiMDE2MDk4MzBiODViZTVkNA==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2003-02-20T02:34:26Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2003-02-20T02:34:26Z"}, "message": "configure.in (multiosdir): Set to nothing if compiler is not GCC or if...\n\n* configure.in (multiosdir): Set to nothing if compiler is not GCC\nor if it doesn't support -print-multi-os-directory.\n* configure: Rebuilt.\n\nFrom-SVN: r63153", "tree": {"sha": "f32c86c63c8661d07114c6ab126fe25b295265f7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f32c86c63c8661d07114c6ab126fe25b295265f7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/905280ac0c5ab633224b882b01609830b85be5d4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/905280ac0c5ab633224b882b01609830b85be5d4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/905280ac0c5ab633224b882b01609830b85be5d4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/905280ac0c5ab633224b882b01609830b85be5d4/comments", "author": null, "committer": null, "parents": [{"sha": "4063ae699cca59c80254acc8e72682dbf8a64701", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4063ae699cca59c80254acc8e72682dbf8a64701", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4063ae699cca59c80254acc8e72682dbf8a64701"}], "stats": {"total": 94, "additions": 62, "deletions": 32}, "files": [{"sha": "070052eafdcb2dd38cbb0082ad8ca60675e1f66d", "filename": "zlib/ChangeLog.gcj", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/905280ac0c5ab633224b882b01609830b85be5d4/zlib%2FChangeLog.gcj", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/905280ac0c5ab633224b882b01609830b85be5d4/zlib%2FChangeLog.gcj", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/zlib%2FChangeLog.gcj?ref=905280ac0c5ab633224b882b01609830b85be5d4", "patch": "@@ -1,3 +1,9 @@\n+2003-02-19  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\t* configure.in (multiosdir): Set to nothing if compiler is not GCC\n+\tor if it doesn't support -print-multi-os-directory.\n+\t* configure: Rebuilt.\n+\n 2002-09-22  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* Makefile.am (all-multi): Fix multilib parallel build."}, {"sha": "a58651396638ad335d98e8bd5a1d44e7e300bb29", "filename": "zlib/configure", "status": "modified", "additions": 50, "deletions": 31, "changes": 81, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/905280ac0c5ab633224b882b01609830b85be5d4/zlib%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/905280ac0c5ab633224b882b01609830b85be5d4/zlib%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/zlib%2Fconfigure?ref=905280ac0c5ab633224b882b01609830b85be5d4", "patch": "@@ -1980,6 +1980,19 @@ case $host in\n   # Find out which ABI we are using.\n   echo '#line 1982 \"configure\"' > conftest.$ac_ext\n   if { (eval echo configure:1983: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+   if test \"$lt_cv_prog_gnu_ld\" = yes; then\n+    case `/usr/bin/file conftest.$ac_objext` in\n+    *32-bit*)\n+      LD=\"${LD-ld} -melf32bsmip\"\n+      ;;\n+    *N32*)\n+      LD=\"${LD-ld} -melf32bmipn32\"\n+      ;;\n+    *64-bit*)\n+      LD=\"${LD-ld} -melf64bmip\"\n+      ;;\n+    esac\n+   else\n     case `/usr/bin/file conftest.$ac_objext` in\n     *32-bit*)\n       LD=\"${LD-ld} -32\"\n@@ -1991,14 +2004,15 @@ case $host in\n       LD=\"${LD-ld} -64\"\n       ;;\n     esac\n+   fi\n   fi\n   rm -rf conftest*\n   ;;\n \n ia64-*-hpux*)\n   # Find out which ABI we are using.\n   echo 'int i;' > conftest.$ac_ext\n-  if { (eval echo configure:2002: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  if { (eval echo configure:2016: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n     case \"`/usr/bin/file conftest.o`\" in\n     *ELF-32*)\n       HPUX_IA64_MODE=\"32\"\n@@ -2014,7 +2028,7 @@ ia64-*-hpux*)\n x86_64-*linux*|ppc*-*linux*|powerpc*-*linux*|s390*-*linux*|sparc*-*linux*)\n   # Find out which ABI we are using.\n   echo 'int i;' > conftest.$ac_ext\n-  if { (eval echo configure:2018: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  if { (eval echo configure:2032: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n     case \"`/usr/bin/file conftest.o`\" in\n     *32-bit*)\n       case $host in\n@@ -2058,7 +2072,7 @@ x86_64-*linux*|ppc*-*linux*|powerpc*-*linux*|s390*-*linux*|sparc*-*linux*)\n   SAVE_CFLAGS=\"$CFLAGS\"\n   CFLAGS=\"$CFLAGS -belf\"\n   echo $ac_n \"checking whether the C compiler needs -belf\"\"... $ac_c\" 1>&6\n-echo \"configure:2062: checking whether the C compiler needs -belf\" >&5\n+echo \"configure:2076: checking whether the C compiler needs -belf\" >&5\n if eval \"test \\\"`echo '$''{'lt_cv_cc_needs_belf'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2071,14 +2085,14 @@ ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$a\n cross_compiling=$ac_cv_prog_cc_cross\n \n      cat > conftest.$ac_ext <<EOF\n-#line 2075 \"configure\"\n+#line 2089 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2082: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2096: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   lt_cv_cc_needs_belf=yes\n else\n@@ -2204,7 +2218,7 @@ fi\n # Find CPP now so that any conditional tests below won't do it and\n # thereby make the resulting definitions conditional.\n echo $ac_n \"checking how to run the C preprocessor\"\"... $ac_c\" 1>&6\n-echo \"configure:2208: checking how to run the C preprocessor\" >&5\n+echo \"configure:2222: checking how to run the C preprocessor\" >&5\n # On Suns, sometimes $CPP names a directory.\n if test -n \"$CPP\" && test -d \"$CPP\"; then\n   CPP=\n@@ -2219,13 +2233,13 @@ else\n   # On the NeXT, cc -E runs the code through the compiler's parser,\n   # not just through cpp.\n   cat > conftest.$ac_ext <<EOF\n-#line 2223 \"configure\"\n+#line 2237 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2229: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2243: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2236,13 +2250,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -E -traditional-cpp\"\n   cat > conftest.$ac_ext <<EOF\n-#line 2240 \"configure\"\n+#line 2254 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2246: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2260: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2253,13 +2267,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -nologo -E\"\n   cat > conftest.$ac_ext <<EOF\n-#line 2257 \"configure\"\n+#line 2271 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2263: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2277: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2307,17 +2321,17 @@ else\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:2311: checking for $ac_hdr\" >&5\n+echo \"configure:2325: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2316 \"configure\"\n+#line 2330 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2321: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2335: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2346,12 +2360,12 @@ done\n for ac_func in getpagesize\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2350: checking for $ac_func\" >&5\n+echo \"configure:2364: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2355 \"configure\"\n+#line 2369 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2374,7 +2388,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2378: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2392: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2399,15 +2413,15 @@ fi\n done\n \n echo $ac_n \"checking for working mmap\"\"... $ac_c\" 1>&6\n-echo \"configure:2403: checking for working mmap\" >&5\n+echo \"configure:2417: checking for working mmap\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_mmap_fixed_mapped'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_func_mmap_fixed_mapped=no\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2411 \"configure\"\n+#line 2425 \"configure\"\n #include \"confdefs.h\"\n \n /* Thanks to Mike Haertel and Jim Avera for this test.\n@@ -2560,7 +2574,7 @@ main()\n }\n \n EOF\n-if { (eval echo configure:2564: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2578: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_mmap_fixed_mapped=yes\n else\n@@ -2585,12 +2599,12 @@ fi\n    for ac_func in memcpy strerror\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2589: checking for $ac_func\" >&5\n+echo \"configure:2603: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2594 \"configure\"\n+#line 2608 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2613,7 +2627,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2617: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2631: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2640,15 +2654,15 @@ done\n \n    if test \"$with_system_zlib\" = yes; then\n       echo $ac_n \"checking for deflate in -lz\"\"... $ac_c\" 1>&6\n-echo \"configure:2644: checking for deflate in -lz\" >&5\n+echo \"configure:2658: checking for deflate in -lz\" >&5\n ac_lib_var=`echo z'_'deflate | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lz  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 2652 \"configure\"\n+#line 2666 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -2659,7 +2673,7 @@ int main() {\n deflate()\n ; return 0; }\n EOF\n-if { (eval echo configure:2663: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2677: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -2691,17 +2705,17 @@ for ac_hdr in unistd.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:2695: checking for $ac_hdr\" >&5\n+echo \"configure:2709: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2700 \"configure\"\n+#line 2714 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2705: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2719: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2736,7 +2750,12 @@ else\n   toolexecdir='$(libdir)/gcc-lib/$(target_alias)'\n   toolexeclibdir='$(libdir)'\n fi\n-toolexeclibdir=$toolexeclibdir/`$CC -print-multi-os-directory 2>/dev/null || echo .`\n+if test \"$GCC\" = yes && $CC -print-multi-os-directory > /dev/null 2>&1; then\n+  multiosdir=/`$CC -print-multi-os-directory`\n+else\n+  multiosdir=\n+fi\n+toolexeclibdir=${toolexeclibdir}${multiosdir}\n \n \n "}, {"sha": "bf36c05d954ccd26396cf238adf0b4a562b2a20c", "filename": "zlib/configure.in", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/905280ac0c5ab633224b882b01609830b85be5d4/zlib%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/905280ac0c5ab633224b882b01609830b85be5d4/zlib%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/zlib%2Fconfigure.in?ref=905280ac0c5ab633224b882b01609830b85be5d4", "patch": "@@ -121,7 +121,12 @@ else\n   toolexecdir='$(libdir)/gcc-lib/$(target_alias)'\n   toolexeclibdir='$(libdir)'\n fi\n-toolexeclibdir=$toolexeclibdir/`$CC -print-multi-os-directory 2>/dev/null || echo .`\n+if test \"$GCC\" = yes && $CC -print-multi-os-directory > /dev/null 2>&1; then\n+  multiosdir=/`$CC -print-multi-os-directory`\n+else\n+  multiosdir=\n+fi\n+toolexeclibdir=${toolexeclibdir}${multiosdir}\n AC_SUBST(toolexecdir)\n AC_SUBST(toolexeclibdir)\n "}]}