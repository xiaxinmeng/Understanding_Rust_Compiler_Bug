{"sha": "3fa176b767e14e1d2491775978afac3e87892d1d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2ZhMTc2Yjc2N2UxNGUxZDI0OTE3NzU5NzhhZmFjM2U4Nzg5MmQxZA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-04-09T04:36:51Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-04-09T04:36:51Z"}, "message": "compiler: sort packages in export data more deterministically\n    \n    We can have multiple packages with the same name, so also sort by pkgpath.\n    To avoid an inconsistent sort, sort by symbol and pointer address if\n    we somehow get two different packages with the same name and pkgpath.\n    \n    Reviewed-on: https://go-review.googlesource.com/c/gofrontend/+/171032\n\nFrom-SVN: r270220", "tree": {"sha": "35478f4f4ff092374f748479debcda06b96dd6dd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/35478f4f4ff092374f748479debcda06b96dd6dd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3fa176b767e14e1d2491775978afac3e87892d1d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3fa176b767e14e1d2491775978afac3e87892d1d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3fa176b767e14e1d2491775978afac3e87892d1d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3fa176b767e14e1d2491775978afac3e87892d1d/comments", "author": null, "committer": null, "parents": [{"sha": "ad7d66abe909d867c032019b18a4ef20f22af368", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad7d66abe909d867c032019b18a4ef20f22af368", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ad7d66abe909d867c032019b18a4ef20f22af368"}], "stats": {"total": 21, "additions": 19, "deletions": 2}, "files": [{"sha": "74e811b8a23ffc65c1956615aa6d96bca62336f6", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3fa176b767e14e1d2491775978afac3e87892d1d/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3fa176b767e14e1d2491775978afac3e87892d1d/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=3fa176b767e14e1d2491775978afac3e87892d1d", "patch": "@@ -1,4 +1,4 @@\n-a69f7c05f1880bb90544fb0c3577109cb1d7f3ab\n+8822487ed776d55eafed44de7d89ee54bbfbab47\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "066455a4ee94891d03e795a409b8771317d12c9d", "filename": "gcc/go/gofrontend/export.cc", "status": "modified", "additions": 18, "deletions": 1, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3fa176b767e14e1d2491775978afac3e87892d1d/gcc%2Fgo%2Fgofrontend%2Fexport.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3fa176b767e14e1d2491775978afac3e87892d1d/gcc%2Fgo%2Fgofrontend%2Fexport.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fexport.cc?ref=3fa176b767e14e1d2491775978afac3e87892d1d", "patch": "@@ -509,7 +509,24 @@ Export::set_type_index(Type* type)\n static bool\n packages_compare(const Package* a, const Package* b)\n {\n-  return a->package_name() < b->package_name();\n+  if (a->package_name() < b->package_name())\n+    return true;\n+  else if (a->package_name() > b->package_name())\n+    return false;\n+\n+  if (a->pkgpath() < b->pkgpath())\n+    return true;\n+  else if (a->pkgpath() > b->pkgpath())\n+    return false;\n+\n+  // In principle if we get here then a == b.  Try to do something sensible\n+  // even if the import information is inconsistent.\n+  if (a->pkgpath_symbol() < b->pkgpath_symbol())\n+    return true;\n+  else if (a->pkgpath_symbol() > b->pkgpath_symbol())\n+    return false;\n+\n+  return a < b;\n }\n \n // Write out all the known packages whose pkgpath symbol is not a"}]}