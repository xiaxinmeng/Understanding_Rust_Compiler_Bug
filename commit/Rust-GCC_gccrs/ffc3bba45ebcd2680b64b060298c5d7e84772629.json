{"sha": "ffc3bba45ebcd2680b64b060298c5d7e84772629", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmZjM2JiYTQ1ZWJjZDI2ODBiNjRiMDYwMjk4YzVkN2U4NDc3MjYyOQ==", "commit": {"author": {"name": "Mikael Morin", "email": "mikael@gcc.gnu.org", "date": "2010-09-09T13:41:54Z"}, "committer": {"name": "Mikael Morin", "email": "mikael@gcc.gnu.org", "date": "2010-09-09T13:41:54Z"}, "message": "trans-array.c (gfc_trans_create_temp_array): Don't set dim array.\n\n2010-09-09  Mikael Morin  <mikael@gcc.gnu.org>\n\n\t* trans-array.c (gfc_trans_create_temp_array): Don't set dim array.\n\t(gfc_conv_loop_setup, gfc_walk_function_expr): Set dim array.\n\t* trans-intrinsic.c (gfc_walk_intrinsic_libfunc): Ditto.\n\nFrom-SVN: r164094", "tree": {"sha": "dc31febd18cbf7f1bcfa50eb887b627c33cc4467", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dc31febd18cbf7f1bcfa50eb887b627c33cc4467"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ffc3bba45ebcd2680b64b060298c5d7e84772629", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ffc3bba45ebcd2680b64b060298c5d7e84772629", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ffc3bba45ebcd2680b64b060298c5d7e84772629", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ffc3bba45ebcd2680b64b060298c5d7e84772629/comments", "author": null, "committer": null, "parents": [{"sha": "4ca1721930e4e6a7eb33727d03bda6255233d9ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ca1721930e4e6a7eb33727d03bda6255233d9ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4ca1721930e4e6a7eb33727d03bda6255233d9ee"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "07228f6664bebaca003543ba5c5a319467944db8", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ffc3bba45ebcd2680b64b060298c5d7e84772629/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ffc3bba45ebcd2680b64b060298c5d7e84772629/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=ffc3bba45ebcd2680b64b060298c5d7e84772629", "patch": "@@ -1,3 +1,9 @@\n+2010-09-09  Mikael Morin  <mikael@gcc.gnu.org>\n+\n+\t* trans-array.c (gfc_trans_create_temp_array): Don't set dim array.\n+\t(gfc_conv_loop_setup, gfc_walk_function_expr): Set dim array.\n+\t* trans-intrinsic.c (gfc_walk_intrinsic_libfunc): Ditto.\n+\n 2010-09-09  Mikael Morin  <mikael@gcc.gnu.org>\n \n \t* trans-array.c (gfc_trans_create_temp_array): Assert loop dimension"}, {"sha": "c9e72f67cf937b861c0f9c80764dedf76f00c706", "filename": "gcc/fortran/trans-array.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ffc3bba45ebcd2680b64b060298c5d7e84772629/gcc%2Ffortran%2Ftrans-array.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ffc3bba45ebcd2680b64b060298c5d7e84772629/gcc%2Ffortran%2Ftrans-array.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-array.c?ref=ffc3bba45ebcd2680b64b060298c5d7e84772629", "patch": "@@ -762,7 +762,6 @@ gfc_trans_create_temp_array (stmtblock_t * pre, stmtblock_t * post,\n       info->start[dim] = gfc_index_zero_node;\n       info->end[dim] = gfc_index_zero_node;\n       info->stride[dim] = gfc_index_one_node;\n-      info->dim[dim] = dim;\n     }\n \n   /* Initialize the descriptor.  */\n@@ -3830,6 +3829,11 @@ gfc_conv_loop_setup (gfc_loopinfo * loop, locus * where)\n       memset (&loop->temp_ss->data.info, 0, sizeof (gfc_ss_info));\n       loop->temp_ss->type = GFC_SS_SECTION;\n       loop->temp_ss->data.info.dimen = n;\n+\n+      gcc_assert (loop->temp_ss->data.info.dimen != 0);\n+      for (n = 0; n < loop->temp_ss->data.info.dimen; n++)\n+\tloop->temp_ss->data.info.dim[n] = n;\n+\n       gfc_trans_create_temp_array (&loop->pre, &loop->post, loop,\n \t\t\t\t   &loop->temp_ss->data.info, tmp, NULL_TREE,\n \t\t\t\t   false, true, false, where);\n@@ -6866,6 +6870,7 @@ gfc_walk_function_expr (gfc_ss * ss, gfc_expr * expr)\n   gfc_intrinsic_sym *isym;\n   gfc_symbol *sym;\n   gfc_component *comp = NULL;\n+  int n;\n \n   isym = expr->value.function.isym;\n \n@@ -6887,6 +6892,8 @@ gfc_walk_function_expr (gfc_ss * ss, gfc_expr * expr)\n       newss->expr = expr;\n       newss->next = ss;\n       newss->data.info.dimen = expr->rank;\n+      for (n = 0; n < newss->data.info.dimen; n++)\n+\tnewss->data.info.dim[n] = n;\n       return newss;\n     }\n "}, {"sha": "030bf9591b614e966d609b79cbf943549dc6c83e", "filename": "gcc/fortran/trans-intrinsic.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ffc3bba45ebcd2680b64b060298c5d7e84772629/gcc%2Ffortran%2Ftrans-intrinsic.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ffc3bba45ebcd2680b64b060298c5d7e84772629/gcc%2Ffortran%2Ftrans-intrinsic.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-intrinsic.c?ref=ffc3bba45ebcd2680b64b060298c5d7e84772629", "patch": "@@ -6234,6 +6234,7 @@ static gfc_ss *\n gfc_walk_intrinsic_libfunc (gfc_ss * ss, gfc_expr * expr)\n {\n   gfc_ss *newss;\n+  int n;\n \n   gcc_assert (expr->rank > 0);\n \n@@ -6242,6 +6243,8 @@ gfc_walk_intrinsic_libfunc (gfc_ss * ss, gfc_expr * expr)\n   newss->expr = expr;\n   newss->next = ss;\n   newss->data.info.dimen = expr->rank;\n+  for (n = 0; n < newss->data.info.dimen; n++)\n+    newss->data.info.dim[n] = n;\n \n   return newss;\n }"}]}