{"sha": "04be270fb89cb20b2180b09283302a6cde941b00", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDRiZTI3MGZiODljYjIwYjIxODBiMDkyODMzMDJhNmNkZTk0MWIwMA==", "commit": {"author": {"name": "Kaveh R. Ghazi", "email": "ghazi@caip.rutgers.edu", "date": "2009-04-29T04:19:38Z"}, "committer": {"name": "Kaveh Ghazi", "email": "ghazi@gcc.gnu.org", "date": "2009-04-29T04:19:38Z"}, "message": "toplev.c (print_version): Update GMP version string calculation.\n\n\t* toplev.c (print_version): Update GMP version string calculation.\n\nFrom-SVN: r146921", "tree": {"sha": "b80d2adacef61cb526fcdeaa583b716ff24aa88f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b80d2adacef61cb526fcdeaa583b716ff24aa88f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/04be270fb89cb20b2180b09283302a6cde941b00", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04be270fb89cb20b2180b09283302a6cde941b00", "html_url": "https://github.com/Rust-GCC/gccrs/commit/04be270fb89cb20b2180b09283302a6cde941b00", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04be270fb89cb20b2180b09283302a6cde941b00/comments", "author": null, "committer": null, "parents": [{"sha": "6cee8cb1ce06594186d51cc88e7b68640b577a4c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6cee8cb1ce06594186d51cc88e7b68640b577a4c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6cee8cb1ce06594186d51cc88e7b68640b577a4c"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "aa0aaea9b4feb1e6f61cdd58a531794ce45fd0f7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04be270fb89cb20b2180b09283302a6cde941b00/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04be270fb89cb20b2180b09283302a6cde941b00/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=04be270fb89cb20b2180b09283302a6cde941b00", "patch": "@@ -1,3 +1,7 @@\n+2009-04-29  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+\n+\t* toplev.c (print_version): Update GMP version string calculation.\n+\n 2009-04-28  Eric Botcazou  <ebotcazou@adacore.com>\n \n \tPR rtl-optimization/39938"}, {"sha": "f1a481cbffeda3f9df1891ab1220700bbcb9647c", "filename": "gcc/toplev.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04be270fb89cb20b2180b09283302a6cde941b00/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04be270fb89cb20b2180b09283302a6cde941b00/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=04be270fb89cb20b2180b09283302a6cde941b00", "patch": "@@ -1130,10 +1130,14 @@ print_version (FILE *file, const char *indent)\n \t   indent, __VERSION__);\n \n   /* We need to stringify the GMP macro values.  Ugh, gmp_version has\n-     two string formats, \"i.j.k\" and \"i.j\" when k is zero.  */\n+     two string formats, \"i.j.k\" and \"i.j\" when k is zero.  As of\n+     gmp-4.3.0, GMP always uses the 3 number format.  */\n #define GCC_GMP_STRINGIFY_VERSION3(X) #X\n #define GCC_GMP_STRINGIFY_VERSION2(X) GCC_GMP_STRINGIFY_VERSION3(X)\n-#if __GNU_MP_VERSION_PATCHLEVEL == 0\n+#define GCC_GMP_VERSION_NUM(X,Y,Z) (((X) << 16L) | ((Y) << 8) | (Z))\n+#define GCC_GMP_VERSION \\\n+  GCC_GMP_VERSION_NUM(__GNU_MP_VERSION, __GNU_MP_VERSION_MINOR, __GNU_MP_VERSION_PATCHLEVEL)\n+#if GCC_GMP_VERSION < GCC_GMP_VERSION_NUM(4,3,0) && __GNU_MP_VERSION_PATCHLEVEL == 0\n #define GCC_GMP_STRINGIFY_VERSION GCC_GMP_STRINGIFY_VERSION2(__GNU_MP_VERSION) \".\" \\\n   GCC_GMP_STRINGIFY_VERSION2(__GNU_MP_VERSION_MINOR)\n #else"}]}