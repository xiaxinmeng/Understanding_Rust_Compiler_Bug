{"sha": "f9c1196affcade31dc13b30cdf5eb727c59fe8bf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjljMTE5NmFmZmNhZGUzMWRjMTNiMzBjZGY1ZWI3MjdjNTlmZThiZg==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@codesourcery.com", "date": "2003-04-16T06:51:20Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2003-04-16T06:51:20Z"}, "message": "configure.in: Unify the code which creates symlinks to a just-built as...\n\n\t* configure.in: Unify the code which creates symlinks to a\n\tjust-built as, ld, objdump, and nm with the code that detects\n\ttheir presence for purposes of feature tests.\n\t* configure: Regenerate.\n\nFrom-SVN: r65677", "tree": {"sha": "d49de8143773c219eb5ad79100e16e2947e5788f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d49de8143773c219eb5ad79100e16e2947e5788f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f9c1196affcade31dc13b30cdf5eb727c59fe8bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f9c1196affcade31dc13b30cdf5eb727c59fe8bf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f9c1196affcade31dc13b30cdf5eb727c59fe8bf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f9c1196affcade31dc13b30cdf5eb727c59fe8bf/comments", "author": null, "committer": null, "parents": [{"sha": "733340fb05d1a56f984b1e8e28829cea35020711", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/733340fb05d1a56f984b1e8e28829cea35020711", "html_url": "https://github.com/Rust-GCC/gccrs/commit/733340fb05d1a56f984b1e8e28829cea35020711"}], "stats": {"total": 177, "additions": 106, "deletions": 71}, "files": [{"sha": "6a9ce450cf64ca1043688a45d3224cfc91725881", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f9c1196affcade31dc13b30cdf5eb727c59fe8bf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f9c1196affcade31dc13b30cdf5eb727c59fe8bf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f9c1196affcade31dc13b30cdf5eb727c59fe8bf", "patch": "@@ -1,3 +1,10 @@\n+2003-04-15  Zack Weinberg  <zack@codesourcery.com>\n+\n+\t* configure.in: Unify the code which creates symlinks to a\n+\tjust-built as, ld, objdump, and nm with the code that detects\n+\ttheir presence for purposes of feature tests.\n+\t* configure: Regenerate.\n+\n 2003-04-15  Zack Weinberg  <zack@codesourcery.com>\n \n \t* varasm.c (output_constant_def): Do not consult"}, {"sha": "78f285fec47e3c6babf0f0aad5778d94ad89247b", "filename": "gcc/configure", "status": "modified", "additions": 64, "deletions": 50, "changes": 114, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f9c1196affcade31dc13b30cdf5eb727c59fe8bf/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f9c1196affcade31dc13b30cdf5eb727c59fe8bf/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=f9c1196affcade31dc13b30cdf5eb727c59fe8bf", "patch": "@@ -2434,7 +2434,7 @@ fi\n \n \n # Find some useful tools\n-for ac_prog in mawk gawk nawk awk\n+for ac_prog in gawk mawk nawk awk\n do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n@@ -7388,22 +7388,6 @@ case $use_collect2 in\n     ;;\n esac\n \n-# If we have gas in the build tree, make a link to it.\n-if test -f ../gas/Makefile; then\n-\trm -f as; $symbolic_link ../gas/as-new$host_exeext as$host_exeext 2>/dev/null\n-fi\n-\n-# If we have nm and objdump in the build tree, make a link to them.\n-if test -f ../binutils/Makefile; then\n-\trm -f nm; $symbolic_link ../binutils/nm-new$host_exeext nm$host_exeext 2>/dev/null\n-\trm -f objdump; $symbolic_link ../binutils/objdump$host_exeext objdump$host_exeext 2>/dev/null\n-fi\n-\n-# If we have ld in the build tree, make a link to it.\n-if test -f ../ld/Makefile; then\n-\trm -f collect-ld; $symbolic_link ../ld/ld-new$host_exeext collect-ld$host_exeext 2>/dev/null\n-fi\n-\n # Identify the assembler which will work hand-in-glove with the newly\n # built GCC, so that we can examine its features.  This is the assembler\n # which will be driven by the driver program.\n@@ -7412,7 +7396,7 @@ fi\n # build->target assembler and hope that it will have the same features\n # as the host->target assembler we'll be using.\n echo $ac_n \"checking what assembler to use\"\"... $ac_c\" 1>&6\n-echo \"configure:7416: checking what assembler to use\" >&5\n+echo \"configure:7400: checking what assembler to use\" >&5\n in_tree_gas=no\n gcc_cv_as=\n gcc_cv_gas_major_version=\n@@ -7443,6 +7427,8 @@ gcc_cv_gas_major_version=`expr \"$gcc_cv_gas_version\" : \"VERSION=\\([0-9]*\\)\"`\n gcc_cv_gas_minor_version=`expr \"$gcc_cv_gas_version\" : \"VERSION=[0-9]*\\.\\([0-9]*\\)\"`\n gcc_cv_gas_patch_version=`expr \"$gcc_cv_gas_version\" : \"VERSION=[0-9]*\\.[0-9]*\\.\\([0-9]*\\)\"`\n \n+  rm -f as$host_exeext\n+  $symbolic_link ../gas/as-new$host_exeext as$host_exeext 2>/dev/null\n fi\n \n if test \"x$gcc_cv_as\" = x; then\n@@ -7521,7 +7507,7 @@ esac\n # build->target linker and hope that it will have the same features\n # as the host->target linker we'll be using.\n echo $ac_n \"checking what linker to use\"\"... $ac_c\" 1>&6\n-echo \"configure:7525: checking what linker to use\" >&5\n+echo \"configure:7511: checking what linker to use\" >&5\n in_tree_ld=no\n gcc_cv_ld=\n gcc_cv_gld_major_version=\n@@ -7532,9 +7518,9 @@ if test -x \"$DEFAULT_LINKER\"; then\n \tgcc_cv_ld=\"$DEFAULT_LINKER\"\n elif test -x \"$LD\"; then\n \tgcc_cv_ld=\"$LD\"\n-elif test -x ld$host_exeext; then\n+elif test -x collect-ld$host_exeext; then\n \t# Build using linker in the current directory.\n-\tgcc_cv_ld=./ld$host_exeext\n+\tgcc_cv_ld=./collect-ld$host_exeext\n elif test -f $gcc_cv_ld_gld_srcdir/configure.in \\\n      && test -f ../ld/Makefile; then\n \t# Single tree build which includes ld.\n@@ -7548,6 +7534,9 @@ elif test -f $gcc_cv_ld_gld_srcdir/configure.in \\\n \tdone\n \tgcc_cv_gld_major_version=`expr \"$gcc_cv_gld_version\" : \"VERSION=\\([0-9]*\\)\"`\n \tgcc_cv_gld_minor_version=`expr \"$gcc_cv_gld_version\" : \"VERSION=[0-9]*\\.\\([0-9]*\\)\"`\n+\trm -f collect-ld$host_exeext\n+\t$symbolic_link ../ld/ld-new$host_exeext collect-ld$host_exeext \\\n+\t\t2>/dev/null\n fi\n \n if test \"x$gcc_cv_ld\" = x; then\n@@ -7619,32 +7608,57 @@ case $in_tree_ld in\n esac\n \n # Figure out what nm we will be using.\n+gcc_cv_binutils_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/binutils\n echo $ac_n \"checking what nm to use\"\"... $ac_c\" 1>&6\n-echo \"configure:7624: checking what nm to use\" >&5\n+echo \"configure:7614: checking what nm to use\" >&5\n+in_tree_nm=no\n if test -x nm$host_exeext; then\n \tgcc_cv_nm=./nm$host_exeext\n+elif test -f $gcc_cv_binutils_srcdir/configure.in \\\n+     && test -f ../binutils/Makefile; then\n+\t# Single tree build which includes binutils.\n+\tin_tree_nm=yes\n+\tgcc_cv_nm=./nm$host_exeext\n+\trm -f nm$host_exeext\n+\t$symbolic_link ../binutils/nm-new$host_exeext nm$host_exeext 2>/dev/null\n elif test \"x$program_prefix\" != xNONE; then\n \tgcc_cv_nm=${program_prefix}nm$host_exeext\n else\n \tgcc_cv_nm=`echo nm | sed ${program_transform_name}`$host_exeext\n fi\n-echo \"$ac_t\"\"$gcc_cv_nm\" 1>&6\n+case $in_tree_nm in\n+  yes) echo \"$ac_t\"\"\"newly built nm\"\" 1>&6 ;;\n+  no)  echo \"$ac_t\"\"$gcc_cv_nm\" 1>&6 ;;\n+esac\n \n # Figure out what objdump we will be using.\n echo $ac_n \"checking what objdump to use\"\"... $ac_c\" 1>&6\n-echo \"configure:7636: checking what objdump to use\" >&5\n+echo \"configure:7637: checking what objdump to use\" >&5\n+in_tree_objdump=no\n if test -x objdump$host_exeext; then\n \tgcc_cv_objdump=./objdump$host_exeext\n+elif test -f $gcc_cv_binutils_srcdir/configure.in \\\n+     && test -f ../binutils/Makefile; then\n+\t# Single tree build which includes binutils.\n+\tin_tree_objdump=yes\n+\tgcc_cv_objdump=./objdump$host_exeext\n+\trm -f objdump$host_exeext\n+\t$symbolic_link ../binutils/objdump$host_exeext \\\n+\t\tobjdump$host_exeext 2>/dev/null\n elif test \"x$program_prefix\" != xNONE; then\n \tgcc_cv_objdump=${program_prefix}objdump$host_exeext\n else\n-\tgcc_cv_objdump=`echo objdump | sed ${program_transform_name}`$host_exeext\n+\tgcc_cv_objdump=`echo objdump | \\\n+\t\tsed ${program_transform_name}`$host_exeext\n fi\n-echo \"$ac_t\"\"$gcc_cv_objdump\" 1>&6\n+case $in_tree_objdump in\n+  yes) echo \"$ac_t\"\"\"newly built objdump\"\" 1>&6 ;;\n+  no)  echo \"$ac_t\"\"$gcc_cv_objdump\" 1>&6 ;;\n+esac\n \n # Figure out what assembler alignment features are present.\n echo $ac_n \"checking assembler alignment features\"\"... $ac_c\" 1>&6\n-echo \"configure:7648: checking assembler alignment features\" >&5\n+echo \"configure:7662: checking assembler alignment features\" >&5\n gcc_cv_as_alignment_features=none\n if test $in_tree_gas = yes; then\n   # Gas version 2.6 and later support for .balign and .p2align.\n@@ -7705,7 +7719,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_alignment_features\" 1>&6\n \n echo $ac_n \"checking assembler subsection support\"\"... $ac_c\" 1>&6\n-echo \"configure:7709: checking assembler subsection support\" >&5\n+echo \"configure:7723: checking assembler subsection support\" >&5\n gcc_cv_as_subsections=no\n if test $in_tree_gas = yes ; then\n    if test $gcc_cv_gas_major_version -eq 2 \\\n@@ -7754,7 +7768,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_subsections\" 1>&6\n \n echo $ac_n \"checking assembler weak support\"\"... $ac_c\" 1>&6\n-echo \"configure:7758: checking assembler weak support\" >&5\n+echo \"configure:7772: checking assembler weak support\" >&5\n gcc_cv_as_weak=no\n if test $in_tree_gas = yes ; then\n    if test $gcc_cv_gas_major_version -eq 2 \\\n@@ -7784,7 +7798,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_weak\" 1>&6\n \n echo $ac_n \"checking assembler hidden support\"\"... $ac_c\" 1>&6\n-echo \"configure:7788: checking assembler hidden support\" >&5\n+echo \"configure:7802: checking assembler hidden support\" >&5\n gcc_cv_as_hidden=no\n if test $in_tree_gas = yes ; then\n    if test $gcc_cv_gas_major_version -eq 2 \\\n@@ -7865,7 +7879,7 @@ esac\n \n \n echo $ac_n \"checking assembler leb128 support\"\"... $ac_c\" 1>&6\n-echo \"configure:7869: checking assembler leb128 support\" >&5\n+echo \"configure:7883: checking assembler leb128 support\" >&5\n gcc_cv_as_leb128=no\n if test $in_tree_gas = yes ; then\n    if test $gcc_cv_gas_major_version -eq 2 \\\n@@ -7919,7 +7933,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_leb128\" 1>&6\n \n echo $ac_n \"checking assembler eh_frame optimization\"\"... $ac_c\" 1>&6\n-echo \"configure:7923: checking assembler eh_frame optimization\" >&5\n+echo \"configure:7937: checking assembler eh_frame optimization\" >&5\n gcc_cv_as_eh_frame=no\n if test $in_tree_gas = yes ; then\n    if test $gcc_cv_gas_major_version -eq 2 \\\n@@ -8009,7 +8023,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_eh_frame\" 1>&6\n \n echo $ac_n \"checking assembler section merging support\"\"... $ac_c\" 1>&6\n-echo \"configure:8013: checking assembler section merging support\" >&5\n+echo \"configure:8027: checking assembler section merging support\" >&5\n gcc_cv_as_shf_merge=no\n if test $in_tree_gas = yes ; then\n    if test $gcc_cv_gas_major_version -eq 2 \\\n@@ -8041,7 +8055,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_shf_merge\" 1>&6\n \n echo $ac_n \"checking assembler thread-local storage support\"\"... $ac_c\" 1>&6\n-echo \"configure:8045: checking assembler thread-local storage support\" >&5\n+echo \"configure:8059: checking assembler thread-local storage support\" >&5\n gcc_cv_as_tls=no\n conftest_s=\n tls_first_major=\n@@ -8188,7 +8202,7 @@ case \"$target\" in\n   # All TARGET_ABI_OSF targets.\n   alpha*-*-osf* | alpha*-*-linux* | alpha*-*-*bsd*)\n     echo $ac_n \"checking assembler supports explicit relocations\"\"... $ac_c\" 1>&6\n-echo \"configure:8192: checking assembler supports explicit relocations\" >&5\n+echo \"configure:8206: checking assembler supports explicit relocations\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_explicit_relocs'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -8241,7 +8255,7 @@ EOF\n     ;;\n   sparc*-*-*)\n     echo $ac_n \"checking assembler .register pseudo-op support\"\"... $ac_c\" 1>&6\n-echo \"configure:8245: checking assembler .register pseudo-op support\" >&5\n+echo \"configure:8259: checking assembler .register pseudo-op support\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_register_pseudo_op'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -8269,7 +8283,7 @@ EOF\n     fi\n \n     echo $ac_n \"checking assembler supports -relax\"\"... $ac_c\" 1>&6\n-echo \"configure:8273: checking assembler supports -relax\" >&5\n+echo \"configure:8287: checking assembler supports -relax\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_relax_opt'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -8297,7 +8311,7 @@ EOF\n     fi\n \n     echo $ac_n \"checking assembler and linker support unaligned pc related relocs\"\"... $ac_c\" 1>&6\n-echo \"configure:8301: checking assembler and linker support unaligned pc related relocs\" >&5\n+echo \"configure:8315: checking assembler and linker support unaligned pc related relocs\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_sparc_ua_pcrel'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -8324,7 +8338,7 @@ EOF\n     fi\n \n     echo $ac_n \"checking assembler and linker support unaligned pc related relocs against hidden symbols\"\"... $ac_c\" 1>&6\n-echo \"configure:8328: checking assembler and linker support unaligned pc related relocs against hidden symbols\" >&5\n+echo \"configure:8342: checking assembler and linker support unaligned pc related relocs against hidden symbols\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_sparc_ua_pcrel_hidden'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -8364,7 +8378,7 @@ EOF\n     fi\n \n     echo $ac_n \"checking for assembler offsetable %lo() support\"\"... $ac_c\" 1>&6\n-echo \"configure:8368: checking for assembler offsetable %lo() support\" >&5\n+echo \"configure:8382: checking for assembler offsetable %lo() support\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_offsetable_lo10'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -8403,7 +8417,7 @@ EOF\n \n   i[34567]86-*-* | x86_64-*-*)\n     echo $ac_n \"checking assembler instructions\"\"... $ac_c\" 1>&6\n-echo \"configure:8407: checking assembler instructions\" >&5\n+echo \"configure:8421: checking assembler instructions\" >&5\n     gcc_cv_as_instructions=\n     if test $in_tree_gas = yes ; then \n        if test $gcc_cv_gas_major_version -eq 2 \\\n@@ -8437,7 +8451,7 @@ EOF\n     echo \"$ac_t\"\"$gcc_cv_as_instructions\" 1>&6\n \n     echo $ac_n \"checking assembler GOTOFF in data directives\"\"... $ac_c\" 1>&6\n-echo \"configure:8441: checking assembler GOTOFF in data directives\" >&5\n+echo \"configure:8455: checking assembler GOTOFF in data directives\" >&5\n     gcc_cv_as_gotoff_in_data=no\n     if test $in_tree_gas = yes ; then\n        if test $gcc_cv_gas_major_version -eq 2 \\\n@@ -8471,7 +8485,7 @@ EOF\n \n   ia64*-*-*)\n     echo $ac_n \"checking assembler supports ltoffx and ldxmov\"\"... $ac_c\" 1>&6\n-echo \"configure:8475: checking assembler supports ltoffx and ldxmov\" >&5\n+echo \"configure:8489: checking assembler supports ltoffx and ldxmov\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_ltoffx_ldxmov_relocs'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -8516,7 +8530,7 @@ EOF\n esac\n \n echo $ac_n \"checking assembler dwarf2 debug_line support\"\"... $ac_c\" 1>&6\n-echo \"configure:8520: checking assembler dwarf2 debug_line support\" >&5\n+echo \"configure:8534: checking assembler dwarf2 debug_line support\" >&5\n gcc_cv_as_dwarf2_debug_line=no\n # ??? Not all targets support dwarf2 debug_line, even within a version\n # of gas.  Moreover, we need to emit a valid instruction to trigger any\n@@ -8578,7 +8592,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_dwarf2_debug_line\" 1>&6\n \n echo $ac_n \"checking assembler --gdwarf2 support\"\"... $ac_c\" 1>&6\n-echo \"configure:8582: checking assembler --gdwarf2 support\" >&5\n+echo \"configure:8596: checking assembler --gdwarf2 support\" >&5\n gcc_cv_as_gdwarf2_flag=no\n if test $in_tree_gas = yes ; then\n    if test $gcc_cv_gas_major_version -eq 2 \\\n@@ -8612,7 +8626,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_gdwarf2_flag\" 1>&6\n \n echo $ac_n \"checking assembler --gstabs support\"\"... $ac_c\" 1>&6\n-echo \"configure:8616: checking assembler --gstabs support\" >&5\n+echo \"configure:8630: checking assembler --gstabs support\" >&5\n gcc_cv_as_gstabs_flag=no\n if test $in_tree_gas = yes ; then\n    if test $gcc_cv_gas_major_version -eq 2 \\\n@@ -8645,7 +8659,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_gstabs_flag\" 1>&6\n \n echo $ac_n \"checking linker read-only and read-write section mixing\"\"... $ac_c\" 1>&6\n-echo \"configure:8649: checking linker read-only and read-write section mixing\" >&5\n+echo \"configure:8663: checking linker read-only and read-write section mixing\" >&5\n gcc_cv_ld_ro_rw_mix=unknown\n if test $in_tree_ld = yes ; then\n   if test \"$gcc_cv_gld_major_version\" -eq 2 -a \"$gcc_cv_gld_minor_version\" -ge 10 -o \"$gcc_cv_gld_major_version\" -gt 2 && grep 'EMUL = elf' ../ld/Makefile > /dev/null; then\n@@ -8683,7 +8697,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_ld_ro_rw_mix\" 1>&6\n \n echo $ac_n \"checking linker PT_GNU_EH_FRAME support\"\"... $ac_c\" 1>&6\n-echo \"configure:8687: checking linker PT_GNU_EH_FRAME support\" >&5\n+echo \"configure:8701: checking linker PT_GNU_EH_FRAME support\" >&5\n gcc_cv_ld_eh_frame_hdr=no\n if test $in_tree_ld = yes ; then\n   if test \"$gcc_cv_gld_major_version\" -eq 2 -a \"$gcc_cv_gld_minor_version\" -ge 12 -o \"$gcc_cv_gld_major_version\" -gt 2 && grep 'EMUL = elf' ../ld/Makefile > /dev/null; then\n@@ -8707,7 +8721,7 @@ echo \"$ac_t\"\"$gcc_cv_ld_eh_frame_hdr\" 1>&6\n case \"$target\" in\n   mips*-*-*)\n     echo $ac_n \"checking whether libgloss uses STARTUP directives consistently\"\"... $ac_c\" 1>&6\n-echo \"configure:8711: checking whether libgloss uses STARTUP directives consistently\" >&5\n+echo \"configure:8725: checking whether libgloss uses STARTUP directives consistently\" >&5\n     gcc_cv_mips_libgloss_startup=no\n     gcc_cv_libgloss_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/libgloss\n     if test \"x$exec_prefix\" = xNONE; then\n@@ -8912,7 +8926,7 @@ fi\n \n \n echo $ac_n \"checking whether to enable maintainer-specific portions of Makefiles\"\"... $ac_c\" 1>&6\n-echo \"configure:8916: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n+echo \"configure:8930: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n     # Check whether --enable-maintainer-mode or --disable-maintainer-mode was given.\n if test \"${enable_maintainer_mode+set}\" = set; then\n   enableval=\"$enable_maintainer_mode\""}, {"sha": "be087f2c74e90f659533f31c431ab24b7626d3cb", "filename": "gcc/configure.in", "status": "modified", "additions": 35, "deletions": 21, "changes": 56, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f9c1196affcade31dc13b30cdf5eb727c59fe8bf/gcc%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f9c1196affcade31dc13b30cdf5eb727c59fe8bf/gcc%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.in?ref=f9c1196affcade31dc13b30cdf5eb727c59fe8bf", "patch": "@@ -1437,22 +1437,6 @@ case $use_collect2 in\n     ;;\n esac\n \n-# If we have gas in the build tree, make a link to it.\n-if test -f ../gas/Makefile; then\n-\trm -f as; $symbolic_link ../gas/as-new$host_exeext as$host_exeext 2>/dev/null\n-fi\n-\n-# If we have nm and objdump in the build tree, make a link to them.\n-if test -f ../binutils/Makefile; then\n-\trm -f nm; $symbolic_link ../binutils/nm-new$host_exeext nm$host_exeext 2>/dev/null\n-\trm -f objdump; $symbolic_link ../binutils/objdump$host_exeext objdump$host_exeext 2>/dev/null\n-fi\n-\n-# If we have ld in the build tree, make a link to it.\n-if test -f ../ld/Makefile; then\n-\trm -f collect-ld; $symbolic_link ../ld/ld-new$host_exeext collect-ld$host_exeext 2>/dev/null\n-fi\n-\n # Identify the assembler which will work hand-in-glove with the newly\n # built GCC, so that we can examine its features.  This is the assembler\n # which will be driven by the driver program.\n@@ -1478,6 +1462,8 @@ elif test -f $gcc_cv_as_gas_srcdir/configure.in \\\n   # Single tree build which includes gas.\n   in_tree_gas=yes\n   _gcc_COMPUTE_GAS_VERSION\n+  rm -f as$host_exeext\n+  $symbolic_link ../gas/as-new$host_exeext as$host_exeext 2>/dev/null\n fi\n \n if test \"x$gcc_cv_as\" = x; then\n@@ -1566,9 +1552,9 @@ if test -x \"$DEFAULT_LINKER\"; then\n \tgcc_cv_ld=\"$DEFAULT_LINKER\"\n elif test -x \"$LD\"; then\n \tgcc_cv_ld=\"$LD\"\n-elif test -x ld$host_exeext; then\n+elif test -x collect-ld$host_exeext; then\n \t# Build using linker in the current directory.\n-\tgcc_cv_ld=./ld$host_exeext\n+\tgcc_cv_ld=./collect-ld$host_exeext\n elif test -f $gcc_cv_ld_gld_srcdir/configure.in \\\n      && test -f ../ld/Makefile; then\n \t# Single tree build which includes ld.\n@@ -1586,6 +1572,9 @@ changequote(,)dnl\n \tgcc_cv_gld_major_version=`expr \"$gcc_cv_gld_version\" : \"VERSION=\\([0-9]*\\)\"`\n \tgcc_cv_gld_minor_version=`expr \"$gcc_cv_gld_version\" : \"VERSION=[0-9]*\\.\\([0-9]*\\)\"`\n changequote([,])dnl\n+\trm -f collect-ld$host_exeext\n+\t$symbolic_link ../ld/ld-new$host_exeext collect-ld$host_exeext \\\n+\t\t2>/dev/null\n fi\n \n if test \"x$gcc_cv_ld\" = x; then\n@@ -1657,26 +1646,51 @@ case $in_tree_ld in\n esac\n \n # Figure out what nm we will be using.\n+gcc_cv_binutils_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/binutils\n AC_MSG_CHECKING(what nm to use)\n+in_tree_nm=no\n if test -x nm$host_exeext; then\n \tgcc_cv_nm=./nm$host_exeext\n+elif test -f $gcc_cv_binutils_srcdir/configure.in \\\n+     && test -f ../binutils/Makefile; then\n+\t# Single tree build which includes binutils.\n+\tin_tree_nm=yes\n+\tgcc_cv_nm=./nm$host_exeext\n+\trm -f nm$host_exeext\n+\t$symbolic_link ../binutils/nm-new$host_exeext nm$host_exeext 2>/dev/null\n elif test \"x$program_prefix\" != xNONE; then\n \tgcc_cv_nm=${program_prefix}nm$host_exeext\n else\n \tgcc_cv_nm=`echo nm | sed ${program_transform_name}`$host_exeext\n fi\n-AC_MSG_RESULT($gcc_cv_nm)\n+case $in_tree_nm in\n+  yes) AC_MSG_RESULT(\"newly built nm\") ;;\n+  no)  AC_MSG_RESULT($gcc_cv_nm) ;;\n+esac\n \n # Figure out what objdump we will be using.\n AC_MSG_CHECKING(what objdump to use)\n+in_tree_objdump=no\n if test -x objdump$host_exeext; then\n \tgcc_cv_objdump=./objdump$host_exeext\n+elif test -f $gcc_cv_binutils_srcdir/configure.in \\\n+     && test -f ../binutils/Makefile; then\n+\t# Single tree build which includes binutils.\n+\tin_tree_objdump=yes\n+\tgcc_cv_objdump=./objdump$host_exeext\n+\trm -f objdump$host_exeext\n+\t$symbolic_link ../binutils/objdump$host_exeext \\\n+\t\tobjdump$host_exeext 2>/dev/null\n elif test \"x$program_prefix\" != xNONE; then\n \tgcc_cv_objdump=${program_prefix}objdump$host_exeext\n else\n-\tgcc_cv_objdump=`echo objdump | sed ${program_transform_name}`$host_exeext\n+\tgcc_cv_objdump=`echo objdump | \\\n+\t\tsed ${program_transform_name}`$host_exeext\n fi\n-AC_MSG_RESULT($gcc_cv_objdump)\n+case $in_tree_objdump in\n+  yes) AC_MSG_RESULT(\"newly built objdump\") ;;\n+  no)  AC_MSG_RESULT($gcc_cv_objdump) ;;\n+esac\n \n # Figure out what assembler alignment features are present.\n AC_MSG_CHECKING(assembler alignment features)"}]}