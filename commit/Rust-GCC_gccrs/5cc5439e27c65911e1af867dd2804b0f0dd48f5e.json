{"sha": "5cc5439e27c65911e1af867dd2804b0f0dd48f5e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWNjNTQzOWUyN2M2NTkxMWUxYWY4NjdkZDI4MDRiMGYwZGQ0OGY1ZQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@nildram.co.uk", "date": "2008-01-18T00:28:28Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2008-01-18T00:28:28Z"}, "message": "re PR fortran/34686 (Aliasing bug when returning character pointers)\n\n2008-01-18  Richard Sandiford  <rsandifo@nildram.co.uk>\n\n       PR fortran/34686\n       * trans-expr.c (gfc_conv_function_call): Use proper\n       type for returned character pointers.\n\nFrom-SVN: r131620", "tree": {"sha": "7319fe4f3f288420ff28d488c2ac9f1839e3026d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7319fe4f3f288420ff28d488c2ac9f1839e3026d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5cc5439e27c65911e1af867dd2804b0f0dd48f5e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5cc5439e27c65911e1af867dd2804b0f0dd48f5e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5cc5439e27c65911e1af867dd2804b0f0dd48f5e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5cc5439e27c65911e1af867dd2804b0f0dd48f5e/comments", "author": null, "committer": null, "parents": [{"sha": "b80034e81f2d50ac03223fb996349ad7814d3c6a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b80034e81f2d50ac03223fb996349ad7814d3c6a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b80034e81f2d50ac03223fb996349ad7814d3c6a"}], "stats": {"total": 14, "additions": 7, "deletions": 7}, "files": [{"sha": "ff0e63962a8412655fd05bb66e4b0364ede6115d", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5cc5439e27c65911e1af867dd2804b0f0dd48f5e/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5cc5439e27c65911e1af867dd2804b0f0dd48f5e/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=5cc5439e27c65911e1af867dd2804b0f0dd48f5e", "patch": "@@ -1,3 +1,9 @@\n+2008-01-18  Richard Sandiford  <rsandifo@nildram.co.uk>\n+\n+\tPR fortran/34686\n+\t* trans-expr.c (gfc_conv_function_call): Use proper\n+\ttype for returned character pointers.\n+\n 2008-01-17  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/34429"}, {"sha": "9e30a9938430426956161eece2bc417e7b123dff", "filename": "gcc/fortran/trans-expr.c", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5cc5439e27c65911e1af867dd2804b0f0dd48f5e/gcc%2Ffortran%2Ftrans-expr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5cc5439e27c65911e1af867dd2804b0f0dd48f5e/gcc%2Ffortran%2Ftrans-expr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-expr.c?ref=5cc5439e27c65911e1af867dd2804b0f0dd48f5e", "patch": "@@ -2660,13 +2660,7 @@ gfc_conv_function_call (gfc_se * se, gfc_symbol * sym,\n \t     character pointers.  */\n \t  if (sym->attr.pointer || sym->attr.allocatable)\n \t    {\n-\t      /* Build char[0:len-1] * pstr.  */\n-\t      tmp = fold_build2 (MINUS_EXPR, gfc_charlen_type_node, len,\n-\t\t\t\t build_int_cst (gfc_charlen_type_node, 1));\n-\t      tmp = build_range_type (gfc_array_index_type,\n-\t\t\t\t      gfc_index_zero_node, tmp);\n-\t      tmp = build_array_type (gfc_character1_type_node, tmp);\n-\t      var = gfc_create_var (build_pointer_type (tmp), \"pstr\");\n+\t      var = gfc_create_var (type, \"pstr\");\n \n \t      /* Provide an address expression for the function arguments.  */\n \t      var = build_fold_addr_expr (var);"}]}