{"sha": "77753f4dae3cd3188442e3137e6a4c4040d6e644", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Nzc3NTNmNGRhZTNjZDMxODg0NDJlMzEzN2U2YTRjNDA0MGQ2ZTY0NA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2011-12-19T14:24:29Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2011-12-19T14:24:29Z"}, "message": "re PR tree-optimization/51596 (ICE: verify_flow_info failed: BB 6 can not throw but has an EH edge with -fnon-call-exceptions)\n\n\tPR tree-optimization/51596\n\t* tree-cfg.c (replace_uses_by): Call gimple_purge_dead_eh_edges\n\twhen needed.\n\n\t* g++.dg/opt/pr51596.C: New test.\n\nFrom-SVN: r182481", "tree": {"sha": "cc979d911c17471d4103c96caf085aed7e44c878", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cc979d911c17471d4103c96caf085aed7e44c878"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/77753f4dae3cd3188442e3137e6a4c4040d6e644", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77753f4dae3cd3188442e3137e6a4c4040d6e644", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77753f4dae3cd3188442e3137e6a4c4040d6e644", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77753f4dae3cd3188442e3137e6a4c4040d6e644/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "083481d85c2d1ee12392667f9b74ea404872b988", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/083481d85c2d1ee12392667f9b74ea404872b988", "html_url": "https://github.com/Rust-GCC/gccrs/commit/083481d85c2d1ee12392667f9b74ea404872b988"}], "stats": {"total": 49, "additions": 48, "deletions": 1}, "files": [{"sha": "57f9e4e2b08a6e30d9081c188e4ca9e0da9e6b72", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77753f4dae3cd3188442e3137e6a4c4040d6e644/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77753f4dae3cd3188442e3137e6a4c4040d6e644/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=77753f4dae3cd3188442e3137e6a4c4040d6e644", "patch": "@@ -1,5 +1,9 @@\n 2011-12-19  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR tree-optimization/51596\n+\t* tree-cfg.c (replace_uses_by): Call gimple_purge_dead_eh_edges\n+\twhen needed.\n+\n \tPR middle-end/51590\n \tPR tree-optimization/51606\n \t* tree-vect-patterns.c (append_pattern_def_seq, new_pattern_def_seq):"}, {"sha": "a7c1c48a37cf871f55cccc0169c1d95d81bb5caf", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77753f4dae3cd3188442e3137e6a4c4040d6e644/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77753f4dae3cd3188442e3137e6a4c4040d6e644/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=77753f4dae3cd3188442e3137e6a4c4040d6e644", "patch": "@@ -1,5 +1,8 @@\n 2011-12-19  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR tree-optimization/51596\n+\t* g++.dg/opt/pr51596.C: New test.\n+\n \tPR middle-end/51590\n \tPR tree-optimization/51606\n \t* gcc.dg/vect/pr51590.c: New test."}, {"sha": "2ed94812de3b05aa0f9e7e9add8b5e4f6d76e7dd", "filename": "gcc/testsuite/g++.dg/opt/pr51596.C", "status": "added", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77753f4dae3cd3188442e3137e6a4c4040d6e644/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fpr51596.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77753f4dae3cd3188442e3137e6a4c4040d6e644/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fpr51596.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fpr51596.C?ref=77753f4dae3cd3188442e3137e6a4c4040d6e644", "patch": "@@ -0,0 +1,39 @@\n+// PR tree-optimization/51596\n+// { dg-do compile }\n+// { dg-options \"-O -fnon-call-exceptions\" }\n+\n+struct A { float v[2]; };\n+struct B { int v[2]; };\n+\n+struct C\n+{\n+  B c;\n+  C f ()\n+  {\n+    B b;\n+    for (int i = 0; i < 2; i++)\n+      b.v[i] = c.v[i];\n+    return *this;\n+  }\n+};\n+\n+struct D\n+{\n+  A d;\n+  D (B x)\n+  {\n+    for (int i = 0; i < 2; i++)\n+      d.v[i] = x.v[i];\n+  }\n+};\n+\n+int bar ();\n+\n+C i;\n+\n+void\n+foo ()\n+{\n+  while (bar ())\n+    D (i.f ().c);\n+}"}, {"sha": "df5695c2ec707036eaf40ed489805217b0d46a40", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77753f4dae3cd3188442e3137e6a4c4040d6e644/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77753f4dae3cd3188442e3137e6a4c4040d6e644/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=77753f4dae3cd3188442e3137e6a4c4040d6e644", "patch": "@@ -1627,7 +1627,8 @@ replace_uses_by (tree name, tree val)\n \t  if (fold_stmt (&gsi))\n \t    stmt = gsi_stmt (gsi);\n \n-\t  maybe_clean_or_replace_eh_stmt (orig_stmt, stmt);\n+\t  if (maybe_clean_or_replace_eh_stmt (orig_stmt, stmt))\n+\t    gimple_purge_dead_eh_edges (gimple_bb (stmt));\n \n \t  update_stmt (stmt);\n \t}"}]}