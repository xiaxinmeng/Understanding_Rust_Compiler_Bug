{"sha": "47c147b03f38ea4218847a77e719584ad47e7d89", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDdjMTQ3YjAzZjM4ZWE0MjE4ODQ3YTc3ZTcxOTU4NGFkNDdlN2Q4OQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2016-01-14T21:36:12Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2016-01-14T21:36:12Z"}, "message": "re PR c/69272 (ICE: in c_builtin_function, at c/c-decl.c:4020 with -fgnu-tm)\n\nPR c/69272\nPR tree-opt/68964\n\n  * trans-mem.c (tm_log_emit_stmt): Fix unit size to bit size.\n  * tree.c (build_tm_vector_builtins): Use builtin_decl_explicit_p\n  instead of builtin_decl_declared_p to test for declaration.\n\nFrom-SVN: r232390", "tree": {"sha": "7857280d909be5bd6097cfa4d808f5c132806b8d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7857280d909be5bd6097cfa4d808f5c132806b8d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/47c147b03f38ea4218847a77e719584ad47e7d89", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/47c147b03f38ea4218847a77e719584ad47e7d89", "html_url": "https://github.com/Rust-GCC/gccrs/commit/47c147b03f38ea4218847a77e719584ad47e7d89", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/47c147b03f38ea4218847a77e719584ad47e7d89/comments", "author": null, "committer": null, "parents": [{"sha": "4318655262314b8c558b07e9f7b4a98a806b25b4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4318655262314b8c558b07e9f7b4a98a806b25b4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4318655262314b8c558b07e9f7b4a98a806b25b4"}], "stats": {"total": 20, "additions": 14, "deletions": 6}, "files": [{"sha": "ba70e825e8102e8cc3964824b0f67cca3f3504d0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/47c147b03f38ea4218847a77e719584ad47e7d89/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/47c147b03f38ea4218847a77e719584ad47e7d89/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=47c147b03f38ea4218847a77e719584ad47e7d89", "patch": "@@ -1,3 +1,11 @@\n+2016-01-14  Richard Henderson  <rth@redhat.com>\n+\n+\tPR c/69272\n+\tPR tree-opt/68964\n+\t* trans-mem.c (tm_log_emit_stmt): Fix unit size to bit size.\n+\t* tree.c (build_tm_vector_builtins): Use builtin_decl_explicit_p\n+\tinstead of builtin_decl_declared_p to test for declaration.\n+\n 2016-01-14  Nicklas Bo Jensen  <nbjensen@gmail.com>\n \n         * doc/loop.texi (Loop Analysis and Representation): Document"}, {"sha": "b2047600dcb93469662aec8be40a510264c238a0", "filename": "gcc/trans-mem.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/47c147b03f38ea4218847a77e719584ad47e7d89/gcc%2Ftrans-mem.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/47c147b03f38ea4218847a77e719584ad47e7d89/gcc%2Ftrans-mem.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftrans-mem.c?ref=47c147b03f38ea4218847a77e719584ad47e7d89", "patch": "@@ -1229,16 +1229,16 @@ tm_log_emit_stmt (tree addr, gimple *stmt)\n \tunhandled_vec:\n \t  switch (type_size)\n \t    {\n-\t    case 1:\n+\t    case 8:\n \t      code = BUILT_IN_TM_LOG_1;\n \t      break;\n-\t    case 2:\n+\t    case 16:\n \t      code = BUILT_IN_TM_LOG_2;\n \t      break;\n-\t    case 4:\n+\t    case 32:\n \t      code = BUILT_IN_TM_LOG_4;\n \t      break;\n-\t    case 8:\n+\t    case 64:\n \t      code = BUILT_IN_TM_LOG_8;\n \t      break;\n \t    }"}, {"sha": "8ac2d90dea951e2e9c84da4274bfc4723b35dc4b", "filename": "gcc/tree.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/47c147b03f38ea4218847a77e719584ad47e7d89/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/47c147b03f38ea4218847a77e719584ad47e7d89/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=47c147b03f38ea4218847a77e719584ad47e7d89", "patch": "@@ -10393,7 +10393,7 @@ build_tm_vector_builtins (void)\n   /* By default, 64 bit vectors go through the long long helpers.  */\n \n   /* If a 128-bit vector is supported, declare those builtins.  */\n-  if (!builtin_decl_declared_p (BUILT_IN_TM_STORE_M128)\n+  if (!builtin_decl_explicit_p (BUILT_IN_TM_STORE_M128)\n       && ((vtype = find_tm_vector_type (128, SImode))\n \t  || (vtype = find_tm_vector_type (128, SFmode))))\n     {\n@@ -10430,7 +10430,7 @@ build_tm_vector_builtins (void)\n     }\n \n   /* If a 256-bit vector is supported, declare those builtins.  */\n-  if (!builtin_decl_declared_p (BUILT_IN_TM_STORE_M256)\n+  if (!builtin_decl_explicit_p (BUILT_IN_TM_STORE_M256)\n       && ((vtype = find_tm_vector_type (256, SImode))\n \t  || (vtype = find_tm_vector_type (256, SFmode))))\n     {"}]}