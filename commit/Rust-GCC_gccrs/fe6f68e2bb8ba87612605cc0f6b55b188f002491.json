{"sha": "fe6f68e2bb8ba87612605cc0f6b55b188f002491", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmU2ZjY4ZTJiYjhiYTg3NjEyNjA1Y2MwZjZiNTViMTg4ZjAwMjQ5MQ==", "commit": {"author": {"name": "James Greenhalgh", "email": "james.greenhalgh@arm.com", "date": "2013-09-05T15:53:37Z"}, "committer": {"name": "James Greenhalgh", "email": "jgreenhalgh@gcc.gnu.org", "date": "2013-09-05T15:53:37Z"}, "message": "[AArch64] Fix categorisation of the frecp* insns.\n\ngcc/\n\n\t* config/aarch64/aarch64.md\n\t(type): Remove frecpe, frecps, frecpx.\n\t(aarch64_frecp<FRECP:frecp_suffix><mode>): Move to aarch64-simd.md,\n\tfix to be a TARGET_SIMD instruction.\n\t(aarch64_frecps): Remove.\n\t* config/aarch64/aarch64-simd.md\n\t(aarch64_frecp<FRECP:frecp_suffix><mode>): New, moved from aarch64.md\n \t(aarch64_frecps<mode>): Handle all float/vector of float modes.\n\nFrom-SVN: r202292", "tree": {"sha": "8c8a2e49078948520f48b3ae7e0e4b606af7eb54", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8c8a2e49078948520f48b3ae7e0e4b606af7eb54"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fe6f68e2bb8ba87612605cc0f6b55b188f002491", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe6f68e2bb8ba87612605cc0f6b55b188f002491", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe6f68e2bb8ba87612605cc0f6b55b188f002491", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe6f68e2bb8ba87612605cc0f6b55b188f002491/comments", "author": {"login": "jgreenhalgh-arm", "id": 6104025, "node_id": "MDQ6VXNlcjYxMDQwMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/6104025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jgreenhalgh-arm", "html_url": "https://github.com/jgreenhalgh-arm", "followers_url": "https://api.github.com/users/jgreenhalgh-arm/followers", "following_url": "https://api.github.com/users/jgreenhalgh-arm/following{/other_user}", "gists_url": "https://api.github.com/users/jgreenhalgh-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jgreenhalgh-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jgreenhalgh-arm/subscriptions", "organizations_url": "https://api.github.com/users/jgreenhalgh-arm/orgs", "repos_url": "https://api.github.com/users/jgreenhalgh-arm/repos", "events_url": "https://api.github.com/users/jgreenhalgh-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/jgreenhalgh-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6e4150e1d402f8d1c8f23dfbdb5157978133c42f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e4150e1d402f8d1c8f23dfbdb5157978133c42f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e4150e1d402f8d1c8f23dfbdb5157978133c42f"}], "stats": {"total": 55, "additions": 25, "deletions": 30}, "files": [{"sha": "91f41b16453505cbadf8ddc5528cf44138de4ba4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe6f68e2bb8ba87612605cc0f6b55b188f002491/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe6f68e2bb8ba87612605cc0f6b55b188f002491/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fe6f68e2bb8ba87612605cc0f6b55b188f002491", "patch": "@@ -1,3 +1,14 @@\n+2013-09-05  James Greenhalgh  <james.greenhalgh@arm.com>\n+\n+\t* config/aarch64/aarch64.md\n+\t(type): Remove frecpe, frecps, frecpx.\n+\t(aarch64_frecp<FRECP:frecp_suffix><mode>): Move to aarch64-simd.md,\n+\tfix to be a TARGET_SIMD instruction.\n+\t(aarch64_frecps): Remove.\n+\t* config/aarch64/aarch64-simd.md\n+\t(aarch64_frecp<FRECP:frecp_suffix><mode>): New, moved from aarch64.md\n+\t(aarch64_frecps<mode>): Handle all float/vector of float modes.\n+\n 2013-09-05  James Greenhalgh  <james.greenhalgh@arm.com>\n \t    Sofiane Naci  <sofiane.naci@arm.com>\n "}, {"sha": "c085fb9c49958c5f402a28c0b39fe45ec1aadbc7", "filename": "gcc/config/aarch64/aarch64-simd.md", "status": "modified", "additions": 14, "deletions": 4, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe6f68e2bb8ba87612605cc0f6b55b188f002491/gcc%2Fconfig%2Faarch64%2Faarch64-simd.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe6f68e2bb8ba87612605cc0f6b55b188f002491/gcc%2Fconfig%2Faarch64%2Faarch64-simd.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64-simd.md?ref=fe6f68e2bb8ba87612605cc0f6b55b188f002491", "patch": "@@ -4179,13 +4179,23 @@\n    (set_attr \"simd_mode\" \"<MODE>\")]\n )\n \n+(define_insn \"aarch64_frecp<FRECP:frecp_suffix><mode>\"\n+  [(set (match_operand:GPF 0 \"register_operand\" \"=w\")\n+\t(unspec:GPF [(match_operand:GPF 1 \"register_operand\" \"w\")]\n+\t\t    FRECP))]\n+  \"TARGET_SIMD\"\n+  \"frecp<FRECP:frecp_suffix>\\\\t%<s>0, %<s>1\"\n+  [(set_attr \"simd_type\" \"simd_frecp<FRECP:frecp_suffix>\")\n+   (set_attr \"mode\" \"<MODE>\")]\n+)\n+\n (define_insn \"aarch64_frecps<mode>\"\n-  [(set (match_operand:VDQF 0 \"register_operand\" \"=w\")\n-\t(unspec:VDQF [(match_operand:VDQF 1 \"register_operand\" \"w\")\n-\t\t     (match_operand:VDQF 2 \"register_operand\" \"w\")]\n+  [(set (match_operand:VALLF 0 \"register_operand\" \"=w\")\n+\t(unspec:VALLF [(match_operand:VALLF 1 \"register_operand\" \"w\")\n+\t\t     (match_operand:VALLF 2 \"register_operand\" \"w\")]\n \t\t    UNSPEC_FRECPS))]\n   \"TARGET_SIMD\"\n-  \"frecps\\\\t%0.<Vtype>, %1.<Vtype>, %2.<Vtype>\"\n+  \"frecps\\\\t%<v>0<Vmtype>, %<v>1<Vmtype>, %<v>2<Vmtype>\"\n   [(set_attr \"simd_type\" \"simd_frecps\")\n    (set_attr \"simd_mode\" \"<MODE>\")]\n )"}, {"sha": "4dfd2ab83d00601dc8192ad47fec2c1e404d1264", "filename": "gcc/config/aarch64/aarch64.md", "status": "modified", "additions": 0, "deletions": 26, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe6f68e2bb8ba87612605cc0f6b55b188f002491/gcc%2Fconfig%2Faarch64%2Faarch64.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe6f68e2bb8ba87612605cc0f6b55b188f002491/gcc%2Fconfig%2Faarch64%2Faarch64.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.md?ref=fe6f68e2bb8ba87612605cc0f6b55b188f002491", "patch": "@@ -240,9 +240,6 @@\n    fmovf2i,\\\n    fmovi2f,\\\n    fmul,\\\n-   frecpe,\\\n-   frecps,\\\n-   frecpx,\\\n    frint,\\\n    fsqrt,\\\n    load_acq,\\\n@@ -3946,29 +3943,6 @@\n    (set_attr \"mode\" \"<MODE>\")]\n )\n \n-(define_insn \"aarch64_frecp<FRECP:frecp_suffix><mode>\"\n-  [(set (match_operand:GPF 0 \"register_operand\" \"=w\")\n-\t(unspec:GPF [(match_operand:GPF 1 \"register_operand\" \"w\")]\n-\t\t    FRECP))]\n-  \"TARGET_FLOAT\"\n-  \"frecp<FRECP:frecp_suffix>\\\\t%<s>0, %<s>1\"\n-  [(set_attr \"v8type\" \"frecp<FRECP:frecp_suffix>\")\n-   (set_attr \"type\" \"ffarith<s>\")\n-   (set_attr \"mode\" \"<MODE>\")]\n-)\n-\n-(define_insn \"aarch64_frecps<mode>\"\n-  [(set (match_operand:GPF 0 \"register_operand\" \"=w\")\n-\t(unspec:GPF [(match_operand:GPF 1 \"register_operand\" \"w\")\n-\t\t     (match_operand:GPF 2 \"register_operand\" \"w\")]\n-\t\t    UNSPEC_FRECPS))]\n-  \"TARGET_FLOAT\"\n-  \"frecps\\\\t%<s>0, %<s>1, %<s>2\"\n-  [(set_attr \"v8type\" \"frecps\")\n-   (set_attr \"type\" \"ffarith<s>\")\n-   (set_attr \"mode\" \"<MODE>\")]\n-)\n-\n ;; -------------------------------------------------------------------\n ;; Reload support\n ;; -------------------------------------------------------------------"}]}