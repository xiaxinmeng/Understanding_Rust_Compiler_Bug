{"sha": "55b3299dcd1e863843079223967f20da5ff0af78", "node_id": "C_kwDOANBUbNoAKDU1YjMyOTlkY2QxZTg2Mzg0MzA3OTIyMzk2N2YyMGRhNWZmMGFmNzg", "commit": {"author": {"name": "Aldy Hernandez", "email": "aldyh@redhat.com", "date": "2021-09-24T10:42:05Z"}, "committer": {"name": "Aldy Hernandez", "email": "aldyh@redhat.com", "date": "2021-09-24T14:49:51Z"}, "message": "path solver: Avoid further lookups when range is defined in block.\n\nIf an SSA is defined in the current block, there is no need to query\nrange_on_path_entry for additional information.\n\ngcc/ChangeLog:\n\n\t* gimple-range-path.cc (path_range_query::path_range_query):\n\tMove debugging header...\n\t(path_range_query::precompute_ranges): ...here.\n\t(path_range_query::internal_range_of_expr): Do not call\n\trange_on_path_entry if NAME is defined in the current block.", "tree": {"sha": "d3ba7bb9cd9c6a11bdade6ece6116eb1748cb7ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d3ba7bb9cd9c6a11bdade6ece6116eb1748cb7ae"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/55b3299dcd1e863843079223967f20da5ff0af78", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55b3299dcd1e863843079223967f20da5ff0af78", "html_url": "https://github.com/Rust-GCC/gccrs/commit/55b3299dcd1e863843079223967f20da5ff0af78", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55b3299dcd1e863843079223967f20da5ff0af78/comments", "author": {"login": "aldyh", "id": 12937877, "node_id": "MDQ6VXNlcjEyOTM3ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/12937877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldyh", "html_url": "https://github.com/aldyh", "followers_url": "https://api.github.com/users/aldyh/followers", "following_url": "https://api.github.com/users/aldyh/following{/other_user}", "gists_url": "https://api.github.com/users/aldyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldyh/subscriptions", "organizations_url": "https://api.github.com/users/aldyh/orgs", "repos_url": "https://api.github.com/users/aldyh/repos", "events_url": "https://api.github.com/users/aldyh/events{/privacy}", "received_events_url": "https://api.github.com/users/aldyh/received_events", "type": "User", "site_admin": false}, "committer": {"login": "aldyh", "id": 12937877, "node_id": "MDQ6VXNlcjEyOTM3ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/12937877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldyh", "html_url": "https://github.com/aldyh", "followers_url": "https://api.github.com/users/aldyh/followers", "following_url": "https://api.github.com/users/aldyh/following{/other_user}", "gists_url": "https://api.github.com/users/aldyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldyh/subscriptions", "organizations_url": "https://api.github.com/users/aldyh/orgs", "repos_url": "https://api.github.com/users/aldyh/repos", "events_url": "https://api.github.com/users/aldyh/events{/privacy}", "received_events_url": "https://api.github.com/users/aldyh/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9b11107ed72ca543af41dbb3226e16b61d31b098", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b11107ed72ca543af41dbb3226e16b61d31b098", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9b11107ed72ca543af41dbb3226e16b61d31b098"}], "stats": {"total": 9, "additions": 3, "deletions": 6}, "files": [{"sha": "0738a5ca15998e80396992189a0a0bddbb1dead4", "filename": "gcc/gimple-range-path.cc", "status": "modified", "additions": 3, "deletions": 6, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55b3299dcd1e863843079223967f20da5ff0af78/gcc%2Fgimple-range-path.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55b3299dcd1e863843079223967f20da5ff0af78/gcc%2Fgimple-range-path.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-range-path.cc?ref=55b3299dcd1e863843079223967f20da5ff0af78", "patch": "@@ -39,9 +39,6 @@ along with GCC; see the file COPYING3.  If not see\n path_range_query::path_range_query (gimple_ranger &ranger, bool resolve)\n   : m_ranger (ranger)\n {\n-  if (DEBUG_SOLVER)\n-    fprintf (dump_file, \"\\n*********** path_range_query ******************\\n\");\n-\n   m_cache = new ssa_global_cache;\n   m_has_cache_entry = BITMAP_ALLOC (NULL);\n   m_path = NULL;\n@@ -173,9 +170,6 @@ path_range_query::internal_range_of_expr (irange &r, tree name, gimple *stmt)\n       if (TREE_CODE (name) == SSA_NAME)\n \tr.intersect (gimple_range_global (name));\n \n-      if (m_resolve && r.varying_p ())\n-\trange_on_path_entry (r, name);\n-\n       set_cache (r, name);\n       return true;\n     }\n@@ -467,6 +461,9 @@ void\n path_range_query::precompute_ranges (const vec<basic_block> &path,\n \t\t\t\t     const bitmap_head *imports)\n {\n+  if (DEBUG_SOLVER)\n+    fprintf (dump_file, \"\\n*********** path_range_query ******************\\n\");\n+\n   set_path (path);\n   bitmap_copy (m_imports, imports);\n   m_undefined_path = false;"}]}