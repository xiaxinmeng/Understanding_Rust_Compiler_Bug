{"sha": "2265b6fed12036c1219fabe3ce78ffd386646aaf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjI2NWI2ZmVkMTIwMzZjMTIxOWZhYmUzY2U3OGZmZDM4NjY0NmFhZg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2018-03-02T09:57:43Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2018-03-02T09:57:43Z"}, "message": "re PR ipa/83983 (FAIL: g++.dg/lto/pr83121  (test for LTO warnings, pr83121_0.C line 8))\n\n\tPR ipa/83983\n\t* ipa-devirt.c (odr_subtypes_equivalent_p): Get the ODR type of both\n\targuments if they are comparable.\n\nFrom-SVN: r258133", "tree": {"sha": "7118250c90b986098ebb6d324bc007ba1a17536b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7118250c90b986098ebb6d324bc007ba1a17536b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2265b6fed12036c1219fabe3ce78ffd386646aaf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2265b6fed12036c1219fabe3ce78ffd386646aaf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2265b6fed12036c1219fabe3ce78ffd386646aaf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2265b6fed12036c1219fabe3ce78ffd386646aaf/comments", "author": null, "committer": null, "parents": [{"sha": "587b2f674c954f9e5fd8786c655d763c090a85de", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/587b2f674c954f9e5fd8786c655d763c090a85de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/587b2f674c954f9e5fd8786c655d763c090a85de"}], "stats": {"total": 17, "additions": 14, "deletions": 3}, "files": [{"sha": "4649ffa4fd9885ada6d48725067aa030167d47e6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2265b6fed12036c1219fabe3ce78ffd386646aaf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2265b6fed12036c1219fabe3ce78ffd386646aaf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2265b6fed12036c1219fabe3ce78ffd386646aaf", "patch": "@@ -1,3 +1,9 @@\n+2018-03-02  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR ipa/83983\n+\t* ipa-devirt.c (odr_subtypes_equivalent_p): Get the ODR type of both\n+\targuments if they are comparable.\n+\n 2018-03-02  Richard Sandiford  <richard.sandiford@linaro.org>\n \n \tPR tree-optimization/84634"}, {"sha": "fae82072a7e90eb754bc96cca3684bbfdde20dac", "filename": "gcc/ipa-devirt.c", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2265b6fed12036c1219fabe3ce78ffd386646aaf/gcc%2Fipa-devirt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2265b6fed12036c1219fabe3ce78ffd386646aaf/gcc%2Fipa-devirt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-devirt.c?ref=2265b6fed12036c1219fabe3ce78ffd386646aaf", "patch": "@@ -684,9 +684,14 @@ odr_subtypes_equivalent_p (tree t1, tree t2,\n     {\n       if (!types_same_for_odr (t1, t2, true))\n         return false;\n-      /* Limit recursion: If subtypes are ODR types and we know\n-         that they are same, be happy.  */\n-      if (!odr_type_p (t1) || !get_odr_type (t1, true)->odr_violated)\n+      /* Limit recursion: if subtypes are ODR types and we know that they are\n+\t same, be happy.  We need to call get_odr_type on both subtypes since\n+\t we don't know which among t1 and t2 defines the common ODR type and\n+\t therefore which call will report the ODR violation, if any.  */\n+\t if (!odr_type_p (t1)\n+\t     || !odr_type_p (t2)\n+\t     || (!get_odr_type (t1, true)->odr_violated\n+\t\t && !get_odr_type (t2, true)->odr_violated))\n         return true;\n     }\n "}]}