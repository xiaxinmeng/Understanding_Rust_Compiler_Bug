{"sha": "c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzMzYjdiZjA0YTBhYmVhMGNhNWVkOGNhMWNiZGYwYTkxMjdhNjRkYg==", "commit": {"author": {"name": "Thomas Fitzsimmons", "email": "fitzsim@redhat.com", "date": "2005-04-05T23:46:09Z"}, "committer": {"name": "Thomas Fitzsimmons", "email": "fitzsim@gcc.gnu.org", "date": "2005-04-05T23:46:09Z"}, "message": "re PR libgcj/20750 (libgcj needs a --with-java-home configure option)\n\n2005-04-05  Thomas Fitzsimmons  <fitzsim@redhat.com>\n\n\t* doc/install.texi (Configuration): Document --with-java-home.\n\n2005-04-05  Thomas Fitzsimmons  <fitzsim@redhat.com>\n\n\tPR libgcj/20750\n\t* Makefile.am (AM_CXXFLAGS): Define JAVA_HOME.\n\t* Makefile.in: Regenerate.\n\t* configure.ac: Add --with-java-home option.\n\t* configure: Regenerate.\n\t* external/Makefile.in: Regenerate.\n\t* external/sax/Makefile.in: Regenerate.\n\t* external/w3c_dom/Makefile.in: Regenerate.\n\t* gcj/Makefile.in: Regenerate.\n\t* include/Makefile.in: Regenerate.\n\t* testsuite/Makefile.in: Regenerate.\n\t* java/lang/natRuntime.cc (insertSystemProperties): Set java.home\n\tto JAVA_HOME macro.\n\nFrom-SVN: r97671", "tree": {"sha": "3d80762c3fce1406e13c127ac58534a09471a60a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3d80762c3fce1406e13c127ac58534a09471a60a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/comments", "author": null, "committer": null, "parents": [{"sha": "c72a879da774d8893ab1ee132ddd7957da647dd5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c72a879da774d8893ab1ee132ddd7957da647dd5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c72a879da774d8893ab1ee132ddd7957da647dd5"}], "stats": {"total": 113, "additions": 107, "deletions": 6}, "files": [{"sha": "b70fd2cfc59867b4418db8ed5b02d367889a917f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db", "patch": "@@ -1,3 +1,7 @@\n+2005-04-05  Thomas Fitzsimmons  <fitzsim@redhat.com>\n+\n+\t* doc/install.texi (Configuration): Document --with-java-home.\n+\n 2005-04-05  Richard Henderson  <rth@redhat.com>\n \n \tPR target/20342"}, {"sha": "df43264f22595d841999492bfe20b3db29194470", "filename": "gcc/doc/install.texi", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/gcc%2Fdoc%2Finstall.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/gcc%2Fdoc%2Finstall.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finstall.texi?ref=c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db", "patch": "@@ -1035,6 +1035,13 @@ particularly useful if you intend to use several versions of GCC in\n parallel.  This is currently supported by @samp{libgfortran},\n @samp{libjava}, @samp{libmudflap}, @samp{libstdc++}, and @samp{libobjc}.\n \n+@item --with-java-home=@var{dirname}\n+This @samp{libjava} option overrides the default value of the\n+@samp{java.home} system property.  It is also used to set\n+@samp{sun.boot.class.path} to @file{@var{dirname}/lib/rt.jar}.  By\n+default @samp{java.home} is set to @file{@var{prefix}} and\n+@samp{sun.boot.class.path} to\n+@file{@var{datadir}/java/libgcj-@var{version}.jar}.\n \n @item --enable-languages=@var{lang1},@var{lang2},@dots{}\n Specify that only a particular subset of compilers and"}, {"sha": "d6fabf370b87cb35c5565abc54b3c66e75fa556b", "filename": "libjava/ChangeLog", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db", "patch": "@@ -1,3 +1,19 @@\n+2005-04-05  Thomas Fitzsimmons  <fitzsim@redhat.com>\n+\n+\tPR libgcj/20750\n+\t* Makefile.am (AM_CXXFLAGS): Define JAVA_HOME.\n+\t* Makefile.in: Regenerate.\n+\t* configure.ac: Add --with-java-home option.\n+\t* configure: Regenerate.\n+\t* external/Makefile.in: Regenerate.\n+\t* external/sax/Makefile.in: Regenerate.\n+\t* external/w3c_dom/Makefile.in: Regenerate.\n+\t* gcj/Makefile.in: Regenerate.\n+\t* include/Makefile.in: Regenerate.\n+\t* testsuite/Makefile.in: Regenerate.\n+\t* java/lang/natRuntime.cc (insertSystemProperties): Set java.home\n+\tto JAVA_HOME macro.\n+\n 2005-04-05  Tom Tromey  <tromey@redhat.com>\n \n \t* jni.cc (_Jv_JNI_GetAnyFieldID): Throw ClassNotFoundException."}, {"sha": "8d6a9a7f88d9c861bfb0bd0617fc2defbdc370d6", "filename": "libjava/Makefile.am", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/libjava%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/libjava%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.am?ref=c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db", "patch": "@@ -121,6 +121,14 @@ pkgconfig_DATA = libgcj.pc\n jardir = $(datadir)/java\n jar_DATA = libgcj-$(gcc_version).jar\n \n+if JAVA_HOME_SET\n+JAVA_HOME_DIR = $(JAVA_HOME)\n+BOOT_CLASS_PATH_DIR = $(JAVA_HOME)/lib/rt.jar\n+else\n+JAVA_HOME_DIR = $(prefix)\n+BOOT_CLASS_PATH_DIR = $(jardir)/$(jar_DATA)\n+endif\n+\n ## FIXME: Using libdir violates GNU coding standards.\n secdir = $(libdir)/security\n ## Where to install default logging property file.\n@@ -184,7 +192,8 @@ AM_CXXFLAGS = \\\n \t-D_GNU_SOURCE \\\n \t-DPREFIX=\"\\\"$(prefix)\\\"\" \\\n \t-DLIBDIR=\"\\\"$(libdir)\\\"\" \\\n-\t-DBOOT_CLASS_PATH=\"\\\"$(jardir)/$(jar_DATA)\\\"\" \\\n+        -DJAVA_HOME=\"\\\"$(JAVA_HOME_DIR)\\\"\" \\\n+        -DBOOT_CLASS_PATH=\"\\\"$(BOOT_CLASS_PATH_DIR)\\\"\" \\\n \t-DJAVA_EXT_DIRS=\"\\\"$(jardir)/ext\\\"\" \\\n \t-DGCJ_ENDORSED_DIRS=\"\\\"$(jardir)/gcj-endorsed\\\"\" \\\n \t-DLIBGCJ_DEFAULT_DATABASE=\"\\\"$(dbexecdir)/$(db_name)\\\"\" \\"}, {"sha": "ae0e5aba32e79cb450560512467ae310ed4c0b87", "filename": "libjava/Makefile.in", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/libjava%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/libjava%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.in?ref=c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db", "patch": "@@ -4242,6 +4242,9 @@ INSTALL_PROGRAM = @INSTALL_PROGRAM@\n INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n INTERPRETER = @INTERPRETER@\n+JAVA_HOME = @JAVA_HOME@\n+JAVA_HOME_SET_FALSE = @JAVA_HOME_SET_FALSE@\n+JAVA_HOME_SET_TRUE = @JAVA_HOME_SET_TRUE@\n JC1GCSPEC = @JC1GCSPEC@\n LDFLAGS = @LDFLAGS@\n LIBART_CFLAGS = @LIBART_CFLAGS@\n@@ -4450,6 +4453,10 @@ pkgconfigdir = $(libdir)/pkgconfig\n pkgconfig_DATA = libgcj.pc\n jardir = $(datadir)/java\n jar_DATA = libgcj-$(gcc_version).jar\n+@JAVA_HOME_SET_FALSE@JAVA_HOME_DIR = $(prefix)\n+@JAVA_HOME_SET_TRUE@JAVA_HOME_DIR = $(JAVA_HOME)\n+@JAVA_HOME_SET_FALSE@BOOT_CLASS_PATH_DIR = $(jardir)/$(jar_DATA)\n+@JAVA_HOME_SET_TRUE@BOOT_CLASS_PATH_DIR = $(JAVA_HOME)/lib/rt.jar\n secdir = $(libdir)/security\n propdir = $(libdir)\n dbexecdir = $(libdir)/gcj-$(gcc_version)\n@@ -4475,7 +4482,8 @@ AM_CXXFLAGS = \\\n \t-D_GNU_SOURCE \\\n \t-DPREFIX=\"\\\"$(prefix)\\\"\" \\\n \t-DLIBDIR=\"\\\"$(libdir)\\\"\" \\\n-\t-DBOOT_CLASS_PATH=\"\\\"$(jardir)/$(jar_DATA)\\\"\" \\\n+        -DJAVA_HOME=\"\\\"$(JAVA_HOME_DIR)\\\"\" \\\n+        -DBOOT_CLASS_PATH=\"\\\"$(BOOT_CLASS_PATH_DIR)\\\"\" \\\n \t-DJAVA_EXT_DIRS=\"\\\"$(jardir)/ext\\\"\" \\\n \t-DGCJ_ENDORSED_DIRS=\"\\\"$(jardir)/gcj-endorsed\\\"\" \\\n \t-DLIBGCJ_DEFAULT_DATABASE=\"\\\"$(dbexecdir)/$(db_name)\\\"\" \\"}, {"sha": "ae6e39f2aecb4ce61267e1f78fc2b09d256a55e2", "filename": "libjava/configure", "status": "modified", "additions": 35, "deletions": 3, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/libjava%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/libjava%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure?ref=c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db", "patch": "@@ -310,7 +310,7 @@ ac_includes_default=\"\\\n # include <unistd.h>\n #endif\"\n \n-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os build_subdir host_subdir target_subdir libgcj_basedir host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical LN_S mkinstalldirs CC ac_ct_CC EXEEXT OBJEXT CXX ac_ct_CXX CFLAGS CXXFLAGS LDFLAGS INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE CXXDEPMODE am__fastdepCXX_TRUE am__fastdepCXX_FALSE AS ac_ct_AS AR ac_ct_AR RANLIB ac_ct_RANLIB MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT LIBGCJ_CFLAGS LIBGCJ_CXXFLAGS LIBGCJ_JAVAFLAGS LIBGCJ_LD_SYMBOLIC INCLTDL LIBLTDL DIRLTDL LIBTOOL CXXCPP CPPFLAGS GCJ GCJFLAGS GCJDEPMODE am__fastdepGCJ_TRUE am__fastdepGCJ_FALSE subdirs TESTSUBDIR_TRUE TESTSUBDIR_FALSE ONESTEP_TRUE ONESTEP_FALSE LIBGCJDEBUG INTERPRETER LIBFFI LIBFFIINCS PLATFORM_INNER_NAT_HDRS CPP EGREP USING_WIN32_PLATFORM_TRUE USING_WIN32_PLATFORM_FALSE USING_POSIX_PLATFORM_TRUE USING_POSIX_PLATFORM_FALSE USING_ECOS_PLATFORM_TRUE USING_ECOS_PLATFORM_FALSE USING_DARWIN_CRT_TRUE USING_DARWIN_CRT_FALSE SYSTEMSPEC LIBGCJTESTSPEC ZLIBSPEC ZLIBTESTSPEC X_CFLAGS X_PRE_LIBS X_LIBS X_EXTRA_LIBS TOOLKIT XLIB_AWT_TRUE XLIB_AWT_FALSE GTK_AWT_TRUE GTK_AWT_FALSE GTK_CAIRO_TRUE GTK_CAIRO_FALSE PKG_CONFIG CAIRO_CFLAGS CAIRO_LIBS PANGOFT2_CFLAGS PANGOFT2_LIBS GCLIBS GCINCS GCDEPS GCSPEC JC1GCSPEC GCTESTSPEC USING_BOEHMGC_TRUE USING_BOEHMGC_FALSE USING_NOGC_TRUE USING_NOGC_FALSE THREADLIBS THREADINCS THREADDEPS THREADSPEC THREADLDFLAGS THREADCXXFLAGS USING_POSIX_THREADS_TRUE USING_POSIX_THREADS_FALSE USING_WIN32_THREADS_TRUE USING_WIN32_THREADS_FALSE USING_NO_THREADS_TRUE USING_NO_THREADS_FALSE HASH_SYNC_SPEC USING_GCC_TRUE USING_GCC_FALSE LIBICONV LTLIBICONV GTK_CFLAGS GTK_LIBS GLIB_CFLAGS GLIB_LIBS LIBART_CFLAGS LIBART_LIBS SUPPLY_BACKTRACE_TRUE SUPPLY_BACKTRACE_FALSE GCJH ZIP CLASSPATH_SEPARATOR ac_ct_GCJ ZLIBS SYS_ZLIBS ZINCS DIVIDESPEC CHECKREFSPEC EXCEPTIONSPEC IEEESPEC NATIVE_TRUE NATIVE_FALSE NEEDS_DATA_START_TRUE NEEDS_DATA_START_FALSE GCC_UNWIND_INCLUDE toolexecdir toolexecmainlibdir toolexeclibdir GCJVERSION gxx_include_dir libstdcxx_incdir ALLOCA PERL BACKTRACESPEC SYSDEP_SOURCES here LIBOBJS LTLIBOBJS'\n+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os build_subdir host_subdir target_subdir libgcj_basedir host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical LN_S mkinstalldirs CC ac_ct_CC EXEEXT OBJEXT CXX ac_ct_CXX CFLAGS CXXFLAGS LDFLAGS INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE CXXDEPMODE am__fastdepCXX_TRUE am__fastdepCXX_FALSE AS ac_ct_AS AR ac_ct_AR RANLIB ac_ct_RANLIB MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT LIBGCJ_CFLAGS LIBGCJ_CXXFLAGS LIBGCJ_JAVAFLAGS LIBGCJ_LD_SYMBOLIC INCLTDL LIBLTDL DIRLTDL LIBTOOL CXXCPP CPPFLAGS GCJ GCJFLAGS GCJDEPMODE am__fastdepGCJ_TRUE am__fastdepGCJ_FALSE subdirs TESTSUBDIR_TRUE TESTSUBDIR_FALSE ONESTEP_TRUE ONESTEP_FALSE JAVA_HOME_SET_TRUE JAVA_HOME_SET_FALSE JAVA_HOME LIBGCJDEBUG INTERPRETER LIBFFI LIBFFIINCS PLATFORM_INNER_NAT_HDRS CPP EGREP USING_WIN32_PLATFORM_TRUE USING_WIN32_PLATFORM_FALSE USING_POSIX_PLATFORM_TRUE USING_POSIX_PLATFORM_FALSE USING_ECOS_PLATFORM_TRUE USING_ECOS_PLATFORM_FALSE USING_DARWIN_CRT_TRUE USING_DARWIN_CRT_FALSE SYSTEMSPEC LIBGCJTESTSPEC ZLIBSPEC ZLIBTESTSPEC X_CFLAGS X_PRE_LIBS X_LIBS X_EXTRA_LIBS TOOLKIT XLIB_AWT_TRUE XLIB_AWT_FALSE GTK_AWT_TRUE GTK_AWT_FALSE GTK_CAIRO_TRUE GTK_CAIRO_FALSE PKG_CONFIG CAIRO_CFLAGS CAIRO_LIBS PANGOFT2_CFLAGS PANGOFT2_LIBS GCLIBS GCINCS GCDEPS GCSPEC JC1GCSPEC GCTESTSPEC USING_BOEHMGC_TRUE USING_BOEHMGC_FALSE USING_NOGC_TRUE USING_NOGC_FALSE THREADLIBS THREADINCS THREADDEPS THREADSPEC THREADLDFLAGS THREADCXXFLAGS USING_POSIX_THREADS_TRUE USING_POSIX_THREADS_FALSE USING_WIN32_THREADS_TRUE USING_WIN32_THREADS_FALSE USING_NO_THREADS_TRUE USING_NO_THREADS_FALSE HASH_SYNC_SPEC USING_GCC_TRUE USING_GCC_FALSE LIBICONV LTLIBICONV GTK_CFLAGS GTK_LIBS GLIB_CFLAGS GLIB_LIBS LIBART_CFLAGS LIBART_LIBS SUPPLY_BACKTRACE_TRUE SUPPLY_BACKTRACE_FALSE GCJH ZIP CLASSPATH_SEPARATOR ac_ct_GCJ ZLIBS SYS_ZLIBS ZINCS DIVIDESPEC CHECKREFSPEC EXCEPTIONSPEC IEEESPEC NATIVE_TRUE NATIVE_FALSE NEEDS_DATA_START_TRUE NEEDS_DATA_START_FALSE GCC_UNWIND_INCLUDE toolexecdir toolexecmainlibdir toolexeclibdir GCJVERSION gxx_include_dir libstdcxx_incdir ALLOCA PERL BACKTRACESPEC SYSDEP_SOURCES here LIBOBJS LTLIBOBJS'\n ac_subst_files=''\n \n # Initialize some variables set by options.\n@@ -889,6 +889,8 @@ Optional Packages:\n   --with-newlib           configure with newlib\n   --with-gnu-ld           assume the C compiler uses GNU ld default=no\n   --with-pic              try to use only PIC/non-PIC objects default=use both\n+  --with-java-home=DIRECTORY\n+                          value of java.home system property\n   --with-win32-nlsapi=ansi or unicows or unicode\n                           native MinGW libgcj Win32 OS API (default is ansi)\n   --without-libffi        don't use libffi\n@@ -4766,7 +4768,7 @@ test x\"$pic_mode\" = xno && libtool_flags=\"$libtool_flags --prefer-non-pic\"\n case $host in\n *-*-irix6*)\n   # Find out which ABI we are using.\n-  echo '#line 4769 \"configure\"' > conftest.$ac_ext\n+  echo '#line 4771 \"configure\"' > conftest.$ac_ext\n   if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   (eval $ac_compile) 2>&5\n   ac_status=$?\n@@ -5687,6 +5689,26 @@ else\n fi\n \n \n+\n+# Check whether --with-java-home or --without-java-home was given.\n+if test \"${with_java_home+set}\" = set; then\n+  withval=\"$with_java_home\"\n+  JAVA_HOME=\"${withval}\"\n+else\n+  JAVA_HOME=\"\"\n+fi;\n+\n+\n+if test ! -z \"$JAVA_HOME\"; then\n+  JAVA_HOME_SET_TRUE=\n+  JAVA_HOME_SET_FALSE='#'\n+else\n+  JAVA_HOME_SET_TRUE='#'\n+  JAVA_HOME_SET_FALSE=\n+fi\n+\n+\n+\n # What is the native OS API for MinGW?\n \n # Check whether --with-win32-nlsapi or --without-win32-nlsapi was given.\n@@ -5790,7 +5812,7 @@ if test \"${enable_sjlj_exceptions+set}\" = set; then\n   :\n else\n   cat > conftest.$ac_ext << EOF\n-#line 5793 \"configure\"\n+#line 5815 \"configure\"\n struct S { ~S(); };\n void bar();\n void foo()\n@@ -15878,6 +15900,13 @@ echo \"$as_me: error: conditional \\\"ONESTEP\\\" was never defined.\n Usually this means the macro was only invoked conditionally.\" >&2;}\n    { (exit 1); exit 1; }; }\n fi\n+if test -z \"${JAVA_HOME_SET_TRUE}\" && test -z \"${JAVA_HOME_SET_FALSE}\"; then\n+  { { echo \"$as_me:$LINENO: error: conditional \\\"JAVA_HOME_SET\\\" was never defined.\n+Usually this means the macro was only invoked conditionally.\" >&5\n+echo \"$as_me: error: conditional \\\"JAVA_HOME_SET\\\" was never defined.\n+Usually this means the macro was only invoked conditionally.\" >&2;}\n+   { (exit 1); exit 1; }; }\n+fi\n if test -z \"${USING_WIN32_PLATFORM_TRUE}\" && test -z \"${USING_WIN32_PLATFORM_FALSE}\"; then\n   { { echo \"$as_me:$LINENO: error: conditional \\\"USING_WIN32_PLATFORM\\\" was never defined.\n Usually this means the macro was only invoked conditionally.\" >&5\n@@ -16657,6 +16686,9 @@ s,@TESTSUBDIR_TRUE@,$TESTSUBDIR_TRUE,;t t\n s,@TESTSUBDIR_FALSE@,$TESTSUBDIR_FALSE,;t t\n s,@ONESTEP_TRUE@,$ONESTEP_TRUE,;t t\n s,@ONESTEP_FALSE@,$ONESTEP_FALSE,;t t\n+s,@JAVA_HOME_SET_TRUE@,$JAVA_HOME_SET_TRUE,;t t\n+s,@JAVA_HOME_SET_FALSE@,$JAVA_HOME_SET_FALSE,;t t\n+s,@JAVA_HOME@,$JAVA_HOME,;t t\n s,@LIBGCJDEBUG@,$LIBGCJDEBUG,;t t\n s,@INTERPRETER@,$INTERPRETER,;t t\n s,@LIBFFI@,$LIBFFI,;t t"}, {"sha": "9adf607c60f23f318c616a4d30eff7fff0c6107c", "filename": "libjava/configure.ac", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/libjava%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/libjava%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure.ac?ref=c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db", "patch": "@@ -213,6 +213,13 @@ AC_ARG_ENABLE(libgcj-multifile,\n esac],[enable_libgcj_multifile=no])\n AM_CONDITIONAL(ONESTEP, test \"$enable_libgcj_multifile\" = yes)\n \n+AC_ARG_WITH(java-home,\n+  AS_HELP_STRING([--with-java-home=DIRECTORY],\n+                 [value of java.home system property]),\n+\t\t [JAVA_HOME=\"${withval}\"], [JAVA_HOME=\"\"])\n+AM_CONDITIONAL(JAVA_HOME_SET, test ! -z \"$JAVA_HOME\")\n+AC_SUBST(JAVA_HOME)\n+\n # What is the native OS API for MinGW?\n AC_ARG_WITH(win32-nlsapi,\n   AS_HELP_STRING([--with-win32-nlsapi=ansi or unicows or unicode],"}, {"sha": "560b0f4bb7fd3e653cf9c38020864c9900fef447", "filename": "libjava/external/Makefile.in", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/libjava%2Fexternal%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/libjava%2Fexternal%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fexternal%2FMakefile.in?ref=c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db", "patch": "@@ -130,6 +130,9 @@ INSTALL_PROGRAM = @INSTALL_PROGRAM@\n INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n INTERPRETER = @INTERPRETER@\n+JAVA_HOME = @JAVA_HOME@\n+JAVA_HOME_SET_FALSE = @JAVA_HOME_SET_FALSE@\n+JAVA_HOME_SET_TRUE = @JAVA_HOME_SET_TRUE@\n JC1GCSPEC = @JC1GCSPEC@\n LDFLAGS = @LDFLAGS@\n LIBART_CFLAGS = @LIBART_CFLAGS@"}, {"sha": "a89121728dcbd4f5f3088d7a177f5bcfd013a88d", "filename": "libjava/external/sax/Makefile.in", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/libjava%2Fexternal%2Fsax%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/libjava%2Fexternal%2Fsax%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fexternal%2Fsax%2FMakefile.in?ref=c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db", "patch": "@@ -139,6 +139,9 @@ INSTALL_PROGRAM = @INSTALL_PROGRAM@\n INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n INTERPRETER = @INTERPRETER@\n+JAVA_HOME = @JAVA_HOME@\n+JAVA_HOME_SET_FALSE = @JAVA_HOME_SET_FALSE@\n+JAVA_HOME_SET_TRUE = @JAVA_HOME_SET_TRUE@\n JC1GCSPEC = @JC1GCSPEC@\n LDFLAGS = @LDFLAGS@\n LIBART_CFLAGS = @LIBART_CFLAGS@"}, {"sha": "e2e445b4327dc03db9bb5ac5dc5bb231f3cdcfb8", "filename": "libjava/external/w3c_dom/Makefile.in", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/libjava%2Fexternal%2Fw3c_dom%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/libjava%2Fexternal%2Fw3c_dom%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fexternal%2Fw3c_dom%2FMakefile.in?ref=c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db", "patch": "@@ -139,6 +139,9 @@ INSTALL_PROGRAM = @INSTALL_PROGRAM@\n INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n INTERPRETER = @INTERPRETER@\n+JAVA_HOME = @JAVA_HOME@\n+JAVA_HOME_SET_FALSE = @JAVA_HOME_SET_FALSE@\n+JAVA_HOME_SET_TRUE = @JAVA_HOME_SET_TRUE@\n JC1GCSPEC = @JC1GCSPEC@\n LDFLAGS = @LDFLAGS@\n LIBART_CFLAGS = @LIBART_CFLAGS@"}, {"sha": "5c86a1514735d2302cc4dd6f860c5ee9b7689c0f", "filename": "libjava/gcj/Makefile.in", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/libjava%2Fgcj%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/libjava%2Fgcj%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgcj%2FMakefile.in?ref=c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db", "patch": "@@ -135,6 +135,9 @@ INSTALL_PROGRAM = @INSTALL_PROGRAM@\n INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n INTERPRETER = @INTERPRETER@\n+JAVA_HOME = @JAVA_HOME@\n+JAVA_HOME_SET_FALSE = @JAVA_HOME_SET_FALSE@\n+JAVA_HOME_SET_TRUE = @JAVA_HOME_SET_TRUE@\n JC1GCSPEC = @JC1GCSPEC@\n LDFLAGS = @LDFLAGS@\n LIBART_CFLAGS = @LIBART_CFLAGS@"}, {"sha": "3d215017b0044d96f2b316cee022ce667c8c4c43", "filename": "libjava/include/Makefile.in", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/libjava%2Finclude%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/libjava%2Finclude%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2FMakefile.in?ref=c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db", "patch": "@@ -134,6 +134,9 @@ INSTALL_PROGRAM = @INSTALL_PROGRAM@\n INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n INTERPRETER = @INTERPRETER@\n+JAVA_HOME = @JAVA_HOME@\n+JAVA_HOME_SET_FALSE = @JAVA_HOME_SET_FALSE@\n+JAVA_HOME_SET_TRUE = @JAVA_HOME_SET_TRUE@\n JC1GCSPEC = @JC1GCSPEC@\n LDFLAGS = @LDFLAGS@\n LIBART_CFLAGS = @LIBART_CFLAGS@"}, {"sha": "0cdd7aca2193d603d437de32034434fb9c58735b", "filename": "libjava/java/lang/natRuntime.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/libjava%2Fjava%2Flang%2FnatRuntime.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/libjava%2Fjava%2Flang%2FnatRuntime.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatRuntime.cc?ref=c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db", "patch": "@@ -398,7 +398,7 @@ java::lang::Runtime::insertSystemProperties (java::util::Properties *newprops)\n   // part we do this because most people specify only --prefix and\n   // nothing else when installing gcj.  Plus, people are free to\n   // redefine `java.home' with `-D' if necessary.\n-  SET (\"java.home\", PREFIX);\n+  SET (\"java.home\", JAVA_HOME);\n   SET (\"gnu.classpath.home\", PREFIX);\n   // This is set to $(libdir) because we use this to find .security\n   // files at runtime."}, {"sha": "cc2b50ec66d755351be0b4421b6dd0602931f63f", "filename": "libjava/testsuite/Makefile.in", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/libjava%2Ftestsuite%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db/libjava%2Ftestsuite%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2FMakefile.in?ref=c33b7bf04a0abea0ca5ed8ca1cbdf0a9127a64db", "patch": "@@ -123,6 +123,9 @@ INSTALL_PROGRAM = @INSTALL_PROGRAM@\n INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n INTERPRETER = @INTERPRETER@\n+JAVA_HOME = @JAVA_HOME@\n+JAVA_HOME_SET_FALSE = @JAVA_HOME_SET_FALSE@\n+JAVA_HOME_SET_TRUE = @JAVA_HOME_SET_TRUE@\n JC1GCSPEC = @JC1GCSPEC@\n LDFLAGS = @LDFLAGS@\n LIBART_CFLAGS = @LIBART_CFLAGS@"}]}