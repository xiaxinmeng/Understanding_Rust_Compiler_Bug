{"sha": "abe72dd8aa65422a37c6ae25658a70f06477472b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWJlNzJkZDhhYTY1NDIyYTM3YzZhZTI1NjU4YTcwZjA2NDc3NDcyYg==", "commit": {"author": {"name": "Stan Shebs", "email": "shebs@apple.com", "date": "2001-10-16T23:22:27Z"}, "committer": {"name": "Stan Shebs", "email": "shebs@gcc.gnu.org", "date": "2001-10-16T23:22:27Z"}, "message": "darwin.h (GCC_NAME): Remove, no longer used.\n\n        * config/darwin.h (GCC_NAME): Remove, no longer used.\n        (NO_MATH_LIBRARY): Ditto.\n        (MATH_LIBRARY): Define to emptiness.\n        (DWARF2_DEBUGGING_INFO): Define.\n        (PREFERRED_DEBUGGING_TYPE): Define.\n        (EXTRA_SECTION_FUNCTIONS): Add darwin_exception_section.\n        (EXCEPTION_SECTION): Define.\n        (ASM_PREFERRED_EH_DATA_FORMAT): Define.\n        * config/darwin.c (darwin_encode_section_info): Handle case of\n        DECL_INITIAL being error_mark_node.\n\nFrom-SVN: r46300", "tree": {"sha": "f4a3001669d9c6fd545e97a8986d632d01ba6316", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f4a3001669d9c6fd545e97a8986d632d01ba6316"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/abe72dd8aa65422a37c6ae25658a70f06477472b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/abe72dd8aa65422a37c6ae25658a70f06477472b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/abe72dd8aa65422a37c6ae25658a70f06477472b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/abe72dd8aa65422a37c6ae25658a70f06477472b/comments", "author": null, "committer": null, "parents": [{"sha": "1afec8ade9fceba5d24195f3d152fc701e51c835", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1afec8ade9fceba5d24195f3d152fc701e51c835", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1afec8ade9fceba5d24195f3d152fc701e51c835"}], "stats": {"total": 42, "additions": 34, "deletions": 8}, "files": [{"sha": "ae255c28ea03026d7203f8a1f900c97ad999d08b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/abe72dd8aa65422a37c6ae25658a70f06477472b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/abe72dd8aa65422a37c6ae25658a70f06477472b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=abe72dd8aa65422a37c6ae25658a70f06477472b", "patch": "@@ -1,3 +1,16 @@\n+2001-10-16  Stan Shebs  <shebs@apple.com>\n+\n+\t* config/darwin.h (GCC_NAME): Remove, no longer used.\n+\t(NO_MATH_LIBRARY): Ditto.\n+\t(MATH_LIBRARY): Define to emptiness.\n+\t(DWARF2_DEBUGGING_INFO): Define.\n+\t(PREFERRED_DEBUGGING_TYPE): Define.\n+\t(EXTRA_SECTION_FUNCTIONS): Add darwin_exception_section.\n+\t(EXCEPTION_SECTION): Define.\n+\t(ASM_PREFERRED_EH_DATA_FORMAT): Define.\n+\t* config/darwin.c (darwin_encode_section_info): Handle case of\n+\tDECL_INITIAL being error_mark_node.\n+\n 2001-10-16  Richard Henderson  <rth@redhat.com>\n \n \t* alpha.c (current_file_function_operand): Don't fail for profiling."}, {"sha": "225a75761b8732f2a81669538966b54269392252", "filename": "gcc/config/darwin.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/abe72dd8aa65422a37c6ae25658a70f06477472b/gcc%2Fconfig%2Fdarwin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/abe72dd8aa65422a37c6ae25658a70f06477472b/gcc%2Fconfig%2Fdarwin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.c?ref=abe72dd8aa65422a37c6ae25658a70f06477472b", "patch": "@@ -1014,7 +1014,8 @@ darwin_encode_section_info (decl)\n       && !DECL_EXTERNAL (decl)\n       && ((TREE_STATIC (decl)\n \t   && (!DECL_COMMON (decl) || !TREE_PUBLIC (decl)))\n-\t  || DECL_INITIAL (decl)))\n+\t  || (DECL_INITIAL (decl)\n+\t      && DECL_INITIAL (decl) != error_mark_node)))\n     defined = 1;\n \n   if (TREE_CODE (decl) == FUNCTION_DECL)"}, {"sha": "d4a8197ce4a6ce9783ffc6e179edb5f68f0ed52b", "filename": "gcc/config/darwin.h", "status": "modified", "additions": 19, "deletions": 7, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/abe72dd8aa65422a37c6ae25658a70f06477472b/gcc%2Fconfig%2Fdarwin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/abe72dd8aa65422a37c6ae25658a70f06477472b/gcc%2Fconfig%2Fdarwin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.h?ref=abe72dd8aa65422a37c6ae25658a70f06477472b", "patch": "@@ -35,14 +35,11 @@ Boston, MA 02111-1307, USA.  */\n    leave it undefined and expect system builders to set configure args\n    correctly.  */\n \n-/* Name of the command that invokes the compiler - used in g++.c.  */\n+/* Suppress g++ attempt to link in the math library automatically.\n+   (Some Darwin versions have a libm, but they seem to cause problems\n+   for C++ executables.)  */\n \n-#undef  GCC_NAME\n-#define GCC_NAME \"cc\"\n-\n-/* Never try linking with -lm - used in g++.c.  */\n-\n-#define NO_MATH_LIBRARY\n+#define MATH_LIBRARY \"\"\n \n /* We have atexit.  */\n \n@@ -126,6 +123,12 @@ Boston, MA 02111-1307, USA.  */\n \n #define DBX_DEBUGGING_INFO\n \n+/* Also enable Dwarf 2 as an option.  */\n+\n+#define DWARF2_DEBUGGING_INFO\n+\n+#define PREFERRED_DEBUGGING_TYPE DBX_DEBUG\n+\n /* When generating stabs debugging, use N_BINCL entries.  */\n \n #define DBX_USE_BINCL\n@@ -349,6 +352,7 @@ do { if (!strcmp (alias_name, name))\t\t\t\t\t\\\n   in_machopic_lazy_symbol_ptr,\t\t\t\t\\\n   in_machopic_symbol_stub,\t\t\t\t\\\n   in_machopic_picsymbol_stub,\t\t\t\t\\\n+  in_darwin_exception, \\\n   num_sections\n \n #undef\tEXTRA_SECTION_FUNCTIONS\n@@ -453,6 +457,9 @@ SECTION_FUNCTION (machopic_symbol_stub_section,\t\t\\\n SECTION_FUNCTION (machopic_picsymbol_stub_section,\t\\\n \t\tin_machopic_picsymbol_stub,\t\t\\\n \t\t\".picsymbol_stub\", 0)      \t\t\\\n+SECTION_FUNCTION (darwin_exception_section,\t\t\\\n+\t\tin_darwin_exception,\t\t\t\\\n+\t\t\".section __TEXT,__gcc_except_tab\", 0)\t\\\n \t\t\t\t\t\t\t\\\n void\t\t\t\t\t\t\\\n objc_section_init ()\t\t\t\t\\\n@@ -774,6 +781,11 @@ enum machopic_addr_class {\n       }\t\t\t\t\t\t\t\t\\\n   } while (0)\n \n+#define EXCEPTION_SECTION() darwin_exception_section ()\n+\n+#define ASM_PREFERRED_EH_DATA_FORMAT(CODE,GLOBAL)  \\\n+  (((CODE) == 1 || (GLOBAL) == 0) ? DW_EH_PE_pcrel : DW_EH_PE_absptr)\n+\n #define REGISTER_TARGET_PRAGMAS(PFILE)                          \\\n   do {                                                          \\\n     cpp_register_pragma (PFILE, 0, \"mark\", darwin_pragma_ignore);  \\"}]}