{"sha": "df44f2b0e98dccd15796b2e9af364c1704fba95e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGY0NGYyYjBlOThkY2NkMTU3OTZiMmU5YWYzNjRjMTcwNGZiYTk1ZQ==", "commit": {"author": {"name": "Martin v. L\u00f6wis", "email": "loewis@informatik.hu-berlin.de", "date": "1998-08-24T02:05:51Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1998-08-24T02:05:51Z"}, "message": "* search.c (my_tree_cons): Reimplement.\n\nFrom-SVN: r21927", "tree": {"sha": "2d2a281de6fdee69c6a7fa201240ebf9f2cec651", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2d2a281de6fdee69c6a7fa201240ebf9f2cec651"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/df44f2b0e98dccd15796b2e9af364c1704fba95e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df44f2b0e98dccd15796b2e9af364c1704fba95e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df44f2b0e98dccd15796b2e9af364c1704fba95e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df44f2b0e98dccd15796b2e9af364c1704fba95e/comments", "author": null, "committer": null, "parents": [{"sha": "319285566b1f3cca49a1188fc6825e794982caa9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/319285566b1f3cca49a1188fc6825e794982caa9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/319285566b1f3cca49a1188fc6825e794982caa9"}], "stats": {"total": 15, "additions": 8, "deletions": 7}, "files": [{"sha": "1941f1573233989ef580a2c521ef06572f7f5d6c", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df44f2b0e98dccd15796b2e9af364c1704fba95e/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df44f2b0e98dccd15796b2e9af364c1704fba95e/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=df44f2b0e98dccd15796b2e9af364c1704fba95e", "patch": "@@ -3,11 +3,13 @@\n         * lex.c (real_yylex): Don't warn about long long constants if\n         we're allowing long long.\n \n-1998-08-23  Martin von L\ufffdwis  <loewis@informatik.hu-berlin.de>\n+1998-08-24  Martin von L\ufffdwis  <loewis@informatik.hu-berlin.de>\n \n \t* decl.c (pushdecl): Use IDENTIFIER_NAMESPACE_VALUE instead of\n \taccessing bindings directly.\n \n+\t* search.c (my_tree_cons): Reimplement.\n+\n \t* lang-specs.h: Remove __HONOR_STD.\n \t* inc/exception, inc/new, inc/new.h, inc/typeinfo: Likewise.\n "}, {"sha": "6367358ba78d792872061dbd54a5714d732e101d", "filename": "gcc/cp/search.c", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df44f2b0e98dccd15796b2e9af364c1704fba95e/gcc%2Fcp%2Fsearch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df44f2b0e98dccd15796b2e9af364c1704fba95e/gcc%2Fcp%2Fsearch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsearch.c?ref=df44f2b0e98dccd15796b2e9af364c1704fba95e", "patch": "@@ -261,13 +261,12 @@ static tree\n my_tree_cons (purpose, value, chain)\n      tree purpose, value, chain;\n {\n-  tree p = (tree)obstack_alloc (&type_obstack_entries, sizeof (struct tree_list));\n-  bzero ((char *)p, sizeof (struct tree_list));\n+  tree p;\n+  struct obstack *ambient_obstack = current_obstack;\n+  current_obstack = &type_obstack_entries;\n+  p = tree_cons (purpose, value, chain);\n+  current_obstack = ambient_obstack;\n   ++my_tree_node_counter;\n-  TREE_SET_CODE (p, TREE_LIST);\n-  TREE_PURPOSE (p) = purpose;\n-  TREE_VALUE (p) = value;\n-  TREE_CHAIN (p) = chain;\n   return p;\n }\n "}]}