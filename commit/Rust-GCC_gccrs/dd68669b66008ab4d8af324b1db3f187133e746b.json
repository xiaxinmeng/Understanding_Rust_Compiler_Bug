{"sha": "dd68669b66008ab4d8af324b1db3f187133e746b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGQ2ODY2OWI2NjAwOGFiNGQ4YWYzMjRiMWRiM2YxODcxMzNlNzQ2Yg==", "commit": {"author": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2017-04-18T17:31:30Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2017-04-18T17:31:30Z"}, "message": "re PR middle-end/80422 (ICE on valid code at -O3 in 32-bit mode on x86_64-linux-gnu: in operator[], at vec.h:732)\n\n\tPR middle-end/80422\n\t* cfgcleanup.c (try_crossjump_to_edge): Verify SRC1 and SRC2 have\n\tpredecessors after walking up the insn chain.\n\n\tPR middle-end/80422\n\t* gcc.c-torture/compile/pr80422.c: New test.\n\nFrom-SVN: r246975", "tree": {"sha": "797765178bd00aac43a514272bbfddb063251d55", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/797765178bd00aac43a514272bbfddb063251d55"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dd68669b66008ab4d8af324b1db3f187133e746b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd68669b66008ab4d8af324b1db3f187133e746b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd68669b66008ab4d8af324b1db3f187133e746b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd68669b66008ab4d8af324b1db3f187133e746b/comments", "author": null, "committer": null, "parents": [{"sha": "1cda61fc28d476c194db1c9f03676688d796ac4f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1cda61fc28d476c194db1c9f03676688d796ac4f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1cda61fc28d476c194db1c9f03676688d796ac4f"}], "stats": {"total": 42, "additions": 42, "deletions": 0}, "files": [{"sha": "67751810e4a8af555dac701c91bdfe89f3a0ffe4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd68669b66008ab4d8af324b1db3f187133e746b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd68669b66008ab4d8af324b1db3f187133e746b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dd68669b66008ab4d8af324b1db3f187133e746b", "patch": "@@ -1,3 +1,9 @@\n+2017-04-18  Jeff Law  <law@redhat.com>\n+\n+\tPR middle-end/80422\n+\t* cfgcleanup.c (try_crossjump_to_edge): Verify SRC1 and SRC2 have\n+\tpredecessors after walking up the insn chain.\n+\n 2017-04-18  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR debug/80263"}, {"sha": "f68a964e31e9389944ef9587d99edeb19965b70f", "filename": "gcc/cfgcleanup.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd68669b66008ab4d8af324b1db3f187133e746b/gcc%2Fcfgcleanup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd68669b66008ab4d8af324b1db3f187133e746b/gcc%2Fcfgcleanup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgcleanup.c?ref=dd68669b66008ab4d8af324b1db3f187133e746b", "patch": "@@ -2017,6 +2017,11 @@ try_crossjump_to_edge (int mode, edge e1, edge e2,\n   if (newpos2 != NULL_RTX)\n     src2 = BLOCK_FOR_INSN (newpos2);\n \n+  /* Check that SRC1 and SRC2 have preds again.  They may have changed\n+     above due to the call to flow_find_cross_jump.  */\n+  if (EDGE_COUNT (src1->preds) == 0 || EDGE_COUNT (src2->preds) == 0)\n+    return false;\n+\n   if (dir == dir_backward)\n     {\n #define SWAP(T, X, Y) do { T tmp = (X); (X) = (Y); (Y) = tmp; } while (0)"}, {"sha": "cf5d0be6da340b87a9625fe4dd70fc2967a25c12", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd68669b66008ab4d8af324b1db3f187133e746b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd68669b66008ab4d8af324b1db3f187133e746b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=dd68669b66008ab4d8af324b1db3f187133e746b", "patch": "@@ -1,3 +1,8 @@\n+2017-04-18  Jeff Law  <law@redhat.com>\n+\n+\tPR middle-end/80422\n+\t* gcc.c-torture/compile/pr80422.c: New test.\n+\n 2017-04-18  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR debug/80263"}, {"sha": "2cece6775dd7d883eb43aa5df85603a430bc9951", "filename": "gcc/testsuite/gcc.c-torture/compile/pr80422.c", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd68669b66008ab4d8af324b1db3f187133e746b/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr80422.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd68669b66008ab4d8af324b1db3f187133e746b/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr80422.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr80422.c?ref=dd68669b66008ab4d8af324b1db3f187133e746b", "patch": "@@ -0,0 +1,26 @@\n+\n+int a, c, f;\n+short b, d, e;\n+\n+int fn1 (int h)\n+{ \n+  return a > 2 || h > a ? h : h << a;\n+}\n+\n+void fn2 ()\n+{ \n+  int j, k;\n+  while (1)\n+    { \n+      k = c && b;\n+      f &= e > (fn1 (k) && j);\n+      if (!d)\n+        break;\n+    }\n+}\n+\n+int main ()\n+{ \n+  fn2 ();\n+  return 0;\n+}"}]}