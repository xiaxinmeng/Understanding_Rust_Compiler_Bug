{"sha": "48248fa77131fdcfa4d0f153b5ed2820d9befd4a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDgyNDhmYTc3MTMxZmRjZmE0ZDBmMTUzYjVlZDI4MjBkOWJlZmQ0YQ==", "commit": {"author": {"name": "Bud Davis", "email": "bdavis@gfortran.org", "date": "2005-04-10T03:43:09Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2005-04-10T03:43:09Z"}, "message": "re PR libfortran/19872 ([4.0 only] closed and re-opened file not overwriten)\n\nPR fortran/19872\n* io/transfer.c (data_transfer_init): truncate an existing\n  file on the first write.\n\nCo-Authored-By: Steven G. Kargl <kargls@comcast.net>\n\nFrom-SVN: r97937", "tree": {"sha": "6dfb012b1bf45857558cff7d92f6bdd8d50aa04d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6dfb012b1bf45857558cff7d92f6bdd8d50aa04d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/48248fa77131fdcfa4d0f153b5ed2820d9befd4a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48248fa77131fdcfa4d0f153b5ed2820d9befd4a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/48248fa77131fdcfa4d0f153b5ed2820d9befd4a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48248fa77131fdcfa4d0f153b5ed2820d9befd4a/comments", "author": null, "committer": null, "parents": [{"sha": "70370fa0310e07c5b0036812a9ff657e613a2f39", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/70370fa0310e07c5b0036812a9ff657e613a2f39", "html_url": "https://github.com/Rust-GCC/gccrs/commit/70370fa0310e07c5b0036812a9ff657e613a2f39"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "46fc3b3dedf88f70a21cb49fca1991ba44e8abfa", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48248fa77131fdcfa4d0f153b5ed2820d9befd4a/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48248fa77131fdcfa4d0f153b5ed2820d9befd4a/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=48248fa77131fdcfa4d0f153b5ed2820d9befd4a", "patch": "@@ -1,3 +1,10 @@\n+2005-04-09  Bud Davis  <bdavis@gfortran.org>\n+            Steven G. Kargl <kargls@comcast.net>\n+\n+\tPR fortran/19872\n+\t* io/transfer.c (data_transfer_init): truncate an existing\n+\tfile on the first write.\n+\n 2005-04-09  Thomas Koenig  <Thomas.Koenig@online.de>\n \n \tPR libfortran/19106"}, {"sha": "f86a85272458aef7116c3109fb7e65edb70f3a5f", "filename": "libgfortran/io/transfer.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48248fa77131fdcfa4d0f153b5ed2820d9befd4a/libgfortran%2Fio%2Ftransfer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48248fa77131fdcfa4d0f153b5ed2820d9befd4a/libgfortran%2Fio%2Ftransfer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Ftransfer.c?ref=48248fa77131fdcfa4d0f153b5ed2820d9befd4a", "patch": "@@ -1103,6 +1103,13 @@ data_transfer_init (int read_flag)\n \tgenerate_error (ERROR_OS, NULL);\n     }\n \n+  /* Overwriting an existing sequential file ? \n+     it is always safe to truncate the file on the first write */\n+  if (g.mode == WRITING \n+      && current_unit->flags.access == ACCESS_SEQUENTIAL \n+      && current_unit->current_record == 0)\n+        struncate(current_unit->s); \n+\n   current_unit->mode = g.mode;\n \n   /* Set the initial value of flags.  */"}]}