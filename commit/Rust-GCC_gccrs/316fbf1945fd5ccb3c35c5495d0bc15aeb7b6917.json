{"sha": "316fbf1945fd5ccb3c35c5495d0bc15aeb7b6917", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzE2ZmJmMTk0NWZkNWNjYjNjMzVjNTQ5NWQwYmMxNWFlYjdiNjkxNw==", "commit": {"author": {"name": "Eric Christopher", "email": "echristo@gcc.gnu.org", "date": "2007-04-18T22:27:51Z"}, "committer": {"name": "Eric Christopher", "email": "echristo@gcc.gnu.org", "date": "2007-04-18T22:27:51Z"}, "message": "darwin.md (load_macho_picbase): Use link register only.\n\n2007-04-18  Eric Christopher  <echristo@apple.com>\n\n        * config/rs6000/darwin.md (load_macho_picbase): Use link register\n        only. Update operands.\n        * config/rs6000/rs6000.c (rs6000_emit_prologue): Update caller.\n        * config/rs6000/rs6000.md (builtin_setjmp_receiver): Ditto. Move from\n        link register to pic register.\n\nFrom-SVN: r123960", "tree": {"sha": "35d4b6fd54d33182546ed53ee70e97600023a6f4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/35d4b6fd54d33182546ed53ee70e97600023a6f4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/316fbf1945fd5ccb3c35c5495d0bc15aeb7b6917", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/316fbf1945fd5ccb3c35c5495d0bc15aeb7b6917", "html_url": "https://github.com/Rust-GCC/gccrs/commit/316fbf1945fd5ccb3c35c5495d0bc15aeb7b6917", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/316fbf1945fd5ccb3c35c5495d0bc15aeb7b6917/comments", "author": null, "committer": null, "parents": [{"sha": "5083912dfabb0c52a01aa5d1a8f13f176d93d719", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5083912dfabb0c52a01aa5d1a8f13f176d93d719", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5083912dfabb0c52a01aa5d1a8f13f176d93d719"}], "stats": {"total": 32, "additions": 18, "deletions": 14}, "files": [{"sha": "1138a1a3d14dc0de8d20b63e3c67cf9f86f0aaa3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 7, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/316fbf1945fd5ccb3c35c5495d0bc15aeb7b6917/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/316fbf1945fd5ccb3c35c5495d0bc15aeb7b6917/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=316fbf1945fd5ccb3c35c5495d0bc15aeb7b6917", "patch": "@@ -1,6 +1,10 @@\n-2007-04-18  Philippe De Muyter  <phdm@macqel.be>\n+2007-04-18  Eric Christopher  <echristo@apple.com>\n \n-\t* config/m68k/m68k.c (output_btst): Use `movew to ccr' when useful.\n+\t* config/rs6000/darwin.md (load_macho_picbase): Use link register\n+\tonly. Update operands.\n+\t* config/rs6000/rs6000.c (rs6000_emit_prologue): Update caller.\n+\t* config/rs6000/rs6000.md (builtin_setjmp_receiver): Ditto. Move from\n+\tlink register to pic register.\n \n 2007-04-18  Dirk Mueller  <dmueller@suse.de>\n \n@@ -15,10 +19,10 @@\n \t* tree-vect-analyze.c (vect_analyze_loop_form): Set loop->aux.\n \n \t* tree-vectorizer.h (NITERS_KNOWN_P): New.\n-\t* tree-vect-analyze.c (vect_analyze_loop_form): Call NITERS_KNOWN_P \n+\t* tree-vect-analyze.c (vect_analyze_loop_form): Call NITERS_KNOWN_P\n \tinstead of LOOP_VINFO_INT_NITERS to avoid having to geneate loop_info.\n \n-\t* tree-vect-analyze.c (vect_determine_vectorization_factor): Add \n+\t* tree-vect-analyze.c (vect_determine_vectorization_factor): Add\n \tdump print.\n \t(vect_analyze_operations): Fix indenetation.  Fix a comment.  Fix a\n \tprint message.\n@@ -163,7 +167,7 @@\n \t(vect_transform_loop): Consider phis for vectorization.\n \t* tree-vect-analyze.c (vect_determine_vectorization_factor): Simplify\n \tcondition.\n-\t(analyze_operations): Call vectorizable_induction when analyzing phis.  \n+\t(analyze_operations): Call vectorizable_induction when analyzing phis.\n \tFix comment.\n \t(vect_mark_stmts_to_be_vectorized): Remove redundant checks.\n \t(vect_mark_relevant): Include phis in relevance analysis.\n@@ -256,7 +260,7 @@\n \n \t* config/avr/avr.c (avr_arch_types): Rearranging  array.\n \t(enum avr_arch): Add.\n-\t(avr_mcu_types): Use avr_arch enumeration constants instead of \n+\t(avr_mcu_types): Use avr_arch enumeration constants instead of\n \tnumbers.\n \t* config/avr/avr.h (LINK_SPEC): Simplify.\n \n@@ -673,7 +677,7 @@\n \tPR c++/31078\n \tPR c++/31103\n \t* c-common.c (c_build_qualified_type): Set canonical type\n-\tappropriately.  \n+\tappropriately.\n \n 2007-04-12  Richard Guenther  <rguenther@suse.de>\n "}, {"sha": "835df204de14bd33e7fbc931d6a6d5ed62c37dde", "filename": "gcc/config/rs6000/darwin.md", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/316fbf1945fd5ccb3c35c5495d0bc15aeb7b6917/gcc%2Fconfig%2Frs6000%2Fdarwin.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/316fbf1945fd5ccb3c35c5495d0bc15aeb7b6917/gcc%2Fconfig%2Frs6000%2Fdarwin.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fdarwin.md?ref=316fbf1945fd5ccb3c35c5495d0bc15aeb7b6917", "patch": "@@ -239,15 +239,15 @@ Boston, MA 02110-1301, USA.  */\n   \"\")\n \n (define_expand \"load_macho_picbase\"\n-  [(set (match_operand 0 \"\" \"\")\n-        (unspec [(match_operand 1 \"\" \"\")]\n+  [(set (reg:SI 65)\n+        (unspec [(match_operand 0 \"\" \"\")]\n                    UNSPEC_LD_MPIC))]\n   \"(DEFAULT_ABI == ABI_DARWIN) && flag_pic\"\n {\n   if (TARGET_32BIT)\n-    emit_insn (gen_load_macho_picbase_si (operands[1]));\n+    emit_insn (gen_load_macho_picbase_si (operands[0]));\n   else\n-    emit_insn (gen_load_macho_picbase_di (operands[1]));\n+    emit_insn (gen_load_macho_picbase_di (operands[0]));\n \n   DONE;\n })\n@@ -437,4 +437,3 @@ Boston, MA 02110-1301, USA.  */\n }\"\n   [(set_attr \"type\" \"branch\")\n    (set_attr \"length\" \"4\")])\n-"}, {"sha": "1e70996c8886e447baac7336279996fcdddc143a", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/316fbf1945fd5ccb3c35c5495d0bc15aeb7b6917/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/316fbf1945fd5ccb3c35c5495d0bc15aeb7b6917/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=316fbf1945fd5ccb3c35c5495d0bc15aeb7b6917", "patch": "@@ -15160,7 +15160,7 @@ rs6000_emit_prologue (void)\n       if (!info->lr_save_p)\n \trs6000_maybe_dead (emit_move_insn (gen_rtx_REG (Pmode, 0), lr));\n \n-      rs6000_maybe_dead (emit_insn (gen_load_macho_picbase (lr, src)));\n+      rs6000_maybe_dead (emit_insn (gen_load_macho_picbase (src)));\n \n       insn = emit_move_insn (gen_rtx_REG (Pmode,\n \t\t\t\t\t  RS6000_PIC_OFFSET_TABLE_REGNUM),"}, {"sha": "2359b9e2b7787aded5647b41000118b2ec10226e", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/316fbf1945fd5ccb3c35c5495d0bc15aeb7b6917/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/316fbf1945fd5ccb3c35c5495d0bc15aeb7b6917/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=316fbf1945fd5ccb3c35c5495d0bc15aeb7b6917", "patch": "@@ -10559,7 +10559,8 @@\n \t\t\t\t  CODE_LABEL_NUMBER (operands[0]));\n       tmplabrtx = gen_rtx_SYMBOL_REF (Pmode, ggc_strdup (tmplab));\n \n-      emit_insn (gen_load_macho_picbase (picreg, tmplabrtx));\n+      emit_insn (gen_load_macho_picbase (tmplabrtx));\n+      emit_move_insn (picreg, gen_rtx_REG (Pmode, LINK_REGISTER_REGNUM));\n       emit_insn (gen_macho_correct_pic (picreg, picreg, picrtx, tmplabrtx));\n     }\n   else"}]}