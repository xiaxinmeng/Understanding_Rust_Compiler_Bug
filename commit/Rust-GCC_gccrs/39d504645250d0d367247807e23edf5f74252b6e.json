{"sha": "39d504645250d0d367247807e23edf5f74252b6e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzlkNTA0NjQ1MjUwZDBkMzY3MjQ3ODA3ZTIzZWRmNWY3NDI1MmI2ZQ==", "commit": {"author": {"name": "Claudiu Zissulescu", "email": "claziss@synopsys.com", "date": "2016-04-29T10:49:26Z"}, "committer": {"name": "Claudiu Zissulescu", "email": "claziss@gcc.gnu.org", "date": "2016-04-29T10:49:26Z"}, "message": "[ARC] Handle FPX NaN within optimized floating point library.\n\ngcc/\n2016-04-29  Claudiu Zissulescu  <claziss@synopsys.com>\n\n\t* testsuite/gcc.target/arc/ieee_eq.c: New test.\n\nlibgcc/\n2016-04-29  Claudiu Zissulescu  <claziss@synopsys.com>\n\n\t* config/arc/ieee-754/eqdf2.S: Handle FPX NaN.\n\nFrom-SVN: r235633", "tree": {"sha": "7dc26e0bbcfd6b12890fbfe4091d2eadaebb7c28", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7dc26e0bbcfd6b12890fbfe4091d2eadaebb7c28"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/39d504645250d0d367247807e23edf5f74252b6e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/39d504645250d0d367247807e23edf5f74252b6e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/39d504645250d0d367247807e23edf5f74252b6e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/39d504645250d0d367247807e23edf5f74252b6e/comments", "author": {"login": "claziss", "id": 2761368, "node_id": "MDQ6VXNlcjI3NjEzNjg=", "avatar_url": "https://avatars.githubusercontent.com/u/2761368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/claziss", "html_url": "https://github.com/claziss", "followers_url": "https://api.github.com/users/claziss/followers", "following_url": "https://api.github.com/users/claziss/following{/other_user}", "gists_url": "https://api.github.com/users/claziss/gists{/gist_id}", "starred_url": "https://api.github.com/users/claziss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/claziss/subscriptions", "organizations_url": "https://api.github.com/users/claziss/orgs", "repos_url": "https://api.github.com/users/claziss/repos", "events_url": "https://api.github.com/users/claziss/events{/privacy}", "received_events_url": "https://api.github.com/users/claziss/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "af95276348b27767973ac9c461cfbbd9b87d0ba1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af95276348b27767973ac9c461cfbbd9b87d0ba1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af95276348b27767973ac9c461cfbbd9b87d0ba1"}], "stats": {"total": 70, "additions": 65, "deletions": 5}, "files": [{"sha": "d3fde07a4bd1047c99b1f737859eb47bd819cecb", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39d504645250d0d367247807e23edf5f74252b6e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39d504645250d0d367247807e23edf5f74252b6e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=39d504645250d0d367247807e23edf5f74252b6e", "patch": "@@ -1,3 +1,7 @@\n+2016-04-29  Claudiu Zissulescu  <claziss@synopsys.com>\n+\n+\t* testsuite/gcc.target/arc/ieee_eq.c: New test.\n+\n 2016-04-29  Oleg Endo  <olegendo@gcc.gnu.org>\n \n \t* common/config/sh/sh-common.c (sh_option_optimization_table): Remove"}, {"sha": "70aebad063bc37346b73e5de44ef34114cec34e8", "filename": "gcc/testsuite/gcc.target/arc/ieee_eq.c", "status": "added", "additions": 47, "deletions": 0, "changes": 47, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39d504645250d0d367247807e23edf5f74252b6e/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Fieee_eq.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39d504645250d0d367247807e23edf5f74252b6e/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Fieee_eq.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Fieee_eq.c?ref=39d504645250d0d367247807e23edf5f74252b6e", "patch": "@@ -0,0 +1,47 @@\n+/* { dg-do run } */\n+/* { dg-options \"-O2\" } */\n+\n+#include <stdio.h>\n+#include <float.h>\n+\n+#define TEST_EQ(TYPE,X,Y,RES)\t\t\t\t\\\n+  do {\t\t\t\t\t\t\t\\\n+    volatile TYPE a, b;\t\t\t\t\t\\\n+    a = (TYPE) X;\t\t\t\t\t\\\n+    b = (TYPE) Y;\t\t\t\t\t\\\n+    if ((a == b) != RES)\t\t\t\t\\\n+      {\t\t\t\t\t\t\t\\\n+\tprintf (\"Runtime computation error @%d. %g \"\t\\\n+\t\t\"!= %g\\n\", __LINE__, a, b);\t\t\\\n+\terror = 1;\t\t\t\t\t\\\n+      }\t\t\t\t\t\t\t\\\n+  } while (0)\n+\n+#ifndef __HS__\n+/* Special type of NaN found when using double FPX instructions.  */\n+static const unsigned long long __nan = 0x7FF0000080000000ULL;\n+# define W (*(double *) &__nan)\n+#else\n+# define W __builtin_nan (\"\")\n+#endif\n+\n+#define Q __builtin_nan (\"\")\n+#define H __builtin_inf ()\n+\n+int main (void)\n+{\n+  int error = 0;\n+\n+  TEST_EQ (double, 1, 1, 1);\n+  TEST_EQ (double, 1, 2, 0);\n+  TEST_EQ (double, W, W, 0);\n+  TEST_EQ (double, Q, Q, 0);\n+  TEST_EQ (double, __DBL_MAX__, __DBL_MAX__, 1);\n+  TEST_EQ (double, __DBL_MIN__, __DBL_MIN__, 1);\n+  TEST_EQ (double, H, H, 1);\n+\n+  if (error)\n+    __builtin_abort ();\n+\n+  return 0;\n+}"}, {"sha": "df51a6e0d33fa4b7a8dce5f57622cf3c0d1a5251", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39d504645250d0d367247807e23edf5f74252b6e/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39d504645250d0d367247807e23edf5f74252b6e/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=39d504645250d0d367247807e23edf5f74252b6e", "patch": "@@ -1,3 +1,7 @@\n+2016-04-29  Claudiu Zissulescu  <claziss@synopsys.com>\n+\n+\t* config/arc/ieee-754/eqdf2.S: Handle FPX NaN.\n+\n 2016-04-28  Claudiu Zissulescu  <claziss@synopsys.com>\n \t    Joern Rennecke  <joern.rennecke@embecosm.com>\n "}, {"sha": "7e80ef52b2a8afd46f5b7fbe5b069cba80942e4c", "filename": "libgcc/config/arc/ieee-754/eqdf2.S", "status": "modified", "additions": 10, "deletions": 5, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39d504645250d0d367247807e23edf5f74252b6e/libgcc%2Fconfig%2Farc%2Fieee-754%2Feqdf2.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39d504645250d0d367247807e23edf5f74252b6e/libgcc%2Fconfig%2Farc%2Fieee-754%2Feqdf2.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Farc%2Fieee-754%2Feqdf2.S?ref=39d504645250d0d367247807e23edf5f74252b6e", "patch": "@@ -58,11 +58,16 @@ __eqdf2:\n \t   well predictable (as seen from the branch predictor).  */\n __eqdf2:\n \tbrne.d DBL0H,DBL1H,.Lhighdiff\n-\tbmsk r12,DBL0H,20\n-#ifdef DPFP_COMPAT\n-\tor.f 0,DBL0L,DBL1L\n-\tbset.ne r12,r12,21\n-#endif /* DPFP_COMPAT */\n+#ifndef __HS__\n+\t/* The next two instructions are required to recognize the FPX\n+\tNaN, which has a pattern like this: 0x7ff0_0000_8000_0000, as\n+\toposite to 0x7ff8_0000_0000_0000.  */\n+\tor.f    0,DBL0L,DBL1L\n+\tmov_s\tr12,0x00200000\n+\tbset.ne r12,r12,0\n+#else\n+\tbmsk    r12,DBL0H,20\n+#endif /* __HS__ */\n \tadd1.f\tr12,r12,DBL0H /* set c iff NaN; also, clear z if NaN.  */\n \tj_s.d\t[blink]\n \tcmp.cc\tDBL0L,DBL1L"}]}