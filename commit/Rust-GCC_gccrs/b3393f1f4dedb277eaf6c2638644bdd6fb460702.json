{"sha": "b3393f1f4dedb277eaf6c2638644bdd6fb460702", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjMzOTNmMWY0ZGVkYjI3N2VhZjZjMjYzODY0NGJkZDZmYjQ2MDcwMg==", "commit": {"author": {"name": "Zdenek Dvorak", "email": "rakdver@atrey.karlin.mff.cuni.cz", "date": "2004-08-24T20:50:42Z"}, "committer": {"name": "Zdenek Dvorak", "email": "rakdver@gcc.gnu.org", "date": "2004-08-24T20:50:42Z"}, "message": "re PR tree-optimization/17016 (ICE with struct passed as reference)\n\n\tPR tree-optimization/17016\n\t* tree-ssa-loop-niter.c (number_of_iterations_cond,\n\tnumber_of_iterations_exit): Use POINTER_TYPE_P instead\n\tof testing for POINTER_TYPE.\n\nFrom-SVN: r86517", "tree": {"sha": "fe4b6ef3b48d94afd46bc5b19f7cf85f957f5e24", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fe4b6ef3b48d94afd46bc5b19f7cf85f957f5e24"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b3393f1f4dedb277eaf6c2638644bdd6fb460702", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3393f1f4dedb277eaf6c2638644bdd6fb460702", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3393f1f4dedb277eaf6c2638644bdd6fb460702", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3393f1f4dedb277eaf6c2638644bdd6fb460702/comments", "author": null, "committer": null, "parents": [{"sha": "82b85a85c82cefd0594c8bec02ab17a2ad6e9284", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82b85a85c82cefd0594c8bec02ab17a2ad6e9284", "html_url": "https://github.com/Rust-GCC/gccrs/commit/82b85a85c82cefd0594c8bec02ab17a2ad6e9284"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "a9770c0bf153bb8185f76bf4ff76ca23f809e1cc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3393f1f4dedb277eaf6c2638644bdd6fb460702/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3393f1f4dedb277eaf6c2638644bdd6fb460702/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b3393f1f4dedb277eaf6c2638644bdd6fb460702", "patch": "@@ -1,3 +1,10 @@\n+2004-08-24  Zdenek Dvorak  <rakdver@atrey.karlin.mff.cuni.cz>\n+\n+\tPR tree-optimization/17016\n+\t* tree-ssa-loop-niter.c (number_of_iterations_cond,\n+\tnumber_of_iterations_exit): Use POINTER_TYPE_P instead\n+\tof testing for POINTER_TYPE.\n+\n 2004-08-24  Zdenek Dvorak  <rakdver@atrey.karlin.mff.cuni.cz>\n \n \t* tree-ssa-loop-ivcanon.c: New file."}, {"sha": "caba8b53b98da46c444b4a88ec3b5f66b7cb07da", "filename": "gcc/tree-ssa-loop-niter.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3393f1f4dedb277eaf6c2638644bdd6fb460702/gcc%2Ftree-ssa-loop-niter.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3393f1f4dedb277eaf6c2638644bdd6fb460702/gcc%2Ftree-ssa-loop-niter.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-loop-niter.c?ref=b3393f1f4dedb277eaf6c2638644bdd6fb460702", "patch": "@@ -171,7 +171,7 @@ number_of_iterations_cond (tree type, tree base0, tree step0,\n \treturn;\n     }\n \n-  if (TREE_CODE (type) == POINTER_TYPE)\n+  if (POINTER_TYPE_P (type))\n     {\n       /* We assume pointer arithmetic never overflows.  */\n       mmin = mmax = NULL_TREE;\n@@ -653,7 +653,7 @@ number_of_iterations_exit (struct loop *loop, edge exit,\n   type = TREE_TYPE (op0);\n \n   if (TREE_CODE (type) != INTEGER_TYPE\n-    && TREE_CODE (type) != POINTER_TYPE)\n+      && !POINTER_TYPE_P (type))\n     return false;\n      \n   if (!simple_iv (loop, stmt, op0, &base0, &step0))"}]}