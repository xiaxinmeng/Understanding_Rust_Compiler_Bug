{"sha": "e50ea10b75a2af7551b4f25448fa25105019863f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTUwZWExMGI3NWEyYWY3NTUxYjRmMjU0NDhmYTI1MTA1MDE5ODYzZg==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2009-03-25T13:36:02Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2009-03-25T13:36:02Z"}, "message": "atomic-5.c: Cleanup cpuid usage.\n\n\t* testsuite/libgomp.c/atomic-5.c: Cleanup cpuid usage.\n\t* testsuite/libgomp.c/atomic-6.c: Ditto.\n\nFrom-SVN: r145061", "tree": {"sha": "375bff9fc45bc2ed43c7849dd6264aa8d06342bc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/375bff9fc45bc2ed43c7849dd6264aa8d06342bc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e50ea10b75a2af7551b4f25448fa25105019863f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e50ea10b75a2af7551b4f25448fa25105019863f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e50ea10b75a2af7551b4f25448fa25105019863f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e50ea10b75a2af7551b4f25448fa25105019863f/comments", "author": null, "committer": null, "parents": [{"sha": "370017b40f9776c6861618c06f605903aa53b42e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/370017b40f9776c6861618c06f605903aa53b42e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/370017b40f9776c6861618c06f605903aa53b42e"}], "stats": {"total": 29, "additions": 18, "deletions": 11}, "files": [{"sha": "a77fdde70e9f6a88ffb16b93c8e8caf228305986", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e50ea10b75a2af7551b4f25448fa25105019863f/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e50ea10b75a2af7551b4f25448fa25105019863f/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=e50ea10b75a2af7551b4f25448fa25105019863f", "patch": "@@ -1,3 +1,8 @@\n+2009-03-25  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\t* testsuite/libgomp.c/atomic-5.c: Cleanup cpuid usage.\n+\t* testsuite/libgomp.c/atomic-6.c: Ditto.\n+\n 2009-03-23  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c/39495\n@@ -25,7 +30,7 @@\n \n 2009-01-19  Iain Sandoe  <iain.sandoe@sandoe-acoustics.co.uk>\n \n-        * testsuite/lib/libgomp.exp: Add -B option for targets that\n+\t* testsuite/lib/libgomp.exp: Add -B option for targets that\n \tuse libgfortran.a%s in their specs.\n \n 2009-01-07  Jakub Jelinek  <jakub@redhat.com>"}, {"sha": "168f68dd6a7d340de8541d4567681bc781d48b39", "filename": "libgomp/testsuite/libgomp.c/atomic-5.c", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e50ea10b75a2af7551b4f25448fa25105019863f/libgomp%2Ftestsuite%2Flibgomp.c%2Fatomic-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e50ea10b75a2af7551b4f25448fa25105019863f/libgomp%2Ftestsuite%2Flibgomp.c%2Fatomic-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2Fatomic-5.c?ref=e50ea10b75a2af7551b4f25448fa25105019863f", "patch": "@@ -3,7 +3,7 @@\n /* { dg-options \"-O2 -mcx16\" { target { { i?86-*-* x86_64-*-* } && lp64 } } } */\n \n #ifdef __x86_64__\n-# include \"../../../gcc/config/i386/cpuid.h\"\n+# include \"cpuid.h\"\n #endif\n \n extern void abort (void);\n@@ -31,10 +31,11 @@ main (void)\n   if (!__get_cpuid (1, &eax, &ebx, &ecx, &edx))\n     return 0;\n \n-  if (ecx & bit_CMPXCHG16B)\n-    do_test ();\n-#else\n-  do_test ();\n+  if (!(ecx & bit_CMPXCHG16B))\n+    return 0;\n #endif\n+\n+  do_test ();\n+\n   return 0;\n }"}, {"sha": "59baf7dd3e20b744980748c5386384f7f0ec2a6a", "filename": "libgomp/testsuite/libgomp.c/atomic-6.c", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e50ea10b75a2af7551b4f25448fa25105019863f/libgomp%2Ftestsuite%2Flibgomp.c%2Fatomic-6.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e50ea10b75a2af7551b4f25448fa25105019863f/libgomp%2Ftestsuite%2Flibgomp.c%2Fatomic-6.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2Fatomic-6.c?ref=e50ea10b75a2af7551b4f25448fa25105019863f", "patch": "@@ -4,7 +4,7 @@\n /* { dg-options \"-O2 -march=i586\" { target { { i?86-*-* x86_64-*-* } && ilp32 } } } */\n \n #ifdef __i386__\n-# include \"../../../gcc/config/i386/cpuid.h\"\n+# include \"cpuid.h\"\n #endif\n \n extern void abort (void);\n@@ -28,10 +28,11 @@ main (void)\n   if (!__get_cpuid (1, &eax, &ebx, &ecx, &edx))\n     return 0;\n \n-  if (edx & bit_CMPXCHG8B)\n-    do_test ();\n-#else\n-  do_test ();\n+  if (!(edx & bit_CMPXCHG8B))\n+    return 0;\n #endif\n+\n+  do_test ();\n+\n   return 0;\n }"}]}