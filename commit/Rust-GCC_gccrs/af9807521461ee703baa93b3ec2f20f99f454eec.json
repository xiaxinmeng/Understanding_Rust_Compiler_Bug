{"sha": "af9807521461ee703baa93b3ec2f20f99f454eec", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWY5ODA3NTIxNDYxZWU3MDNiYWE5M2IzZWMyZjIwZjk5ZjQ1NGVlYw==", "commit": {"author": {"name": "Janis Johnson", "email": "janis187@us.ibm.com", "date": "2004-11-11T18:00:30Z"}, "committer": {"name": "Janis Johnson", "email": "janis@gcc.gnu.org", "date": "2004-11-11T18:00:30Z"}, "message": "linkage.exp: Prepend directory name to pass/fail message...\n\n\t* gcc.misc-tests/linkage.exp: Prepend directory name to pass/fail\n\tmessage, delete generated files, use more descriptive name for\n\texecutable, and make the test unsupported when it cannot be run.\n\nFrom-SVN: r90487", "tree": {"sha": "3c4ab1a7acdfa499fbfcf79eff7dfc31bbd1a00d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3c4ab1a7acdfa499fbfcf79eff7dfc31bbd1a00d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/af9807521461ee703baa93b3ec2f20f99f454eec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af9807521461ee703baa93b3ec2f20f99f454eec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af9807521461ee703baa93b3ec2f20f99f454eec", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af9807521461ee703baa93b3ec2f20f99f454eec/comments", "author": null, "committer": null, "parents": [{"sha": "5278e4760014a9c09467828745c04b1d4c8e78e5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5278e4760014a9c09467828745c04b1d4c8e78e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5278e4760014a9c09467828745c04b1d4c8e78e5"}], "stats": {"total": 21, "additions": 16, "deletions": 5}, "files": [{"sha": "aea8f21d3e19f4c7ea647866b0bc47544a8a87c4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af9807521461ee703baa93b3ec2f20f99f454eec/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af9807521461ee703baa93b3ec2f20f99f454eec/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=af9807521461ee703baa93b3ec2f20f99f454eec", "patch": "@@ -1,5 +1,9 @@\n 2004-11-11  Janis Johnson  <janis187@us.ibm.com>\n \n+\t* gcc.misc-tests/linkage.exp: Prepend directory name to pass/fail\n+\tmessage, delete generated files, use more descriptive name for\n+\texecutable, and make the test unsupported when it cannot be run.\n+\n \t* lib/gcc-dg.exp (skip_test_and_clear_xfail): New procedure.\n \t(dg-require-weak, dg-require-visibility, dg-require-alias,\n \tdg-require-gc-sections, dg-require-profiling, dg-require-dll,"}, {"sha": "7d4f8e95f03fade1b75b743ae8a193083e34e049", "filename": "gcc/testsuite/gcc.misc-tests/linkage.exp", "status": "modified", "additions": 12, "deletions": 5, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af9807521461ee703baa93b3ec2f20f99f454eec/gcc%2Ftestsuite%2Fgcc.misc-tests%2Flinkage.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af9807521461ee703baa93b3ec2f20f99f454eec/gcc%2Ftestsuite%2Fgcc.misc-tests%2Flinkage.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.misc-tests%2Flinkage.exp?ref=af9807521461ee703baa93b3ec2f20f99f454eec", "patch": "@@ -21,7 +21,7 @@\n if [isnative] then {\n     set lines [gcc_target_compile \"$srcdir/$subdir/linkage-x.c\" \"linkage-x.o\" object {additional_flags=\"-w\"}]\n     if ![string match \"\" $lines] then {\n-\tfail \"linkage.c\"\n+\tfail \"$subdir/linkage.c compile\"\n     } else {\n \t# This is a completely bogus test. Sorry.\n \n@@ -65,20 +65,27 @@ if [isnative] then {\n \t    }\n \t}\n \n-\tcatch { exec rm -f linkage-y.o }\n+\tif [file exists \"linkage-y.o\"] then {\n+\t    file delete \"linkage-y.o\"\n+\t}\n \tsend_log \"cc -c $native_cflags $srcdir/$subdir/linkage-y.c >&/dev/null\\n\"\n \tcatch { exec cc -c $native_cflags \"$srcdir/$subdir/linkage-y.c\" >&/dev/null }\n \tif ![file exists \"linkage-y.o\"] then {\n \t    send_log \"c89 -c $native_cflags $srcdir/$subdir/linkage-y.c >&/dev/null\\n\"\n \t    catch { exec c89 -c $native_cflags \"$srcdir/$subdir/linkage-y.c\" >&/dev/null }\n \t}\n \tif [file exists \"linkage-y.o\"] then {\n-\t    set lines [gcc_target_compile \"linkage-y.o linkage-x.o\" \"x\" executable \"\"]\n+\t    set lines [gcc_target_compile \"linkage-y.o linkage-x.o\" \"linkage.exe\" executable \"\"]\n \t    if [string match \"\" $lines] then {\n-\t\tpass \"linkage.c\"\n+\t\tpass \"$subdir/linkage.c link\"\n+\t\tfile delete \"linkage.exe\"\n \t    } else {\n-\t\tfail \"linkage.c\"\n+\t\tfail \"$subdir/linkage.c link\"\n \t    }\n+\t    file delete \"linkage-y.o\"\n+\t} else {\n+\t    unsupported \"$subdir/linkage.c native compile failed\"\n \t}\n+\tfile delete \"linkage-x.o\"\n     }\n }"}]}