{"sha": "01ea0437ead0dda3acd51cfb80a01de5feb56929", "node_id": "C_kwDOANBUbNoAKDAxZWEwNDM3ZWFkMGRkYTNhY2Q1MWNmYjgwYTAxZGU1ZmViNTY5Mjk", "commit": {"author": {"name": "Piotr Trojanek", "email": "trojanek@adacore.com", "date": "2022-09-23T17:06:54Z"}, "committer": {"name": "Marc Poulhi\u00e8s", "email": "poulhies@adacore.com", "date": "2022-09-29T09:08:46Z"}, "message": "ada: Fix checking of Refined_State with nested package renamings\n\nWhen collecting package state declared in package body, we should only\nrecursively examine the visible part of nested packages while ignoring other\nentities related to packages (e.g. package bodies or package renamings).\n\ngcc/ada/\n\n\t* sem_util.adb (Collect_Visible_States): Ignore package renamings.", "tree": {"sha": "fed64b56dcb28db8a2e6735a7a6660fb3c0d2e3f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fed64b56dcb28db8a2e6735a7a6660fb3c0d2e3f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/01ea0437ead0dda3acd51cfb80a01de5feb56929", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/01ea0437ead0dda3acd51cfb80a01de5feb56929", "html_url": "https://github.com/Rust-GCC/gccrs/commit/01ea0437ead0dda3acd51cfb80a01de5feb56929", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/01ea0437ead0dda3acd51cfb80a01de5feb56929/comments", "author": {"login": "ptroja", "id": 161602, "node_id": "MDQ6VXNlcjE2MTYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/161602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptroja", "html_url": "https://github.com/ptroja", "followers_url": "https://api.github.com/users/ptroja/followers", "following_url": "https://api.github.com/users/ptroja/following{/other_user}", "gists_url": "https://api.github.com/users/ptroja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptroja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptroja/subscriptions", "organizations_url": "https://api.github.com/users/ptroja/orgs", "repos_url": "https://api.github.com/users/ptroja/repos", "events_url": "https://api.github.com/users/ptroja/events{/privacy}", "received_events_url": "https://api.github.com/users/ptroja/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dkm", "id": 87603, "node_id": "MDQ6VXNlcjg3NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/87603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dkm", "html_url": "https://github.com/dkm", "followers_url": "https://api.github.com/users/dkm/followers", "following_url": "https://api.github.com/users/dkm/following{/other_user}", "gists_url": "https://api.github.com/users/dkm/gists{/gist_id}", "starred_url": "https://api.github.com/users/dkm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dkm/subscriptions", "organizations_url": "https://api.github.com/users/dkm/orgs", "repos_url": "https://api.github.com/users/dkm/repos", "events_url": "https://api.github.com/users/dkm/events{/privacy}", "received_events_url": "https://api.github.com/users/dkm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a1cd4d52d6ef90b977fb2d80c1cf17f3efa5b01d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a1cd4d52d6ef90b977fb2d80c1cf17f3efa5b01d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a1cd4d52d6ef90b977fb2d80c1cf17f3efa5b01d"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "25e886e1ca14d3577c39eabf6852aecaee142c03", "filename": "gcc/ada/sem_util.adb", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/01ea0437ead0dda3acd51cfb80a01de5feb56929/gcc%2Fada%2Fsem_util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/01ea0437ead0dda3acd51cfb80a01de5feb56929/gcc%2Fada%2Fsem_util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_util.adb?ref=01ea0437ead0dda3acd51cfb80a01de5feb56929", "patch": "@@ -6018,8 +6018,11 @@ package body Sem_Util is\n                Append_New_Elmt (Item_Id, States);\n \n             --  Recursively gather the visible states of a nested package\n+            --  except for nested package renamings.\n \n-            elsif Ekind (Item_Id) = E_Package then\n+            elsif Ekind (Item_Id) = E_Package\n+              and then No (Renamed_Entity (Item_Id))\n+            then\n                Collect_Visible_States (Item_Id, States);\n             end if;\n "}]}