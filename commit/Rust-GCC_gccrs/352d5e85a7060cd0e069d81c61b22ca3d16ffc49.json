{"sha": "352d5e85a7060cd0e069d81c61b22ca3d16ffc49", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzUyZDVlODVhNzA2MGNkMGUwNjlkODFjNjFiMjJjYTNkMTZmZmM0OQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2021-08-26T19:37:46Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2021-08-26T19:37:46Z"}, "message": "Fix ipa-modref verification ices\n\n\t* ipa-modref-tree.h (modref_access_node::try_merge_with): Restart\n\tsearch after merging.", "tree": {"sha": "f456a844800fea1c8b3e39a977d4f1c36edb9f97", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f456a844800fea1c8b3e39a977d4f1c36edb9f97"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/352d5e85a7060cd0e069d81c61b22ca3d16ffc49", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/352d5e85a7060cd0e069d81c61b22ca3d16ffc49", "html_url": "https://github.com/Rust-GCC/gccrs/commit/352d5e85a7060cd0e069d81c61b22ca3d16ffc49", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/352d5e85a7060cd0e069d81c61b22ca3d16ffc49/comments", "author": null, "committer": null, "parents": [{"sha": "e2693a72701fe55995c0cca5a014b733a9f0aa64", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e2693a72701fe55995c0cca5a014b733a9f0aa64", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e2693a72701fe55995c0cca5a014b733a9f0aa64"}], "stats": {"total": 33, "additions": 24, "deletions": 9}, "files": [{"sha": "a86e684a030a8131413ab10932766ef1af4d4e09", "filename": "gcc/ipa-modref-tree.h", "status": "modified", "additions": 24, "deletions": 9, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/352d5e85a7060cd0e069d81c61b22ca3d16ffc49/gcc%2Fipa-modref-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/352d5e85a7060cd0e069d81c61b22ca3d16ffc49/gcc%2Fipa-modref-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-modref-tree.h?ref=352d5e85a7060cd0e069d81c61b22ca3d16ffc49", "patch": "@@ -405,20 +405,35 @@ struct GTY((user)) modref_ref_node\n   void\n   try_merge_with (size_t index)\n   {\n-    modref_access_node *a2;\n     size_t i;\n \n-    FOR_EACH_VEC_SAFE_ELT (accesses, i, a2)\n-      if (i != index\n-\t  && ((*accesses)[index].contains (*a2)\n-\t      || (*accesses)[index].merge (*a2, false)))\n+    for (i = 0; i < accesses->length ();)\n+      if (i != index)\n \t{\n-\t  accesses->unordered_remove (i);\n-\t  if (index == accesses->length ())\n-\t    index = i;\n+\t  bool found = false, restart = false;\n+\t  modref_access_node *a = &(*accesses)[i];\n+\t  modref_access_node *n = &(*accesses)[index];\n+\n+\t  if (n->contains (*a))\n+\t    found = true;\n+\t  if (!found && n->merge (*a, false))\n+\t    found = restart = true;\n+\t  if (found)\n+\t    {\n+\t      accesses->unordered_remove (i);\n+\t      if (index == accesses->length ())\n+\t\t{\n+\t\t  index = i;\n+\t\t  i++;\n+\t\t}\n+\t      if (restart)\n+\t\ti = 0;\n+\t    }\n \t  else\n-\t    i--;\n+\t    i++;\n \t}\n+      else\n+\ti++;\n   }\n };\n "}]}