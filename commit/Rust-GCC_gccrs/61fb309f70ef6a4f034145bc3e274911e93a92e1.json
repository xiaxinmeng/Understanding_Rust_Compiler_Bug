{"sha": "61fb309f70ef6a4f034145bc3e274911e93a92e1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjFmYjMwOWY3MGVmNmE0ZjAzNDE0NWJjM2UyNzQ5MTFlOTNhOTJlMQ==", "commit": {"author": {"name": "Kaveh R. Ghazi", "email": "ghazi@caip.rutgers.edu", "date": "2006-10-30T20:21:59Z"}, "committer": {"name": "Kaveh Ghazi", "email": "ghazi@gcc.gnu.org", "date": "2006-10-30T20:21:59Z"}, "message": "re PR middle-end/29335 (transcendental functions with constant arguments should be resolved at compile-time)\n\n\tPR middle-end/29335\n\t* builtins.c (fold_builtin_1): Evaluate tgamma using MPFR.\n\ntestsuite:\n\t* gcc.dg/torture/builtin-math-2.c: Add tgamma tests.\n\t* gcc.dg/torture/builtin-math-3.c: Likewise.\n\nFrom-SVN: r118200", "tree": {"sha": "a54e7be62c04933fea70fa36cb64e800264525af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a54e7be62c04933fea70fa36cb64e800264525af"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/61fb309f70ef6a4f034145bc3e274911e93a92e1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/61fb309f70ef6a4f034145bc3e274911e93a92e1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/61fb309f70ef6a4f034145bc3e274911e93a92e1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/61fb309f70ef6a4f034145bc3e274911e93a92e1/comments", "author": null, "committer": null, "parents": [{"sha": "ff81aa23e51c3d3c1fb52449c583bafeca04ca3f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff81aa23e51c3d3c1fb52449c583bafeca04ca3f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff81aa23e51c3d3c1fb52449c583bafeca04ca3f"}], "stats": {"total": 41, "additions": 41, "deletions": 0}, "files": [{"sha": "87126bd54e0c06903c589e3263426606f9599ab8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/61fb309f70ef6a4f034145bc3e274911e93a92e1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/61fb309f70ef6a4f034145bc3e274911e93a92e1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=61fb309f70ef6a4f034145bc3e274911e93a92e1", "patch": "@@ -1,3 +1,8 @@\n+2006-10-30  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+\n+\tPR middle-end/29335\n+\t* builtins.c (fold_builtin_1): Evaluate tgamma using MPFR.\n+\n 2006-10-30  Pete Steinmetz  <steinmtz@us.ibm.com>\n \n \t* recog.c (store_data_bypass_p): Add support to allow IN_INSN to"}, {"sha": "2184c714bdbaf7988c19998990a5dd0b65ef9c62", "filename": "gcc/builtins.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/61fb309f70ef6a4f034145bc3e274911e93a92e1/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/61fb309f70ef6a4f034145bc3e274911e93a92e1/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=61fb309f70ef6a4f034145bc3e274911e93a92e1", "patch": "@@ -9121,6 +9121,12 @@ fold_builtin_1 (tree fndecl, tree arglist, bool ignore)\n \t\t\t     NULL, NULL, 0);\n     break;\n \n+    CASE_FLT_FN (BUILT_IN_TGAMMA):\n+      if (validate_arglist (arglist, REAL_TYPE, VOID_TYPE))\n+\treturn do_mpfr_arg1 (TREE_VALUE (arglist), type, mpfr_gamma,\n+\t\t\t     NULL, NULL, 0);\n+    break;\n+ \n     CASE_FLT_FN (BUILT_IN_EXP):\n       return fold_builtin_exponent (fndecl, arglist, mpfr_exp);\n "}, {"sha": "1c6b906c3c18f107fa6cea67552e66ba573e611a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/61fb309f70ef6a4f034145bc3e274911e93a92e1/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/61fb309f70ef6a4f034145bc3e274911e93a92e1/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=61fb309f70ef6a4f034145bc3e274911e93a92e1", "patch": "@@ -1,3 +1,8 @@\n+2006-10-30  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+\n+\t* gcc.dg/torture/builtin-math-2.c: Add tgamma tests.\n+\t* gcc.dg/torture/builtin-math-3.c: Likewise.\n+\n 2006-10-30  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/29452"}, {"sha": "5b5d55a7d20b929ac1ededa7b6ffe9f200fc0390", "filename": "gcc/testsuite/gcc.dg/torture/builtin-math-2.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/61fb309f70ef6a4f034145bc3e274911e93a92e1/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fbuiltin-math-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/61fb309f70ef6a4f034145bc3e274911e93a92e1/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fbuiltin-math-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fbuiltin-math-2.c?ref=61fb309f70ef6a4f034145bc3e274911e93a92e1", "patch": "@@ -90,6 +90,13 @@ void bar()\n   TESTIT (log1p, -2.0);\n   TESTIT (log1p, -1.0);\n \n+  /* The tgamma arg errors with zero or negative integers.  */\n+  TESTIT (tgamma, 0.0);\n+  TESTIT (tgamma, -0.0);\n+  TESTIT (tgamma, -1.0);\n+  TESTIT (tgamma, -2.0);\n+  TESTIT (tgamma, -3.0);\n+\n   /* An argument of NaN is not evaluated at compile-time.  */\n   foof (__builtin_powf (__builtin_nanf(\"\"), 2.5F));\n   foo (__builtin_pow (__builtin_nan(\"\"), 2.5));\n@@ -155,6 +162,9 @@ void bar()\n /* { dg-final { scan-tree-dump-times \"log1p \" 2 \"original\" } } */\n /* { dg-final { scan-tree-dump-times \"log1pf\" 2 \"original\" } } */\n /* { dg-final { scan-tree-dump-times \"log1pl\" 2 \"original\" } } */\n+/* { dg-final { scan-tree-dump-times \"tgamma \" 5 \"original\" } } */\n+/* { dg-final { scan-tree-dump-times \"tgammaf\" 5 \"original\" } } */\n+/* { dg-final { scan-tree-dump-times \"tgammal\" 5 \"original\" } } */\n /* { dg-final { scan-tree-dump-times \"pow \" 13 \"original\" } } */\n /* { dg-final { scan-tree-dump-times \"powf\" 13 \"original\" } } */\n /* { dg-final { scan-tree-dump-times \"powl\" 13 \"original\" } } */"}, {"sha": "34e02720eff1927dc968ccc60134ef3c6da50320", "filename": "gcc/testsuite/gcc.dg/torture/builtin-math-3.c", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/61fb309f70ef6a4f034145bc3e274911e93a92e1/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fbuiltin-math-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/61fb309f70ef6a4f034145bc3e274911e93a92e1/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fbuiltin-math-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fbuiltin-math-3.c?ref=61fb309f70ef6a4f034145bc3e274911e93a92e1", "patch": "@@ -175,6 +175,21 @@ int main (void)\n   TESTIT_R (erfc, 1.0, 0.15, 0.16); /* erfc(1) == 0.157... */\n   TESTIT_R (erfc, -1.0, 1.84, 1.85); /* erfc(-1) == 1.842... */\n \n+  TESTIT_R (tgamma, -4.5, -0.061, -0.060); /* tgamma(-4.5) == -0.06001... */\n+  TESTIT_R (tgamma, -3.5, 0.27, 0.28); /* tgamma(-3.5) == 0.27008... */\n+  TESTIT_R (tgamma, -2.5, -0.95, -0.94); /* tgamma(-2.5) == -0.945... */\n+  TESTIT_R (tgamma, -1.5, 2.36, 2.37); /* tgamma(-1.5) == 2.363... */\n+  TESTIT_R (tgamma, -0.5, -3.55, -3.54); /* tgamma(-0.5) == -3.544... */\n+  TESTIT_R (tgamma, 0.5, 1.77, 1.78); /* tgamma(0.5) == 1.772... */\n+  TESTIT (tgamma, 1.0, 1.0); /* tgamma(1) == 1 */\n+  TESTIT_R (tgamma, 1.5, 0.88, 0.89); /* tgamma(1.5) == 0.886... */\n+  TESTIT (tgamma, 2.0, 1.0); /* tgamma(2) == 1 */\n+  TESTIT_R (tgamma, 2.5, 1.32, 1.33); /* tgamma(2.5) == 1.329... */\n+  TESTIT (tgamma, 3.0, 2.0); /* tgamma(3) == 2 */\n+  TESTIT_R (tgamma, 3.5, 3.32, 3.33); /* tgamma(3.5) == 3.323... */\n+  TESTIT (tgamma, 4.0, 6.0); /* tgamma(4) == 6 */\n+  TESTIT_R (tgamma, 4.5, 11.63, 11.64); /* tgamma(4.5) == 11.631... */\n+\n   TESTIT2 (pow, 3.0, 4.0, 81.0); /* pow(3,4) == 81 */\n   TESTIT2 (pow, -3.0, 5.0, -243.0); /* pow(-3,5) == -243 */\n   TESTIT2 (pow, 16.0, 0.25, 2.0); /* pow(16,1/4) == 2 */"}]}