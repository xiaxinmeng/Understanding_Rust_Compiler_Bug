{"sha": "25c341fa216dca726db5420520af9b8a2508d94f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjVjMzQxZmEyMTZkY2E3MjZkYjU0MjA1MjBhZjliOGEyNTA4ZDk0Zg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-12-10T12:23:07Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-12-10T12:23:07Z"}, "message": "Change numerous occurrences of TARGET_POWERPC to ! TARGET_POWER and\nmake related changes.\n\nFrom-SVN: r6199", "tree": {"sha": "1ef538d3c6d8d696ce7cd70e2039847ca3ab014f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1ef538d3c6d8d696ce7cd70e2039847ca3ab014f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/25c341fa216dca726db5420520af9b8a2508d94f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/25c341fa216dca726db5420520af9b8a2508d94f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/25c341fa216dca726db5420520af9b8a2508d94f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/25c341fa216dca726db5420520af9b8a2508d94f/comments", "author": null, "committer": null, "parents": [{"sha": "85644414f92af929ab88c7a06e6d131df09a3e3c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/85644414f92af929ab88c7a06e6d131df09a3e3c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/85644414f92af929ab88c7a06e6d131df09a3e3c"}], "stats": {"total": 72, "additions": 33, "deletions": 39}, "files": [{"sha": "8bf5cd08ca6c80eb88d2d6caf990b994a8990f77", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 33, "deletions": 39, "changes": 72, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/25c341fa216dca726db5420520af9b8a2508d94f/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/25c341fa216dca726db5420520af9b8a2508d94f/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=25c341fa216dca726db5420520af9b8a2508d94f", "patch": "@@ -684,7 +684,7 @@\n \t\t\t     (match_operand:SI 2 \"gpc_reg_operand\" \"r\"))\n \t\t    (const_int 0)))\n    (clobber (match_scratch:SI 3 \"=r\"))]\n-  \"TARGET_POWERPC\"\n+  \"! TARGET_POWER\"\n   \"mullw. %3,%1,%2\"\n   [(set_attr \"type\" \"delayed_compare\")])\n \n@@ -707,7 +707,7 @@\n \t\t    (const_int 0)))\n    (set (match_operand:SI 0 \"gpc_reg_operand\" \"=r\")\n \t(mult:SI (match_dup 1) (match_dup 2)))]\n-  \"TARGET_POWERPC\"\n+  \"! TARGET_POWER\"\n   \"mullw. %0,%1,%2\"\n   [(set_attr \"type\" \"delayed_compare\")])\n \n@@ -755,11 +755,10 @@\n       && exact_log2 (INTVAL (operands[2])) >= 0)\n     ;\n \n-  else if (TARGET_POWER)\n+  else if (! TARGET_POWERPC)\n     FAIL;\n \n-  else if (TARGET_POWERPC)\n-    operands[2] = force_reg (SImode, operands[2]);\n+  operands[2] = force_reg (SImode, operands[2]);\n }\")\n \n (define_expand \"modsi3\"\n@@ -1560,7 +1559,7 @@\n   if (TARGET_POWER)\n     emit_insn (gen_ashlsi3_power (operands[0], operands[1], operands[2]));\n   else\n-    emit_insn (gen_ashlsi3_powerpc (operands[0], operands[1], operands[2]));\n+    emit_insn (gen_ashlsi3_no_power (operands[0], operands[1], operands[2]));\n   DONE;\n }\")\n \n@@ -1575,11 +1574,11 @@\n    {sli|slwi} %0,%1,%h2\"\n   [(set_attr \"length\" \"8\")])\n \n-(define_insn \"ashlsi3_powerpc\"\n+(define_insn \"ashlsi3_no_power\"\n   [(set (match_operand:SI 0 \"gpc_reg_operand\" \"=r\")\n \t(ashift:SI (match_operand:SI 1 \"gpc_reg_operand\" \"r\")\n \t\t   (match_operand:SI 2 \"reg_or_cint_operand\" \"ri\")))]\n-  \"TARGET_POWERPC\"\n+  \"! TARGET_POWER\"\n   \"slw%I2 %0,%1,%2\"\n   [(set_attr \"length\" \"8\")])\n \n@@ -1595,6 +1594,7 @@\n    sle. %3,%1,%2\n    {sli.|slwi.} %3,%1,%h2\"\n   [(set_attr \"type\" \"delayed_compare\")])\n+\n (define_insn \"\"\n   [(set (match_operand:CC 0 \"cc_reg_operand\" \"=x\")\n \t(compare:CC (ashift:SI (match_operand:SI 1 \"gpc_reg_operand\" \"r\")\n@@ -1618,6 +1618,7 @@\n    sle. %0,%1,%2\n    {sli.|slwi.} %0,%1,%h2\"\n   [(set_attr \"type\" \"delayed_compare\")])\n+\n (define_insn \"\"\n   [(set (match_operand:CC 3 \"cc_reg_operand\" \"=x\")\n \t(compare:CC (ashift:SI (match_operand:SI 1 \"gpc_reg_operand\" \"r\")\n@@ -1674,7 +1675,7 @@\n   if (TARGET_POWER)\n     emit_insn (gen_lshrsi3_power (operands[0], operands[1], operands[2]));\n   else\n-    emit_insn (gen_lshrsi3_powerpc (operands[0], operands[1], operands[2]));\n+    emit_insn (gen_lshrsi3_no_power (operands[0], operands[1], operands[2]));\n   DONE;\n }\")\n \n@@ -1688,11 +1689,11 @@\n   sre %0,%1,%2\n   {s%A2i|s%A2wi} %0,%1,%h2\")\n \n-(define_insn \"lshrsi3_powerpc\"\n+(define_insn \"lshrsi3_no_power\"\n   [(set (match_operand:SI 0 \"gpc_reg_operand\" \"=r\")\n \t(lshiftrt:SI (match_operand:SI 1 \"gpc_reg_operand\" \"r\")\n \t\t     (match_operand:SI 2 \"reg_or_cint_operand\" \"ri\")))]\n-  \"TARGET_POWERPC\"\n+  \"! TARGET_POWER\"\n   \"srw%I2 %0,%1,%2\")\n \n (define_insn \"\"\n@@ -1714,7 +1715,7 @@\n \t\t\t\t (match_operand:SI 2 \"reg_or_cint_operand\" \"ri\"))\n \t\t    (const_int 0)))\n    (clobber (match_scratch:SI 3 \"=r\"))]\n-  \"TARGET_POWERPC\"\n+  \"! TARGET_POWER\"\n   \"srw%I2. %3,%1,%2\"\n   [(set_attr \"type\" \"delayed_compare\")])\n \n@@ -1739,7 +1740,7 @@\n \t\t    (const_int 0)))\n    (set (match_operand:SI 0 \"gpc_reg_operand\" \"=r\")\n \t(lshiftrt:SI (match_dup 1) (match_dup 2)))]\n-  \"TARGET_POWERPC\"\n+  \"! TARGET_POWER\"\n   \"srw%I2. %0,%1,%2\"\n   [(set_attr \"type\" \"delayed_compare\")])\n \n@@ -1886,7 +1887,7 @@\n   if (TARGET_POWER)\n     emit_insn (gen_ashrsi3_power (operands[0], operands[1], operands[2]));\n   else\n-    emit_insn (gen_ashrsi3_powerpc (operands[0], operands[1], operands[2]));\n+    emit_insn (gen_ashrsi3_no_power (operands[0], operands[1], operands[2]));\n   DONE;\n }\")\n \n@@ -1900,11 +1901,11 @@\n    srea %0,%1,%2\n    {srai|srawi} %0,%1,%h2\")\n \n-(define_insn \"ashrsi3_powerpc\"\n+(define_insn \"ashrsi3_no_power\"\n   [(set (match_operand:SI 0 \"gpc_reg_operand\" \"=r\")\n \t(ashiftrt:SI (match_operand:SI 1 \"gpc_reg_operand\" \"r\")\n \t\t     (match_operand:SI 2 \"reg_or_cint_operand\" \"ri\")))]\n-  \"TARGET_POWERPC\"\n+  \"! TARGET_POWER\"\n   \"sraw%I2 %0,%1,%2\")\n \n (define_insn \"\"\n@@ -1926,7 +1927,7 @@\n \t\t\t\t (match_operand:SI 2 \"reg_or_cint_operand\" \"ri\"))\n \t\t    (const_int 0)))\n    (clobber (match_scratch:SI 3 \"=r\"))]\n-  \"TARGET_POWERPC\"\n+  \"! TARGET_POWER\"\n   \"sraw%I2. %3,%1,%2\"\n   [(set_attr \"type\" \"delayed_compare\")])\n \n@@ -1951,7 +1952,7 @@\n \t\t    (const_int 0)))\n    (set (match_operand:SI 0 \"gpc_reg_operand\" \"=r\")\n \t(ashiftrt:SI (match_dup 1) (match_dup 2)))]\n-  \"TARGET_POWERPC\"\n+  \"! TARGET_POWER\"\n   \"sraw%I2. %0,%1,%2\"\n   [(set_attr \"type\" \"delayed_compare\")])\n \n@@ -1964,7 +1965,7 @@\n   if (TARGET_POWER)\n     emit_insn (gen_extendqisi2_power (operands[0], operands[1]));\n   else\n-    emit_insn (gen_extendqisi2_powerpc (operands[0], operands[1]));\n+    emit_insn (gen_extendqisi2_no_power (operands[0], operands[1]));\n   DONE;\n }\")\n \n@@ -1982,14 +1983,14 @@\n { operands[1] = gen_lowpart (SImode, operands[1]);\n   operands[2] = gen_reg_rtx (SImode); }\")\n \n-(define_expand \"extendqisi2_powerpc\"\n+(define_expand \"extendqisi2_no_power\"\n   [(set (match_dup 2)\n \t\t   (ashift:SI (match_operand:QI 1 \"gpc_reg_operand\" \"\")\n \t\t\t      (const_int 24)))\n    (set (match_operand:SI 0 \"gpc_reg_operand\" \"\")\n \t\t   (ashiftrt:SI (match_dup 2)\n \t\t\t\t(const_int 24)))]\n-  \"TARGET_POWERPC\"\n+  \"! TARGET_POWER\"\n   \"\n { operands[1] = gen_lowpart (SImode, operands[1]);\n   operands[2] = gen_reg_rtx (SImode); }\")\n@@ -2003,7 +2004,7 @@\n   if (TARGET_POWER)\n     emit_insn (gen_extendqihi2_power (operands[0], operands[1]));\n   else\n-    emit_insn (gen_extendqihi2_powerpc (operands[0], operands[1]));\n+    emit_insn (gen_extendqihi2_no_power (operands[0], operands[1]));\n   DONE;\n }\")\n \n@@ -2022,14 +2023,14 @@\n   operands[1] = gen_lowpart (SImode, operands[1]);\n   operands[2] = gen_reg_rtx (SImode); }\")\n \n-(define_expand \"extendqihi2_powerpc\"\n+(define_expand \"extendqihi2_no_power\"\n   [(set (match_dup 2)\n \t\t   (ashift:SI (match_operand:QI 1 \"gpc_reg_operand\" \"\")\n \t\t\t      (const_int 24)))\n    (set (match_operand:HI 0 \"gpc_reg_operand\" \"\")\n \t\t   (ashiftrt:SI (match_dup 2)\n \t\t\t\t(const_int 24)))]\n-  \"TARGET_POWERPC\"\n+  \"! TARGET_POWER\"\n   \"\n { operands[0] = gen_lowpart (SImode, operands[0]);\n   operands[1] = gen_lowpart (SImode, operands[1]);\n@@ -2553,7 +2554,7 @@\n   \"\"\n   \"\n {\n-  if (TARGET_POWERPC\n+  if (! TARGET_POWER\n       && short_cint_operand (operands[2], DImode))\n     FAIL;\n }\")\n@@ -2572,7 +2573,7 @@\n   [(set (match_operand:DI 0 \"gpc_reg_operand\" \"=r\")\n \t(plus:DI (match_operand:DI 1 \"gpc_reg_operand\" \"%r\")\n \t\t (match_operand:DI 2 \"gpc_reg_operand\" \"r\")))]\n-  \"TARGET_POWERPC\"\n+  \"! TARGET_POWER\"\n   \"addc %L0,%L1,%L2\\;adde %0,%1,%2\"\n   [(set_attr \"length\" \"8\")])\n \n@@ -2583,7 +2584,7 @@\n   \"\"\n   \"\n {\n-  if (TARGET_POWERPC\n+  if (! TARGET_POWER\n       && short_cint_operand (operands[1], DImode))\n     FAIL;\n }\")\n@@ -2602,7 +2603,7 @@\n   [(set (match_operand:DI 0 \"gpc_reg_operand\" \"=r\")\n \t(minus:DI (match_operand:DI 1 \"gpc_reg_operand\" \"r\")\n \t\t  (match_operand:DI 2 \"gpc_reg_operand\" \"r\")))]\n-  \"TARGET_POWERPC\"\n+  \"! TARGET_POWER\"\n   \"subfc %L0,%L2,%L1\\;subfe %0,%2,%1\"\n   [(set_attr \"length\" \"8\")])\n \n@@ -2615,17 +2616,10 @@\n (define_insn \"\"\n   [(set (match_operand:DI 0 \"gpc_reg_operand\" \"=r\")\n \t(neg:DI (match_operand:DI 1 \"gpc_reg_operand\" \"r\")))]\n-  \"TARGET_POWER\"\n+  \"\"\n   \"{sfi|subfic} %L0,%L1,0\\;{sfze|subfze} %0,%1\"\n   [(set_attr \"length\" \"8\")])\n \n-(define_insn \"\"\n-  [(set (match_operand:DI 0 \"gpc_reg_operand\" \"=r\")\n-\t(neg:DI (match_operand:DI 1 \"gpc_reg_operand\" \"r\")))]\n-  \"TARGET_POWERPC\"\n-  \"subfic %L0,%L1,0\\;subfze %0,%1\"\n-  [(set_attr \"length\" \"8\")])\n-\n (define_insn \"mulsidi3\"\n   [(set (match_operand:DI 0 \"gpc_reg_operand\" \"=r\")\n \t(mult:DI (sign_extend:DI (match_operand:SI 1 \"gpc_reg_operand\" \"r\"))\n@@ -2748,7 +2742,7 @@\n (define_insn \"\"\n   [(set (match_operand:SI 0 \"nonimmediate_operand\" \"=r,r,m,r,r,r,*h\")\n \t(match_operand:SI 1 \"input_operand\" \"r,m,r,I,J,*h,r\"))]\n-  \"TARGET_POWERPC && (gpc_reg_operand (operands[0], SImode)\n+  \"! TARGET_POWER && (gpc_reg_operand (operands[0], SImode)\n    || gpc_reg_operand (operands[1], SImode))\"\n   \"@\n    mr %0,%1\n@@ -2826,7 +2820,7 @@\n (define_insn \"\"\n   [(set (match_operand:HI 0 \"nonimmediate_operand\" \"=r,r,m,r,r,*h\")\n \t(match_operand:HI 1 \"input_operand\" \"r,m,r,i,*h,r\"))]\n-  \"TARGET_POWERPC && (gpc_reg_operand (operands[0], HImode)\n+  \"! TARGET_POWER && (gpc_reg_operand (operands[0], HImode)\n    || gpc_reg_operand (operands[1], HImode))\"\n   \"@\n    ori %0,%1,0\n@@ -2874,7 +2868,7 @@\n (define_insn \"\"\n   [(set (match_operand:QI 0 \"nonimmediate_operand\" \"=r,r,m,r,r,*h\")\n \t(match_operand:QI 1 \"input_operand\" \"r,m,r,i,*h,r\"))]\n-  \"TARGET_POWERPC && (gpc_reg_operand (operands[0], QImode)\n+  \"! TARGET_POWER && (gpc_reg_operand (operands[0], QImode)\n    || gpc_reg_operand (operands[1], QImode))\"\n   \"@\n    mr %0,%1"}]}