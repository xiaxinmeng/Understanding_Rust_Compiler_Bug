{"sha": "b69cd3cfcf7b4ab21f8e4cd1250565667dc0a771", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjY5Y2QzY2ZjZjdiNGFiMjFmOGU0Y2QxMjUwNTY1NjY3ZGMwYTc3MQ==", "commit": {"author": {"name": "Gerald Pfeifer", "email": "pfeifer@dbai.tuwien.ac.at", "date": "2003-07-01T16:04:42Z"}, "committer": {"name": "Gerald Pfeifer", "email": "gerald@gcc.gnu.org", "date": "2003-07-01T16:04:42Z"}, "message": "gcc_release (BRANCH): Rename to...\n\n\t* gcc_release (BRANCH): Rename to...\n\t(CVSBRANCH): ...new macro, and use BRANCH for the variant users\n\twill see.\n\t(FTP_BRANCH): For snapshots, include ${BRANCH} in the last part\n\tof the directory name.\n\tUse .snapshot_date-${BRANCH} instead of .snapshot_date.\n\nFrom-SVN: r68777", "tree": {"sha": "ef484c04dcbe6c663a8ffa239139f04ff8feaf56", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ef484c04dcbe6c663a8ffa239139f04ff8feaf56"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b69cd3cfcf7b4ab21f8e4cd1250565667dc0a771", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b69cd3cfcf7b4ab21f8e4cd1250565667dc0a771", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b69cd3cfcf7b4ab21f8e4cd1250565667dc0a771", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b69cd3cfcf7b4ab21f8e4cd1250565667dc0a771/comments", "author": null, "committer": null, "parents": [{"sha": "a9d58f96c33b7264df18365a2ba2409ebf7a6757", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9d58f96c33b7264df18365a2ba2409ebf7a6757", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9d58f96c33b7264df18365a2ba2409ebf7a6757"}], "stats": {"total": 35, "additions": 25, "deletions": 10}, "files": [{"sha": "30253f69ed3848248a06296c2922d9e5c9be4aec", "filename": "maintainer-scripts/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b69cd3cfcf7b4ab21f8e4cd1250565667dc0a771/maintainer-scripts%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b69cd3cfcf7b4ab21f8e4cd1250565667dc0a771/maintainer-scripts%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/maintainer-scripts%2FChangeLog?ref=b69cd3cfcf7b4ab21f8e4cd1250565667dc0a771", "patch": "@@ -1,3 +1,12 @@\n+2003-07-01  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>\n+\n+\t* gcc_release (BRANCH): Rename to...\n+\t(CVSBRANCH): ...new macro, and use BRANCH for the variant users\n+\twill see.\n+\t(FTP_BRANCH): For snapshots, include ${BRANCH} in the last part\n+\tof the directory name.\n+\tUse .snapshot_date-${BRANCH} instead of .snapshot_date.\n+\n 2003-06-28  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>\n \n \t* gcc_release: Command \"all\" now creates .gz files only for"}, {"sha": "41fbfa98afb483f8ba523c026b833c4219a870fc", "filename": "maintainer-scripts/gcc_release", "status": "modified", "additions": 16, "deletions": 10, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b69cd3cfcf7b4ab21f8e4cd1250565667dc0a771/maintainer-scripts%2Fgcc_release", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b69cd3cfcf7b4ab21f8e4cd1250565667dc0a771/maintainer-scripts%2Fgcc_release", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/maintainer-scripts%2Fgcc_release?ref=b69cd3cfcf7b4ab21f8e4cd1250565667dc0a771", "patch": "@@ -119,7 +119,7 @@ build_sources() {\n     inform \"Updating ChangeLogs and version files\"\n \n     ${CVS} co -d \"`basename ${SOURCE_DIRECTORY}`\" \\\n-           -r ${BRANCH} gcc || \\\n+           -r ${CVSBRANCH} gcc || \\\n            error \"Could not check out release sources\"\n     for x in `find ${SOURCE_DIRECTORY} -name ChangeLog`; do\n       # Update this ChangeLog file only if it does not yet contain the\n@@ -159,16 +159,16 @@ EOF\n   # Tag the sources.\n   if [ -n \"${TAG}\" ]; then\n     inform \"Tagging release sources\"\n-    ${CVS} rtag -r ${BRANCH} -F ${TAG} gcc || \\\n+    ${CVS} rtag -r ${CVSBRANCH} -F ${TAG} gcc || \\\n       error \"Could not tag release sources\"\n-    BRANCH=$TAG\n+    CVSBRANCH=$TAG\n   fi\n \n   # Export the current sources.\n   inform \"Retrieving release sources\"\n   ${CVS} \\\n        export -d \"`basename ${SOURCE_DIRECTORY}`\" \\\n-       -r ${BRANCH} gcc || \\\n+       -r ${CVSBRANCH} gcc || \\\n     error \"Could not retrieve release sources\"\n \n   # Run gcc_update on them to set up the timestamps nicely.\n@@ -431,9 +431,14 @@ RELEASE_REVISION=\"\"\n # The complete name of the release.\n RELEASE=\"\"\n \n-# The name of the branch from which the release should be made.\n+# The name of the branch from which the release should be made, in a \n+# user-friendly form.\n BRANCH=\"\"\n \n+# The name of the branch from which the release should be made, as used\n+# for our version control system.\n+CVSBRANCH=\"\"\n+\n # The tag to apply to the sources used for the release.\n TAG=\"\"\n \n@@ -547,7 +552,7 @@ if [ $SNAPSHOT -eq 0 ]; then\n \n   # Compute the name of the branch, which is based solely on the major\n   # and minor release numbers.\n-  BRANCH=\"gcc-${RELEASE_MAJOR}_${RELEASE_MINOR}-branch\"\n+  CVSBRANCH=\"gcc-${RELEASE_MAJOR}_${RELEASE_MINOR}-branch\"\n \n   # If this is not a final release, set various parameters acordingly.\n   if [ ${FINAL} -ne 1 ]; then\n@@ -559,14 +564,15 @@ if [ $SNAPSHOT -eq 0 ]; then\n else\n   RELEASE=$DATE\n   # For now snapshots come from the 3.3 branch.\n-  BRANCH=gcc-3_3-branch\n-  FTP_PATH=\"${FTP_PATH}/snapshots/${LONG_DATE}\"\n+  BRANCH=\"3.3\"\n+  CVSBRANCH=gcc-3_3-branch\n+  FTP_PATH=\"${FTP_PATH}/snapshots/${BRANCH}-${LONG_DATE}\"\n   TAG=gcc_ss_${DATE}\n \n   # Building locally on gcc.gnu.org, we know what the last snapshot date\n   # was.\n   if [ $LOCAL -ne 0 ]; then\n-    LAST_DATE=`cat ~/.snapshot_date`\n+    LAST_DATE=`cat ~/.snapshot_date-${BRANCH}`\n     LAST_LONG_DATE=`date --date=$LAST_DATE +%Y-%m-%d`\n     LAST_DIR=~ftp/pub/gcc/snapshots/${LAST_LONG_DATE}\n     OLD_TARS=${LAST_DIR}/gcc-${LAST_DATE}.tar.bz2\n@@ -661,7 +667,7 @@ if [ $MODE_UPLOAD -ne 0 ]; then\n \n     # Update snapshot date file.\n     changedir ~\n-    echo $DATE >.snapshot_date\n+    echo $DATE > .snapshot_date-${BRANCH}\n \n     # Remove working directory\n     rm -rf ${WORKING_DIRECTORY}"}]}