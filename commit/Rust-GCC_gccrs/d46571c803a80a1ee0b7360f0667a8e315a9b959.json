{"sha": "d46571c803a80a1ee0b7360f0667a8e315a9b959", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDQ2NTcxYzgwM2E4MGExZWUwYjczNjBmMDY2N2E4ZTMxNWE5Yjk1OQ==", "commit": {"author": {"name": "Dan Hipschman", "email": "dsh@google.com", "date": "2007-08-13T21:55:01Z"}, "committer": {"name": "Dan Hipschman", "email": "dsh@gcc.gnu.org", "date": "2007-08-13T21:55:01Z"}, "message": "2007-08-3 1 Dan Hipschman <dsh@google.com>\n\ngcc/\n2007-08-3 1 Dan Hipschman  <dsh@google.com>\n\n\tPR 32953\n\t* c-format.c (check_format_arg): Move check for zero-length\n\tformat strings below the check for unterminated strings.\n\ntestsuite/\n2007-08-13  Dan Hipschman  <dsh@google.com>\n\n\tPR 32953\n\t* gcc.dg/format/array-1.c: Add an additional test for\n\tunterminated format strings of length 1.\n\nFrom-SVN: r127399", "tree": {"sha": "278e6dbd480b49a8489a8b858c2faeb7bea5386b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/278e6dbd480b49a8489a8b858c2faeb7bea5386b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d46571c803a80a1ee0b7360f0667a8e315a9b959", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d46571c803a80a1ee0b7360f0667a8e315a9b959", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d46571c803a80a1ee0b7360f0667a8e315a9b959", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d46571c803a80a1ee0b7360f0667a8e315a9b959/comments", "author": null, "committer": null, "parents": [{"sha": "eda0ed2597cfab9c967d229b7df2986ef92e663d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eda0ed2597cfab9c967d229b7df2986ef92e663d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eda0ed2597cfab9c967d229b7df2986ef92e663d"}], "stats": {"total": 27, "additions": 18, "deletions": 9}, "files": [{"sha": "186a050fd4612708364888d72b277461bf045649", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d46571c803a80a1ee0b7360f0667a8e315a9b959/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d46571c803a80a1ee0b7360f0667a8e315a9b959/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d46571c803a80a1ee0b7360f0667a8e315a9b959", "patch": "@@ -1,3 +1,9 @@\n+2007-08-13  Dan Hipschman  <dsh@google.com>\n+\n+\tPR c/32953\n+\t* c-format.c (check_format_arg): Move check for zero-length\n+\tformat strings below the check for unterminated strings.\n+\n 2007-08-13  Andrew Pinski  <pinskia@gmail.com>\n \n \tPR C/30427"}, {"sha": "a4965418d538b8d8961622097e0a1237a7a499df", "filename": "gcc/c-format.c", "status": "modified", "additions": 2, "deletions": 7, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d46571c803a80a1ee0b7360f0667a8e315a9b959/gcc%2Fc-format.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d46571c803a80a1ee0b7360f0667a8e315a9b959/gcc%2Fc-format.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-format.c?ref=d46571c803a80a1ee0b7360f0667a8e315a9b959", "patch": "@@ -1401,21 +1401,16 @@ check_format_arg (void *ctx, tree format_tree,\n       format_chars += offset;\n       format_length -= offset;\n     }\n-  if (format_length < 1)\n+  if (format_length < 1 || format_chars[--format_length] != 0)\n     {\n       res->number_unterminated++;\n       return;\n     }\n-  if (format_length == 1)\n+  if (format_length == 0)\n     {\n       res->number_empty++;\n       return;\n     }\n-  if (format_chars[--format_length] != 0)\n-    {\n-      res->number_unterminated++;\n-      return;\n-    }\n \n   /* Skip to first argument to check.  */\n   while (arg_num + 1 < info->first_arg_num)"}, {"sha": "8b1e57f38e55fb4d847cc86e69c90badef34dd09", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d46571c803a80a1ee0b7360f0667a8e315a9b959/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d46571c803a80a1ee0b7360f0667a8e315a9b959/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d46571c803a80a1ee0b7360f0667a8e315a9b959", "patch": "@@ -1,3 +1,9 @@\n+2007-08-13  Dan Hipschman  <dsh@google.com>\n+\n+\tPR c/32953\n+\t* gcc.dg/format/array-1.c: Add an additional test for\n+\tunterminated format strings of length 1.\n+\n 2007-08-13  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/32926"}, {"sha": "14db56e03aba43621e2dc1ec2b6f2ab4e934a11f", "filename": "gcc/testsuite/gcc.dg/format/array-1.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d46571c803a80a1ee0b7360f0667a8e315a9b959/gcc%2Ftestsuite%2Fgcc.dg%2Fformat%2Farray-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d46571c803a80a1ee0b7360f0667a8e315a9b959/gcc%2Ftestsuite%2Fgcc.dg%2Fformat%2Farray-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fformat%2Farray-1.c?ref=d46571c803a80a1ee0b7360f0667a8e315a9b959", "patch": "@@ -7,7 +7,8 @@\n \n const char a1[] = \"foo\";\n const char a2[] = \"foo%d\";\n-const char b[3] = \"foo\";\n+const char b1[3] = \"foo\";\n+const char b2[1] = \"1\";\n static const char c1[] = \"foo\";\n static const char c2[] = \"foo%d\";\n char d[] = \"foo\";\n@@ -23,7 +24,8 @@ foo (int i, long l)\n   printf (a1);\n   printf (a2, i);\n   printf (a2, l); /* { dg-warning \"format\" \"wrong type with array\" } */\n-  printf (b); /* { dg-warning \"unterminated\" \"unterminated array\" } */\n+  printf (b1); /* { dg-warning \"unterminated\" \"unterminated array\" } */\n+  printf (b2); /* { dg-warning \"unterminated\" \"unterminated array\" } */\n   printf (c1);\n   printf (c2, i);\n   printf (c2, l); /* { dg-warning \"format\" \"wrong type with array\" } */"}]}