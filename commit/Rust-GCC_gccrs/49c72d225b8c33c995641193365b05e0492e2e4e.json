{"sha": "49c72d225b8c33c995641193365b05e0492e2e4e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDljNzJkMjI1YjhjMzNjOTk1NjQxMTkzMzY1YjA1ZTA0OTJlMmU0ZQ==", "commit": {"author": {"name": "Loren J. Rittle", "email": "ljrittle@acm.org", "date": "2003-06-05T22:37:02Z"}, "committer": {"name": "Loren J. Rittle", "email": "ljrittle@gcc.gnu.org", "date": "2003-06-05T22:37:02Z"}, "message": "posix.h (O_SYNC): Define if not available and a reasonable...\n\n\t* libjava/include/posix.h (O_SYNC): Define if not available\n\tand a reasonable, perhaps more conservative, replacement exists.\n\t(O_DSYNC): Likewise.\n\t* java/io/natFileDescriptorPosix.cc (open): Revert last patch.\n\nFrom-SVN: r67517", "tree": {"sha": "be358b187ff70984c90220e3fda331404115f67c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/be358b187ff70984c90220e3fda331404115f67c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/49c72d225b8c33c995641193365b05e0492e2e4e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/49c72d225b8c33c995641193365b05e0492e2e4e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/49c72d225b8c33c995641193365b05e0492e2e4e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/49c72d225b8c33c995641193365b05e0492e2e4e/comments", "author": null, "committer": null, "parents": [{"sha": "23c84d335bc3b6bcb968d50a666c2e1afc9c14ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23c84d335bc3b6bcb968d50a666c2e1afc9c14ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/23c84d335bc3b6bcb968d50a666c2e1afc9c14ac"}], "stats": {"total": 18, "additions": 16, "deletions": 2}, "files": [{"sha": "c59eb757b310b4e312c888f23d9c7ef50084825b", "filename": "libjava/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/49c72d225b8c33c995641193365b05e0492e2e4e/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/49c72d225b8c33c995641193365b05e0492e2e4e/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=49c72d225b8c33c995641193365b05e0492e2e4e", "patch": "@@ -1,3 +1,10 @@\n+2002-06-05  Loren J. Rittle  <ljrittle@acm.org>\n+\n+\t* libjava/include/posix.h (O_SYNC): Define if not available\n+\tand a reasonable, perhaps more conservative, replacement exists.\n+\t(O_DSYNC): Likewise.\n+\t* java/io/natFileDescriptorPosix.cc (open): Revert last patch.\n+\n 2003-06-05  Michael Koch  <konqueror@gmx.de>\n \n \t* javax/swing/plaf/BorderUIResource.java,"}, {"sha": "100333c2331e094d585602fd42f7fc837ff7e74a", "filename": "libjava/include/posix.h", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/49c72d225b8c33c995641193365b05e0492e2e4e/libjava%2Finclude%2Fposix.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/49c72d225b8c33c995641193365b05e0492e2e4e/libjava%2Finclude%2Fposix.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2Fposix.h?ref=49c72d225b8c33c995641193365b05e0492e2e4e", "patch": "@@ -48,6 +48,15 @@ details.  */\n #define _Jv_platform_solib_suffix \".so\"\n #endif\n \n+// Some POSIX systems don't have O_SYNC and O_DYSNC so we define them here.\n+// Needed in java/io/natFileDescriptorPosix.cc.\n+#if !defined (O_SYNC) && defined (O_FSYNC)\n+#define O_SYNC O_FSYNC\n+#endif\n+#if !defined (O_DSYNC) && defined (O_FSYNC)\n+#define O_DSYNC O_FSYNC\n+#endif\n+\n // Separator for file name components.\n #define _Jv_platform_file_separator ((jchar) '/')\n // Separator for path components."}, {"sha": "2ad2d9dce77b57318a6a57947b9f132c52c7e496", "filename": "libjava/java/io/natFileDescriptorPosix.cc", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/49c72d225b8c33c995641193365b05e0492e2e4e/libjava%2Fjava%2Fio%2FnatFileDescriptorPosix.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/49c72d225b8c33c995641193365b05e0492e2e4e/libjava%2Fjava%2Fio%2FnatFileDescriptorPosix.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fio%2FnatFileDescriptorPosix.cc?ref=49c72d225b8c33c995641193365b05e0492e2e4e", "patch": "@@ -105,13 +105,11 @@ java::io::FileDescriptor::open (jstring path, jint jflags)\n \t}\n     }\n \n-/* FIXME: comment this out until its better tested/implemented\n   if ((jflags & SYNC))\n     flags |= O_SYNC;\n \n   if ((jflags & DSYNC))\n     flags |= O_DSYNC;\n-*/\n \n   int fd = ::open (buf, flags, mode);\n   if (fd == -1 && errno == EMFILE)"}]}