{"sha": "45c792f50b74194c1c3b1038929c1656971bea1b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDVjNzkyZjUwYjc0MTk0YzFjM2IxMDM4OTI5YzE2NTY5NzFiZWExYg==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2006-04-20T15:46:40Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2006-04-20T15:46:40Z"}, "message": "re PR libgcj/21941 (NPE in Socket.connect())\n\n\tPR libgcj/21941:\n\t* gnu/java/net/natPlainDatagramSocketImplPosix.cc (send): Throw\n\tUnknownHostException if needed.\n\t* gnu/java/net/natPlainSocketImplPosix.cc (connect): Throw\n\tUnknownHostException if needed.\n\nFrom-SVN: r113118", "tree": {"sha": "6466a6a7c75e3c84b76b1f5c41080183ef02f6c6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6466a6a7c75e3c84b76b1f5c41080183ef02f6c6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/45c792f50b74194c1c3b1038929c1656971bea1b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45c792f50b74194c1c3b1038929c1656971bea1b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/45c792f50b74194c1c3b1038929c1656971bea1b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45c792f50b74194c1c3b1038929c1656971bea1b/comments", "author": null, "committer": null, "parents": [{"sha": "455f78d9c657552de3023f9ffbb3fa791f1cf62c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/455f78d9c657552de3023f9ffbb3fa791f1cf62c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/455f78d9c657552de3023f9ffbb3fa791f1cf62c"}], "stats": {"total": 25, "additions": 21, "deletions": 4}, "files": [{"sha": "215ea00f808f30c600db3cfb0077e9ae59842d3d", "filename": "libjava/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45c792f50b74194c1c3b1038929c1656971bea1b/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45c792f50b74194c1c3b1038929c1656971bea1b/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=45c792f50b74194c1c3b1038929c1656971bea1b", "patch": "@@ -1,3 +1,11 @@\n+2006-04-20  Tom Tromey  <tromey@redhat.com>\n+\n+\tPR libgcj/21941:\n+\t* gnu/java/net/natPlainDatagramSocketImplPosix.cc (send): Throw\n+\tUnknownHostException if needed.\n+\t* gnu/java/net/natPlainSocketImplPosix.cc (connect): Throw\n+\tUnknownHostException if needed.\n+\n 2006-04-19  Tom Tromey  <tromey@redhat.com>\n \n \t* Makefile.in: Rebuilt."}, {"sha": "96b374db5f5e4aa99860bad9c030551d0764d4dc", "filename": "libjava/gnu/java/net/natPlainDatagramSocketImplPosix.cc", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45c792f50b74194c1c3b1038929c1656971bea1b/libjava%2Fgnu%2Fjava%2Fnet%2FnatPlainDatagramSocketImplPosix.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45c792f50b74194c1c3b1038929c1656971bea1b/libjava%2Fgnu%2Fjava%2Fnet%2FnatPlainDatagramSocketImplPosix.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fjava%2Fnet%2FnatPlainDatagramSocketImplPosix.cc?ref=45c792f50b74194c1c3b1038929c1656971bea1b", "patch": "@@ -1,4 +1,4 @@\n-/* Copyright (C) 2003, 2005  Free Software Foundation\n+/* Copyright (C) 2003, 2005, 2006  Free Software Foundation\n \n    This file is part of libgcj.\n \n@@ -38,6 +38,7 @@ details.  */\n #include <java/lang/Object.h>\n #include <java/lang/Boolean.h>\n #include <java/lang/Integer.h>\n+#include <java/net/UnknownHostException.h>\n \n union SockAddr\n {\n@@ -291,7 +292,11 @@ gnu::java::net::PlainDatagramSocketImpl::send (::java::net::DatagramPacket *p)\n   // FIXME: Deal with Multicast and if the socket is connected.\n   jint rport = p->getPort();\n   union SockAddr u;\n-  jbyteArray haddress = p->getAddress()->addr;\n+  ::java::net::InetAddress *host = p->getAddress();\n+  if (! host)\n+    throw new ::java::net::UnknownHostException(p->toString());\n+\n+  jbyteArray haddress = host->addr;\n   jbyte *bytes = elements (haddress);\n   int len = haddress->length;\n   struct sockaddr *ptr = (struct sockaddr *) &u.address;"}, {"sha": "28707db4de8664568d0e2e2222db0d9bbcf0ab7a", "filename": "libjava/gnu/java/net/natPlainSocketImplPosix.cc", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45c792f50b74194c1c3b1038929c1656971bea1b/libjava%2Fgnu%2Fjava%2Fnet%2FnatPlainSocketImplPosix.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45c792f50b74194c1c3b1038929c1656971bea1b/libjava%2Fgnu%2Fjava%2Fnet%2FnatPlainSocketImplPosix.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fjava%2Fnet%2FnatPlainSocketImplPosix.cc?ref=45c792f50b74194c1c3b1038929c1656971bea1b", "patch": "@@ -1,4 +1,4 @@\n-/* Copyright (C) 2003, 2004, 2005  Free Software Foundation\n+/* Copyright (C) 2003, 2004, 2005, 2006  Free Software Foundation\n \n    This file is part of libgcj.\n \n@@ -51,6 +51,7 @@ details.  */\n #include <java/lang/NullPointerException.h>\n #include <java/lang/ArrayIndexOutOfBoundsException.h>\n #include <java/lang/IllegalArgumentException.h>\n+#include <java/net/UnknownHostException.h>\n \n union SockAddr\n {\n@@ -136,10 +137,13 @@ gnu::java::net::PlainSocketImpl::bind (::java::net::InetAddress *host, jint lpor\n \n void\n gnu::java::net::PlainSocketImpl::connect (::java::net::SocketAddress *addr,\n-                                     jint timeout)\n+\t\t\t\t\t  jint timeout)\n {\n   ::java::net::InetSocketAddress *tmp = (::java::net::InetSocketAddress*) addr;\n   ::java::net::InetAddress *host = tmp->getAddress();\n+  if (! host)\n+    throw new ::java::net::UnknownHostException(tmp->toString());\n+\n   jint rport = tmp->getPort();\n \t\n   // Set the SocketImpl's address and port fields before we try to"}]}