{"sha": "5e54f81df1b2336a3ddc4f77180f4e579436b663", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWU1NGY4MWRmMWIyMzM2YTNkZGM0Zjc3MTgwZjRlNTc5NDM2YjY2Mw==", "commit": {"author": {"name": "Marc Glisse", "email": "marc.glisse@inria.fr", "date": "2012-10-12T14:14:37Z"}, "committer": {"name": "Marc Glisse", "email": "glisse@gcc.gnu.org", "date": "2012-10-12T14:14:37Z"}, "message": "re PR c++/53055 (ICE in cp_build_indirect_ref, at cp/typeck.c:2836)\n\n2012-10-12  Marc Glisse  <marc.glisse@inria.fr>\n\n\tPR c++/53055\n\ngcc/c-family/\n\t* c-common.h (enum ref_operator) [RO_ARROW_STAR]: New.\n\ngcc/cp/\n\t* call.c (build_new_op_1): Pass RO_ARROW_STAR to cp_build_indirect_ref.\n\t* typeck.c (cp_build_indirect_ref): Handle RO_ARROW_STAR.\n\ngcc/testsuite/\n\t* g++.dg/pr53055.C: New testcase.\n\nFrom-SVN: r192401", "tree": {"sha": "5da8b5b508b980a39d2baba4a7cdd2679a5858b9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5da8b5b508b980a39d2baba4a7cdd2679a5858b9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5e54f81df1b2336a3ddc4f77180f4e579436b663", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e54f81df1b2336a3ddc4f77180f4e579436b663", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e54f81df1b2336a3ddc4f77180f4e579436b663", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e54f81df1b2336a3ddc4f77180f4e579436b663/comments", "author": {"login": "mglisse", "id": 10097863, "node_id": "MDQ6VXNlcjEwMDk3ODYz", "avatar_url": "https://avatars.githubusercontent.com/u/10097863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mglisse", "html_url": "https://github.com/mglisse", "followers_url": "https://api.github.com/users/mglisse/followers", "following_url": "https://api.github.com/users/mglisse/following{/other_user}", "gists_url": "https://api.github.com/users/mglisse/gists{/gist_id}", "starred_url": "https://api.github.com/users/mglisse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mglisse/subscriptions", "organizations_url": "https://api.github.com/users/mglisse/orgs", "repos_url": "https://api.github.com/users/mglisse/repos", "events_url": "https://api.github.com/users/mglisse/events{/privacy}", "received_events_url": "https://api.github.com/users/mglisse/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7e4dd63d9d4143d27dfa7692039b4f48854c1d99", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e4dd63d9d4143d27dfa7692039b4f48854c1d99", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7e4dd63d9d4143d27dfa7692039b4f48854c1d99"}], "stats": {"total": 31, "additions": 29, "deletions": 2}, "files": [{"sha": "c740e449383944a59b09330fc24852c7c5742b21", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e54f81df1b2336a3ddc4f77180f4e579436b663/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e54f81df1b2336a3ddc4f77180f4e579436b663/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=5e54f81df1b2336a3ddc4f77180f4e579436b663", "patch": "@@ -1,3 +1,8 @@\n+2012-10-12  Marc Glisse  <marc.glisse@inria.fr>\n+\n+\tPR c++/53055\n+\t* c-common.h (enum ref_operator) [RO_ARROW_STAR]: New.\n+\n 2012-10-11  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* c-ada-spec.c (dump_ada_template): Bail out for template declarations"}, {"sha": "66d90a345709e12a48ba97260234f07ca9602850", "filename": "gcc/c-family/c-common.h", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e54f81df1b2336a3ddc4f77180f4e579436b663/gcc%2Fc-family%2Fc-common.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e54f81df1b2336a3ddc4f77180f4e579436b663/gcc%2Fc-family%2Fc-common.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-common.h?ref=5e54f81df1b2336a3ddc4f77180f4e579436b663", "patch": "@@ -477,7 +477,9 @@ typedef enum ref_operator {\n   /* -> */\n   RO_ARROW,\n   /* implicit conversion */\n-  RO_IMPLICIT_CONVERSION\n+  RO_IMPLICIT_CONVERSION,\n+  /* ->* */\n+  RO_ARROW_STAR\n } ref_operator;\n \n /* Information about a statement tree.  */"}, {"sha": "ad765412832fc9bc94c6d771748b73d6c8d20fee", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e54f81df1b2336a3ddc4f77180f4e579436b663/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e54f81df1b2336a3ddc4f77180f4e579436b663/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=5e54f81df1b2336a3ddc4f77180f4e579436b663", "patch": "@@ -1,3 +1,9 @@\n+2012-10-12  Marc Glisse  <marc.glisse@inria.fr>\n+\n+\tPR c++/53055\n+\t* call.c (build_new_op_1): Pass RO_ARROW_STAR to cp_build_indirect_ref.\n+\t* typeck.c (cp_build_indirect_ref): Handle RO_ARROW_STAR.\n+\n 2012-10-11  Jason Merrill  <jason@redhat.com>\n \n \t* cp-tree.h (DECL_THUNKS): NULL_TREE for non-virtual functions."}, {"sha": "c94bbbe3c08d13c75ad1b294c2b8e102a29f4d1a", "filename": "gcc/cp/call.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e54f81df1b2336a3ddc4f77180f4e579436b663/gcc%2Fcp%2Fcall.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e54f81df1b2336a3ddc4f77180f4e579436b663/gcc%2Fcp%2Fcall.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcall.c?ref=5e54f81df1b2336a3ddc4f77180f4e579436b663", "patch": "@@ -5309,7 +5309,7 @@ build_new_op_1 (location_t loc, enum tree_code code, int flags, tree arg1,\n       return cp_build_array_ref (input_location, arg1, arg2, complain);\n \n     case MEMBER_REF:\n-      return build_m_component_ref (cp_build_indirect_ref (arg1, RO_NULL, \n+      return build_m_component_ref (cp_build_indirect_ref (arg1, RO_ARROW_STAR, \n                                                            complain), \n                                     arg2, complain);\n "}, {"sha": "eaa0935dc98674865aaf1adbb84cea15d221aee2", "filename": "gcc/cp/typeck.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e54f81df1b2336a3ddc4f77180f4e579436b663/gcc%2Fcp%2Ftypeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e54f81df1b2336a3ddc4f77180f4e579436b663/gcc%2Fcp%2Ftypeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck.c?ref=5e54f81df1b2336a3ddc4f77180f4e579436b663", "patch": "@@ -2908,6 +2908,10 @@ cp_build_indirect_ref (tree ptr, ref_operator errorstring,\n          case RO_IMPLICIT_CONVERSION:\n            error (\"invalid use of implicit conversion on pointer to member\");\n            break;\n+         case RO_ARROW_STAR:\n+           error (\"left hand operand of %<->*%> must be a pointer to class, \"\n+\t\t  \"but is a pointer to member of type %qT\", type);\n+           break;\n          default:\n            gcc_unreachable ();\n       }"}, {"sha": "3b9f121baea2516f7f1798cc98a1ca3331d78f39", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e54f81df1b2336a3ddc4f77180f4e579436b663/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e54f81df1b2336a3ddc4f77180f4e579436b663/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5e54f81df1b2336a3ddc4f77180f4e579436b663", "patch": "@@ -1,3 +1,8 @@\n+2012-10-12  Marc Glisse  <marc.glisse@inria.fr>\n+\n+\tPR c++/53055\n+\t* g++.dg/pr53055.C: New testcase.\n+\n 2012-10-12  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/52744"}, {"sha": "787af9d156f03df66ddf8e4644e96600cf0434c8", "filename": "gcc/testsuite/g++.dg/pr53055.C", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e54f81df1b2336a3ddc4f77180f4e579436b663/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr53055.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e54f81df1b2336a3ddc4f77180f4e579436b663/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr53055.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr53055.C?ref=5e54f81df1b2336a3ddc4f77180f4e579436b663", "patch": "@@ -0,0 +1,5 @@\n+// PR c++/53055\n+// { dg-do compile }\n+\n+struct A A :: * p ;\n+int i = p ->* p ; // { dg-error \"\" }"}]}