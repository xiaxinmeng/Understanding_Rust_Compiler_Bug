{"sha": "251b6a477e97787533753da196dc6e9640359a5a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjUxYjZhNDc3ZTk3Nzg3NTMzNzUzZGExOTZkYzZlOTY0MDM1OWE1YQ==", "commit": {"author": {"name": "Ed Schonberg", "email": "schonberg@adacore.com", "date": "2015-10-16T10:28:37Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2015-10-16T10:28:37Z"}, "message": "sem_util.adb (Gather_Components): When gathering components of a nested variant...\n\n2015-10-16  Ed Schonberg  <schonberg@adacore.com>\n\n\t* sem_util.adb (Gather_Components): When gathering components\n\tof a nested variant, the record type used in legality checks is\n\tthe enclosing record type.\n\nFrom-SVN: r228865", "tree": {"sha": "b8a940922c583868d74bb26e3f7234adaf9f5c5c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b8a940922c583868d74bb26e3f7234adaf9f5c5c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/251b6a477e97787533753da196dc6e9640359a5a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/251b6a477e97787533753da196dc6e9640359a5a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/251b6a477e97787533753da196dc6e9640359a5a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/251b6a477e97787533753da196dc6e9640359a5a/comments", "author": {"login": "Edschonberg", "id": 6352375, "node_id": "MDQ6VXNlcjYzNTIzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/6352375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Edschonberg", "html_url": "https://github.com/Edschonberg", "followers_url": "https://api.github.com/users/Edschonberg/followers", "following_url": "https://api.github.com/users/Edschonberg/following{/other_user}", "gists_url": "https://api.github.com/users/Edschonberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/Edschonberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Edschonberg/subscriptions", "organizations_url": "https://api.github.com/users/Edschonberg/orgs", "repos_url": "https://api.github.com/users/Edschonberg/repos", "events_url": "https://api.github.com/users/Edschonberg/events{/privacy}", "received_events_url": "https://api.github.com/users/Edschonberg/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "74e3c262622d61ee507eaf6000537cc4cd39b907", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74e3c262622d61ee507eaf6000537cc4cd39b907", "html_url": "https://github.com/Rust-GCC/gccrs/commit/74e3c262622d61ee507eaf6000537cc4cd39b907"}], "stats": {"total": 19, "additions": 13, "deletions": 6}, "files": [{"sha": "e31645e00ad1d39aa88c36060c47db398c5ae62a", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/251b6a477e97787533753da196dc6e9640359a5a/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/251b6a477e97787533753da196dc6e9640359a5a/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=251b6a477e97787533753da196dc6e9640359a5a", "patch": "@@ -1,3 +1,9 @@\n+2015-10-16  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* sem_util.adb (Gather_Components): When gathering components\n+\tof a nested variant, the record type used in legality checks is\n+\tthe enclosing record type.\n+\n 2015-10-13  Jakub Jelinek  <jakub@redhat.com>\n \n \t* gcc-interface/utils.c (DEF_FUNCTION_TYPE_9, DEF_FUNCTION_TYPE_10,"}, {"sha": "56f4d9378ca80953f77eb521678234b64fc8658b", "filename": "gcc/ada/sem_util.adb", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/251b6a477e97787533753da196dc6e9640359a5a/gcc%2Fada%2Fsem_util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/251b6a477e97787533753da196dc6e9640359a5a/gcc%2Fada%2Fsem_util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_util.adb?ref=251b6a477e97787533753da196dc6e9640359a5a", "patch": "@@ -7292,10 +7292,11 @@ package body Sem_Util is\n       end  if;\n \n       --  If we have found the corresponding choice, recursively add its\n-      --  components to the Into list.\n+      --  components to the Into list. The nested components are part of\n+      --  the same record type.\n \n       Gather_Components\n-        (Empty, Component_List (Variant), Governed_By, Into, Report_Errors);\n+        (Typ, Component_List (Variant), Governed_By, Into, Report_Errors);\n    end Gather_Components;\n \n    ------------------------\n@@ -16998,7 +16999,7 @@ package body Sem_Util is\n    begin\n       --  This is a private type which is not completed yet. This can only\n       --  happen in a default expression (of a formal parameter or of a\n-      --  record component). Do not expand transient scope in this case\n+      --  record component). Do not expand transient scope in this case.\n \n       if No (Typ) then\n          return False;\n@@ -17104,9 +17105,9 @@ package body Sem_Util is\n       --  nondiscriminants). That is, the recursive calls are too conservative.\n \n       function Has_Discrim_Dep_Array (Typ : Entity_Id) return Boolean;\n-      --  True if we find certain discriminant-dependent array\n-      --  subcomponents. This shouldn't be necessary, but without this check,\n-      --  we crash in gimplify. ???\n+      --  True if we find certain discriminant-dependent array subcomponents.\n+      --  This shouldn't be necessary, but without this check, we crash in\n+      --  gimplify. ???\n \n       function Caller_Known_Size_Record (Typ : Entity_Id) return Boolean is\n          pragma Assert (Typ = Underlying_Type (Typ));"}]}