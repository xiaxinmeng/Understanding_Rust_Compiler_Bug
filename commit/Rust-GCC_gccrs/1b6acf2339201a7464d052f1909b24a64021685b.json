{"sha": "1b6acf2339201a7464d052f1909b24a64021685b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWI2YWNmMjMzOTIwMWE3NDY0ZDA1MmYxOTA5YjI0YTY0MDIxNjg1Yg==", "commit": {"author": {"name": "Wilco Dijkstra", "email": "wdijkstr@arm.com", "date": "2018-10-11T19:10:12Z"}, "committer": {"name": "Wilco Dijkstra", "email": "wilco@gcc.gnu.org", "date": "2018-10-11T19:10:12Z"}, "message": "[AArch64] Fix PR87511\n\nAs mentioned in PR87511, the shift used in aarch64_mask_and_shift_for_ubfiz_p\nshould be evaluated as a HOST_WIDE_INT rather than int.\n\nPasses bootstrap & regress.\n\n    gcc/\n\tPR target/87511\n\t* config/aarch64/aarch64.c (aarch64_mask_and_shift_for_ubfiz_p):\n\tUse HOST_WIDE_INT_1U for shift.\n\n    testsuite/\n\tPR target/87511\n\t* gcc.target/aarch64/pr87511.c: Add new test.\n\nFrom-SVN: r265058", "tree": {"sha": "6d24d43466f22abcdc18d95d8f56ae8af5cf31c5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6d24d43466f22abcdc18d95d8f56ae8af5cf31c5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1b6acf2339201a7464d052f1909b24a64021685b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b6acf2339201a7464d052f1909b24a64021685b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1b6acf2339201a7464d052f1909b24a64021685b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b6acf2339201a7464d052f1909b24a64021685b/comments", "author": null, "committer": null, "parents": [{"sha": "03f6d32edb50546f1a123e848ae98a70a747b0c7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03f6d32edb50546f1a123e848ae98a70a747b0c7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/03f6d32edb50546f1a123e848ae98a70a747b0c7"}], "stats": {"total": 30, "additions": 29, "deletions": 1}, "files": [{"sha": "b908601ce03f921e0691734e16f88de47377881d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b6acf2339201a7464d052f1909b24a64021685b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b6acf2339201a7464d052f1909b24a64021685b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1b6acf2339201a7464d052f1909b24a64021685b", "patch": "@@ -1,3 +1,9 @@\n+2018-10-11  Wilco Dijkstra  <wdijkstr@arm.com>\n+\n+\tPR target/87511\n+\t* config/aarch64/aarch64.c (aarch64_mask_and_shift_for_ubfiz_p):\n+\tUse HOST_WIDE_INT_1U for shift.\n+\n 2018-10-11  Doug Rupp  <rupp@adacore.com>\n             Olivier Hainque  <hainque@adacore.com>\n "}, {"sha": "4c7790826658539f71f2fd9eb9ea0329081938be", "filename": "gcc/config/aarch64/aarch64.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b6acf2339201a7464d052f1909b24a64021685b/gcc%2Fconfig%2Faarch64%2Faarch64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b6acf2339201a7464d052f1909b24a64021685b/gcc%2Fconfig%2Faarch64%2Faarch64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.c?ref=1b6acf2339201a7464d052f1909b24a64021685b", "patch": "@@ -8842,7 +8842,8 @@ aarch64_mask_and_shift_for_ubfiz_p (scalar_int_mode mode, rtx mask,\n   return CONST_INT_P (mask) && CONST_INT_P (shft_amnt)\n \t && INTVAL (shft_amnt) < GET_MODE_BITSIZE (mode)\n \t && exact_log2 ((INTVAL (mask) >> INTVAL (shft_amnt)) + 1) >= 0\n-\t && (INTVAL (mask) & ((1 << INTVAL (shft_amnt)) - 1)) == 0;\n+\t && (INTVAL (mask)\n+\t     & ((HOST_WIDE_INT_1U << INTVAL (shft_amnt)) - 1)) == 0;\n }\n \n /* Calculate the cost of calculating X, storing it in *COST.  Result"}, {"sha": "f026cb260648a6b5329f6087bcc557a9f60bd3cc", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b6acf2339201a7464d052f1909b24a64021685b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b6acf2339201a7464d052f1909b24a64021685b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1b6acf2339201a7464d052f1909b24a64021685b", "patch": "@@ -1,3 +1,8 @@\n+2018-10-11  Wilco Dijkstra  <wdijkstr@arm.com>\n+\n+\tPR target/87511\n+\t* gcc.target/aarch64/pr87511.c: Add new test.\n+\n 2018-10-11  David Malcolm  <dmalcolm@redhat.com>\n \n \tPR c++/84993"}, {"sha": "98064701594caefa747c10d87924746f295ad8cd", "filename": "gcc/testsuite/gcc.target/aarch64/pr87511.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b6acf2339201a7464d052f1909b24a64021685b/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fpr87511.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b6acf2339201a7464d052f1909b24a64021685b/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fpr87511.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fpr87511.c?ref=1b6acf2339201a7464d052f1909b24a64021685b", "patch": "@@ -0,0 +1,16 @@\n+/* { dg-do assemble } */\n+/* { dg-options \"-Os\" } */\n+\n+int a, d;\n+struct {\n+  signed f5 : 26;\n+  signed f6 : 12;\n+} b;\n+signed char c;\n+void fn1() {\n+  signed char *e = &c;\n+  d = a * 10;\n+  *e = d;\n+  b.f6 = c;\n+  b.f5 = 8 <= 3;\n+}"}]}