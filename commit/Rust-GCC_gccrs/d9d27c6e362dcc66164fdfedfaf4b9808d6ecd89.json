{"sha": "d9d27c6e362dcc66164fdfedfaf4b9808d6ecd89", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDlkMjdjNmUzNjJkY2M2NjE2NGZkZmVkZmFmNGI5ODA4ZDZlY2Q4OQ==", "commit": {"author": {"name": "Kresten Krab Thorup", "email": "krab@gcc.gnu.org", "date": "1993-05-06T09:23:58Z"}, "committer": {"name": "Kresten Krab Thorup", "email": "krab@gcc.gnu.org", "date": "1993-05-06T09:23:58Z"}, "message": "calloc -> __objc_xcalloc, bzero instances\n\nFrom-SVN: r4351", "tree": {"sha": "3f52c813ef4f1f0c103ba3c2d258957b9f78e991", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3f52c813ef4f1f0c103ba3c2d258957b9f78e991"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d9d27c6e362dcc66164fdfedfaf4b9808d6ecd89", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9d27c6e362dcc66164fdfedfaf4b9808d6ecd89", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9d27c6e362dcc66164fdfedfaf4b9808d6ecd89", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9d27c6e362dcc66164fdfedfaf4b9808d6ecd89/comments", "author": null, "committer": null, "parents": [{"sha": "8d46dca505984cdbc1e15685c5edc54885b2b76f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d46dca505984cdbc1e15685c5edc54885b2b76f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d46dca505984cdbc1e15685c5edc54885b2b76f"}], "stats": {"total": 13, "additions": 8, "deletions": 5}, "files": [{"sha": "c9af0eb1bbf24436b1894974c2d475b0f07b73c2", "filename": "gcc/objc/class.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9d27c6e362dcc66164fdfedfaf4b9808d6ecd89/gcc%2Fobjc%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9d27c6e362dcc66164fdfedfaf4b9808d6ecd89/gcc%2Fobjc%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Fclass.c?ref=d9d27c6e362dcc66164fdfedfaf4b9808d6ecd89", "patch": "@@ -226,7 +226,7 @@ I implement posing by hiding SUPER_CLASS, creating new class and meta class\n Class*\n class_pose_as (Class* impostor, Class* super_class)\n {\n-  Class* new_class = (Class*) calloc (1, sizeof (Class));\n+  Class* new_class = (Class*) __objc_xcalloc (1, sizeof (Class));\n   MetaClass* new_meta_class =\n     (MetaClass*) __objc_xmalloc(sizeof (MetaClass));\n   char *new_name = (char *)__objc_xmalloc ((size_t)strlen ((char*)super_class->name) + 12);"}, {"sha": "2226a2630b16dd0a4debc4adba6e8df4784e50cc", "filename": "gcc/objc/hash.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9d27c6e362dcc66164fdfedfaf4b9808d6ecd89/gcc%2Fobjc%2Fhash.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9d27c6e362dcc66164fdfedfaf4b9808d6ecd89/gcc%2Fobjc%2Fhash.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Fhash.c?ref=d9d27c6e362dcc66164fdfedfaf4b9808d6ecd89", "patch": "@@ -51,13 +51,13 @@ hash_new (unsigned int size, hash_func_type hash_func,\n \n   /* Allocate the cache structure.  calloc insures\n      its initialization for default values.  */\n-  cache = (cache_ptr) calloc (1, sizeof (struct cache));\n+  cache = (cache_ptr) __objc_xcalloc (1, sizeof (struct cache));\n   assert (cache);\n \n   /* Allocate the array of buckets for the cache.\n      calloc initializes all of the pointers to NULL.  */\n   cache->node_table\n-    = (node_ptr *) calloc (size, sizeof (node_ptr));\n+    = (node_ptr *) __objc_xcalloc (size, sizeof (node_ptr));\n   assert (cache->node_table);\n \n   cache->size  = size;\n@@ -96,7 +96,7 @@ void\n hash_add (cache_ptr *cachep, const void *key, void *value)\n {\n   size_t indx = (*(*cachep)->hash_func)(*cachep, key);\n-  node_ptr node = (node_ptr) calloc (1, sizeof (struct cache_node));\n+  node_ptr node = (node_ptr) __objc_xcalloc (1, sizeof (struct cache_node));\n \n \n   assert (node);"}, {"sha": "bd7a47e90523d05fbce293cee011db66f9de800d", "filename": "gcc/objc/objects.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9d27c6e362dcc66164fdfedfaf4b9808d6ecd89/gcc%2Fobjc%2Fobjects.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9d27c6e362dcc66164fdfedfaf4b9808d6ecd89/gcc%2Fobjc%2Fobjects.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Fobjects.c?ref=d9d27c6e362dcc66164fdfedfaf4b9808d6ecd89", "patch": "@@ -41,7 +41,10 @@ class_create_instance(Class* class)\n   if (CLS_ISCLASS(class))\n     new = (*_objc_object_alloc)(class);\n   if (new!=nil)\n-    new->class_pointer = class;\n+    {\n+      bzero (new, class->instance_size);\n+      new->class_pointer = class;\n+    }\n   return new;\n }\n "}]}