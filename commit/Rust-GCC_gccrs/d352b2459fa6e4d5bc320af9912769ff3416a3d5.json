{"sha": "d352b2459fa6e4d5bc320af9912769ff3416a3d5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDM1MmIyNDU5ZmE2ZTRkNWJjMzIwYWY5OTEyNzY5ZmYzNDE2YTNkNQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2013-09-05T23:04:11Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2013-09-05T23:04:11Z"}, "message": "re PR c++/58201 (Undefined reference to `B::B(void const**)')\n\n\n\tPR middle-end/58201\n\t* cgraphunit.c (analyze_functions): Clear AUX fields\n\tafter processing; initialize assembler name has.\n\n\t* g++.dg/torture/pr58201_0.C: New testcase.\n\t* g++.dg/torture/pr58201_1.C: New testcase.\n\t* g++.dg/torture/pr58201.h: New testcase.\n\nFrom-SVN: r202298", "tree": {"sha": "061647d592f6fd386e79ab868303b34b7d53e742", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/061647d592f6fd386e79ab868303b34b7d53e742"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d352b2459fa6e4d5bc320af9912769ff3416a3d5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d352b2459fa6e4d5bc320af9912769ff3416a3d5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d352b2459fa6e4d5bc320af9912769ff3416a3d5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d352b2459fa6e4d5bc320af9912769ff3416a3d5/comments", "author": null, "committer": null, "parents": [{"sha": "17796c434dc09e45dabc2b2e7c1123fffa91d9bd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17796c434dc09e45dabc2b2e7c1123fffa91d9bd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/17796c434dc09e45dabc2b2e7c1123fffa91d9bd"}], "stats": {"total": 63, "additions": 63, "deletions": 0}, "files": [{"sha": "dd93373df5497be078d0c445c26db3496b346676", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d352b2459fa6e4d5bc320af9912769ff3416a3d5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d352b2459fa6e4d5bc320af9912769ff3416a3d5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d352b2459fa6e4d5bc320af9912769ff3416a3d5", "patch": "@@ -1,3 +1,9 @@\n+2013-09-04  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR middle-end/58201\n+\t* cgraphunit.c (analyze_functions): Clear AUX fields\n+\tafter processing; initialize assembler name has.\n+\n 2013-09-05  Jeff Law  <law@redhat.com>\n \n \t* tree-ssa-threadedge.c (thread_around_empty_blocks): Renamed"}, {"sha": "125fb3b587e36d223bf5f98bc270825c19e92555", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d352b2459fa6e4d5bc320af9912769ff3416a3d5/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d352b2459fa6e4d5bc320af9912769ff3416a3d5/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=d352b2459fa6e4d5bc320af9912769ff3416a3d5", "patch": "@@ -1064,6 +1064,8 @@ analyze_functions (void)\n \t}\n       node->symbol.aux = NULL;\n     }\n+  for (;node; node = node->symbol.next)\n+    node->symbol.aux = NULL;\n   first_analyzed = cgraph_first_function ();\n   first_analyzed_var = varpool_first_variable ();\n   if (cgraph_dump_file)\n@@ -1074,6 +1076,11 @@ analyze_functions (void)\n   bitmap_obstack_release (NULL);\n   pointer_set_destroy (reachable_call_targets);\n   ggc_collect ();\n+  /* Initialize assembler name hash, in particular we want to trigger C++\n+     mangling and same body alias creation before we free DECL_ARGUMENTS\n+     used by it.  */\n+  if (!seen_error ())\n+  symtab_initialize_asm_name_hash ();\n }\n \n /* Translate the ugly representation of aliases as alias pairs into nice"}, {"sha": "4f6d88e0d6b98611b5dd40b55d86a37ef20f36fb", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d352b2459fa6e4d5bc320af9912769ff3416a3d5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d352b2459fa6e4d5bc320af9912769ff3416a3d5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d352b2459fa6e4d5bc320af9912769ff3416a3d5", "patch": "@@ -1,3 +1,10 @@\n+2013-09-04  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR middle-end/58201\n+\t* g++.dg/torture/pr58201_0.C: New testcase.\n+\t* g++.dg/torture/pr58201_1.C: New testcase.\n+\t* g++.dg/torture/pr58201.h: New testcase.\n+\n 2013-09-05  Jan Hubicka  <jh@suse.cz>\n \n \t* gcc.dg/autopar/pr49960.c: Disable partial inlining"}, {"sha": "6071ccdf87748601bc0c58bb303947270657b07d", "filename": "gcc/testsuite/g++.dg/torture/pr58201.h", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d352b2459fa6e4d5bc320af9912769ff3416a3d5/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr58201.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d352b2459fa6e4d5bc320af9912769ff3416a3d5/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr58201.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr58201.h?ref=d352b2459fa6e4d5bc320af9912769ff3416a3d5", "patch": "@@ -0,0 +1,24 @@\n+class A\n+{\n+ protected:\n+  A();\n+  virtual ~A();\n+};\n+\n+class B : virtual public A\n+{\n+ public:\n+  B();\n+  virtual ~B();\n+};\n+\n+class C\n+{\n+ private:\n+  class C2 : public B\n+   {\n+   public:\n+     C2();\n+     virtual ~C2();\n+   };\n+};"}, {"sha": "f8fa7173c113e70528e953e3a6dfb822925eaf50", "filename": "gcc/testsuite/g++.dg/torture/pr58201_0.C", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d352b2459fa6e4d5bc320af9912769ff3416a3d5/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr58201_0.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d352b2459fa6e4d5bc320af9912769ff3416a3d5/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr58201_0.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr58201_0.C?ref=d352b2459fa6e4d5bc320af9912769ff3416a3d5", "patch": "@@ -0,0 +1,9 @@\n+#include \"pr58201.h\"    \n+                    \n+C::C2::C2(){ }      \n+C::C2::~C2() { }    \n+                    \n+int main ()         \n+{                   \n+    return 0;       \n+}  "}, {"sha": "132cd5a43b82566427a54e18228f96db21d9d3f9", "filename": "gcc/testsuite/g++.dg/torture/pr58201_1.C", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d352b2459fa6e4d5bc320af9912769ff3416a3d5/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr58201_1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d352b2459fa6e4d5bc320af9912769ff3416a3d5/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr58201_1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr58201_1.C?ref=d352b2459fa6e4d5bc320af9912769ff3416a3d5", "patch": "@@ -0,0 +1,10 @@\n+/* { dg-do link } */\n+/* { dg-options \"-O2\" } */\n+/* { dg-additional-sources \"pr58201_0.C\" } */\n+#include \"pr58201.h\"\n+\n+A::A() { }\n+A::~A() { }\n+B::B() { }\n+B::~B() { }\n+"}]}