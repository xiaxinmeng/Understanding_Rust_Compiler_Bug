{"sha": "16d85b639cd5abc3662f49b02e28c4fe7136587f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTZkODViNjM5Y2Q1YWJjMzY2MmY0OWIwMmUyOGM0ZmU3MTM2NTg3Zg==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2004-08-16T23:57:55Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2004-08-16T23:57:55Z"}, "message": "re PR java/8473 (syntax error on anonymous array subscript)\n\n\tPR java/8473:\n\t* parse.y (primary): Changed for initialized and uninitialized\n\tarray creations.\n\t(array_access): Handle array_creation_initialized.\n\t(array_creation_expression): Split into\n\tarray_creation_initialized and array_creation_uninitialized.\n\nFrom-SVN: r86087", "tree": {"sha": "b41245ef4d33c6bdd7275c286a3b8197e2628676", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b41245ef4d33c6bdd7275c286a3b8197e2628676"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/16d85b639cd5abc3662f49b02e28c4fe7136587f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16d85b639cd5abc3662f49b02e28c4fe7136587f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/16d85b639cd5abc3662f49b02e28c4fe7136587f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16d85b639cd5abc3662f49b02e28c4fe7136587f/comments", "author": null, "committer": null, "parents": [{"sha": "0e5b1376243861b0dea368f99d1e66fc73c3099d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e5b1376243861b0dea368f99d1e66fc73c3099d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e5b1376243861b0dea368f99d1e66fc73c3099d"}], "stats": {"total": 39, "additions": 34, "deletions": 5}, "files": [{"sha": "c321073b4381f015614a18c06632431b131cd8a2", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/16d85b639cd5abc3662f49b02e28c4fe7136587f/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/16d85b639cd5abc3662f49b02e28c4fe7136587f/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=16d85b639cd5abc3662f49b02e28c4fe7136587f", "patch": "@@ -1,3 +1,12 @@\n+2004-08-16  Tom Tromey  <tromey@redhat.com>\n+\n+\tPR java/8473:\n+\t* parse.y (primary): Changed for initialized and uninitialized\n+\tarray creations.\n+\t(array_access): Handle array_creation_initialized.\n+\t(array_creation_expression): Split into\n+\tarray_creation_initialized and array_creation_uninitialized.\n+\n 2004-08-16  Andrew Haley  <aph@redhat.com>\n \n \t* jcf-write.c (find_constant_index): Canonicalize NaNs when"}, {"sha": "2073ce46acef0a5c21298501afad1c5b00a10395", "filename": "gcc/java/parse.y", "status": "modified", "additions": 25, "deletions": 5, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/16d85b639cd5abc3662f49b02e28c4fe7136587f/gcc%2Fjava%2Fparse.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/16d85b639cd5abc3662f49b02e28c4fe7136587f/gcc%2Fjava%2Fparse.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fparse.y?ref=16d85b639cd5abc3662f49b02e28c4fe7136587f", "patch": "@@ -543,8 +543,8 @@ static GTY(()) tree src_parse_roots[1];\n \t\t\tif_then_else_statement_nsi while_statement_nsi\n \t\t\tfor_statement_nsi statement_expression_list for_init\n \t\t\tfor_update statement_expression expression_statement\n-\t\t\tprimary_no_new_array expression primary\n-\t\t\tarray_creation_expression array_type\n+\t\t\tprimary_no_new_array expression primary array_type\n+\t\t\tarray_creation_initialized array_creation_uninitialized\n \t\t\tclass_instance_creation_expression field_access\n \t\t\tmethod_invocation array_access something_dot_new\n \t\t\targument_list postfix_expression while_expression\n@@ -1945,7 +1945,8 @@ finally:\n /* 19.12 Production from 15: Expressions  */\n primary:\n \tprimary_no_new_array\n-|\tarray_creation_expression\n+|\tarray_creation_uninitialized\n+|\tarray_creation_initialized\n ;\n \n primary_no_new_array:\n@@ -2106,7 +2107,7 @@ argument_list:\n \t\t{yyerror (\"Missing term\"); RECOVER;}\n ;\n \n-array_creation_expression:\n+array_creation_uninitialized:\n \tNEW_TK primitive_type dim_exprs\n \t\t{ $$ = build_newarray_node ($2, $3, 0); }\n |\tNEW_TK class_or_interface_type dim_exprs\n@@ -2115,9 +2116,16 @@ array_creation_expression:\n \t\t{ $$ = build_newarray_node ($2, $3, pop_current_osb (ctxp));}\n |\tNEW_TK class_or_interface_type dim_exprs dims\n \t\t{ $$ = build_newarray_node ($2, $3, pop_current_osb (ctxp));}\n+|\tNEW_TK error CSB_TK\n+\t\t{yyerror (\"'[' expected\"); DRECOVER (\"]\");}\n+|\tNEW_TK error OSB_TK\n+\t\t{yyerror (\"']' expected\"); RECOVER;}\n+;\n+\n+array_creation_initialized:\n         /* Added, JDK1.1 anonymous array. Initial documentation rule\n            modified */\n-|\tNEW_TK class_or_interface_type dims array_initializer\n+\tNEW_TK class_or_interface_type dims array_initializer\n \t\t{\n \t\t  char *sig;\n \t\t  int osb = pop_current_osb (ctxp);\n@@ -2271,6 +2279,8 @@ array_access:\n \t\t{ $$ = build_array_ref ($2.location, $1, $3); }\n |\tprimary_no_new_array OSB_TK expression CSB_TK\n \t\t{ $$ = build_array_ref ($2.location, $1, $3); }\n+|\tarray_creation_initialized OSB_TK expression CSB_TK\n+\t\t{ $$ = build_array_ref ($2.location, $1, $3); }\n |\tname OSB_TK error\n \t\t{\n \t\t  yyerror (\"Missing term and ']' expected\");\n@@ -2291,6 +2301,16 @@ array_access:\n \t\t  yyerror (\"']' expected\");\n \t\t  DRECOVER(array_access);\n \t\t}\n+|\tarray_creation_initialized OSB_TK error\n+\t\t{\n+\t\t  yyerror (\"Missing term and ']' expected\");\n+\t\t  DRECOVER(array_access);\n+\t\t}\n+|\tarray_creation_initialized OSB_TK expression error\n+\t\t{\n+\t\t  yyerror (\"']' expected\");\n+\t\t  DRECOVER(array_access);\n+\t\t}\n ;\n \n postfix_expression:"}]}