{"sha": "4494cddec9df0ae372cfda88d48b1d887b3f1e43", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDQ5NGNkZGVjOWRmMGFlMzcyY2ZkYTg4ZDQ4YjFkODg3YjNmMWU0Mw==", "commit": {"author": {"name": "Gerald Pfeifer", "email": "pfeifer@dbai.tuwien.ac.at", "date": "2003-05-23T22:55:50Z"}, "committer": {"name": "Gerald Pfeifer", "email": "gerald@gcc.gnu.org", "date": "2003-05-23T22:55:50Z"}, "message": "gcc_release (build_sources): Only update ChangeLog files which do not yet contain the entry we are going to add.\n\n\t* gcc_release (build_sources): Only update ChangeLog files which\n\tdo not yet contain the entry we are going to add.\n\tFix typo in added ChangeLog entries.\n\nFrom-SVN: r67143", "tree": {"sha": "a3b4b6ba3293798dc8dedc864f5783e85cf66f85", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a3b4b6ba3293798dc8dedc864f5783e85cf66f85"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4494cddec9df0ae372cfda88d48b1d887b3f1e43", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4494cddec9df0ae372cfda88d48b1d887b3f1e43", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4494cddec9df0ae372cfda88d48b1d887b3f1e43", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4494cddec9df0ae372cfda88d48b1d887b3f1e43/comments", "author": null, "committer": null, "parents": [{"sha": "5299653dc14a44b2011c073e720f7a8932c5062d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5299653dc14a44b2011c073e720f7a8932c5062d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5299653dc14a44b2011c073e720f7a8932c5062d"}], "stats": {"total": 31, "additions": 21, "deletions": 10}, "files": [{"sha": "b6dfc1cbed7f5f91c90d480f8d4efa506de0d235", "filename": "maintainer-scripts/ChangeLog", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4494cddec9df0ae372cfda88d48b1d887b3f1e43/maintainer-scripts%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4494cddec9df0ae372cfda88d48b1d887b3f1e43/maintainer-scripts%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/maintainer-scripts%2FChangeLog?ref=4494cddec9df0ae372cfda88d48b1d887b3f1e43", "patch": "@@ -1,3 +1,9 @@\n+2003-05-24  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>\n+\n+\t* gcc_release (build_sources): Only update ChangeLog files which\n+\tdo not yet contain the entry we are going to add.\n+\tFix typo in added ChangeLog entries.\n+\n 2003-05-20  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>\n \n \t* gcc_release (upload_files): Put diff files into a \"diffs\"\n@@ -12,7 +18,7 @@\n \t* gcc_release (usage): Print more detailed description of all\n \tcommand-line options.\n \n-2003-05-09  Gerald Pfeifer  <gerald@sourceware.org>\n+2003-05-09  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>\n \n \t* update_version (ADD_BRANCHES): Add, set to MAIN and\n \ttree-ssa-20020619-branch.\n@@ -23,12 +29,12 @@\n \t* update_version (textstring_FILES): Only version.c needs to be\n \tupdated, now that we do not consider older branches any more.\n \n-2003-05-02  Gerald Pfeifer  <gerald@pfeifer@dbai.tuwien.ac.at>\n+2003-05-02  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>\n \n \t* update_version (IGNORE_BRANCHES): Add.\n \t(BRANCHES): Do not consider branches matching $IGNORE_BRANCHES.\n \n-2003-05-02  Gerald Pfeifer  <gerald@pfeifer@dbai.tuwien.ac.at>\n+2003-05-02  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>\n \n \t* update_version: Add a trace of which branch we are currently\n \tworking on."}, {"sha": "58538ffed1613cb84c481187adcb7b1fdd9fc3e7", "filename": "maintainer-scripts/gcc_release", "status": "modified", "additions": 12, "deletions": 7, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4494cddec9df0ae372cfda88d48b1d887b3f1e43/maintainer-scripts%2Fgcc_release", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4494cddec9df0ae372cfda88d48b1d887b3f1e43/maintainer-scripts%2Fgcc_release", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/maintainer-scripts%2Fgcc_release?ref=4494cddec9df0ae372cfda88d48b1d887b3f1e43", "patch": "@@ -122,17 +122,22 @@ build_sources() {\n            -r ${BRANCH} gcc || \\\n            error \"Could not check out release sources\"\n     for x in `find ${SOURCE_DIRECTORY} -name ChangeLog`; do\n-      cat - ${x} > ${x}.new <<EOF\n+      # Update this ChangeLog file only if it does not yet contain the\n+      # entry we are going to add.  (This is a safety net for repeated\n+      # runs of this script for the same release.)\n+      if ! grep \"GCC ${RELEASE} released.\" ${x} > /dev/null ; then       \n+        cat - ${x} > ${x}.new <<EOF\n ${LONG_DATE}  Release Manager\n \n-\t* GCC ${RELEASE} Released.\n+\t* GCC ${RELEASE} released.\n \n EOF\n-      mv ${x}.new ${x} || \\\n-        error \"Could not update ${x}\"\n-      (changedir `dirname ${x}` && \\\n-        ${CVS} ci -m 'Mark ChangeLog' `basename ${x}`) || \\\n-        error \"Could not commit ${x}\"\n+        mv ${x}.new ${x} || \\\n+            error \"Could not update ${x}\"\n+        (changedir `dirname ${x}` && \\\n+            ${CVS} ci -m 'Mark ChangeLog' `basename ${x}`) || \\\n+            error \"Could not commit ${x}\"\n+      fi\n     done\n \n     # Update `gcc/version.c'."}]}