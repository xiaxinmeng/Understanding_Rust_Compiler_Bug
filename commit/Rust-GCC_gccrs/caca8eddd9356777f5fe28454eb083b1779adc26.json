{"sha": "caca8eddd9356777f5fe28454eb083b1779adc26", "node_id": "C_kwDOANBUbNoAKGNhY2E4ZWRkZDkzNTY3NzdmNWZlMjg0NTRlYjA4M2IxNzc5YWRjMjY", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2022-01-21T12:57:12Z"}, "committer": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2022-01-21T12:58:35Z"}, "message": "sanitizer/99673 - bad -Wstringop-overread diagnostic with asan\n\nThe testcase got fixed by lowering of &MEM[ptr + CST] to ptr + CST.\n\n2022-01-21  Richard Biener  <rguenther@suse.de>\n\n\tPR sanitizer/99673\n\t* gcc.dg/asan/pr99673.c: New testcase.", "tree": {"sha": "b7eee55081994def8a666a3b9f438f3ae9a013b5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b7eee55081994def8a666a3b9f438f3ae9a013b5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/caca8eddd9356777f5fe28454eb083b1779adc26", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/caca8eddd9356777f5fe28454eb083b1779adc26", "html_url": "https://github.com/Rust-GCC/gccrs/commit/caca8eddd9356777f5fe28454eb083b1779adc26", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/caca8eddd9356777f5fe28454eb083b1779adc26/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9d7a84b96980d357bb9a3d368044fb18aab4aade", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d7a84b96980d357bb9a3d368044fb18aab4aade", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d7a84b96980d357bb9a3d368044fb18aab4aade"}], "stats": {"total": 27, "additions": 27, "deletions": 0}, "files": [{"sha": "05857fd46c7f3888f52980d0bbe3d668a536cba5", "filename": "gcc/testsuite/gcc.dg/asan/pr99673.c", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/caca8eddd9356777f5fe28454eb083b1779adc26/gcc%2Ftestsuite%2Fgcc.dg%2Fasan%2Fpr99673.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/caca8eddd9356777f5fe28454eb083b1779adc26/gcc%2Ftestsuite%2Fgcc.dg%2Fasan%2Fpr99673.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fasan%2Fpr99673.c?ref=caca8eddd9356777f5fe28454eb083b1779adc26", "patch": "@@ -0,0 +1,27 @@\n+/* { dg-do compile } */\n+/* { dg-additional-options \"-Wstringop-overread\" } */\n+\n+struct B {\n+  int i;\n+  struct A {\n+    short sa[8];\n+  } a[2];\n+};\n+\n+struct C {\n+  char n, ax[];\n+};\n+\n+struct D { int i, j, k; };\n+\n+int f (const short[8]);\n+\n+void g (struct C *pc, struct D *pd, int i)\n+{\n+  struct B *pb = (void *)pc->ax;\n+  pd->i = pb->i;\n+\n+  const short *psa = pb->a[i].sa;\n+  if (f (psa))\n+    return;\n+}"}]}