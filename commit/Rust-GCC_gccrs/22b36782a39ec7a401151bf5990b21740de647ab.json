{"sha": "22b36782a39ec7a401151bf5990b21740de647ab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjJiMzY3ODJhMzllYzdhNDAxMTUxYmY1OTkwYjIxNzQwZGU2NDdhYg==", "commit": {"author": {"name": "Joseph Myers", "email": "joseph@codesourcery.com", "date": "2010-05-21T14:07:00Z"}, "committer": {"name": "Joseph Myers", "email": "jsm28@gcc.gnu.org", "date": "2010-05-21T14:07:00Z"}, "message": "acinclude.m4 (GLIBCXX_ENABLE_CLOCALE): Use GNU locale model for glibc 2.3 and later...\n\n\t* acinclude.m4 (GLIBCXX_ENABLE_CLOCALE): Use GNU locale model for\n\tglibc 2.3 and later, but not uClibc, without an execution test.\n\t* configure: Regenerate.\n\t* doc/xml/manual/configure.xml, doc/xml/manual/prerequisites.xml,\n\tdoc/xml/faq.xml: Update.\n\nFrom-SVN: r159664", "tree": {"sha": "4be5e49a431fa84d7c018d4ddf5ed86f256276c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4be5e49a431fa84d7c018d4ddf5ed86f256276c9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/22b36782a39ec7a401151bf5990b21740de647ab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22b36782a39ec7a401151bf5990b21740de647ab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/22b36782a39ec7a401151bf5990b21740de647ab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22b36782a39ec7a401151bf5990b21740de647ab/comments", "author": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "40013784db8909d2935d2f4fc6ceaf59c68b36ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40013784db8909d2935d2f4fc6ceaf59c68b36ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/40013784db8909d2935d2f4fc6ceaf59c68b36ac"}], "stats": {"total": 102, "additions": 15, "deletions": 87}, "files": [{"sha": "1eb3a31594f7ff8436d665b599fc3cba5056a9a6", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22b36782a39ec7a401151bf5990b21740de647ab/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22b36782a39ec7a401151bf5990b21740de647ab/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=22b36782a39ec7a401151bf5990b21740de647ab", "patch": "@@ -1,3 +1,11 @@\n+2010-05-21  Joseph Myers  <joseph@codesourcery.com>\n+\n+\t* acinclude.m4 (GLIBCXX_ENABLE_CLOCALE): Use GNU locale model for\n+\tglibc 2.3 and later, but not uClibc, without an execution test.\n+\t* configure: Regenerate.\n+\t* doc/xml/manual/configure.xml, doc/xml/manual/prerequisites.xml,\n+\tdoc/xml/faq.xml: Update.\n+\n 2010-05-21  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \t* include/tr1/functional: Use std::__addressof."}, {"sha": "d29701162a8e4453ca83bbef30a5b284f33ed203", "filename": "libstdc++-v3/acinclude.m4", "status": "modified", "additions": 1, "deletions": 31, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22b36782a39ec7a401151bf5990b21740de647ab/libstdc%2B%2B-v3%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22b36782a39ec7a401151bf5990b21740de647ab/libstdc%2B%2B-v3%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Facinclude.m4?ref=22b36782a39ec7a401151bf5990b21740de647ab", "patch": "@@ -1740,41 +1740,11 @@ AC_DEFUN([GLIBCXX_ENABLE_CLOCALE], [\n   if test $enable_clocale_flag = gnu; then\n     AC_EGREP_CPP([_GLIBCXX_ok], [\n     #include <features.h>\n-    #if __GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ >= 2)\n+    #if (__GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ >= 3)) && !defined(__UCLIBC__)\n       _GLIBCXX_ok\n     #endif\n     ], enable_clocale_flag=gnu, enable_clocale_flag=generic)\n \n-    if test $enable_clocale = auto; then\n-      # Test for bugs early in glibc-2.2.x series\n-      AC_TRY_RUN([\n-      #define _GNU_SOURCE 1\n-      #include <locale.h>\n-      #include <string.h>\n-      #if __GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ > 2)\n-      extern __typeof(newlocale) __newlocale;\n-      extern __typeof(duplocale) __duplocale;\n-      extern __typeof(strcoll_l) __strcoll_l;\n-      #endif\n-      int main()\n-      {\n-\tconst char __one[] = \"\ufffduglein Augmen\";\n-        const char __two[] = \"\ufffduglein\";\n-       \tint i;\n-        int j;\n-        __locale_t        loc;\n-        __locale_t        loc_dup;\n-        loc = __newlocale(1 << LC_ALL, \"de_DE\", 0);\n-        loc_dup = __duplocale(loc);\n-        i = __strcoll_l(__one, __two, loc);\n-        j = __strcoll_l(__one, __two, loc_dup);\n-        return 0;\n-      }\n-      ],\n-      [enable_clocale_flag=gnu],[enable_clocale_flag=generic],\n-      [enable_clocale_flag=generic])\n-    fi\n-\n     # Set it to scream when it hurts.\n     ac_save_CFLAGS=\"$CFLAGS\"\t\n     CFLAGS=\"-Wimplicit-function-declaration -Werror\""}, {"sha": "16f21850ce3c46971b43a0a06a326f2fd4676b30", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 1, "deletions": 44, "changes": 45, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22b36782a39ec7a401151bf5990b21740de647ab/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22b36782a39ec7a401151bf5990b21740de647ab/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=22b36782a39ec7a401151bf5990b21740de647ab", "patch": "@@ -15628,7 +15628,7 @@ fi\n /* end confdefs.h.  */\n \n     #include <features.h>\n-    #if __GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ >= 2)\n+    #if (__GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ >= 3)) && !defined(__UCLIBC__)\n       _GLIBCXX_ok\n     #endif\n \n@@ -15642,49 +15642,6 @@ fi\n rm -f conftest*\n \n \n-    if test $enable_clocale = auto; then\n-      # Test for bugs early in glibc-2.2.x series\n-      if test \"$cross_compiling\" = yes; then :\n-  enable_clocale_flag=generic\n-else\n-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n-/* end confdefs.h.  */\n-\n-      #define _GNU_SOURCE 1\n-      #include <locale.h>\n-      #include <string.h>\n-      #if __GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ > 2)\n-      extern __typeof(newlocale) __newlocale;\n-      extern __typeof(duplocale) __duplocale;\n-      extern __typeof(strcoll_l) __strcoll_l;\n-      #endif\n-      int main()\n-      {\n-\tconst char __one[] = \"\ufffduglein Augmen\";\n-        const char __two[] = \"\ufffduglein\";\n-       \tint i;\n-        int j;\n-        __locale_t        loc;\n-        __locale_t        loc_dup;\n-        loc = __newlocale(1 << LC_ALL, \"de_DE\", 0);\n-        loc_dup = __duplocale(loc);\n-        i = __strcoll_l(__one, __two, loc);\n-        j = __strcoll_l(__one, __two, loc_dup);\n-        return 0;\n-      }\n-\n-_ACEOF\n-if ac_fn_c_try_run \"$LINENO\"; then :\n-  enable_clocale_flag=gnu\n-else\n-  enable_clocale_flag=generic\n-fi\n-rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \\\n-  conftest.$ac_objext conftest.beam conftest.$ac_ext\n-fi\n-\n-    fi\n-\n     # Set it to scream when it hurts.\n     ac_save_CFLAGS=\"$CFLAGS\"\n     CFLAGS=\"-Wimplicit-function-declaration -Werror\""}, {"sha": "57f0804178968e4404988c5506aaf4080d1e9bad", "filename": "libstdc++-v3/doc/xml/faq.xml", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22b36782a39ec7a401151bf5990b21740de647ab/libstdc%2B%2B-v3%2Fdoc%2Fxml%2Ffaq.xml", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22b36782a39ec7a401151bf5990b21740de647ab/libstdc%2B%2B-v3%2Fdoc%2Fxml%2Ffaq.xml", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fdoc%2Fxml%2Ffaq.xml?ref=22b36782a39ec7a401151bf5990b21740de647ab", "patch": "@@ -640,6 +640,8 @@\n          5.0.1) and later uses localization and formatting code from the system\n          C library (glibc) version 2.2.5 which contains necessary bugfixes.\n          Most GNU/Linux distros make more recent versions available now.\n+         libstdc++ 4.6.0 and later require glibc 2.3 or later for this\n+         localization and formatting code.\n       </para>\n       <para>The guideline is simple:  the more recent the C++ library, the\n          more recent the C library.  (This is also documented in the main"}, {"sha": "26af74582c949119090f91b93038ef15e67414f6", "filename": "libstdc++-v3/doc/xml/manual/configure.xml", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22b36782a39ec7a401151bf5990b21740de647ab/libstdc%2B%2B-v3%2Fdoc%2Fxml%2Fmanual%2Fconfigure.xml", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22b36782a39ec7a401151bf5990b21740de647ab/libstdc%2B%2B-v3%2Fdoc%2Fxml%2Fmanual%2Fconfigure.xml", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fdoc%2Fxml%2Fmanual%2Fconfigure.xml?ref=22b36782a39ec7a401151bf5990b21740de647ab", "patch": "@@ -113,8 +113,7 @@\n      <para>If not explicitly specified, the configure proccess tries\n       to guess the most suitable package from the choices above. The\n       default is 'generic'. On glibc-based systems of sufficient\n-      vintage (2.2.5 and newer) and capability (with installed DE and\n-      FR locale data), 'gnu' is automatically selected. This option\n+      vintage (2.3 and newer), 'gnu' is automatically selected. This option\n       can change the library ABI.\n      </para>\n  </listitem></varlistentry>"}, {"sha": "e85020f2563d040a5e8ae10e47c512c6f8018975", "filename": "libstdc++-v3/doc/xml/manual/prerequisites.xml", "status": "modified", "additions": 2, "deletions": 10, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22b36782a39ec7a401151bf5990b21740de647ab/libstdc%2B%2B-v3%2Fdoc%2Fxml%2Fmanual%2Fprerequisites.xml", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22b36782a39ec7a401151bf5990b21740de647ab/libstdc%2B%2B-v3%2Fdoc%2Fxml%2Fmanual%2Fprerequisites.xml", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fdoc%2Fxml%2Fmanual%2Fprerequisites.xml?ref=22b36782a39ec7a401151bf5990b21740de647ab", "patch": "@@ -58,16 +58,8 @@\n \t<para>\n \t  If gcc 3.1.0 or later on is being used on linux, an attempt\n \t  will be made to use \"C\" library functionality necessary for\n-\t  C++ named locale support.  For gcc 3.2.1 and later, this\n-\t  means that glibc 2.2.5 or later is required and the \"C\"\n-\t  library de_DE locale information must be installed.\n-\t</para>\n-\n-\t<para>\n-\t  Note however that the sanity checks involving the de_DE\n-\t  locale are skipped when an explicit --enable-clocale=gnu\n-\t  configure option is used: only the basic checks are carried\n-\t  out, defending against misconfigurations.\n+\t  C++ named locale support.  For gcc 4.6.0 and later, this\n+\t  means that glibc 2.3 or later is required.\n \t</para>\n \n \t<para>"}]}