{"sha": "4a2e9be1ac7c8f4c37b5deb4ce0b0f39925e56c9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGEyZTliZTFhYzdjOGY0YzM3YjVkZWI0Y2UwYjBmMzk5MjVlNTZjOQ==", "commit": {"author": {"name": "Dmitriy Anisimkov", "email": "anisimko@adacore.com", "date": "2019-08-12T09:01:53Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2019-08-12T09:01:53Z"}, "message": "[Ada] New parameter Quiet for procedure GNAT.Command_Line.Getopt\n\nGetopt procedure is parsing the command line or set of strings. If the\ncommand line contains unknown switch than the Getopt prints error\nmessage to the console and raises the exception Invalid_Switch. The\nprinting can be inappropriate in some cases. The new parameter Quiet\nallows avoiding console output.\n\n2019-08-12  Dmitriy Anisimkov  <anisimko@adacore.com>\n\ngcc/ada/\n\n\t* libgnat/g-comlin.ads, libgnat/g-comlin.adb (Getopt): Add\n\tparameter Quiet. Need to do not output error messages to\n\tconsole. Invalid_Switch exception generation surrounded by an\n\terror message.\n\nFrom-SVN: r274307", "tree": {"sha": "aef6e2ce3f082e962168baaaeeab023dec9ac1a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aef6e2ce3f082e962168baaaeeab023dec9ac1a1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4a2e9be1ac7c8f4c37b5deb4ce0b0f39925e56c9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a2e9be1ac7c8f4c37b5deb4ce0b0f39925e56c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a2e9be1ac7c8f4c37b5deb4ce0b0f39925e56c9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a2e9be1ac7c8f4c37b5deb4ce0b0f39925e56c9/comments", "author": {"login": "anisimkov", "id": 15864134, "node_id": "MDQ6VXNlcjE1ODY0MTM0", "avatar_url": "https://avatars.githubusercontent.com/u/15864134?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anisimkov", "html_url": "https://github.com/anisimkov", "followers_url": "https://api.github.com/users/anisimkov/followers", "following_url": "https://api.github.com/users/anisimkov/following{/other_user}", "gists_url": "https://api.github.com/users/anisimkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/anisimkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anisimkov/subscriptions", "organizations_url": "https://api.github.com/users/anisimkov/orgs", "repos_url": "https://api.github.com/users/anisimkov/repos", "events_url": "https://api.github.com/users/anisimkov/events{/privacy}", "received_events_url": "https://api.github.com/users/anisimkov/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "68e4cc9854044a2f66623c5d8dd36bc27bd948f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68e4cc9854044a2f66623c5d8dd36bc27bd948f2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/68e4cc9854044a2f66623c5d8dd36bc27bd948f2"}], "stats": {"total": 34, "additions": 24, "deletions": 10}, "files": [{"sha": "8b8a944ef65d4af9c4261be647f749808922d518", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a2e9be1ac7c8f4c37b5deb4ce0b0f39925e56c9/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a2e9be1ac7c8f4c37b5deb4ce0b0f39925e56c9/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=4a2e9be1ac7c8f4c37b5deb4ce0b0f39925e56c9", "patch": "@@ -1,3 +1,10 @@\n+2019-08-12  Dmitriy Anisimkov  <anisimko@adacore.com>\n+\n+\t* libgnat/g-comlin.ads, libgnat/g-comlin.adb (Getopt): Add\n+\tparameter Quiet. Need to do not output error messages to\n+\tconsole. Invalid_Switch exception generation surrounded by an\n+\terror message.\n+\n 2019-08-12  Ed Schonberg  <schonberg@adacore.com>\n \n \t* exp_ch6.adb (Expand_Actuals. Add_Call_By_Copy_Code): Add code"}, {"sha": "f567ddb2481e9953226afc16ad1b3fcb5633398b", "filename": "gcc/ada/libgnat/g-comlin.adb", "status": "modified", "additions": 14, "deletions": 9, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a2e9be1ac7c8f4c37b5deb4ce0b0f39925e56c9/gcc%2Fada%2Flibgnat%2Fg-comlin.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a2e9be1ac7c8f4c37b5deb4ce0b0f39925e56c9/gcc%2Fada%2Flibgnat%2Fg-comlin.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flibgnat%2Fg-comlin.adb?ref=4a2e9be1ac7c8f4c37b5deb4ce0b0f39925e56c9", "patch": "@@ -753,7 +753,8 @@ package body GNAT.Command_Line is\n \n             Parser.Current_Index := End_Index + 1;\n \n-            raise Invalid_Switch;\n+            raise Invalid_Switch with\n+              \"Unrecognized option \" & Full_Switch (Parser);\n          end if;\n \n          End_Index := Parser.Current_Index + Max_Length - 1;\n@@ -883,7 +884,8 @@ package body GNAT.Command_Line is\n                      Last    => Arg'Last,\n                      Extra   => Parser.Switch_Character);\n                   Parser.Current_Index := Arg'Last + 1;\n-                  raise Invalid_Switch;\n+                  raise Invalid_Switch with\n+                    \"Unrecognized option \" & Full_Switch (Parser);\n                end if;\n          end case;\n \n@@ -3365,7 +3367,8 @@ package body GNAT.Command_Line is\n      (Config      : Command_Line_Configuration;\n       Callback    : Switch_Handler := null;\n       Parser      : Opt_Parser := Command_Line_Parser;\n-      Concatenate : Boolean := True)\n+      Concatenate : Boolean := True;\n+      Quiet       : Boolean := False)\n    is\n       Local_Config    : Command_Line_Configuration := Config;\n       Getopt_Switches : String_Access;\n@@ -3575,12 +3578,14 @@ package body GNAT.Command_Line is\n \n          --  Message inspired by \"ls\" on Unix\n \n-         Put_Line (Standard_Error,\n-                   Base_Name (Ada.Command_Line.Command_Name)\n-                   & \": unrecognized option '\"\n-                   & Full_Switch (Parser)\n-                   & \"'\");\n-         Try_Help;\n+         if not Quiet then\n+            Put_Line (Standard_Error,\n+                      Base_Name (Ada.Command_Line.Command_Name)\n+                      & \": unrecognized option '\"\n+                      & Full_Switch (Parser)\n+                      & \"'\");\n+            Try_Help;\n+         end if;\n \n          raise;\n "}, {"sha": "3708c37b842b04fbd1bfde88f429ea8a2851d68a", "filename": "gcc/ada/libgnat/g-comlin.ads", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a2e9be1ac7c8f4c37b5deb4ce0b0f39925e56c9/gcc%2Fada%2Flibgnat%2Fg-comlin.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a2e9be1ac7c8f4c37b5deb4ce0b0f39925e56c9/gcc%2Fada%2Flibgnat%2Fg-comlin.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flibgnat%2Fg-comlin.ads?ref=4a2e9be1ac7c8f4c37b5deb4ce0b0f39925e56c9", "patch": "@@ -738,7 +738,8 @@ package GNAT.Command_Line is\n      (Config      : Command_Line_Configuration;\n       Callback    : Switch_Handler := null;\n       Parser      : Opt_Parser := Command_Line_Parser;\n-      Concatenate : Boolean := True);\n+      Concatenate : Boolean := True;\n+      Quiet       : Boolean := False);\n    --  Similar to the standard Getopt function. For each switch found on the\n    --  command line, this calls Callback, if the switch is not handled\n    --  automatically.\n@@ -756,6 +757,7 @@ package GNAT.Command_Line is\n    --  to display the help message and raises Exit_From_Command_Line.\n    --  If an invalid switch is specified on the command line, this procedure\n    --  will display an error message and raises Invalid_Switch again.\n+   --  If the Quiet parameter is True then the error message is not displayed.\n    --\n    --  This function automatically expands switches:\n    --"}]}