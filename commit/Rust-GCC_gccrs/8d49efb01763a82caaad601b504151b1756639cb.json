{"sha": "8d49efb01763a82caaad601b504151b1756639cb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGQ0OWVmYjAxNzYzYTgyY2FhYWQ2MDFiNTA0MTUxYjE3NTY2MzljYg==", "commit": {"author": {"name": "Geoffrey Keating", "email": "geoffk@redhat.com", "date": "2001-11-23T07:35:21Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2001-11-23T07:35:21Z"}, "message": "old-dejagnu.exp (old-dejagnu): Copy extra source files to the host if it is remote.\n\n\t* lib/old-dejagnu.exp (old-dejagnu): Copy extra source files\n\tto the host if it is remote.  Let tests specify extra headers\n\tthey use.\n\t* g++.old-deja/g++.abi/vtable3a.C: This uses 'vtable3.h'.\n\t* g++.old-deja/g++.abi/vtable3b.C: This uses 'vtable3.h'.\n\t* g++.old-deja/g++.abi/vtable3c.C: This uses 'vtable3.h'.\n\t* g++.old-deja/g++.abi/vtable3d.C: This uses 'vtable3.h'.\n\t* g++.old-deja/g++.abi/vtable3e.C: This uses 'vtable3.h'.\n\t* g++.old-deja/g++.abi/vtable3f.C: This uses 'vtable3.h'.\n\t* g++.old-deja/g++.abi/vtable3g.C: This uses 'vtable3.h'.\n\t* g++.old-deja/g++.abi/vtable3h.C: This uses 'vtable3.h'.\n\t* g++.old-deja/g++.abi/vtable3i.C: This uses 'vtable3.h'.\n\t* g++.old-deja/g++.abi/vtable3j.C: This uses 'vtable3.h'.\n\nFrom-SVN: r47281", "tree": {"sha": "58a45849b2c753a375498854e723fde18e5d28bf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/58a45849b2c753a375498854e723fde18e5d28bf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8d49efb01763a82caaad601b504151b1756639cb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d49efb01763a82caaad601b504151b1756639cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d49efb01763a82caaad601b504151b1756639cb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d49efb01763a82caaad601b504151b1756639cb/comments", "author": null, "committer": null, "parents": [{"sha": "a338be441ce30765666b0c536059cb1edac8bb76", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a338be441ce30765666b0c536059cb1edac8bb76", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a338be441ce30765666b0c536059cb1edac8bb76"}], "stats": {"total": 51, "additions": 50, "deletions": 1}, "files": [{"sha": "ac3dfc0758c800274018ec604c62e44a7ef616c1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d49efb01763a82caaad601b504151b1756639cb/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d49efb01763a82caaad601b504151b1756639cb/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8d49efb01763a82caaad601b504151b1756639cb", "patch": "@@ -1,3 +1,19 @@\n+2001-11-22  Geoffrey Keating  <geoffk@redhat.com>\n+\n+\t* lib/old-dejagnu.exp (old-dejagnu): Copy extra source files\n+\tto the host if it is remote.  Let tests specify extra headers\n+\tthey use.\n+\t* g++.old-deja/g++.abi/vtable3a.C: This uses 'vtable3.h'.\n+\t* g++.old-deja/g++.abi/vtable3b.C: This uses 'vtable3.h'.\n+\t* g++.old-deja/g++.abi/vtable3c.C: This uses 'vtable3.h'.\n+\t* g++.old-deja/g++.abi/vtable3d.C: This uses 'vtable3.h'.\n+\t* g++.old-deja/g++.abi/vtable3e.C: This uses 'vtable3.h'.\n+\t* g++.old-deja/g++.abi/vtable3f.C: This uses 'vtable3.h'.\n+\t* g++.old-deja/g++.abi/vtable3g.C: This uses 'vtable3.h'.\n+\t* g++.old-deja/g++.abi/vtable3h.C: This uses 'vtable3.h'.\n+\t* g++.old-deja/g++.abi/vtable3i.C: This uses 'vtable3.h'.\n+\t* g++.old-deja/g++.abi/vtable3j.C: This uses 'vtable3.h'.\n+\n 2001-11-22  Nick Clifton  <nickc@cambridge.redhat.com>\n \n \t* gcc.c-torture/execute/ieee/20000320-1.c: Fix patterns to work"}, {"sha": "8dc912b3d99b2240855cce9de0df41fdc58ac92a", "filename": "gcc/testsuite/g++.old-deja/g++.abi/vtable3a.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d49efb01763a82caaad601b504151b1756639cb/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3a.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d49efb01763a82caaad601b504151b1756639cb/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3a.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3a.C?ref=8d49efb01763a82caaad601b504151b1756639cb", "patch": "@@ -2,6 +2,7 @@\n // Contributed by Nathan Sidwell 4 February 2001 <nathan@codesourcery.com>\n \n // Check constructor vtables work.\n+// Additional files: vtable3.h\n \n #define A_EMPTY\n #define B1_EMPTY"}, {"sha": "903eab846f89c6feb823d65c1c4f1e72f12bb149", "filename": "gcc/testsuite/g++.old-deja/g++.abi/vtable3b.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d49efb01763a82caaad601b504151b1756639cb/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3b.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d49efb01763a82caaad601b504151b1756639cb/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3b.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3b.C?ref=8d49efb01763a82caaad601b504151b1756639cb", "patch": "@@ -2,6 +2,7 @@\n // Contributed by Nathan Sidwell 4 February 2001 <nathan@codesourcery.com>\n \n // Check constructor vtables work.\n+// Additional files: vtable3.h\n \n #define B1_EMPTY\n #define B2_EMPTY"}, {"sha": "45b891a463b8b0dd5591040017e336556d028fb8", "filename": "gcc/testsuite/g++.old-deja/g++.abi/vtable3c.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d49efb01763a82caaad601b504151b1756639cb/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3c.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d49efb01763a82caaad601b504151b1756639cb/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3c.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3c.C?ref=8d49efb01763a82caaad601b504151b1756639cb", "patch": "@@ -2,6 +2,7 @@\n // Contributed by Nathan Sidwell 4 February 2001 <nathan@codesourcery.com>\n \n // Check constructor vtables work.\n+// Additional files: vtable3.h\n \n #define A_EMPTY\n #define B2_EMPTY"}, {"sha": "5511c2391c1281cdbba47ce5195f601a7bf57a3f", "filename": "gcc/testsuite/g++.old-deja/g++.abi/vtable3d.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d49efb01763a82caaad601b504151b1756639cb/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3d.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d49efb01763a82caaad601b504151b1756639cb/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3d.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3d.C?ref=8d49efb01763a82caaad601b504151b1756639cb", "patch": "@@ -2,6 +2,7 @@\n // Contributed by Nathan Sidwell 4 February 2001 <nathan@codesourcery.com>\n \n // Check constructor vtables work.\n+// Additional files: vtable3.h\n \n #define A_EMPTY\n #define B1_EMPTY"}, {"sha": "0e71fac1b7ce169f4bb38a2819ba3df6239869e3", "filename": "gcc/testsuite/g++.old-deja/g++.abi/vtable3e.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d49efb01763a82caaad601b504151b1756639cb/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3e.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d49efb01763a82caaad601b504151b1756639cb/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3e.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3e.C?ref=8d49efb01763a82caaad601b504151b1756639cb", "patch": "@@ -2,6 +2,7 @@\n // Contributed by Nathan Sidwell 4 February 2001 <nathan@codesourcery.com>\n \n // Check constructor vtables work.\n+// Additional files: vtable3.h\n \n #define A_EMPTY\n #define B1_EMPTY"}, {"sha": "8af79db8662e23aa5b6fbfd83ea2cd27c615f1ca", "filename": "gcc/testsuite/g++.old-deja/g++.abi/vtable3f.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d49efb01763a82caaad601b504151b1756639cb/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3f.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d49efb01763a82caaad601b504151b1756639cb/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3f.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3f.C?ref=8d49efb01763a82caaad601b504151b1756639cb", "patch": "@@ -2,6 +2,7 @@\n // Contributed by Nathan Sidwell 4 February 2001 <nathan@codesourcery.com>\n \n // Check constructor vtables work.\n+// Additional files: vtable3.h\n \n #define A_EMPTY\n #define B1_EMPTY"}, {"sha": "c97804fa9a6c222612548bbc740a706ef24fbac0", "filename": "gcc/testsuite/g++.old-deja/g++.abi/vtable3g.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d49efb01763a82caaad601b504151b1756639cb/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3g.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d49efb01763a82caaad601b504151b1756639cb/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3g.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3g.C?ref=8d49efb01763a82caaad601b504151b1756639cb", "patch": "@@ -2,6 +2,7 @@\n // Contributed by Nathan Sidwell 4 February 2001 <nathan@codesourcery.com>\n \n // Check constructor vtables work.\n+// Additional files: vtable3.h\n \n #define A_EMPTY\n #define B1_EMPTY"}, {"sha": "0b0a8433a5677c43b47c30719a6e4f80fe9b7123", "filename": "gcc/testsuite/g++.old-deja/g++.abi/vtable3h.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d49efb01763a82caaad601b504151b1756639cb/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3h.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d49efb01763a82caaad601b504151b1756639cb/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3h.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3h.C?ref=8d49efb01763a82caaad601b504151b1756639cb", "patch": "@@ -2,6 +2,7 @@\n // Contributed by Nathan Sidwell 4 February 2001 <nathan@codesourcery.com>\n \n // Check constructor vtables work.\n+// Additional files: vtable3.h\n \n #define A_EMPTY\n #define B1_EMPTY"}, {"sha": "6c48244ac68c9d38319bcdd74dcf43947b8da54d", "filename": "gcc/testsuite/g++.old-deja/g++.abi/vtable3i.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d49efb01763a82caaad601b504151b1756639cb/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3i.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d49efb01763a82caaad601b504151b1756639cb/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3i.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3i.C?ref=8d49efb01763a82caaad601b504151b1756639cb", "patch": "@@ -2,6 +2,7 @@\n // Contributed by Nathan Sidwell 4 February 2001 <nathan@codesourcery.com>\n \n // Check constructor vtables work.\n+// Additional files: vtable3.h\n \n #define B1_EMPTY\n #define B2_EMPTY"}, {"sha": "0b8925cb72628b86cb0b3eb59a3d559789e8a43a", "filename": "gcc/testsuite/g++.old-deja/g++.abi/vtable3j.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d49efb01763a82caaad601b504151b1756639cb/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3j.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d49efb01763a82caaad601b504151b1756639cb/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3j.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.abi%2Fvtable3j.C?ref=8d49efb01763a82caaad601b504151b1756639cb", "patch": "@@ -2,6 +2,7 @@\n // Contributed by Nathan Sidwell 4 February 2001 <nathan@codesourcery.com>\n \n // Check constructor vtables work.\n+// Additional files: vtable3.h\n \n #define B1_EMPTY\n #define B2_EMPTY"}, {"sha": "105c37d56058612e43dd3df86a12ba41d99c461b", "filename": "gcc/testsuite/lib/old-dejagnu.exp", "status": "modified", "additions": 24, "deletions": 1, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d49efb01763a82caaad601b504151b1756639cb/gcc%2Ftestsuite%2Flib%2Fold-dejagnu.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d49efb01763a82caaad601b504151b1756639cb/gcc%2Ftestsuite%2Flib%2Fold-dejagnu.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fold-dejagnu.exp?ref=8d49efb01763a82caaad601b504151b1756639cb", "patch": "@@ -205,6 +205,7 @@ proc old-dejagnu { compiler prog name cflagsx default_cflags libs } {\n \n     set tmp [lindex [grep $prog \"Special.*Options:.*\"] 0]\n     set cflags \"\"\n+    set to_download \"\"\n \n     regsub -all \"\\n\\[^\\n\\]+(\\n|$)\" $tmp \"\\n\" tmp\n     set tmp [string trim $tmp]\n@@ -225,11 +226,27 @@ proc old-dejagnu { compiler prog name cflagsx default_cflags libs } {\n     set tmp [string trim $tmp]\n     if ![string match \"\" $tmp] then {\n \tregsub \"^.*Additional.*sources:\" $tmp \"\" tmp\n+\tif [is_remote host] {\n+\t    lappend cflags \"additional_flags=$tmp\"\n+\t}\n \tregsub -all \" \" $tmp \" [file dirname $prog]/\" tmp\n-\tlappend cflags \"additional_flags=$tmp\"\n+\tif ![is_remote host] {\n+\t    lappend cflags \"additional_flags=$tmp\"\n+\t}\n+\tset to_download [concat $to_download $tmp]\n \tverbose \"Adding sources $tmp\"\n     }\n \n+    set tmp [lindex [grep $prog \"Additional files: .*\"] 0]\n+    regsub -all \"\\n\\[^\\n\\]+(\\n|$)\" $tmp \"\\n\" tmp\n+    set tmp [string trim $tmp]\n+    if ![string match \"\" $tmp] then {\n+\tregsub \"^.*Additional.*files:\" $tmp \"\" tmp\n+\tregsub -all \" \" $tmp \" [file dirname $prog]/\" tmp\n+\tset to_download [concat $to_download $tmp]\n+\tverbose \"Downloading files $tmp\"\n+    }\n+\n     lappend cflags \"compiler=$compiler\"\n \n     regsub -all \"\\[./\\]\" \"$name\" \"-\" output;\n@@ -408,6 +425,12 @@ proc old-dejagnu { compiler prog name cflagsx default_cflags libs } {\n #\n #  run the compiler and analyze the results\n #\n+    # Download any source or header files we might need.\n+    if [is_remote host] {\n+\tforeach file $to_download {\n+\t    remote_download host $file\n+\t}\n+    }\n \n     # Since we don't check return status of the compiler, make sure\n     # we can't run a.out when the compilation fails."}]}