{"sha": "9daf8216f4ec1464c0fea1cea7008a21f31abbaa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWRhZjgyMTZmNGVjMTQ2NGMwZmVhMWNlYTcwMDhhMjFmMzFhYmJhYQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2008-11-24T11:13:44Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2008-11-24T11:13:44Z"}, "message": "re PR libstdc++/38244 (bitset initialization from 0 rejected.)\n\n2008-11-24  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR libstdc++/38244\n\t* include/std/bitset (bitset<>::bitset(const char*, char, char)):\n\tRemove, do not implement DR 778.\n\t* doc/xml/manual/intro.xml: Remove entry for DR 778.\n\t* testsuite/23_containers/bitset/cons/2.cc: Remove.\n\t* testsuite/23_containers/bitset/cons/dr396.cc: Tweak.\n\t* testsuite/23_containers/bitset/cons/38244.cc: Add.\n\nFrom-SVN: r142152", "tree": {"sha": "6d91ab9996e6df76220a4c0d6b05500b9582649b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6d91ab9996e6df76220a4c0d6b05500b9582649b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9daf8216f4ec1464c0fea1cea7008a21f31abbaa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9daf8216f4ec1464c0fea1cea7008a21f31abbaa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9daf8216f4ec1464c0fea1cea7008a21f31abbaa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9daf8216f4ec1464c0fea1cea7008a21f31abbaa/comments", "author": null, "committer": null, "parents": [{"sha": "f07bde688d9276d02fe1f7886dc932ab14b892a7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f07bde688d9276d02fe1f7886dc932ab14b892a7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f07bde688d9276d02fe1f7886dc932ab14b892a7"}], "stats": {"total": 97, "additions": 36, "deletions": 61}, "files": [{"sha": "169a22b0016b64442ee703bca1f0819e2fdba6de", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9daf8216f4ec1464c0fea1cea7008a21f31abbaa/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9daf8216f4ec1464c0fea1cea7008a21f31abbaa/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=9daf8216f4ec1464c0fea1cea7008a21f31abbaa", "patch": "@@ -1,3 +1,13 @@\n+2008-11-24  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR libstdc++/38244\n+\t* include/std/bitset (bitset<>::bitset(const char*, char, char)):\n+\tRemove, do not implement DR 778.\n+\t* doc/xml/manual/intro.xml: Remove entry for DR 778.\n+\t* testsuite/23_containers/bitset/cons/2.cc: Remove.\n+\t* testsuite/23_containers/bitset/cons/dr396.cc: Tweak.\n+\t* testsuite/23_containers/bitset/cons/38244.cc: Add.\n+\n 2008-11-21  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \t* testsuite/22_locale/num_put/put/char/38210.cc: Tweak."}, {"sha": "906d942f364d73108e253b54fd29c55744554733", "filename": "libstdc++-v3/doc/xml/manual/intro.xml", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9daf8216f4ec1464c0fea1cea7008a21f31abbaa/libstdc%2B%2B-v3%2Fdoc%2Fxml%2Fmanual%2Fintro.xml", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9daf8216f4ec1464c0fea1cea7008a21f31abbaa/libstdc%2B%2B-v3%2Fdoc%2Fxml%2Fmanual%2Fintro.xml", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fdoc%2Fxml%2Fmanual%2Fintro.xml?ref=9daf8216f4ec1464c0fea1cea7008a21f31abbaa", "patch": "@@ -684,13 +684,6 @@\n     <listitem><para>In C++0x mode, remove assign, add fill.\n     </para></listitem></varlistentry>\n \n-    <varlistentry><term><ulink url=\"../ext/lwg-defects.html#778\">778</ulink>:\n-        <emphasis>std::bitset does not have any constructor taking a string \n-\t          literal</emphasis>\n-    </term>\n-    <listitem><para>Add it.\n-    </para></listitem></varlistentry>\n-\n     <varlistentry><term><ulink url=\"../ext/lwg-defects.html#781\">781</ulink>:\n         <emphasis>std::complex should add missing C99 functions</emphasis>\n     </term>"}, {"sha": "10d60055c31b3b50f44451a9131d5706f2f6ad65", "filename": "libstdc++-v3/include/std/bitset", "status": "modified", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9daf8216f4ec1464c0fea1cea7008a21f31abbaa/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fbitset", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9daf8216f4ec1464c0fea1cea7008a21f31abbaa/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fbitset", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fbitset?ref=9daf8216f4ec1464c0fea1cea7008a21f31abbaa", "patch": "@@ -802,17 +802,6 @@ _GLIBCXX_BEGIN_NESTED_NAMESPACE(std, _GLIBCXX_STD_D)\n \t  _M_copy_from_string(__s, __position, __n, __zero, __one);\n \t}\n \n-      // _GLIBCXX_RESOLVE_LIB_DEFECTS\n-      // 778. std::bitset does not have any constructor taking a string literal\n-      explicit\n-      bitset(const char* __s, char __zero = '0', char __one = '1')\n-      : _Base()\n-      {\n-\t_M_copy_from_ptr<char, char_traits<char> >(__s,\n-\t\t\t       char_traits<char>::length(__s), 0, size_t(-1),\n-\t\t\t\t\t\t   __zero, __one);\n-      }\n-\n       // 23.3.5.2 bitset operations:\n       //@{\n       /**"}, {"sha": "5d7523258020fb0c7272f73884da30837e926623", "filename": "libstdc++-v3/testsuite/23_containers/bitset/cons/38244.cc", "status": "renamed", "additions": 20, "deletions": 25, "changes": 45, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9daf8216f4ec1464c0fea1cea7008a21f31abbaa/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fbitset%2Fcons%2F38244.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9daf8216f4ec1464c0fea1cea7008a21f31abbaa/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fbitset%2Fcons%2F38244.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fbitset%2Fcons%2F38244.cc?ref=9daf8216f4ec1464c0fea1cea7008a21f31abbaa", "patch": "@@ -1,5 +1,3 @@\n-// 2008-05-21  Paolo Carlini  <paolo.carlini@oracle.com>\n-\n // Copyright (C) 2008 Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n@@ -18,32 +16,29 @@\n // Software Foundation, 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,\n // USA.\n \n+// { dg-do compile }\n+\n #include <bitset>\n-#include <testsuite_hooks.h>\n \n-// DR 778. std::bitset does not have any constructor taking a string literal.\n-void test01()\n+class C0\n {\n-  bool test __attribute__((unused)) = true;\n-\n-  std::bitset<4> z1(\"1101\");\n-  std::bitset<4> z1_ref(std::string(\"1101\"));\n-  VERIFY( z1.to_string() == \"1101\" );\n-  VERIFY( z1 == z1_ref );\n-\n-  std::bitset<8> z2(\"1011\");\n-  std::bitset<8> z2_ref(std::string(\"1011\"));\n-  VERIFY( z2.to_string() == \"00001011\" );\n-  VERIFY( z2 == z2_ref );\n+ public:\n+  C0() : b(0) { }\n+ private:\n+  std::bitset<1> b;\n+};\n \n-  std::bitset<2> z3(\"1101\");\n-  std::bitset<2> z3_ref(std::string(\"1101\"));\n-  VERIFY( z3.to_string() == \"11\" );\n-  VERIFY( z3 == z3_ref );\n-}\n-\n-int main()\n+class C1\n+{\n+ public:\n+  C1() : b(1) { }\n+ private:\n+  std::bitset<1> b;\n+};\n+\n+// libstdc++/38244\n+void func()\n {\n-  test01();\n-  return 0;\n+  C0 val0;\n+  C1 val1;\n }", "previous_filename": "libstdc++-v3/testsuite/23_containers/bitset/cons/2.cc"}, {"sha": "6218e8a840d12c222434c0548dbe6b04664dc45a", "filename": "libstdc++-v3/testsuite/23_containers/bitset/cons/dr396.cc", "status": "modified", "additions": 6, "deletions": 18, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9daf8216f4ec1464c0fea1cea7008a21f31abbaa/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fbitset%2Fcons%2Fdr396.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9daf8216f4ec1464c0fea1cea7008a21f31abbaa/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fbitset%2Fcons%2Fdr396.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fbitset%2Fcons%2Fdr396.cc?ref=9daf8216f4ec1464c0fea1cea7008a21f31abbaa", "patch": "@@ -26,35 +26,23 @@ void test01()\n {\n   bool test __attribute__((unused)) = true;\n \n-  std::bitset<4> z1(\"bbab\", 'a', 'b');\n-  std::bitset<4> z1_ref(std::string(\"bbab\"), 0, std::string::npos, 'a', 'b');\n+  std::bitset<4> z1(std::string(\"bbab\"), 0, std::string::npos, 'a', 'b');\n   VERIFY( z1.to_string('a', 'b') == \"bbab\" );\n-  VERIFY( z1 == z1_ref );\n \n-  std::bitset<4> z2(\"11a1\", 'a');\n-  std::bitset<4> z2_ref(std::string(\"11a1\"), 0, std::string::npos, 'a');\n+  std::bitset<4> z2(std::string(\"11a1\"), 0, std::string::npos, 'a');\n   VERIFY( z2.to_string('a') == \"11a1\" );\n-  VERIFY( z2 == z2_ref );\n \n-  std::bitset<8> z3(\"babb\", 'a', 'b');\n-  std::bitset<8> z3_ref(std::string(\"babb\"), 0, std::string::npos, 'a', 'b');\n+  std::bitset<8> z3(std::string(\"babb\"), 0, std::string::npos, 'a', 'b');\n   VERIFY( z3.to_string('a', 'b') == \"aaaababb\" );\n-  VERIFY( z3 == z3_ref );\n \n-  std::bitset<8> z4(\"1a11\", 'a');\n-  std::bitset<8> z4_ref(std::string(\"1a11\"), 0, std::string::npos, 'a');\n+  std::bitset<8> z4(std::string(\"1a11\"), 0, std::string::npos, 'a');\n   VERIFY( z4.to_string('a') == \"aaaa1a11\" );\n-  VERIFY( z4 == z4_ref );\n \n-  std::bitset<2> z5(\"bbab\", 'a', 'b');\n-  std::bitset<2> z5_ref(std::string(\"bbab\"), 0, std::string::npos, 'a', 'b');\n+  std::bitset<2> z5(std::string(\"bbab\"), 0, std::string::npos, 'a', 'b');\n   VERIFY( z5.to_string('a', 'b') == \"bb\" );\n-  VERIFY( z5 == z5_ref );\n \n-  std::bitset<2> z6(\"11a1\", 'a');\n-  std::bitset<2> z6_ref(std::string(\"11a1\"), 0, std::string::npos, 'a');\n+  std::bitset<2> z6(std::string(\"11a1\"), 0, std::string::npos, 'a');\n   VERIFY( z6.to_string('a') == \"11\" );\n-  VERIFY( z6 == z6_ref );\n }\n \n int main()"}]}