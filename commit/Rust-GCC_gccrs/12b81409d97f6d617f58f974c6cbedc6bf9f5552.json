{"sha": "12b81409d97f6d617f58f974c6cbedc6bf9f5552", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTJiODE0MDlkOTdmNmQ2MTdmNThmOTc0YzZjYmVkYzZiZjlmNTU1Mg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2016-03-08T08:05:26Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-03-08T08:05:26Z"}, "message": "re PR target/70110 (ICE at -O3 in the 32-bit mode in set_last_insn, at emit-rtl.h:420)\n\n\tPR target/70110\n\t* config/i386/i386.c (scalar_chain::make_vector_copies,\n\tscalar_chain::convert_reg): Call end_sequence in between\n\tget_insns and emit_conversion_insns rather than after both\n\tcalls.\n\n\t* gcc.dg/pr70110.c: New test.\n\nFrom-SVN: r234057", "tree": {"sha": "e28d36ef30c47e5c005b603f9409e4f8cc2fdf92", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e28d36ef30c47e5c005b603f9409e4f8cc2fdf92"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/12b81409d97f6d617f58f974c6cbedc6bf9f5552", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12b81409d97f6d617f58f974c6cbedc6bf9f5552", "html_url": "https://github.com/Rust-GCC/gccrs/commit/12b81409d97f6d617f58f974c6cbedc6bf9f5552", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12b81409d97f6d617f58f974c6cbedc6bf9f5552/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "324167d12292e1c608fe4cab5145f4e96eeebfe6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/324167d12292e1c608fe4cab5145f4e96eeebfe6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/324167d12292e1c608fe4cab5145f4e96eeebfe6"}], "stats": {"total": 58, "additions": 56, "deletions": 2}, "files": [{"sha": "3bfd5f45f90863913163ecbb9afa40964fa1e85c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12b81409d97f6d617f58f974c6cbedc6bf9f5552/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12b81409d97f6d617f58f974c6cbedc6bf9f5552/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=12b81409d97f6d617f58f974c6cbedc6bf9f5552", "patch": "@@ -1,3 +1,11 @@\n+2016-03-08  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/70110\n+\t* config/i386/i386.c (scalar_chain::make_vector_copies,\n+\tscalar_chain::convert_reg): Call end_sequence in between\n+\tget_insns and emit_conversion_insns rather than after both\n+\tcalls.\n+\n 2016-03-07  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/70064"}, {"sha": "25a6467bbd1a34cb3bef93fa84c5754b4c089c00", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12b81409d97f6d617f58f974c6cbedc6bf9f5552/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12b81409d97f6d617f58f974c6cbedc6bf9f5552/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=12b81409d97f6d617f58f974c6cbedc6bf9f5552", "patch": "@@ -3272,8 +3272,9 @@ scalar_chain::make_vector_copies (unsigned regno)\n \t\t\t    gen_rtx_SUBREG (SImode, reg, 4));\n \t    emit_move_insn (vreg, tmp);\n \t  }\n-\temit_conversion_insns (get_insns (), insn);\n+\trtx_insn *seq = get_insns ();\n \tend_sequence ();\n+\temit_conversion_insns (seq, insn);\n \n \tif (dump_file)\n \t  fprintf (dump_file,\n@@ -3348,8 +3349,9 @@ scalar_chain::convert_reg (unsigned regno)\n \t      emit_move_insn (gen_rtx_SUBREG (SImode, scopy, 4),\n \t\t\t      adjust_address (tmp, SImode, 4));\n \t    }\n-\t  emit_conversion_insns (get_insns (), insn);\n+\t  rtx_insn *seq = get_insns ();\n \t  end_sequence ();\n+\t  emit_conversion_insns (seq, insn);\n \n \t  if (dump_file)\n \t    fprintf (dump_file,"}, {"sha": "28229ee4cf84d1b32cc11ed5a3949961b41d0a48", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12b81409d97f6d617f58f974c6cbedc6bf9f5552/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12b81409d97f6d617f58f974c6cbedc6bf9f5552/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=12b81409d97f6d617f58f974c6cbedc6bf9f5552", "patch": "@@ -1,3 +1,8 @@\n+2016-03-08  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/70110\n+\t* gcc.dg/pr70110.c: New test.\n+\n 2016-03-07  Martin Jambor  <mjambor@suse.cz>\n \n \t* c-c++-common/gomp/clauses-1.c: Remove dg-options."}, {"sha": "42bbe3a956b445efeb4a09ee7da05ae981c82be7", "filename": "gcc/testsuite/gcc.dg/pr70110.c", "status": "added", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12b81409d97f6d617f58f974c6cbedc6bf9f5552/gcc%2Ftestsuite%2Fgcc.dg%2Fpr70110.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12b81409d97f6d617f58f974c6cbedc6bf9f5552/gcc%2Ftestsuite%2Fgcc.dg%2Fpr70110.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr70110.c?ref=12b81409d97f6d617f58f974c6cbedc6bf9f5552", "patch": "@@ -0,0 +1,39 @@\n+/* PR target/70110 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O3\" } */\n+/* { dg-additional-options \"-msse2\" { target i?86-*-* x86_64-*-* } } */\n+\n+int a, c, d, f, h;\n+long long b;\n+\n+static inline void\n+foo (void)\n+{\n+  if (a) \n+    foo ();\n+  b = c;\n+}\n+\n+static inline void \n+bar (int p)\n+{\n+  if (p)\n+    f = 0; \n+  b |= c; \n+} \n+\n+void\n+baz (int g, int i)\n+{\n+  for (b = d; (d = 1) != 0; )\n+    {\n+      if (a)\n+\tfoo ();\n+      b |= c;\n+      bar (h); \n+      bar (g); \n+      bar (h); \n+      bar (i); \n+      bar (h);\n+    }\n+}"}]}