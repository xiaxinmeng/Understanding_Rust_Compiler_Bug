{"sha": "640da95344c35708b911ea2fda631fc2eff01986", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjQwZGE5NTM0NGMzNTcwOGI5MTFlYTJmZGE2MzFmYzJlZmYwMTk4Ng==", "commit": {"author": {"name": "Per Bothner", "email": "pbothner@apple.com", "date": "2003-06-05T21:07:08Z"}, "committer": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "2003-06-05T21:07:08Z"}, "message": "toplev.c (push_srcloc): Simplify behavior to save current location and set current location to parameters.\n\n\n\t* toplev.c (push_srcloc):  Simplify behavior to save current location\n\tand set current location to parameters.\n\t(pop_srcloc):  Simplify semantics.\n\t(lang_dependent_init):  Remove now-useless initial push_srcloc.\n\nFrom-SVN: r67512", "tree": {"sha": "96b2b61a1066d26d90ea69bc31ba220d8e378128", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/96b2b61a1066d26d90ea69bc31ba220d8e378128"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/640da95344c35708b911ea2fda631fc2eff01986", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/640da95344c35708b911ea2fda631fc2eff01986", "html_url": "https://github.com/Rust-GCC/gccrs/commit/640da95344c35708b911ea2fda631fc2eff01986", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/640da95344c35708b911ea2fda631fc2eff01986/comments", "author": null, "committer": null, "parents": [{"sha": "486f6e5f7248e0fc7ec313e7ad4539bd3e0e109d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/486f6e5f7248e0fc7ec313e7ad4539bd3e0e109d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/486f6e5f7248e0fc7ec313e7ad4539bd3e0e109d"}], "stats": {"total": 26, "additions": 10, "deletions": 16}, "files": [{"sha": "a47ffc7e326d0c2a53b87c1e12efcef9ed26785c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/640da95344c35708b911ea2fda631fc2eff01986/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/640da95344c35708b911ea2fda631fc2eff01986/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=640da95344c35708b911ea2fda631fc2eff01986", "patch": "@@ -1,3 +1,10 @@\n+2003-06-05  Per Bothner  <pbothner@apple.com>\n+\n+\t* toplev.c (push_srcloc):  Simplify behavior to save current location\n+\tand set current location to parameters.\n+\t(pop_srcloc):  Simplify semantics.\n+\t(lang_dependent_init):  Remove now-useless initial push_srcloc.\n+\n 2003-05-06  Richard Henderson  <rth@redhat.com>\n \n \t* dwarf2out.c (loc_descriptor_from_tree): Return 0 for "}, {"sha": "f005f0418ff933c3156fab64e47f67df931e404f", "filename": "gcc/toplev.c", "status": "modified", "additions": 3, "deletions": 16, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/640da95344c35708b911ea2fda631fc2eff01986/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/640da95344c35708b911ea2fda631fc2eff01986/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=640da95344c35708b911ea2fda631fc2eff01986", "patch": "@@ -2170,14 +2170,11 @@ push_srcloc (const char *file, int line)\n {\n   struct file_stack *fs;\n \n-  if (input_file_stack)\n-    input_file_stack->location = input_location;\n-\n   fs = (struct file_stack *) xmalloc (sizeof (struct file_stack));\n-  input_filename = file;\n-  input_line = line;\n   fs->location = input_location;\n   fs->next = input_file_stack;\n+  input_filename = file;\n+  input_line = line;\n   input_file_stack = fs;\n   input_file_stack_tick++;\n }\n@@ -2192,17 +2189,10 @@ pop_srcloc (void)\n   struct file_stack *fs;\n \n   fs = input_file_stack;\n+  input_location = fs->location;\n   input_file_stack = fs->next;\n   free (fs);\n   input_file_stack_tick++;\n-\n-  if (input_file_stack)\n-    input_location = input_file_stack->location;\n-  else\n-    {\n-      input_filename = NULL;\n-      input_line = 0;\n-    }\n }\n \n /* Compile an entire translation unit.  Write a file of assembly\n@@ -5651,9 +5641,6 @@ lang_dependent_init (const char *name)\n   init_expr_once ();\n   expand_dummy_function_end ();\n \n-  /* Put an entry on the input file stack for the main input file.  */\n-  push_srcloc (input_filename, 0);\n-\n   /* If dbx symbol table desired, initialize writing it and output the\n      predefined types.  */\n   timevar_push (TV_SYMOUT);"}]}