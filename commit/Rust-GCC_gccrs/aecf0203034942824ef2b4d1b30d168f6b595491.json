{"sha": "aecf0203034942824ef2b4d1b30d168f6b595491", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWVjZjAyMDMwMzQ5NDI4MjRlZjJiNGQxYjMwZDE2OGY2YjU5NTQ5MQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-08-05T15:14:29Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-08-05T15:14:29Z"}, "message": "sem_ch3.adb (Process_Subtype): An allocator is a valid construct that can carry a null exclusion indicator...\n\n2008-08-05  Ed Schonberg  <schonberg@adacore.com>\n\n\t* sem_ch3.adb (Process_Subtype): An allocator is a valid construct that\n\tcan carry a null exclusion indicator, and on which an error may be\n\tposted if the indicator is redundant.\n\n\t* sem_ch8.adb (Analyze_Object_Renaming): Verify that a null exclusion\n\tdoes not apply to a subtype mark that already excludes null.\n\n\t* sem_ch12.adb (Formal_Object_Declaration): Verify that a null\n\texclusion does not apply to a subtype mark that already excludes null.\n\nFrom-SVN: r138728", "tree": {"sha": "74bd37de7d1d2f235b76bade011fcd2d0d61b9e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/74bd37de7d1d2f235b76bade011fcd2d0d61b9e2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/aecf0203034942824ef2b4d1b30d168f6b595491", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aecf0203034942824ef2b4d1b30d168f6b595491", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aecf0203034942824ef2b4d1b30d168f6b595491", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aecf0203034942824ef2b4d1b30d168f6b595491/comments", "author": null, "committer": null, "parents": [{"sha": "1f1aa84f063d166ac95f7bfbcf039a6f7592dfe7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f1aa84f063d166ac95f7bfbcf039a6f7592dfe7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1f1aa84f063d166ac95f7bfbcf039a6f7592dfe7"}], "stats": {"total": 44, "additions": 44, "deletions": 0}, "files": [{"sha": "761c5dad643c645420c4cfa8090ed6439fbc8306", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aecf0203034942824ef2b4d1b30d168f6b595491/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aecf0203034942824ef2b4d1b30d168f6b595491/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=aecf0203034942824ef2b4d1b30d168f6b595491", "patch": "@@ -1,3 +1,27 @@\n+2008-08-05  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* freeze.adb:\n+\t(Freeze_Entity): A deferred constant does not violate the restriction\n+\tNo_Default_Initialization, \n+\n+\t* sem_ch3.adb (Process_Subtype): An allocator is a valid construct that\n+\tcan carry a null exclusion indicator, and on which an error may be\n+\tposted if the indicator is redundant.\n+\n+\t* sem_ch8.adb (Analyze_Object_Renaming): Verify that a null exclusion\n+\tdoes not apply to a subtype mark that already excludes null.\n+\n+\t* sem_ch12.adb (Formal_Object_Declaration): Verify that a null\n+\texclusion does not apply to a subtype mark that already excludes null.\n+\n+2008-08-05  Thomas Quinot  <quinot@adacore.com>\n+\n+\t* Makefile.rtl: Compile s-oscons.ads as part of the runtime library.\n+\n+2008-08-05  Doug Rupp  <rupp@adacore.com>\n+\n+\t* vms_data.ads: Translation for /POINTER_SIZE qualifier.\n+\n 2008-08-05  Thomas Quinot  <quinot@adacore.com>\n \n \t* gsocket.h: Make this file includable in a Nucleus environment, which"}, {"sha": "82b47aa17a65b8ff93411a89063010a9f19ac6e5", "filename": "gcc/ada/sem_ch12.adb", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aecf0203034942824ef2b4d1b30d168f6b595491/gcc%2Fada%2Fsem_ch12.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aecf0203034942824ef2b4d1b30d168f6b595491/gcc%2Fada%2Fsem_ch12.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch12.adb?ref=aecf0203034942824ef2b4d1b30d168f6b595491", "patch": "@@ -1810,6 +1810,16 @@ package body Sem_Ch12 is\n          Find_Type (Subtype_Mark (N));\n          T := Entity (Subtype_Mark (N));\n \n+         --  Verify that there is no redundant null exclusion.\n+\n+         if Null_Exclusion_Present (N)\n+           and then Can_Never_Be_Null (T)\n+         then\n+            Error_Msg_NE\n+              (\"`NOT NULL` not allowed (& already excludes null)\",\n+                 N, T);\n+         end if;\n+\n       --  Ada 2005 (AI-423): Formal object with an access definition\n \n       else"}, {"sha": "8a44655edf9470e4fd54d7a806b687925e0038d0", "filename": "gcc/ada/sem_ch3.adb", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aecf0203034942824ef2b4d1b30d168f6b595491/gcc%2Fada%2Fsem_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aecf0203034942824ef2b4d1b30d168f6b595491/gcc%2Fada%2Fsem_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch3.adb?ref=aecf0203034942824ef2b4d1b30d168f6b595491", "patch": "@@ -16507,7 +16507,9 @@ package body Sem_Ch3 is\n              or else\n            Nkind_In (P, N_Derived_Type_Definition,\n                         N_Discriminant_Specification,\n+                        N_Formal_Object_Declaration,\n                         N_Object_Declaration,\n+                        N_Object_Renaming_Declaration,\n                         N_Parameter_Specification,\n                         N_Subtype_Declaration);\n \n@@ -16552,6 +16554,9 @@ package body Sem_Ch3 is\n                      Error_Node :=\n                        Subtype_Indication (Component_Definition (Related_Nod));\n \n+                  when N_Allocator =>\n+                     Error_Node := Expression (Related_Nod);\n+\n                   when others =>\n                      pragma Assert (False);\n                      Error_Node := Related_Nod;"}, {"sha": "9a19b2a8b1eee5563bade90952cf7d324e59ed8d", "filename": "gcc/ada/sem_ch8.adb", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aecf0203034942824ef2b4d1b30d168f6b595491/gcc%2Fada%2Fsem_ch8.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aecf0203034942824ef2b4d1b30d168f6b595491/gcc%2Fada%2Fsem_ch8.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch8.adb?ref=aecf0203034942824ef2b4d1b30d168f6b595491", "patch": "@@ -884,6 +884,11 @@ package body Sem_Ch8 is\n                   Error_Msg_N\n                     (\"renamed object does not exclude `NULL` \"\n                      & \"(RM 8.5.1(4.6/2))\", N);\n+\n+               elsif Can_Never_Be_Null (Etype (Nam_Ent)) then\n+                  Error_Msg_NE\n+                    (\"`NOT NULL` not allowed (type of& already excludes null)\",\n+                      N, Nam_Ent);\n                end if;\n             end if;\n          end;"}]}