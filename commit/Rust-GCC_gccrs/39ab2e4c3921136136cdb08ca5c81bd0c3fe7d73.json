{"sha": "39ab2e4c3921136136cdb08ca5c81bd0c3fe7d73", "node_id": "C_kwDOANBUbNoAKDM5YWIyZTRjMzkyMTEzNjEzNmNkYjA4Y2E1YzgxYmQwYzNmZTdkNzM", "commit": {"author": {"name": "Alexandre Oliva", "email": "oliva@adacore.com", "date": "2022-06-03T06:59:01Z"}, "committer": {"name": "Alexandre Oliva", "email": "oliva@gnu.org", "date": "2022-06-03T06:59:01Z"}, "message": "libcody: fix nonportable shell code in revision.stamp build rule\n\nTwo non-portable shell constructs have been long present in libcody's\nbuild rule for revision.stamp: $() instead of ``, and += to append to\na shell variable.  The former seems to work even when bash is\noperating as /bin/sh, but += doesn't, and it ends up trying to run\nrevision+=M as a command name, and issuing an error as that command is\n(hopefully) not found.\n\nThis patch replaces both constructs with more portable ones.\n\n\nfor  libcody/ChangeLog\n\n\t* Makefile.in (revision.stamp): Replace $() and += with more\n\tportable shell constructs.", "tree": {"sha": "6b11cc6ddcfc560ea0a943d0328ea807b4651520", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6b11cc6ddcfc560ea0a943d0328ea807b4651520"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/39ab2e4c3921136136cdb08ca5c81bd0c3fe7d73", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/39ab2e4c3921136136cdb08ca5c81bd0c3fe7d73", "html_url": "https://github.com/Rust-GCC/gccrs/commit/39ab2e4c3921136136cdb08ca5c81bd0c3fe7d73", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/39ab2e4c3921136136cdb08ca5c81bd0c3fe7d73/comments", "author": null, "committer": null, "parents": [{"sha": "b168441c8a6b7cb6b6623694eb9e1cc87a3d51af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b168441c8a6b7cb6b6623694eb9e1cc87a3d51af", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b168441c8a6b7cb6b6623694eb9e1cc87a3d51af"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "bb87468cb9a33f60718dda00037552cd8c6d8fb1", "filename": "libcody/Makefile.in", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39ab2e4c3921136136cdb08ca5c81bd0c3fe7d73/libcody%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39ab2e4c3921136136cdb08ca5c81bd0c3fe7d73/libcody%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcody%2FMakefile.in?ref=39ab2e4c3921136136cdb08ca5c81bd0c3fe7d73", "patch": "@@ -66,11 +66,11 @@ clean:: Makefile\n \n # FIXME: Delete\n revision.stamp: $(srcdir)/.\n-\t@revision=$$(git -C $(srcdir) rev-parse HEAD 2>/dev/null) ;\\\n+\t@revision=`git -C $(srcdir) rev-parse HEAD 2>/dev/null` ;\\\n \tif test -n \"$$revision\" ;\\\n \tthen revision=git-$$revision ;\\\n \t  if git -C $(srcdir) status --porcelain 2>/dev/null | grep -vq '^  ' ;\\\n-\t  then revision+=M ;\\\n+\t  then revision=$${revision}M ;\\\n \t  fi ;\\\n \telse revision=unknown ;\\\n \tfi ;\\"}]}