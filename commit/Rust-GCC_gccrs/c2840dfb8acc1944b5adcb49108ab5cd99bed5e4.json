{"sha": "c2840dfb8acc1944b5adcb49108ab5cd99bed5e4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzI4NDBkZmI4YWNjMTk0NGI1YWRjYjQ5MTA4YWI1Y2Q5OWJlZDVlNA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1997-11-27T22:18:28Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1997-11-27T22:18:28Z"}, "message": "typeck.c (build_const_cast): Handle references here instead of handing off to convert_to_reference.\n\n\t* typeck.c (build_const_cast): Handle references here instead of\n\thanding off to convert_to_reference.\n\nFrom-SVN: r16810", "tree": {"sha": "6595851c97d1f119b20d54c54eac6a5c8398199a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6595851c97d1f119b20d54c54eac6a5c8398199a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c2840dfb8acc1944b5adcb49108ab5cd99bed5e4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c2840dfb8acc1944b5adcb49108ab5cd99bed5e4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c2840dfb8acc1944b5adcb49108ab5cd99bed5e4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c2840dfb8acc1944b5adcb49108ab5cd99bed5e4/comments", "author": null, "committer": null, "parents": [{"sha": "fb98cff689605cc03070b54c3a234f94dec93fde", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fb98cff689605cc03070b54c3a234f94dec93fde", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fb98cff689605cc03070b54c3a234f94dec93fde"}], "stats": {"total": 11, "additions": 8, "deletions": 3}, "files": [{"sha": "0b1b931332e32b71d604de4c1c16fcadd61bc150", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c2840dfb8acc1944b5adcb49108ab5cd99bed5e4/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c2840dfb8acc1944b5adcb49108ab5cd99bed5e4/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=c2840dfb8acc1944b5adcb49108ab5cd99bed5e4", "patch": "@@ -1,5 +1,8 @@\n Thu Nov 27 00:59:46 1997  Jason Merrill  <jason@yorick.cygnus.com>\n \n+\t* typeck.c (build_const_cast): Handle references here instead of\n+\thanding off to convert_to_reference.\n+\n \t* except.c: Lose Unexpected, SetTerminate, SetUnexpected,\n  \tTerminateFunctionCall.\n \t(init_exception_processing): Likewise.  Terminate et al are now"}, {"sha": "34bbf97016e44e18da22f79cdda4de1871f9cd1e", "filename": "gcc/cp/typeck.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c2840dfb8acc1944b5adcb49108ab5cd99bed5e4/gcc%2Fcp%2Ftypeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c2840dfb8acc1944b5adcb49108ab5cd99bed5e4/gcc%2Fcp%2Ftypeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck.c?ref=c2840dfb8acc1944b5adcb49108ab5cd99bed5e4", "patch": "@@ -5488,9 +5488,11 @@ build_const_cast (type, expr)\n \t}\n \n       if (comp_ptr_ttypes_const (TREE_TYPE (type), intype))\n-\treturn (convert_from_reference\n-\t\t(convert_to_reference (type, expr, CONV_CONST|CONV_IMPLICIT,\n-\t\t\t\t       LOOKUP_COMPLAIN, NULL_TREE)));\n+\t{\n+\t  expr = build_unary_op (ADDR_EXPR, expr, 0);\n+\t  expr = build1 (NOP_EXPR, type, expr);\n+\t  return convert_from_reference (expr);\n+\t}\n     }\n   else if (TREE_CODE (type) == POINTER_TYPE\n \t   && TREE_CODE (intype) == POINTER_TYPE"}]}