{"sha": "a10ec8bcac490d482040104ed0196e80af51a1a1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTEwZWM4YmNhYzQ5MGQ0ODIwNDAxMDRlZDAxOTZlODBhZjUxYTFhMQ==", "commit": {"author": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2014-06-13T14:32:29Z"}, "committer": {"name": "Thomas Schwinge", "email": "tschwinge@gcc.gnu.org", "date": "2014-06-13T14:32:29Z"}, "message": "* config-ml.in: Robustify ac_configure_args parsing.\n\nFrom-SVN: r211645", "tree": {"sha": "ac33f2b495b816d5b1343fb589f821427501080e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ac33f2b495b816d5b1343fb589f821427501080e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a10ec8bcac490d482040104ed0196e80af51a1a1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a10ec8bcac490d482040104ed0196e80af51a1a1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a10ec8bcac490d482040104ed0196e80af51a1a1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a10ec8bcac490d482040104ed0196e80af51a1a1/comments", "author": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "45b3824db6060be8e30f817b05033ef3dc30f2e4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45b3824db6060be8e30f817b05033ef3dc30f2e4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/45b3824db6060be8e30f817b05033ef3dc30f2e4"}], "stats": {"total": 70, "additions": 40, "deletions": 30}, "files": [{"sha": "fc6a3365c26e9cd4d04fd57649992339c7150657", "filename": "ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a10ec8bcac490d482040104ed0196e80af51a1a1/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a10ec8bcac490d482040104ed0196e80af51a1a1/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=a10ec8bcac490d482040104ed0196e80af51a1a1", "patch": "@@ -1,5 +1,7 @@\n 2014-06-13  Thomas Schwinge  <thomas@codesourcery.com>\n \n+\t* config-ml.in: Robustify ac_configure_args parsing.\n+\n \t* configure.ac (--enable-linker-plugin-configure-flags)\n \t(--enable-linker-plugin-flags): New flags.\n \t(configdirs): Conditionally add libiberty-linker-plugin."}, {"sha": "927bad66dc094283cceae5abf8f09e3414b99e51", "filename": "config-ml.in", "status": "modified", "additions": 38, "deletions": 30, "changes": 68, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a10ec8bcac490d482040104ed0196e80af51a1a1/config-ml.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a10ec8bcac490d482040104ed0196e80af51a1a1/config-ml.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config-ml.in?ref=a10ec8bcac490d482040104ed0196e80af51a1a1", "patch": "@@ -2,7 +2,7 @@\n # wanting multilib support.\n #\n # Copyright (C) 1995, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,\n-# 2005, 2006, 2007, 2008, 2010, 2011  Free Software Foundation, Inc.\n+# 2005, 2006, 2007, 2008, 2010, 2011, 2014 Free Software Foundation, Inc.\n #\n # This file is free software; you can redistribute it and/or modify\n # it under the terms of the GNU General Public License as published by\n@@ -105,31 +105,34 @@ ml_realsrcdir=${srcdir}\n \n # Scan all the arguments and set all the ones we need.\n \n-ml_verbose=--verbose\n-for option in ${ac_configure_args}\n-do\n-  # strip single quotes surrounding individual options\n-  case $option in\n-  \\'*\\') eval option=$option ;;\n-  esac\n-\n-  case $option in\n-  --*) ;;\n-  -*) option=-$option ;;\n-  esac\n-\n-  case $option in\n-  --*=*)\n+scan_arguments ()\n+{\n+  ml_verbose=--verbose\n+  for option\n+  do\n+    # Strip single quotes surrounding individual options, that is, remove one\n+    # level of shell quoting for these.\n+    case $option in\n+      \\'*\\') eval option=$option ;;\n+    esac\n+\n+    case $option in\n+      --*) ;;\n+      -*) option=-$option ;;\n+    esac\n+\n+    case $option in\n+      --*=*)\n \toptarg=`echo $option | sed -e 's/^[^=]*=//'`\n \t;;\n-  esac\n+    esac\n \n-  case $option in\n-  --disable-*)\n+    case $option in\n+      --disable-*)\n \tenableopt=`echo ${option} | sed 's:^--disable-:enable_:;s:-:_:g'`\n \teval $enableopt=no\n \t;;\n-  --enable-*)\n+      --enable-*)\n \tcase \"$option\" in\n \t*=*)\t;;\n \t*)\toptarg=yes ;;\n@@ -139,32 +142,37 @@ do\n \t# Don't undo its work.\n \tcase $enableopt in\n \tenable_shared | enable_static) ;;\n-\t*) eval $enableopt=\"$optarg\" ;;\n+\t*) eval $enableopt='$optarg' ;;\n \tesac\n \t;;\n-  --norecursion | --no-recursion)\n+      --norecursion | --no-recursion)\n \tml_norecursion=yes\n \t;;\n-  --silent | --sil* | --quiet | --q*)\n+      --silent | --sil* | --quiet | --q*)\n \tml_verbose=--silent\n \t;;\n-  --verbose | --v | --verb*)\n+      --verbose | --v | --verb*)\n \tml_verbose=--verbose\n \t;;\n-  --with-*)\n+      --with-*)\n \tcase \"$option\" in\n \t*=*)\t;;\n \t*)\toptarg=yes ;;\n \tesac\n \twithopt=`echo ${option} | sed 's:^--::;s:=.*$::;s:-:_:g'`\n-\teval $withopt=\"$optarg\"\n+\teval $withopt='$optarg'\n \t;;\n-  --without-*)\n+      --without-*)\n \twithopt=`echo ${option} | sed 's:^--::;s:out::;s:-:_:g'`\n \teval $withopt=no\n \t;;\n-  esac\n-done\n+    esac\n+  done\n+}\n+# Use eval to properly handle configure arguments such as\n+# --enable-foo='--enable-a=1 --enable-b=2 --enable-c=3'.\n+eval scan_arguments \"${ac_configure_args}\"\n+unset scan_arguments\n \n # Only do this if --enable-multilib.\n if [ \"${enable_multilib}\" = yes ]; then\n@@ -860,7 +868,7 @@ if [ -n \"${multidirs}\" ] && [ -z \"${ml_norecursion}\" ]; then\n \n     if eval ${ml_config_env} ${ml_config_shell} ${ml_recprog} \\\n \t--with-multisubdir=${ml_dir} --with-multisrctop=${multisrctop} \\\n-\t${ac_configure_args} ${ml_config_env} ${ml_srcdiroption} ; then\n+\t\"${ac_configure_args}\" ${ml_config_env} ${ml_srcdiroption} ; then\n       true\n     else\n       exit 1"}]}