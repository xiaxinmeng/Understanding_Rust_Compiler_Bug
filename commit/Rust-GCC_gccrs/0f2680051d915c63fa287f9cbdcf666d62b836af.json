{"sha": "0f2680051d915c63fa287f9cbdcf666d62b836af", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGYyNjgwMDUxZDkxNWM2M2ZhMjg3ZjljYmRjZjY2NmQ2MmI4MzZhZg==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2002-04-16T03:17:57Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2002-04-16T03:17:57Z"}, "message": "decl.c (register_dtor_fn): Pass the address of dso_handle, not dso_handle itself, to __cxa_atexit.\n\n\t* decl.c (register_dtor_fn): Pass the address of dso_handle, not\n\tdso_handle itself, to __cxa_atexit.\n\nFrom-SVN: r52354", "tree": {"sha": "e9e1b7ea6f5b5ab3fe03dc167e214f577106357a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e9e1b7ea6f5b5ab3fe03dc167e214f577106357a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0f2680051d915c63fa287f9cbdcf666d62b836af", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0f2680051d915c63fa287f9cbdcf666d62b836af", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0f2680051d915c63fa287f9cbdcf666d62b836af", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0f2680051d915c63fa287f9cbdcf666d62b836af/comments", "author": null, "committer": null, "parents": [{"sha": "861829ed08240e6a484475ee53b5eb24bde850bc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/861829ed08240e6a484475ee53b5eb24bde850bc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/861829ed08240e6a484475ee53b5eb24bde850bc"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "d19ea37435baf9faf7d302d74d2952b8226189d7", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f2680051d915c63fa287f9cbdcf666d62b836af/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f2680051d915c63fa287f9cbdcf666d62b836af/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=0f2680051d915c63fa287f9cbdcf666d62b836af", "patch": "@@ -1,3 +1,8 @@\n+2002-04-15  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* decl.c (register_dtor_fn): Pass the address of dso_handle, not\n+\tdso_handle itself, to __cxa_atexit.\n+\n 2002-04-15  Gabriel Dos Reis  <gdr@merlin.codesourcery.com>\n \n \t* error.c (cxx_print_error_function): Adjust call to macros."}, {"sha": "04c9799e4dbad88e58c49328e2a6b206d2d1cc9c", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f2680051d915c63fa287f9cbdcf666d62b836af/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f2680051d915c63fa287f9cbdcf666d62b836af/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=0f2680051d915c63fa287f9cbdcf666d62b836af", "patch": "@@ -8608,7 +8608,9 @@ register_dtor_fn (decl)\n   cleanup = build_unary_op (ADDR_EXPR, cleanup, 0);\n   if (flag_use_cxa_atexit)\n     {\n-      args = tree_cons (NULL_TREE, get_dso_handle_node (), NULL_TREE);\n+      args = tree_cons (NULL_TREE, \n+\t\t\tbuild_unary_op (ADDR_EXPR, get_dso_handle_node (), 0),\n+\t\t\tNULL_TREE);\n       args = tree_cons (NULL_TREE, null_pointer_node, args);\n       args = tree_cons (NULL_TREE, cleanup, args);\n     }"}]}