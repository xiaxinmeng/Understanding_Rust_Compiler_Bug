{"sha": "325fceb395f8d9bdb1970f378c5a6aed4c36b968", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzI1ZmNlYjM5NWY4ZDliZGIxOTcwZjM3OGM1YTZhZWQ0YzM2Yjk2OA==", "commit": {"author": {"name": "Benjamin Kosnik", "email": "bkoz@redhat.com", "date": "2002-07-25T23:20:49Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2002-07-25T23:20:49Z"}, "message": "re PR libstdc++/7220 (g++ 3.1: basic_istream::ignore(0,delimiter) issue.)\n\n\n2002-07-25  Benjamin Kosnik  <bkoz@redhat.com>\n\n\tPR libstdc++/7220\n\t* include/bits/istream.tcc (istream::ignore): Don't extract on\n\tzero.\n\t* testsuite/27_io/istream_unformatted.cc (test10): Add.\n\nFrom-SVN: r55763", "tree": {"sha": "4baf9c9e5bf3144ee21fc7a11b360f9bdc080478", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4baf9c9e5bf3144ee21fc7a11b360f9bdc080478"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/325fceb395f8d9bdb1970f378c5a6aed4c36b968", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/325fceb395f8d9bdb1970f378c5a6aed4c36b968", "html_url": "https://github.com/Rust-GCC/gccrs/commit/325fceb395f8d9bdb1970f378c5a6aed4c36b968", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/325fceb395f8d9bdb1970f378c5a6aed4c36b968/comments", "author": null, "committer": null, "parents": [{"sha": "e179e7d78e128c13034808a3688f04435294da92", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e179e7d78e128c13034808a3688f04435294da92", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e179e7d78e128c13034808a3688f04435294da92"}], "stats": {"total": 47, "additions": 46, "deletions": 1}, "files": [{"sha": "b3c52e445f51a46786f1207b734e43ffc811f0fe", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/325fceb395f8d9bdb1970f378c5a6aed4c36b968/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/325fceb395f8d9bdb1970f378c5a6aed4c36b968/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=325fceb395f8d9bdb1970f378c5a6aed4c36b968", "patch": "@@ -1,3 +1,10 @@\n+2002-07-25  Benjamin Kosnik  <bkoz@redhat.com>\n+\n+\tPR libstdc++/7220\n+\t* include/bits/istream.tcc (istream::ignore): Don't extract on\n+\tzero.\n+\t* testsuite/27_io/istream_unformatted.cc (test10): Add.\n+\t\n 2002-07-25  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* testsuite/27_io/ios_base_type.cc: Move to..."}, {"sha": "fc0adea69e37c60550bcd4cc8c72d275562b595a", "filename": "libstdc++-v3/include/bits/istream.tcc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/325fceb395f8d9bdb1970f378c5a6aed4c36b968/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fistream.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/325fceb395f8d9bdb1970f378c5a6aed4c36b968/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fistream.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fistream.tcc?ref=325fceb395f8d9bdb1970f378c5a6aed4c36b968", "patch": "@@ -708,7 +708,7 @@ namespace std\n     {\n       _M_gcount = 0;\n       sentry __cerb(*this, true);\n-      if (__cerb) \n+      if (__cerb && __n > 0) \n \t{\n \t  try \n \t    {"}, {"sha": "0e98dced1082028b08cc92cd1fc758fedfd001e3", "filename": "libstdc++-v3/testsuite/27_io/istream_unformatted.cc", "status": "modified", "additions": 38, "deletions": 0, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/325fceb395f8d9bdb1970f378c5a6aed4c36b968/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fistream_unformatted.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/325fceb395f8d9bdb1970f378c5a6aed4c36b968/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fistream_unformatted.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fistream_unformatted.cc?ref=325fceb395f8d9bdb1970f378c5a6aed4c36b968", "patch": "@@ -514,6 +514,43 @@ test09()\n   VERIFY( test );\n }\n \n+// libstdc++/70220\n+void\n+test10()\n+{\n+  using namespace std;\n+  bool test = true;\n+  typedef string string_type;\n+  typedef stringbuf stringbuf_type;\n+  typedef istream istream_type;\n+\n+  int res = 0;\n+  streamsize n;\n+  string_type  input(\"abcdefg\\n\");\n+  stringbuf_type sbuf(input);\n+  istream_type  istr(&sbuf);\n+  \n+  istr.ignore(0);\n+  if (istr.gcount() != 0) \n+    test = false;\n+  VERIFY( test );\n+  \n+  istr.ignore(0, 'b');\n+  if (istr.gcount() != 0) \n+    test = false;\n+  VERIFY( test );\n+  \n+  istr.ignore();\t// Advance to next position.\n+  istr.ignore(0, 'b');\n+  if ((n=istr.gcount()) != 0) \n+    test = false;\n+  VERIFY( test );\n+  \n+  if (istr.peek() != 'b')\n+    test = false;\n+  VERIFY( test );\n+}\n+\n int \n main()\n {\n@@ -526,6 +563,7 @@ main()\n   test07();\n   test08();\n   test09();\n+  test10();\n \n   return 0;\n }"}]}