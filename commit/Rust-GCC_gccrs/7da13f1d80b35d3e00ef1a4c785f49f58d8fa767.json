{"sha": "7da13f1d80b35d3e00ef1a4c785f49f58d8fa767", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2RhMTNmMWQ4MGIzNWQzZTAwZWYxYTRjNzg1ZjQ5ZjU4ZDhmYTc2Nw==", "commit": {"author": {"name": "Nathan Froyd", "email": "froydnj@codesourcery.com", "date": "2009-01-07T23:21:26Z"}, "committer": {"name": "Nathan Froyd", "email": "froydnj@gcc.gnu.org", "date": "2009-01-07T23:21:26Z"}, "message": "rs6000.c (rs6000_legitimize_address): Check for non-word-aligned REG+CONST addressing.\n\ngcc/\n\n\t* config/rs6000/rs6000.c (rs6000_legitimize_address): Check for\n\tnon-word-aligned REG+CONST addressing.\n\ngcc/testsuite/\n\n\t* gcc.c-torture/compile/20090107-1.c: New test.\n\n\nCo-Authored-By: Alan Modra <amodra@bigpond.net.au>\n\nFrom-SVN: r143171", "tree": {"sha": "4b484771ffe98d0fb33fb83d04d5ffbf39583138", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4b484771ffe98d0fb33fb83d04d5ffbf39583138"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7da13f1d80b35d3e00ef1a4c785f49f58d8fa767", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7da13f1d80b35d3e00ef1a4c785f49f58d8fa767", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7da13f1d80b35d3e00ef1a4c785f49f58d8fa767", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7da13f1d80b35d3e00ef1a4c785f49f58d8fa767/comments", "author": null, "committer": null, "parents": [{"sha": "c4bca01b27554f8a68a9391b278788bc1092c21f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c4bca01b27554f8a68a9391b278788bc1092c21f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c4bca01b27554f8a68a9391b278788bc1092c21f"}], "stats": {"total": 41, "additions": 40, "deletions": 1}, "files": [{"sha": "29c4ba4a4314a305455960a3a6e3f669029d1cf2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7da13f1d80b35d3e00ef1a4c785f49f58d8fa767/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7da13f1d80b35d3e00ef1a4c785f49f58d8fa767/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7da13f1d80b35d3e00ef1a4c785f49f58d8fa767", "patch": "@@ -1,3 +1,9 @@\n+2009-01-07  Nathan Froyd  <froydnj@codesourcery.com>\n+\t    Alan Modra  <amodra@bigpond.net.au>\n+\n+\t* config/rs6000/rs6000.c (rs6000_legitimize_address): Check for\n+\tnon-word-aligned REG+CONST addressing.\n+\n 2009-01-07  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/38706"}, {"sha": "6d7327b5ea4dd5cb3ec1d9ae2602bdd2e80473a3", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7da13f1d80b35d3e00ef1a4c785f49f58d8fa767/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7da13f1d80b35d3e00ef1a4c785f49f58d8fa767/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=7da13f1d80b35d3e00ef1a4c785f49f58d8fa767", "patch": "@@ -3804,7 +3804,10 @@ rs6000_legitimize_address (rtx x, rtx oldx ATTRIBUTE_UNUSED,\n       && GET_CODE (XEXP (x, 0)) == REG\n       && GET_CODE (XEXP (x, 1)) == CONST_INT\n       && (unsigned HOST_WIDE_INT) (INTVAL (XEXP (x, 1)) + 0x8000) >= 0x10000\n-      && !(SPE_VECTOR_MODE (mode)\n+      && !((TARGET_POWERPC64\n+\t    && (mode == DImode || mode == TImode)\n+\t    && (INTVAL (XEXP (x, 1)) & 3) != 0)\n+\t   || SPE_VECTOR_MODE (mode)\n \t   || ALTIVEC_VECTOR_MODE (mode)\n \t   || (TARGET_E500_DOUBLE && (mode == DFmode || mode == TFmode\n \t\t\t\t      || mode == DImode || mode == DDmode"}, {"sha": "ccd555e4c990f028eb19a181af948c62b9f26368", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7da13f1d80b35d3e00ef1a4c785f49f58d8fa767/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7da13f1d80b35d3e00ef1a4c785f49f58d8fa767/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7da13f1d80b35d3e00ef1a4c785f49f58d8fa767", "patch": "@@ -1,3 +1,8 @@\n+2009-01-07  Nathan Froyd  <froydnj@codesourcery.com>\n+\t    Alan Modra  <amodra@bigpond.net.au>\n+\n+\t* gcc.c-torture/compile/20090107-1.c: New test.\n+\n 2009-01-07  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/38706"}, {"sha": "b5d4c1a446622665c876e596f739b49cc20fd1af", "filename": "gcc/testsuite/gcc.c-torture/compile/20090107-1.c", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7da13f1d80b35d3e00ef1a4c785f49f58d8fa767/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20090107-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7da13f1d80b35d3e00ef1a4c785f49f58d8fa767/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20090107-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20090107-1.c?ref=7da13f1d80b35d3e00ef1a4c785f49f58d8fa767", "patch": "@@ -0,0 +1,25 @@\n+/* Verify that we don't ICE by forming invalid addresses for unaligned\n+   doubleword loads (originally for PPC64).  */\n+\n+struct a\n+{\n+ unsigned int x;\n+ unsigned short y;\n+} __attribute__((packed));\n+\n+struct b {\n+ struct a rep;\n+ unsigned long long seq;\n+} __attribute__((packed));\n+\n+struct c {\n+ int x;\n+ struct a a[5460];\n+ struct b b;\n+};\n+\n+extern void use_ull(unsigned long long);\n+extern void f(struct c *i) {\n+  use_ull(i->b.seq);\n+  return;\n+}"}]}