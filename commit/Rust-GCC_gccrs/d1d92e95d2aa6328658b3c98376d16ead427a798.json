{"sha": "d1d92e95d2aa6328658b3c98376d16ead427a798", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDFkOTJlOTVkMmFhNjMyODY1OGIzYzk4Mzc2ZDE2ZWFkNDI3YTc5OA==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2007-06-29T19:39:21Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2007-06-29T19:39:21Z"}, "message": "re PR libfortran/32456 (IO error message should show Unit/Filename)\n\n2007-06-29  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR libgfortran/32456\n\t* io/unit.c (filename_from_unit): Don't use find_unit, instead search\n\tfor unit directly.\n\nFrom-SVN: r126119", "tree": {"sha": "9d834e3e79a1f4838909083f24defd7289f49d6c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9d834e3e79a1f4838909083f24defd7289f49d6c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d1d92e95d2aa6328658b3c98376d16ead427a798", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1d92e95d2aa6328658b3c98376d16ead427a798", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1d92e95d2aa6328658b3c98376d16ead427a798", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1d92e95d2aa6328658b3c98376d16ead427a798/comments", "author": null, "committer": null, "parents": [{"sha": "622af87fc843e25c9631a43aaa1b30cc647b2825", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/622af87fc843e25c9631a43aaa1b30cc647b2825", "html_url": "https://github.com/Rust-GCC/gccrs/commit/622af87fc843e25c9631a43aaa1b30cc647b2825"}], "stats": {"total": 30, "additions": 26, "deletions": 4}, "files": [{"sha": "0b5afdecb3c77c4b5d1938a82a95b57c4be8dfce", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1d92e95d2aa6328658b3c98376d16ead427a798/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1d92e95d2aa6328658b3c98376d16ead427a798/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=d1d92e95d2aa6328658b3c98376d16ead427a798", "patch": "@@ -1,3 +1,9 @@\n+2007-06-29  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR libgfortran/32456\n+\t* io/unit.c (filename_from_unit): Don't use find_unit, instead search\n+\tfor unit directly.\n+\n 2007-06-24  Adam Nemet  <anemet@caviumnetworks.com>\n \n \tPR libfortran/32495"}, {"sha": "fac67bdaf7ec494f973836369f1f76f4e11305ba", "filename": "libgfortran/io/unit.c", "status": "modified", "additions": 20, "deletions": 4, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1d92e95d2aa6328658b3c98376d16ead427a798/libgfortran%2Fio%2Funit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1d92e95d2aa6328658b3c98376d16ead427a798/libgfortran%2Fio%2Funit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Funit.c?ref=d1d92e95d2aa6328658b3c98376d16ead427a798", "patch": "@@ -690,11 +690,26 @@ update_position (gfc_unit *u)\n    must free memory allocated for the filename string.  */\n \n char *\n-filename_from_unit (int unit_number)\n+filename_from_unit (int n)\n {\n   char *filename;\n-  gfc_unit *u = NULL;\n-  u = find_unit (unit_number);\n+  gfc_unit *u;\n+  int c;\n+\n+  /* Find the unit.  */\n+  u = unit_root;\n+  while (u != NULL)\n+    {\n+      c = compare (n, u->unit_number);\n+      if (c < 0)\n+\tu = u->left;\n+      if (c > 0)\n+\tu = u->right;\n+      if (c == 0)\n+\tbreak;\n+    }\n+\n+  /* Get the filename.  */\n   if (u != NULL)\n     {\n       filename = (char *) get_mem (u->file_len + 1);\n@@ -703,4 +718,5 @@ filename_from_unit (int unit_number)\n     }\n   else\n     return (char *) NULL;\n-}\n\\ No newline at end of file\n+}\n+"}]}