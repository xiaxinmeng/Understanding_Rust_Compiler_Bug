{"sha": "fa21267280e488f78fb180704d1a80bee177c6ba", "node_id": "C_kwDOANBUbNoAKGZhMjEyNjcyODBlNDg4Zjc4ZmIxODA3MDRkMWE4MGJlZTE3N2M2YmE", "commit": {"author": {"name": "Philip Herron", "email": "philip.herron@embecosm.com", "date": "2022-02-24T11:18:35Z"}, "committer": {"name": "Philip Herron", "email": "philip.herron@embecosm.com", "date": "2022-02-24T11:20:19Z"}, "message": "Fix TyTy::ADTType is_equals to always check the variants for equality", "tree": {"sha": "16b7071de3ca97550c924d9464072909d44e5b15", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/16b7071de3ca97550c924d9464072909d44e5b15"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fa21267280e488f78fb180704d1a80bee177c6ba", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa21267280e488f78fb180704d1a80bee177c6ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa21267280e488f78fb180704d1a80bee177c6ba", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa21267280e488f78fb180704d1a80bee177c6ba/comments", "author": {"login": "philberty", "id": 84585, "node_id": "MDQ6VXNlcjg0NTg1", "avatar_url": "https://avatars.githubusercontent.com/u/84585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philberty", "html_url": "https://github.com/philberty", "followers_url": "https://api.github.com/users/philberty/followers", "following_url": "https://api.github.com/users/philberty/following{/other_user}", "gists_url": "https://api.github.com/users/philberty/gists{/gist_id}", "starred_url": "https://api.github.com/users/philberty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philberty/subscriptions", "organizations_url": "https://api.github.com/users/philberty/orgs", "repos_url": "https://api.github.com/users/philberty/repos", "events_url": "https://api.github.com/users/philberty/events{/privacy}", "received_events_url": "https://api.github.com/users/philberty/received_events", "type": "User", "site_admin": false}, "committer": {"login": "philberty", "id": 84585, "node_id": "MDQ6VXNlcjg0NTg1", "avatar_url": "https://avatars.githubusercontent.com/u/84585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philberty", "html_url": "https://github.com/philberty", "followers_url": "https://api.github.com/users/philberty/followers", "following_url": "https://api.github.com/users/philberty/following{/other_user}", "gists_url": "https://api.github.com/users/philberty/gists{/gist_id}", "starred_url": "https://api.github.com/users/philberty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philberty/subscriptions", "organizations_url": "https://api.github.com/users/philberty/orgs", "repos_url": "https://api.github.com/users/philberty/repos", "events_url": "https://api.github.com/users/philberty/events{/privacy}", "received_events_url": "https://api.github.com/users/philberty/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a64983f86c8703d1229a7e8ee0baff07110f5a7c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a64983f86c8703d1229a7e8ee0baff07110f5a7c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a64983f86c8703d1229a7e8ee0baff07110f5a7c"}], "stats": {"total": 14, "additions": 6, "deletions": 8}, "files": [{"sha": "a58e1cdb4c42f105c2e79de9033482dae87a21f2", "filename": "gcc/rust/typecheck/rust-tyty.cc", "status": "modified", "additions": 6, "deletions": 8, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa21267280e488f78fb180704d1a80bee177c6ba/gcc%2Frust%2Ftypecheck%2Frust-tyty.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa21267280e488f78fb180704d1a80bee177c6ba/gcc%2Frust%2Ftypecheck%2Frust-tyty.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Ftypecheck%2Frust-tyty.cc?ref=fa21267280e488f78fb180704d1a80bee177c6ba", "patch": "@@ -840,16 +840,14 @@ ADTType::is_equal (const BaseType &other) const\n \t    return false;\n \t}\n     }\n-  else\n+\n+  for (size_t i = 0; i < number_of_variants (); i++)\n     {\n-      for (size_t i = 0; i < number_of_variants (); i++)\n-\t{\n-\t  const TyTy::VariantDef *a = get_variants ().at (i);\n-\t  const TyTy::VariantDef *b = other2.get_variants ().at (i);\n+      const TyTy::VariantDef *a = get_variants ().at (i);\n+      const TyTy::VariantDef *b = other2.get_variants ().at (i);\n \n-\t  if (!a->is_equal (*b))\n-\t    return false;\n-\t}\n+      if (!a->is_equal (*b))\n+\treturn false;\n     }\n \n   return true;"}]}