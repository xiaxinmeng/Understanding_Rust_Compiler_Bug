{"sha": "3e4010c4d872cd1a886b142b790f35df0a8053c2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2U0MDEwYzRkODcyY2QxYTg4NmIxNDJiNzkwZjM1ZGYwYTgwNTNjMg==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "1999-11-09T08:15:07Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1999-11-09T08:15:07Z"}, "message": "cp-tree.h (language_function): Remove x_last_dtor_insn and x_last_parm_cleanup_insn.\n\n\t* cp-tree.h (language_function): Remove x_last_dtor_insn and\n\tx_last_parm_cleanup_insn.\n\t* decl.c (last_dtor_insn): Remove.\n\t(last_parm_cleanup_insn): Likewise.\n\t(expand_start_early_try_stmts): Don't set them.\n\t(store_parm_decls): Likewise.\n\t(save_function_data): Or save them.\n\t(mark_lang_function): Or mark them.\n\nFrom-SVN: r30457", "tree": {"sha": "4bd0c8b8cd44f4cee03af18fc6c62813f1cfe537", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4bd0c8b8cd44f4cee03af18fc6c62813f1cfe537"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3e4010c4d872cd1a886b142b790f35df0a8053c2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3e4010c4d872cd1a886b142b790f35df0a8053c2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3e4010c4d872cd1a886b142b790f35df0a8053c2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3e4010c4d872cd1a886b142b790f35df0a8053c2/comments", "author": null, "committer": null, "parents": [{"sha": "fe1b3b96aef55da97eda079a69381860ee764c3b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe1b3b96aef55da97eda079a69381860ee764c3b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe1b3b96aef55da97eda079a69381860ee764c3b"}], "stats": {"total": 37, "additions": 12, "deletions": 25}, "files": [{"sha": "e1b34f82f1739a7b0c095678c36357b7b7474d42", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e4010c4d872cd1a886b142b790f35df0a8053c2/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e4010c4d872cd1a886b142b790f35df0a8053c2/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=3e4010c4d872cd1a886b142b790f35df0a8053c2", "patch": "@@ -1,3 +1,14 @@\n+1999-11-09  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* cp-tree.h (language_function): Remove x_last_dtor_insn and\n+\tx_last_parm_cleanup_insn.\n+\t* decl.c (last_dtor_insn): Remove.\n+\t(last_parm_cleanup_insn): Likewise.\n+\t(expand_start_early_try_stmts): Don't set them.\n+\t(store_parm_decls): Likewise.\n+\t(save_function_data): Or save them.\n+\t(mark_lang_function): Or mark them.\n+\n 1999-11-08  Mark Mitchell  <mark@codesourcery.com>\n \n \t* decl.c (store_parm_decls): Generate cleanup code at"}, {"sha": "eba8e026ace880d58c98d5fcc8b3499fd0352a7b", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e4010c4d872cd1a886b142b790f35df0a8053c2/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e4010c4d872cd1a886b142b790f35df0a8053c2/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=3e4010c4d872cd1a886b142b790f35df0a8053c2", "patch": "@@ -679,8 +679,6 @@ struct language_function\n \n   tree *x_vcalls_possible_p;\n \n-  struct rtx_def *x_last_dtor_insn;\n-  struct rtx_def *x_last_parm_cleanup_insn;\n   struct rtx_def *x_result_rtx;\n \n   int returns_value;"}, {"sha": "adae9a696938723bafaf709362dcc2a279ad3488", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 1, "deletions": 23, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e4010c4d872cd1a886b142b790f35df0a8053c2/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e4010c4d872cd1a886b142b790f35df0a8053c2/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=3e4010c4d872cd1a886b142b790f35df0a8053c2", "patch": "@@ -254,18 +254,6 @@ int in_std;\n /* Expect only namespace names now. */\n static int only_namespace_names;\n \n-/* In a destructor, the last insn emitted after the start of the\n-   function and the parms.  */\n-\n-#define last_dtor_insn cp_function_chain->x_last_dtor_insn\n-\n-/* In a constructor, the last insn emitted after the start of the\n-   function and the parms, the exception specification and any\n-   function-try-block.  The constructor initializers are emitted after\n-   this insn.  */\n-\n-#define last_parm_cleanup_insn cp_function_chain->x_last_parm_cleanup_insn\n-\n /* If original DECL_RESULT of current function was a register,\n    but due to being an addressable named return value, would up\n    on the stack, this variable holds the named return value's\n@@ -13099,15 +13087,12 @@ start_function (declspecs, declarator, attrs, flags)\n   return 1;\n }\n \f\n-/* Called after store_parm_decls for a function-try-block.  We need to update\n-   last_parm_cleanup_insn so that the base initializers for a constructor\n-   are run within this block, not before it.  */\n+/* Called after store_parm_decls for a function-try-block.  */\n \n void\n expand_start_early_try_stmts ()\n {\n   expand_start_try_stmts ();\n-  last_parm_cleanup_insn = get_last_insn ();\n }\n \n /* Store the parameter declarations into the current function declaration.\n@@ -13249,9 +13234,6 @@ store_parm_decls ()\n       && building_stmt_tree () \n       && TYPE_RAISES_EXCEPTIONS (TREE_TYPE (current_function_decl)))\n     current_eh_spec_try_block = expand_start_eh_spec ();\n-\n-  last_parm_cleanup_insn = get_last_insn ();\n-  last_dtor_insn = get_last_insn ();\n }\n \n /* Bind a name and initialization to the return value of\n@@ -13298,8 +13280,6 @@ save_function_data (decl)\n   f->x_member_init_list = NULL_TREE;\n   f->x_stmt_tree.x_last_stmt = NULL_TREE;\n   f->x_stmt_tree.x_last_expr_type = NULL_TREE;\n-  f->x_last_dtor_insn = NULL_RTX;\n-  f->x_last_parm_cleanup_insn = NULL_RTX;\n   f->x_result_rtx = NULL_RTX;\n   f->x_named_label_uses = NULL;\n   f->bindings = NULL;\n@@ -14233,8 +14213,6 @@ mark_lang_function (p)\n   ggc_mark_tree (p->x_eh_spec_try_block);\n   ggc_mark_tree (p->x_scope_stmt_stack);\n \n-  ggc_mark_rtx (p->x_last_dtor_insn);\n-  ggc_mark_rtx (p->x_last_parm_cleanup_insn);\n   ggc_mark_rtx (p->x_result_rtx);\n \n   mark_stmt_tree (&p->x_stmt_tree);"}]}