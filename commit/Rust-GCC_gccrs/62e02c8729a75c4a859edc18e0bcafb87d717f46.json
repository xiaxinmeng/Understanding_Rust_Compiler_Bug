{"sha": "62e02c8729a75c4a859edc18e0bcafb87d717f46", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjJlMDJjODcyOWE3NWM0YTg1OWVkYzE4ZTBiY2FmYjg3ZDcxN2Y0Ng==", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2020-06-23T14:25:29Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2020-06-25T15:02:45Z"}, "message": "d: Fix ICE in uda_attribute_p when looking up unknown attribute\n\nThe target attribute table is not guaranteed to be set in all backends.\n\ngcc/d/ChangeLog:\n\n\tPR d/95173\n\t* d-attribs.cc (uda_attribute_p): Don't search target attribute table\n\tif NULL.\n\ngcc/testsuite/ChangeLog:\n\n\tPR d/95173\n\t* gdc.dg/pr95173.d: New test.", "tree": {"sha": "cf7051a6aaeaef1e2467964429440e81124363df", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cf7051a6aaeaef1e2467964429440e81124363df"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/62e02c8729a75c4a859edc18e0bcafb87d717f46", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62e02c8729a75c4a859edc18e0bcafb87d717f46", "html_url": "https://github.com/Rust-GCC/gccrs/commit/62e02c8729a75c4a859edc18e0bcafb87d717f46", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62e02c8729a75c4a859edc18e0bcafb87d717f46/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "eacfafbc3534fb32782934d765d21855dff32e56", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eacfafbc3534fb32782934d765d21855dff32e56", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eacfafbc3534fb32782934d765d21855dff32e56"}], "stats": {"total": 19, "additions": 16, "deletions": 3}, "files": [{"sha": "f4086c0f0ee090400a46192eb2f9c0b136cd4bb0", "filename": "gcc/d/d-attribs.cc", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62e02c8729a75c4a859edc18e0bcafb87d717f46/gcc%2Fd%2Fd-attribs.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62e02c8729a75c4a859edc18e0bcafb87d717f46/gcc%2Fd%2Fd-attribs.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2Fd-attribs.cc?ref=62e02c8729a75c4a859edc18e0bcafb87d717f46", "patch": "@@ -216,10 +216,13 @@ uda_attribute_p (const char *name)\n \treturn true;\n     }\n \n-  for (const attribute_spec *p = targetm.attribute_table; p->name; p++)\n+  if (targetm.attribute_table)\n     {\n-      if (get_identifier (p->name) == ident)\n-\treturn true;\n+      for (const attribute_spec *p = targetm.attribute_table; p->name; p++)\n+\t{\n+\t  if (get_identifier (p->name) == ident)\n+\t    return true;\n+\t}\n     }\n \n   return false;"}, {"sha": "2a4b2ed82327a321951da729e3720d22445a98fd", "filename": "gcc/testsuite/gdc.dg/pr95173.d", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62e02c8729a75c4a859edc18e0bcafb87d717f46/gcc%2Ftestsuite%2Fgdc.dg%2Fpr95173.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62e02c8729a75c4a859edc18e0bcafb87d717f46/gcc%2Ftestsuite%2Fgdc.dg%2Fpr95173.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.dg%2Fpr95173.d?ref=62e02c8729a75c4a859edc18e0bcafb87d717f46", "patch": "@@ -0,0 +1,10 @@\n+// https://gcc.gnu.org/bugzilla/show_bug.cgi?id=95173\n+// { dg-do compile }\n+// { dg-options \"-Wattributes\" }\n+\n+import gcc.attribute;\n+\n+@attribute(\"foo\") // { dg-warning \"unknown attribute .foo.\" }\n+void f95173() \n+{\n+}"}]}