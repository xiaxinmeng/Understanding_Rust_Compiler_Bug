{"sha": "ee034d3108105353a2130a2d0d3630e5f8214811", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWUwMzRkMzEwODEwNTM1M2EyMTMwYTJkMGQzNjMwZTVmODIxNDgxMQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2018-02-02T18:09:32Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2018-02-02T18:09:32Z"}, "message": "re PR lto/83954 (LTO: Bogus -Wlto-type-mismatch warning for array of pointer to incomplete type)\n\n\tPR lto/83954\n\t* lto-symtab.c (warn_type_compatibility_p): Do not recurse into the\n\tcomponent type of array types with non-aliased component.\n\nFrom-SVN: r257343", "tree": {"sha": "5ccdd70d4f0b6784c546fa2294d377c157cf9ecd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5ccdd70d4f0b6784c546fa2294d377c157cf9ecd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ee034d3108105353a2130a2d0d3630e5f8214811", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee034d3108105353a2130a2d0d3630e5f8214811", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee034d3108105353a2130a2d0d3630e5f8214811", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee034d3108105353a2130a2d0d3630e5f8214811/comments", "author": null, "committer": null, "parents": [{"sha": "aa81b142afd82cef291a1940b2dbca80807af59a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa81b142afd82cef291a1940b2dbca80807af59a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aa81b142afd82cef291a1940b2dbca80807af59a"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "e51fa1cdc58470310219eea9646aed8d07d59424", "filename": "gcc/lto/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee034d3108105353a2130a2d0d3630e5f8214811/gcc%2Flto%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee034d3108105353a2130a2d0d3630e5f8214811/gcc%2Flto%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2FChangeLog?ref=ee034d3108105353a2130a2d0d3630e5f8214811", "patch": "@@ -1,3 +1,9 @@\n+2018-02-02  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR lto/83954\n+\t* lto-symtab.c (warn_type_compatibility_p): Do not recurse into the\n+\tcomponent type of array types with non-aliased component.\n+\n 2018-01-30  Jan Hubicka  <hubicka@ucw.cz>\n \n \tPR lto/83954"}, {"sha": "4f186aed059e51e896751e9301667b3d04162a28", "filename": "gcc/lto/lto-symtab.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee034d3108105353a2130a2d0d3630e5f8214811/gcc%2Flto%2Flto-symtab.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee034d3108105353a2130a2d0d3630e5f8214811/gcc%2Flto%2Flto-symtab.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2Flto-symtab.c?ref=ee034d3108105353a2130a2d0d3630e5f8214811", "patch": "@@ -288,9 +288,12 @@ warn_type_compatibility_p (tree prevailing_type, tree type,\n \t{\n           tree t1 = type, t2 = prevailing_type;\n \n-\t  /* Alias sets of arrays are the same as alias sets of the inner\n-\t     types.  */\n-\t  while (TREE_CODE (t1) == ARRAY_TYPE && TREE_CODE (t2) == ARRAY_TYPE)\n+\t  /* Alias sets of arrays with aliased components are the same as alias\n+\t     sets of the inner types.  */\n+\t  while (TREE_CODE (t1) == ARRAY_TYPE\n+\t\t && !TYPE_NONALIASED_COMPONENT (t1)\n+\t\t && TREE_CODE (t2) == ARRAY_TYPE\n+\t\t && !TYPE_NONALIASED_COMPONENT (t2))\n \t    {\n \t      t1 = TREE_TYPE (t1);\n \t      t2 = TREE_TYPE (t2);"}]}