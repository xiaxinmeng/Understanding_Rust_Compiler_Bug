{"sha": "ea4e901fa3ac09aa21e20bae460cbac70f9820e0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWE0ZTkwMWZhM2FjMDlhYTIxZTIwYmFlNDYwY2JhYzcwZjk4MjBlMA==", "commit": {"author": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2021-09-18T19:17:06Z"}, "committer": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2021-09-19T18:41:31Z"}, "message": "libgcc, X86, Darwin: Handle symbols for HF cases.\n\nThis reorganises the Darwin symbol vers files to include\nthe generic ones at the top level; allowing for arch ports\nto override (via either exclusion or inclusion as needed).\n\nWe add an X86-specific vers file containing the new HF\nsymbols.  Note that although Darwin does not use ELF-style\nsymbol versioning - the parser that produces the map can\nconsume it.  Using the ELF-style description will help us\nknow at which rev the symbols were introduced.\n\nSigned-off-by: Iain Sandoe <iain@sandoe.co.uk>\n\nlibgcc/ChangeLog:\n\n\t* config/i386/t-darwin: Add in a vers file for X86-specific\n\tsymbols.\n\t* config/t-darwin: Add the generic symbol maps here...\n\t* config/t-slibgcc-darwin: ... removing from here.\n\t* config/i386/libgcc-darwin.ver: New file.", "tree": {"sha": "080baa2bd60ac7fc1337e47890b88208582a6700", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/080baa2bd60ac7fc1337e47890b88208582a6700"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ea4e901fa3ac09aa21e20bae460cbac70f9820e0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea4e901fa3ac09aa21e20bae460cbac70f9820e0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ea4e901fa3ac09aa21e20bae460cbac70f9820e0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea4e901fa3ac09aa21e20bae460cbac70f9820e0/comments", "author": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1297a40fb331467c9ac841dee1c30b6716655517", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1297a40fb331467c9ac841dee1c30b6716655517", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1297a40fb331467c9ac841dee1c30b6716655517"}], "stats": {"total": 28, "additions": 27, "deletions": 1}, "files": [{"sha": "5224cdc982e918403c49f8a6ce88a94f37cb2311", "filename": "libgcc/config/i386/libgcc-darwin.ver", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ea4e901fa3ac09aa21e20bae460cbac70f9820e0/libgcc%2Fconfig%2Fi386%2Flibgcc-darwin.ver", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ea4e901fa3ac09aa21e20bae460cbac70f9820e0/libgcc%2Fconfig%2Fi386%2Flibgcc-darwin.ver", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fi386%2Flibgcc-darwin.ver?ref=ea4e901fa3ac09aa21e20bae460cbac70f9820e0", "patch": "@@ -0,0 +1,21 @@\n+\n+\n+%inherit GCC_12.0.0 GCC_7.0.0\n+GCC_12.0.0 {\n+  __divhc3\n+  __mulhc3\n+  __eqhf2\n+  __nehf2\n+  __extendhfdf2\n+  __extendhfsf2\n+  __extendhftf2\n+  __extendhfxf2\n+  __fixhfti\n+  __fixunshfti\n+  __floattihf\n+  __floatuntihf\n+  __truncdfhf2\n+  __truncsfhf2\n+  __trunctfhf2\n+  __truncxfhf2\n+}"}, {"sha": "c6b3acaaca2827a929b07cdc27d6e4a124ff4e8a", "filename": "libgcc/config/i386/t-darwin", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ea4e901fa3ac09aa21e20bae460cbac70f9820e0/libgcc%2Fconfig%2Fi386%2Ft-darwin", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ea4e901fa3ac09aa21e20bae460cbac70f9820e0/libgcc%2Fconfig%2Fi386%2Ft-darwin", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fi386%2Ft-darwin?ref=ea4e901fa3ac09aa21e20bae460cbac70f9820e0", "patch": "@@ -1,3 +1,6 @@\n LIB2_SIDITI_CONV_FUNCS = yes\n LIB2ADD = $(srcdir)/config/darwin-64.c\n LIB2FUNCS_EXCLUDE = _fixtfdi _fixunstfdi _floatditf _floatunditf\n+\n+#\u00a0Extra symbols for this port.\n+SHLIB_MAPFILES += $(srcdir)/config/i386/libgcc-darwin.ver"}, {"sha": "14ae6b35a4ee51cec0e3bdb4c94c572c6eb741ec", "filename": "libgcc/config/t-darwin", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ea4e901fa3ac09aa21e20bae460cbac70f9820e0/libgcc%2Fconfig%2Ft-darwin", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ea4e901fa3ac09aa21e20bae460cbac70f9820e0/libgcc%2Fconfig%2Ft-darwin", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Ft-darwin?ref=ea4e901fa3ac09aa21e20bae460cbac70f9820e0", "patch": "@@ -24,3 +24,6 @@ d10-uwfef.o: $(srcdir)/config/darwin10-unwind-find-enc-func.c\n libd10-uwfef.a: d10-uwfef.o\n \t$(AR_CREATE_FOR_TARGET) $@ d10-uwfef.o\n \t$(RANLIB_FOR_TARGET) $@\n+\n+# Symbols for all the sub-ports.\n+SHLIB_MAPFILES = libgcc-std.ver $(srcdir)/config/libgcc-libsystem.ver"}, {"sha": "60d6d17601302eef3a6f25da192d2ea37616276a", "filename": "libgcc/config/t-slibgcc-darwin", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ea4e901fa3ac09aa21e20bae460cbac70f9820e0/libgcc%2Fconfig%2Ft-slibgcc-darwin", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ea4e901fa3ac09aa21e20bae460cbac70f9820e0/libgcc%2Fconfig%2Ft-slibgcc-darwin", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Ft-slibgcc-darwin?ref=ea4e901fa3ac09aa21e20bae460cbac70f9820e0", "patch": "@@ -24,7 +24,6 @@ SHLIB_LINK = $(CC) $(LIBGCC2_CFLAGS) $(LDFLAGS) -dynamiclib -nodefaultlibs \\\n \n SHLIB_MKMAP = $(srcdir)/mkmap-flat.awk\n SHLIB_MKMAP_OPTS = -v leading_underscore=1\n-SHLIB_MAPFILES = libgcc-std.ver $(srcdir)/config/libgcc-libsystem.ver\n SHLIB_VERPFX = $(srcdir)/config/$(cpu_type)/libgcc-darwin\n \n # we're only going to build the stubs if the target slib is /usr/lib"}]}