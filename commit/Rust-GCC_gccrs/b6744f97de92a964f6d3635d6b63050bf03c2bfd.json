{"sha": "b6744f97de92a964f6d3635d6b63050bf03c2bfd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjY3NDRmOTdkZTkyYTk2NGY2ZDM2MzVkNmI2MzA1MGJmMDNjMmJmZA==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1993-03-02T21:02:47Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1993-03-02T21:02:47Z"}, "message": "(call_internal*): Use hard register 19 (r3) in clobber\ninstead of match_scratch.\n\nFrom-SVN: r3604", "tree": {"sha": "2a4e8fb567cb7e24af05fcac00e5a8747184350a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2a4e8fb567cb7e24af05fcac00e5a8747184350a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b6744f97de92a964f6d3635d6b63050bf03c2bfd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b6744f97de92a964f6d3635d6b63050bf03c2bfd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b6744f97de92a964f6d3635d6b63050bf03c2bfd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b6744f97de92a964f6d3635d6b63050bf03c2bfd/comments", "author": null, "committer": null, "parents": [{"sha": "e770968be5dbacddb5591860fc43a3f2d3c83894", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e770968be5dbacddb5591860fc43a3f2d3c83894", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e770968be5dbacddb5591860fc43a3f2d3c83894"}], "stats": {"total": 13, "additions": 9, "deletions": 4}, "files": [{"sha": "14b05de861e071db22909413d955454c7cc6aecf", "filename": "gcc/config/i960/i960.md", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b6744f97de92a964f6d3635d6b63050bf03c2bfd/gcc%2Fconfig%2Fi960%2Fi960.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b6744f97de92a964f6d3635d6b63050bf03c2bfd/gcc%2Fconfig%2Fi960%2Fi960.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi960%2Fi960.md?ref=b6744f97de92a964f6d3635d6b63050bf03c2bfd", "patch": "@@ -2154,14 +2154,19 @@\n ;; We need a call saved register allocated for the match_scratch, so we use\n ;; 'l' because all local registers are call saved.\n \n+;; ??? I would prefer to use a match_scratch here, but match_scratch allocated\n+;; registers can't be used for spills.  In a function with lots of calls,\n+;; local-alloc may allocate all local registers to a match_scratch, leaving\n+;; no local registers available for spills.\n+\n (define_insn \"call_internal\"\n   [(call (match_operand:SI 0 \"general_operand\" \"g\")\n \t (match_operand:SI 1 \"immediate_operand\" \"i\"))\n    (use (match_operand:SI 2 \"address_operand\" \"p\"))\n-   (clobber (match_scratch:SI 3 \"=&l\"))]\n+   (clobber (reg:SI 19))]\n   \"\"\n   \"* return i960_output_call_insn (operands[0], operands[1], operands[2],\n-\t\t\t\t   operands[3], insn);\"\n+\t\t\t\t   insn);\"\n   [(set_attr \"type\" \"call\")])\n \n (define_expand \"call_value\"\n@@ -2184,10 +2189,10 @@\n \t(call (match_operand:SI 1 \"general_operand\" \"g\")\n \t      (match_operand:SI 2 \"immediate_operand\" \"i\")))\n    (use (match_operand:SI 3 \"address_operand\" \"p\"))\n-   (clobber (match_scratch:SI 4 \"=&l\"))]\n+   (clobber (reg:SI 19))]\n   \"\"\n   \"* return i960_output_call_insn (operands[1], operands[2], operands[3],\n-\t\t\t\t   operands[4], insn);\"\n+\t\t\t\t   insn);\"\n   [(set_attr \"type\" \"call\")])\n \n (define_insn \"return\""}]}