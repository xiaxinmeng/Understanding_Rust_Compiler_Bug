{"sha": "907c53bbdf5deda5bb247f535af5fc1f1968946d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTA3YzUzYmJkZjVkZWRhNWJiMjQ3ZjUzNWFmNWZjMWYxOTY4OTQ2ZA==", "commit": {"author": {"name": "Bernd Schmidt", "email": "bernds@codesourcery.com", "date": "2010-09-29T21:12:48Z"}, "committer": {"name": "Bernd Schmidt", "email": "bernds@gcc.gnu.org", "date": "2010-09-29T21:12:48Z"}, "message": "re PR c/45054 (struct-by-value-1.c fail.)\n\n\tPR c/45054\n\t* reload1.c (replace_pseudos_in): Use eliminate_regs_1, allowing\n\tinvariants.  Check for reg_equiv_invariant.\n\t(reload): Assert that spilled_pseudos is empty when returning.\n\nFrom-SVN: r164733", "tree": {"sha": "c95bf16b6f5cb0dfca7aae4fa3bafd797d79393c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c95bf16b6f5cb0dfca7aae4fa3bafd797d79393c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/907c53bbdf5deda5bb247f535af5fc1f1968946d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/907c53bbdf5deda5bb247f535af5fc1f1968946d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/907c53bbdf5deda5bb247f535af5fc1f1968946d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/907c53bbdf5deda5bb247f535af5fc1f1968946d/comments", "author": null, "committer": null, "parents": [{"sha": "2293974419a6541fb6425249f1340e96a3fb0766", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2293974419a6541fb6425249f1340e96a3fb0766", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2293974419a6541fb6425249f1340e96a3fb0766"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "5da60577795cf17bbe1002f5076df233cf3672ae", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/907c53bbdf5deda5bb247f535af5fc1f1968946d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/907c53bbdf5deda5bb247f535af5fc1f1968946d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=907c53bbdf5deda5bb247f535af5fc1f1968946d", "patch": "@@ -11,6 +11,11 @@\n \tcosts_add_n_insns): New inline functions.\n \t(get_full_rtx_cost): Declare.\n \n+\tPR c/45054\n+\t* reload1.c (replace_pseudos_in): Use eliminate_regs_1, allowing\n+\tinvariants.  Check for reg_equiv_invariant.\n+\t(reload): Assert that spilled_pseudos is empty when returning.\n+\n 2010-09-29  Kai Tietz  <kai.tietz@onevision.com>\n \n \t* config/i386/mingw32.h (TARGET_64BIT): replaced by"}, {"sha": "202b757670a31a64b8a175071094e9da439a19e9", "filename": "gcc/reload1.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/907c53bbdf5deda5bb247f535af5fc1f1968946d/gcc%2Freload1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/907c53bbdf5deda5bb247f535af5fc1f1968946d/gcc%2Freload1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freload1.c?ref=907c53bbdf5deda5bb247f535af5fc1f1968946d", "patch": "@@ -588,7 +588,7 @@ replace_pseudos_in (rtx *loc, enum machine_mode mem_mode, rtx usage)\n       if (regno < FIRST_PSEUDO_REGISTER)\n \treturn;\n \n-      x = eliminate_regs (x, mem_mode, usage);\n+      x = eliminate_regs_1 (x, mem_mode, usage, true, false);\n       if (x != *loc)\n \t{\n \t  *loc = x;\n@@ -598,6 +598,8 @@ replace_pseudos_in (rtx *loc, enum machine_mode mem_mode, rtx usage)\n \n       if (reg_equiv_constant[regno])\n \t*loc = reg_equiv_constant[regno];\n+      else if (reg_equiv_invariant[regno])\n+\t*loc = reg_equiv_invariant[regno];\n       else if (reg_equiv_mem[regno])\n \t*loc = reg_equiv_mem[regno];\n       else if (reg_equiv_address[regno])\n@@ -1316,6 +1318,8 @@ reload (rtx first, int global)\n \n   VEC_free (rtx_p, heap, substitute_stack);\n \n+  gcc_assert (bitmap_empty_p (&spilled_pseudos));\n+\n   return failure;\n }\n "}]}