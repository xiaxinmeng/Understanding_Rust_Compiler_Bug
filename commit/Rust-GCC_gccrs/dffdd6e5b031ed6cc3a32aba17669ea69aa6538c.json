{"sha": "dffdd6e5b031ed6cc3a32aba17669ea69aa6538c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGZmZGQ2ZTViMDMxZWQ2Y2MzYTMyYWJhMTc2NjllYTY5YWE2NTM4Yw==", "commit": {"author": {"name": "Martin Jambor", "email": "mjambor@suse.cz", "date": "2012-11-20T11:20:41Z"}, "committer": {"name": "Martin Jambor", "email": "jamborm@gcc.gnu.org", "date": "2012-11-20T11:20:41Z"}, "message": "re PR tree-optimization/55260 (ICE: in ipa_get_parm_lattices, at ipa-cp.c:263 with -O2 -fno-inline -fipa-cp-clone)\n\n2012-11-20  Martin Jambor  <mjambor@suse.cz>\n\n\tPR tree-optimization/55260\n\t* ipa-cp.c (find_aggregate_values_for_callers_subset): Rename info to\n\tdest_info, use caller_info instead of info when determining whether\n\tcallee is a clone.\n\n\t* testsuite/g++.dg/torture/pr55260-1.C: New test.\n\nFrom-SVN: r193657", "tree": {"sha": "fba9636433b58f1c588237561e62f137f7e46b03", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fba9636433b58f1c588237561e62f137f7e46b03"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dffdd6e5b031ed6cc3a32aba17669ea69aa6538c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dffdd6e5b031ed6cc3a32aba17669ea69aa6538c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dffdd6e5b031ed6cc3a32aba17669ea69aa6538c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dffdd6e5b031ed6cc3a32aba17669ea69aa6538c/comments", "author": {"login": "jamborm", "id": 2180070, "node_id": "MDQ6VXNlcjIxODAwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2180070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamborm", "html_url": "https://github.com/jamborm", "followers_url": "https://api.github.com/users/jamborm/followers", "following_url": "https://api.github.com/users/jamborm/following{/other_user}", "gists_url": "https://api.github.com/users/jamborm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamborm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamborm/subscriptions", "organizations_url": "https://api.github.com/users/jamborm/orgs", "repos_url": "https://api.github.com/users/jamborm/repos", "events_url": "https://api.github.com/users/jamborm/events{/privacy}", "received_events_url": "https://api.github.com/users/jamborm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e7d8fc6c1069d17cba2e0fb4ab6ec69b50273f08", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7d8fc6c1069d17cba2e0fb4ab6ec69b50273f08", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e7d8fc6c1069d17cba2e0fb4ab6ec69b50273f08"}], "stats": {"total": 44, "additions": 40, "deletions": 4}, "files": [{"sha": "fc073b3de78fe81df7d9a47af57bbb8e00e5d9fc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dffdd6e5b031ed6cc3a32aba17669ea69aa6538c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dffdd6e5b031ed6cc3a32aba17669ea69aa6538c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dffdd6e5b031ed6cc3a32aba17669ea69aa6538c", "patch": "@@ -1,3 +1,10 @@\n+2012-11-20  Martin Jambor  <mjambor@suse.cz>\n+\n+\tPR tree-optimization/55260\n+\t* ipa-cp.c (find_aggregate_values_for_callers_subset): Rename info to\n+\tdest_info, use caller_info instead of info when determining whether\n+\tcallee is a clone.\n+\n 2012-11-20  Andrey Turetskiy  <andrey.turetskiy@gmail.com>\n \n \t* config/i386/sse.md (*<ssse3_avx2>_pmulhrsw<mode>3): Merge"}, {"sha": "a0f5f5f085ca9a9e5739423a4fcbbae1a39ec5fc", "filename": "gcc/ipa-cp.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dffdd6e5b031ed6cc3a32aba17669ea69aa6538c/gcc%2Fipa-cp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dffdd6e5b031ed6cc3a32aba17669ea69aa6538c/gcc%2Fipa-cp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-cp.c?ref=dffdd6e5b031ed6cc3a32aba17669ea69aa6538c", "patch": "@@ -2859,10 +2859,10 @@ static struct ipa_agg_replacement_value *\n find_aggregate_values_for_callers_subset (struct cgraph_node *node,\n \t\t\t\t\t  vec<cgraph_edge_p> callers)\n {\n-  struct ipa_node_params *info = IPA_NODE_REF (node);\n+  struct ipa_node_params *dest_info = IPA_NODE_REF (node);\n   struct ipa_agg_replacement_value *res = NULL;\n   struct cgraph_edge *cs;\n-  int i, j, count = ipa_get_param_count (info);\n+  int i, j, count = ipa_get_param_count (dest_info);\n \n   FOR_EACH_VEC_ELT (callers, j, cs)\n     {\n@@ -2880,7 +2880,7 @@ find_aggregate_values_for_callers_subset (struct cgraph_node *node,\n \n       /* Among other things, the following check should deal with all by_ref\n \t mismatches.  */\n-      if (ipa_get_parm_lattices (info, i)->aggs_bottom)\n+      if (ipa_get_parm_lattices (dest_info, i)->aggs_bottom)\n \tcontinue;\n \n       FOR_EACH_VEC_ELT (callers, j, cs)\n@@ -2932,7 +2932,7 @@ find_aggregate_values_for_callers_subset (struct cgraph_node *node,\n \t      struct ipcp_param_lattices *src_plats;\n \t      HOST_WIDE_INT delta = ipa_get_jf_ancestor_offset (jfunc);\n \n-\t      if (info->ipcp_orig_node)\n+\t      if (caller_info->ipcp_orig_node)\n \t\t{\n \t\t  if (!inter.exists ())\n \t\t    inter = agg_replacements_to_vector (cs->caller, delta);"}, {"sha": "cb6518751f62a04d2478e60c5158196acab36e15", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dffdd6e5b031ed6cc3a32aba17669ea69aa6538c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dffdd6e5b031ed6cc3a32aba17669ea69aa6538c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=dffdd6e5b031ed6cc3a32aba17669ea69aa6538c", "patch": "@@ -1,3 +1,8 @@\n+2012-11-20  Martin Jambor  <mjambor@suse.cz>\n+\n+\tPR tree-optimization/55260\n+\t* g++.dg/torture/pr55260-1.C: New test.\n+\n 2012-11-20  Sofiane Naci  <sofiane.naci@arm.com>\n \n \t* gcc.target/aarch64/atomic-comp-swap-release-acquire.c: New testcase."}, {"sha": "552da8df2620832ca73b82f9a6f65fb463342a8e", "filename": "gcc/testsuite/g++.dg/torture/pr55260-1.C", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dffdd6e5b031ed6cc3a32aba17669ea69aa6538c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr55260-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dffdd6e5b031ed6cc3a32aba17669ea69aa6538c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr55260-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr55260-1.C?ref=dffdd6e5b031ed6cc3a32aba17669ea69aa6538c", "patch": "@@ -0,0 +1,24 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-std=gnu++0x -fno-inline\" } */\n+/* { dg-add-options bind_pic_locally } */\n+\n+  struct B\n+  {\n+  constexpr B ():\n+    bp ()\n+    {}\n+    ~B ()\n+    {\n+      if (bp)\n+\tbp->f ();\n+    }\n+    void f ();\n+    B *bp;\n+  };\n+struct A  {    B b;\n+};\n+\n+void foo ()\n+{\n+  A a;\n+}"}]}