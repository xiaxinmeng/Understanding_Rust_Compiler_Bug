{"sha": "447924ef3b084b400c2e1586d5fa404d625d6407", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDQ3OTI0ZWYzYjA4NGI0MDBjMmUxNTg2ZDVmYTQwNGQ2MjVkNjQwNw==", "commit": {"author": {"name": "Joseph Myers", "email": "joseph@codesourcery.com", "date": "2010-05-27T11:33:27Z"}, "committer": {"name": "Joseph Myers", "email": "jsm28@gcc.gnu.org", "date": "2010-05-27T11:33:27Z"}, "message": "input.c: New file.\n\n\t* input.c: New file.\n\t* input.h (main_input_filename): Move declaration to toplev.h.\n\t* toplev.c (input_location, line_table): Move to input.c\n\t* toplev.h (main_input_filename): Move declaration from input.h.\n\t* tree.c (expand_location): Move to input.c.\n\t* Makefile.in (OBJS-common): Add input.o.\n\t(input.o): Add dependencies.\n\nFrom-SVN: r159914", "tree": {"sha": "bfed6bb6e112c74d201870514c06a78bd243ee61", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bfed6bb6e112c74d201870514c06a78bd243ee61"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/447924ef3b084b400c2e1586d5fa404d625d6407", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/447924ef3b084b400c2e1586d5fa404d625d6407", "html_url": "https://github.com/Rust-GCC/gccrs/commit/447924ef3b084b400c2e1586d5fa404d625d6407", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/447924ef3b084b400c2e1586d5fa404d625d6407/comments", "author": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "62116e601b614aafe9a7453b26b43d1cfa1d0f8d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62116e601b614aafe9a7453b26b43d1cfa1d0f8d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/62116e601b614aafe9a7453b26b43d1cfa1d0f8d"}], "stats": {"total": 102, "additions": 70, "deletions": 32}, "files": [{"sha": "98758498bcaba1ccd1d230f308402e7b8e1e6cab", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/447924ef3b084b400c2e1586d5fa404d625d6407/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/447924ef3b084b400c2e1586d5fa404d625d6407/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=447924ef3b084b400c2e1586d5fa404d625d6407", "patch": "@@ -1,3 +1,13 @@\n+2010-05-27  Joseph Myers  <joseph@codesourcery.com>\n+\n+\t* input.c: New file.\n+\t* input.h (main_input_filename): Move declaration to toplev.h.\n+\t* toplev.c (input_location, line_table): Move to input.c\n+\t* toplev.h (main_input_filename): Move declaration from input.h.\n+\t* tree.c (expand_location): Move to input.c.\n+\t* Makefile.in (OBJS-common): Add input.o.\n+\t(input.o): Add dependencies.\n+\n 2010-05-27  Richard Guenther  <rguenther@suse.de>\n \n \t* lto-wrapper.c (maybe_unlink_file): Ignore unlink failure"}, {"sha": "42b8a8848c236f6ac106ad94b2eeeb1c8b5addb2", "filename": "gcc/Makefile.in", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/447924ef3b084b400c2e1586d5fa404d625d6407/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/447924ef3b084b400c2e1586d5fa404d625d6407/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=447924ef3b084b400c2e1586d5fa404d625d6407", "patch": "@@ -1233,6 +1233,7 @@ OBJS-common = \\\n \tifcvt.o \\\n \timplicit-zee.o \\\n \tinit-regs.o \\\n+\tinput.o \\\n \tintegrate.o \\\n \tintl.o \\\n \tira.o \\\n@@ -2756,6 +2757,8 @@ s-bversion: BASE-VER\n \techo \"#define BUILDING_GCC_VERSION (BUILDING_GCC_MAJOR * 1000 + BUILDING_GCC_MINOR)\" >> bversion.h\n \t$(STAMP) s-bversion\n \n+input.o : input.c $(CONFIG_H) $(SYSTEM_H) coretypes.h intl.h $(INPUT_H)\n+\n toplev.o : toplev.c $(CONFIG_H) $(SYSTEM_H) coretypes.h $(TM_H) $(TREE_H) \\\n    version.h $(RTL_H) $(FUNCTION_H) $(FLAGS_H) xcoffout.h $(INPUT_H) \\\n    $(INSN_ATTR_H) output.h $(DIAGNOSTIC_H) debug.h insn-config.h intl.h \\"}, {"sha": "e5e051f9eaecaee404ff226423d2a4d44d40509a", "filename": "gcc/input.c", "status": "added", "additions": 53, "deletions": 0, "changes": 53, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/447924ef3b084b400c2e1586d5fa404d625d6407/gcc%2Finput.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/447924ef3b084b400c2e1586d5fa404d625d6407/gcc%2Finput.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Finput.c?ref=447924ef3b084b400c2e1586d5fa404d625d6407", "patch": "@@ -0,0 +1,53 @@\n+/* Data and functions related to line maps and input files.\n+   Copyright (C) 2004, 2007, 2008, 2009, 2010\n+   Free Software Foundation, Inc.\n+\n+This file is part of GCC.\n+\n+GCC is free software; you can redistribute it and/or modify it under\n+the terms of the GNU General Public License as published by the Free\n+Software Foundation; either version 3, or (at your option) any later\n+version.\n+\n+GCC is distributed in the hope that it will be useful, but WITHOUT ANY\n+WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with GCC; see the file COPYING3.  If not see\n+<http://www.gnu.org/licenses/>.  */\n+\n+#include \"config.h\"\n+#include \"system.h\"\n+#include \"coretypes.h\"\n+#include \"intl.h\"\n+#include \"input.h\"\n+\n+/* Current position in real source file.  */\n+\n+location_t input_location;\n+\n+struct line_maps *line_table;\n+\n+expanded_location\n+expand_location (source_location loc)\n+{\n+  expanded_location xloc;\n+  if (loc <= BUILTINS_LOCATION)\n+    {\n+      xloc.file = loc == UNKNOWN_LOCATION ? NULL : _(\"<built-in>\");\n+      xloc.line = 0;\n+      xloc.column = 0;\n+      xloc.sysp = 0;\n+    }\n+  else\n+    {\n+      const struct line_map *map = linemap_lookup (line_table, loc);\n+      xloc.file = map->to_file;\n+      xloc.line = SOURCE_LINE (map, loc);\n+      xloc.column = SOURCE_COLUMN (map, loc);\n+      xloc.sysp = map->sysp != 0;\n+    };\n+  return xloc;\n+}"}, {"sha": "399a685423a081400c3793b0e736e551265050a8", "filename": "gcc/input.h", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/447924ef3b084b400c2e1586d5fa404d625d6407/gcc%2Finput.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/447924ef3b084b400c2e1586d5fa404d625d6407/gcc%2Finput.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Finput.h?ref=447924ef3b084b400c2e1586d5fa404d625d6407", "patch": "@@ -1,6 +1,6 @@\n /* Declarations for variables relating to reading the source file.\n    Used by parsers, lexical analyzers, and error message routines.\n-   Copyright (C) 1993, 1997, 1998, 2000, 2003, 2004, 2007, 2008, 2009\n+   Copyright (C) 1993, 1997, 1998, 2000, 2003, 2004, 2007, 2008, 2009, 2010\n    Free Software Foundation, Inc.\n \n This file is part of GCC.\n@@ -57,9 +57,6 @@ extern expanded_location expand_location (source_location);\n    This could be removed but it hardly seems worth the effort.  */\n typedef source_location location_t;\n \n-/* Top-level source file.  */\n-extern const char *main_input_filename;\n-\n extern location_t input_location;\n \n #define LOCATION_FILE(LOC) ((expand_location (LOC)).file)"}, {"sha": "a5e620387ac61d893dcf1618c78f7a5c96c9deb7", "filename": "gcc/toplev.c", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/447924ef3b084b400c2e1586d5fa404d625d6407/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/447924ef3b084b400c2e1586d5fa404d625d6407/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=447924ef3b084b400c2e1586d5fa404d625d6407", "patch": "@@ -143,12 +143,6 @@ const char *main_input_filename;\n    to optimize in process_options ().  */\n #define AUTODETECT_VALUE 2\n \n-/* Current position in real source file.  */\n-\n-location_t input_location;\n-\n-struct line_maps *line_table;\n-\n /* Name to use as base of names for dump output files.  */\n \n const char *dump_base_name;"}, {"sha": "033c6dcdae64e475312300eddf3c764495c4c812", "filename": "gcc/toplev.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/447924ef3b084b400c2e1586d5fa404d625d6407/gcc%2Ftoplev.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/447924ef3b084b400c2e1586d5fa404d625d6407/gcc%2Ftoplev.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.h?ref=447924ef3b084b400c2e1586d5fa404d625d6407", "patch": "@@ -119,6 +119,9 @@ extern void target_reinit (void);\n /* A unique local time stamp, might be zero if none is available.  */\n extern unsigned local_tick;\n \n+/* Top-level source file.  */\n+extern const char *main_input_filename;\n+\n extern const char *progname;\n extern const char *dump_base_name;\n extern const char *dump_dir_name;"}, {"sha": "743293e288a55fa0e99632c7793c3120b87bd4f4", "filename": "gcc/tree.c", "status": "modified", "additions": 0, "deletions": 22, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/447924ef3b084b400c2e1586d5fa404d625d6407/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/447924ef3b084b400c2e1586d5fa404d625d6407/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=447924ef3b084b400c2e1586d5fa404d625d6407", "patch": "@@ -3950,28 +3950,6 @@ build_block (tree vars, tree subblocks, tree supercontext, tree chain)\n   return block;\n }\n \n-expanded_location\n-expand_location (source_location loc)\n-{\n-  expanded_location xloc;\n-  if (loc <= BUILTINS_LOCATION)\n-    {\n-      xloc.file = loc == UNKNOWN_LOCATION ? NULL : _(\"<built-in>\");\n-      xloc.line = 0;\n-      xloc.column = 0;\n-      xloc.sysp = 0;\n-    }\n-  else\n-    {\n-      const struct line_map *map = linemap_lookup (line_table, loc);\n-      xloc.file = map->to_file;\n-      xloc.line = SOURCE_LINE (map, loc);\n-      xloc.column = SOURCE_COLUMN (map, loc);\n-      xloc.sysp = map->sysp != 0;\n-    };\n-  return xloc;\n-}\n-\n \f\n /* Like SET_EXPR_LOCATION, but make sure the tree can have a location.\n "}]}