{"sha": "23ccd1f3be5147abf399cc0c09452b6635dece20", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjNjY2QxZjNiZTUxNDdhYmYzOTljYzBjMDk0NTJiNjYzNWRlY2UyMA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2002-09-04T08:50:16Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2002-09-04T08:50:16Z"}, "message": "decl.c (start_cleanup_fn): Clear interface_only before start_function, restore it afterwards.\n\n\t* decl.c (start_cleanup_fn): Clear interface_only before\n\tstart_function, restore it afterwards.\n\n\t* g++.dg/other/cxa-atexit1.C: New test.\n\nFrom-SVN: r56790", "tree": {"sha": "a4457c9b814187c23d71f350171cee587b2e158d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a4457c9b814187c23d71f350171cee587b2e158d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/23ccd1f3be5147abf399cc0c09452b6635dece20", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23ccd1f3be5147abf399cc0c09452b6635dece20", "html_url": "https://github.com/Rust-GCC/gccrs/commit/23ccd1f3be5147abf399cc0c09452b6635dece20", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23ccd1f3be5147abf399cc0c09452b6635dece20/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9837dc8d68ed741a2e504f9ae3b6da704ab9a3d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9837dc8d68ed741a2e504f9ae3b6da704ab9a3d7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9837dc8d68ed741a2e504f9ae3b6da704ab9a3d7"}], "stats": {"total": 38, "additions": 38, "deletions": 0}, "files": [{"sha": "c701767f0eba55adb65b39bf36c0262c1312ef9c", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/23ccd1f3be5147abf399cc0c09452b6635dece20/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/23ccd1f3be5147abf399cc0c09452b6635dece20/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=23ccd1f3be5147abf399cc0c09452b6635dece20", "patch": "@@ -1,3 +1,8 @@\n+2002-09-04  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* decl.c (start_cleanup_fn): Clear interface_only before\n+\tstart_function, restore it afterwards.\n+\n 2002-08-31  Jason Merrill  <jason@redhat.com>\n \n \t* cp-lang.c (cp_expr_size): Allow initialization from a"}, {"sha": "f3b4d8756cc8509bd1b91354e7cec7e948b99733", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/23ccd1f3be5147abf399cc0c09452b6635dece20/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/23ccd1f3be5147abf399cc0c09452b6635dece20/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=23ccd1f3be5147abf399cc0c09452b6635dece20", "patch": "@@ -8445,6 +8445,7 @@ static tree\n start_cleanup_fn ()\n {\n   static int counter = 0;\n+  int old_interface_only = interface_only;\n   int old_interface_unknown = interface_unknown;\n   char name[32];\n   tree parmtypes;\n@@ -8456,6 +8457,7 @@ start_cleanup_fn ()\n   /* No need to mangle this.  */\n   push_lang_context (lang_name_c);\n \n+  interface_only = 0;\n   interface_unknown = 1;\n \n   /* Build the parameter-types.  */\n@@ -8496,6 +8498,7 @@ start_cleanup_fn ()\n   start_function (/*specs=*/NULL_TREE, fndecl, NULL_TREE, SF_PRE_PARSED);\n \n   interface_unknown = old_interface_unknown;\n+  interface_only = old_interface_only;\n \n   pop_lang_context ();\n "}, {"sha": "c4900bdf74fb3d4cce3c9697815ed9389ce99eaf", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/23ccd1f3be5147abf399cc0c09452b6635dece20/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/23ccd1f3be5147abf399cc0c09452b6635dece20/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=23ccd1f3be5147abf399cc0c09452b6635dece20", "patch": "@@ -1,3 +1,7 @@\n+2002-09-04  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* g++.dg/other/cxa-atexit1.C: New test.\n+\n 2002-09-03  Neil Booth  <neil@daikokuya.co.uk>\n \n \t* gcc.dg/cpp/_Pragma4.c: New test."}, {"sha": "a51f3340142673add9647fcd2ac61a10a9a18ed4", "filename": "gcc/testsuite/g++.dg/other/cxa-atexit1.C", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/23ccd1f3be5147abf399cc0c09452b6635dece20/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fcxa-atexit1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/23ccd1f3be5147abf399cc0c09452b6635dece20/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fcxa-atexit1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fcxa-atexit1.C?ref=23ccd1f3be5147abf399cc0c09452b6635dece20", "patch": "@@ -0,0 +1,26 @@\n+// { dg-do compile }\n+// { dg-options \"-O2 -fuse-cxa-atexit\" }\n+\n+# 1 \"cxa-atexit1.C\"\n+struct A\n+{\n+  struct B\n+  {\n+    B ();\n+    ~B ();\n+  };\n+};\n+static A::B b;\n+# 1 \"cxa-atexit1.h\" 1\n+#pragma interface\n+template <class T> struct C\n+{\n+  ~C (void);\n+};\n+struct D : public C<bool>\n+{\n+  D (void) : C<bool> () { }\n+};\n+# 55 \"cxa-atexit1.C\" 2\n+\n+// { dg-final { scan-assembler-not \".gnu.linkonce.t.__tcf_\" } }"}]}