{"sha": "4ca4be7f25a6a4237e98410f1fab2f4578d52d1f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGNhNGJlN2YyNWE2YTQyMzdlOTg0MTBmMWZhYjJmNDU3OGQ1MmQxZg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2010-07-13T22:55:20Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-07-13T22:55:20Z"}, "message": "trans-decl.c (gfc_build_intrinsic_function_decls, [...]): Mark functions as DECL_PURE_P or TREE_READONLY.\n\n\t* trans-decl.c (gfc_build_intrinsic_function_decls,\n\tgfc_build_builtin_function_decls): Mark functions as\n\tDECL_PURE_P or TREE_READONLY.\n\nFrom-SVN: r162160", "tree": {"sha": "3c34b4593cf0af7a947b567911a4dec3d0d3a645", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3c34b4593cf0af7a947b567911a4dec3d0d3a645"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4ca4be7f25a6a4237e98410f1fab2f4578d52d1f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ca4be7f25a6a4237e98410f1fab2f4578d52d1f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4ca4be7f25a6a4237e98410f1fab2f4578d52d1f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ca4be7f25a6a4237e98410f1fab2f4578d52d1f/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7487bca5bb7db6e736d22be5ca0fb4f40f3ff71b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7487bca5bb7db6e736d22be5ca0fb4f40f3ff71b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7487bca5bb7db6e736d22be5ca0fb4f40f3ff71b"}], "stats": {"total": 28, "additions": 27, "deletions": 1}, "files": [{"sha": "2847d945b6356a2668bf2000f62db06c77571dad", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4ca4be7f25a6a4237e98410f1fab2f4578d52d1f/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4ca4be7f25a6a4237e98410f1fab2f4578d52d1f/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=4ca4be7f25a6a4237e98410f1fab2f4578d52d1f", "patch": "@@ -1,3 +1,9 @@\n+2010-07-14  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* trans-decl.c (gfc_build_intrinsic_function_decls,\n+\tgfc_build_builtin_function_decls): Mark functions as\n+\tDECL_PURE_P or TREE_READONLY.\n+\n 2010-07-13  Nathan Froyd  <froydnj@codesourcery.com>\n \n \t* trans-decl.c (build_entry_thunks): Call build_call_expr_loc_vec"}, {"sha": "cb805be946fe085ae0c93f858d8a0f5e4b460455", "filename": "gcc/fortran/trans-decl.c", "status": "modified", "additions": 21, "deletions": 1, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4ca4be7f25a6a4237e98410f1fab2f4578d52d1f/gcc%2Ffortran%2Ftrans-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4ca4be7f25a6a4237e98410f1fab2f4578d52d1f/gcc%2Ffortran%2Ftrans-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-decl.c?ref=4ca4be7f25a6a4237e98410f1fab2f4578d52d1f", "patch": "@@ -2412,6 +2412,7 @@ gfc_build_intrinsic_function_decls (void)\n \tget_identifier (PREFIX(\"compare_string\")), \"..R.R\",\n \tinteger_type_node, 4, gfc_charlen_type_node, pchar1_type_node,\n \tgfc_charlen_type_node, pchar1_type_node);\n+  DECL_PURE_P (gfor_fndecl_compare_string) = 1;\n \n   gfor_fndecl_concat_string = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"concat_string\")), \"..W.R.R\",\n@@ -2422,21 +2423,25 @@ gfc_build_intrinsic_function_decls (void)\n   gfor_fndecl_string_len_trim = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"string_len_trim\")), \"..R\",\n \tgfc_charlen_type_node, 2, gfc_charlen_type_node, pchar1_type_node);\n+  DECL_PURE_P (gfor_fndecl_string_len_trim) = 1;\n \n   gfor_fndecl_string_index = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"string_index\")), \"..R.R.\",\n \tgfc_charlen_type_node, 5, gfc_charlen_type_node, pchar1_type_node,\n \tgfc_charlen_type_node, pchar1_type_node, gfc_logical4_type_node);\n+  DECL_PURE_P (gfor_fndecl_string_index) = 1;\n \n   gfor_fndecl_string_scan = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"string_scan\")), \"..R.R.\",\n \tgfc_charlen_type_node, 5, gfc_charlen_type_node, pchar1_type_node,\n \tgfc_charlen_type_node, pchar1_type_node, gfc_logical4_type_node);\n+  DECL_PURE_P (gfor_fndecl_string_scan) = 1;\n \n   gfor_fndecl_string_verify = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"string_verify\")), \"..R.R.\",\n \tgfc_charlen_type_node, 5, gfc_charlen_type_node, pchar1_type_node,\n \tgfc_charlen_type_node, pchar1_type_node, gfc_logical4_type_node);\n+  DECL_PURE_P (gfor_fndecl_string_verify) = 1;\n \n   gfor_fndecl_string_trim = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"string_trim\")), \".Ww.R\",\n@@ -2464,11 +2469,13 @@ gfc_build_intrinsic_function_decls (void)\n \tget_identifier (PREFIX(\"select_string\")), \".R.R.\",\n \tinteger_type_node, 4, pvoid_type_node, integer_type_node,\n \tpchar1_type_node, gfc_charlen_type_node);\n+  DECL_PURE_P (gfor_fndecl_select_string) = 1;\n \n   gfor_fndecl_compare_string_char4 = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"compare_string_char4\")), \"..R.R\",\n \tinteger_type_node, 4, gfc_charlen_type_node, pchar4_type_node,\n \tgfc_charlen_type_node, pchar4_type_node);\n+  DECL_PURE_P (gfor_fndecl_compare_string_char4) = 1;\n \n   gfor_fndecl_concat_string_char4 = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"concat_string_char4\")), \"..W.R.R\",\n@@ -2479,21 +2486,25 @@ gfc_build_intrinsic_function_decls (void)\n   gfor_fndecl_string_len_trim_char4 = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"string_len_trim_char4\")), \"..R\",\n \tgfc_charlen_type_node, 2, gfc_charlen_type_node, pchar4_type_node);\n+  DECL_PURE_P (gfor_fndecl_string_len_trim_char4) = 1;\n \n   gfor_fndecl_string_index_char4 = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"string_index_char4\")), \"..R.R.\",\n \tgfc_charlen_type_node, 5, gfc_charlen_type_node, pchar4_type_node,\n \tgfc_charlen_type_node, pchar4_type_node, gfc_logical4_type_node);\n+  DECL_PURE_P (gfor_fndecl_string_index_char4) = 1;\n \n   gfor_fndecl_string_scan_char4 = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"string_scan_char4\")), \"..R.R.\",\n \tgfc_charlen_type_node, 5, gfc_charlen_type_node, pchar4_type_node,\n \tgfc_charlen_type_node, pchar4_type_node, gfc_logical4_type_node);\n+  DECL_PURE_P (gfor_fndecl_string_scan_char4) = 1;\n \n   gfor_fndecl_string_verify_char4 = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"string_verify_char4\")), \"..R.R.\",\n \tgfc_charlen_type_node, 5, gfc_charlen_type_node, pchar4_type_node,\n \tgfc_charlen_type_node, pchar4_type_node, gfc_logical4_type_node);\n+  DECL_PURE_P (gfor_fndecl_string_verify_char4) = 1;\n \n   gfor_fndecl_string_trim_char4 = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"string_trim_char4\")), \".Ww.R\",\n@@ -2521,6 +2532,7 @@ gfc_build_intrinsic_function_decls (void)\n \tget_identifier (PREFIX(\"select_string_char4\")), \".R.R.\",\n \tinteger_type_node, 4, pvoid_type_node, integer_type_node,\n \tpvoid_type_node, gfc_charlen_type_node);\n+  DECL_PURE_P (gfor_fndecl_select_string_char4) = 1;\n \n \n   /* Conversion between character kinds.  */\n@@ -2554,15 +2566,18 @@ gfc_build_intrinsic_function_decls (void)\n   gfor_fndecl_sc_kind = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"selected_char_kind\")), \"..R\",\n \tgfc_int4_type_node, 2, gfc_charlen_type_node, pchar_type_node);\n+  DECL_PURE_P (gfor_fndecl_sc_kind) = 1;\n \n   gfor_fndecl_si_kind = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"selected_int_kind\")), \".R\",\n \tgfc_int4_type_node, 1, pvoid_type_node);\n+  DECL_PURE_P (gfor_fndecl_si_kind) = 1;\n \n   gfor_fndecl_sr_kind = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"selected_real_kind2008\")), \".RR\",\n \tgfc_int4_type_node, 3, pvoid_type_node, pvoid_type_node,\n \tpvoid_type_node);\n+  DECL_PURE_P (gfor_fndecl_sr_kind) = 1;\n \n   /* Power functions.  */\n   {\n@@ -2684,10 +2699,12 @@ gfc_build_intrinsic_function_decls (void)\n   gfor_fndecl_size0 = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"size0\")), \".R\",\n \tgfc_array_index_type, 1, pvoid_type_node);\n+  DECL_PURE_P (gfor_fndecl_size0) = 1;\n \n   gfor_fndecl_size1 = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"size1\")), \".R\",\n \tgfc_array_index_type, 2, pvoid_type_node, gfc_array_index_type);\n+  DECL_PURE_P (gfor_fndecl_size1) = 1;\n \n   gfor_fndecl_iargc = gfc_build_library_function_decl (\n \tget_identifier (PREFIX (\"iargc\")), gfc_int4_type_node, 0);\n@@ -2698,9 +2715,11 @@ gfc_build_intrinsic_function_decls (void)\n \n       gfor_fndecl_clz128 = gfc_build_library_function_decl (\n \tget_identifier (PREFIX (\"clz128\")), integer_type_node, 1, uint128);\n+      TREE_READONLY (gfor_fndecl_clz128) = 1;\n \n       gfor_fndecl_ctz128 = gfc_build_library_function_decl (\n \tget_identifier (PREFIX (\"ctz128\")), integer_type_node, 1, uint128);\n+      TREE_READONLY (gfor_fndecl_ctz128) = 1;\n     }\n }\n \n@@ -2722,8 +2741,8 @@ gfc_build_builtin_function_decls (void)\n \tget_identifier (PREFIX(\"stop_string\")), \".R.\",\n \tvoid_type_node, 2, pchar_type_node, gfc_int4_type_node);\n   /* STOP doesn't return.  */\n-\n   TREE_THIS_VOLATILE (gfor_fndecl_stop_string) = 1;\n+\n   gfor_fndecl_error_stop_numeric = gfc_build_library_function_decl (\n         get_identifier (PREFIX(\"error_stop_numeric\")),\n         void_type_node, 1, gfc_int4_type_node);\n@@ -2809,6 +2828,7 @@ gfc_build_builtin_function_decls (void)\n   gfor_fndecl_associated = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"associated\")), \".RR\",\n \tinteger_type_node, 2, ppvoid_type_node, ppvoid_type_node);\n+  DECL_PURE_P (gfor_fndecl_associated) = 1;\n \n   gfc_build_intrinsic_function_decls ();\n   gfc_build_intrinsic_lib_fndecls ();"}]}