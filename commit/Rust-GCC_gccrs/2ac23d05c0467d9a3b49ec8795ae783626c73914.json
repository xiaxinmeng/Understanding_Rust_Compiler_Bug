{"sha": "2ac23d05c0467d9a3b49ec8795ae783626c73914", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmFjMjNkMDVjMDQ2N2Q5YTNiNDllYzg3OTVhZTc4MzYyNmM3MzkxNA==", "commit": {"author": {"name": "Eric Christopher", "email": "echristo@redhat.com", "date": "2004-06-24T01:51:30Z"}, "committer": {"name": "Eric Christopher", "email": "echristo@gcc.gnu.org", "date": "2004-06-24T01:51:30Z"}, "message": "mips.c (mips_use_dfa_pipeline_interface): Add R3000.\n\n2004-06-23  Eric Christopher  <echristo@redhat.com>\n\n\t* config/mips/mips.c (mips_use_dfa_pipeline_interface): Add R3000.\n\t* config/mips/mips.md: Remove R3000 scheduling description.\n\t* config/mips/3000.md: New file.\n\nFrom-SVN: r83575", "tree": {"sha": "55ee9a3ffd74b3db6202bdc4771d092c546c67ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/55ee9a3ffd74b3db6202bdc4771d092c546c67ae"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2ac23d05c0467d9a3b49ec8795ae783626c73914", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ac23d05c0467d9a3b49ec8795ae783626c73914", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2ac23d05c0467d9a3b49ec8795ae783626c73914", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ac23d05c0467d9a3b49ec8795ae783626c73914/comments", "author": {"login": "echristo", "id": 327308, "node_id": "MDQ6VXNlcjMyNzMwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/327308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/echristo", "html_url": "https://github.com/echristo", "followers_url": "https://api.github.com/users/echristo/followers", "following_url": "https://api.github.com/users/echristo/following{/other_user}", "gists_url": "https://api.github.com/users/echristo/gists{/gist_id}", "starred_url": "https://api.github.com/users/echristo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/echristo/subscriptions", "organizations_url": "https://api.github.com/users/echristo/orgs", "repos_url": "https://api.github.com/users/echristo/repos", "events_url": "https://api.github.com/users/echristo/events{/privacy}", "received_events_url": "https://api.github.com/users/echristo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6590e19ab7ed5c709611a1d3746d0ae9aefb9221", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6590e19ab7ed5c709611a1d3746d0ae9aefb9221", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6590e19ab7ed5c709611a1d3746d0ae9aefb9221"}], "stats": {"total": 119, "additions": 98, "deletions": 21}, "files": [{"sha": "d289f41e49873896f04ee828168d4d0752d91ed4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ac23d05c0467d9a3b49ec8795ae783626c73914/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ac23d05c0467d9a3b49ec8795ae783626c73914/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2ac23d05c0467d9a3b49ec8795ae783626c73914", "patch": "@@ -1,3 +1,9 @@\n+2004-06-23  Eric Christopher  <echristo@redhat.com>\n+\n+\t* config/mips/mips.c (mips_use_dfa_pipeline_interface): Add R3000.\n+\t* config/mips/mips.md: Remove R3000 scheduling description.\n+\t* config/mips/3000.md: New file.\n+\n 2004-06-23  Ulrich Weigand  <uweigand@de.ibm.com>\n \n \t* config/s390/s390-protos.h (s390_emit_compare): Add prototype.\n@@ -20,7 +26,7 @@\n \t(\"doloop\"): Adapt.\n \t(\"jump\"): Convert to expander.  Use s390_emit_jump.\n \t(\"*jump_64\", \"*jump_31\"): New insns.  Improve length default.\n-\t\n+\n 2004-06-23  Wu Yongwei  <adah@sh163.net>\n \n \t* gthr-win32.h (__GTHREAD_MUTEX_INIT_DEFAULT): Adjust."}, {"sha": "92825978002498527829187d24e3830299e81d37", "filename": "gcc/config/mips/3000.md", "status": "added", "additions": 69, "deletions": 0, "changes": 69, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ac23d05c0467d9a3b49ec8795ae783626c73914/gcc%2Fconfig%2Fmips%2F3000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ac23d05c0467d9a3b49ec8795ae783626c73914/gcc%2Fconfig%2Fmips%2F3000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2F3000.md?ref=2ac23d05c0467d9a3b49ec8795ae783626c73914", "patch": "@@ -0,0 +1,69 @@\n+;; DFA based pipeline description for the r3000\n+;; This is a special pipeline - this is also the default schedule and\n+;; so we need to schedule instructions that may not exist on the r2k/r3k.\n+\n+;; Generic processor description that assumes that the only latencies are for\n+;; hazards or delay slots, otherwise everything is assumed to issue and execute\n+;; in one cycle.\n+(define_automaton \"r3k\")\n+\n+(define_cpu_unit \"r3k_alu\" \"r3k\")\n+\n+(define_insn_reservation \"r3k_generic_alu\" 1\n+  (and (eq_attr \"cpu\" \"r3000\")\n+       (eq_attr \"type\" \"unknown,prefetch,prefetchx,condmove,mthilo,const,arith,shift,slt,clz,trap,fmove,fadd,fmadd,fabs,fneg,fcvt,fsqrt,frsqrt,multi,nop\"))\n+  \"r3k_alu\")\n+\n+(define_insn_reservation \"r3k_load_alu\" 2\n+  (and (eq_attr \"cpu\" \"r3000\")\n+       (eq_attr \"type\" \"load, fpload, fpidxload, xfer\"))\n+  \"r3k_alu*2\")\n+\n+(define_insn_reservation \"r3k_call_alu\" 2\n+  (and (eq_attr \"cpu\" \"r3000\")\n+       (eq_attr \"type\" \"branch,jump,call\"))\n+  \"r3k_alu*2\")\n+\n+(define_insn_reservation \"r3k_hilo_alu\" 3\n+  (and (eq_attr \"cpu\" \"r3000\")\n+       (eq_attr \"type\" \"mfhilo\"))\n+  \"r3k_alu*3\")\n+\n+(define_insn_reservation \"r3k_fcmp_alu\" 2\n+  (and (eq_attr \"cpu\" \"r3000\")\n+       (eq_attr \"type\" \"fcmp, fadd\"))\n+  \"r3k_alu*2\")\n+\n+(define_insn_reservation \"r3k_imul_alu\" 12\n+  (and (eq_attr \"cpu\" \"r3000\")\n+       (eq_attr \"type\" \"imul, imadd\"))\n+  \"r3k_alu*12\")\n+\n+(define_insn_reservation \"r3k_idiv_alu\" 35\n+  (and (eq_attr \"cpu\" \"r3000\")\n+       (eq_attr \"type\" \"idiv\"))\n+  \"r3k_alu*35\")\n+\n+(define_insn_reservation \"r3k_fmul_single_alu\" 4\n+  (and (eq_attr \"cpu\" \"r3000\")\n+       (and (eq_attr \"type\" \"fmul\")\n+\t    (eq_attr \"mode\" \"SF\")))\n+  \"r3k_alu*4\")\n+\n+(define_insn_reservation \"r3k_fmul_double_alu\" 5\n+  (and (eq_attr \"cpu\" \"r3000\")\n+       (and (eq_attr \"type\" \"fmul\")\n+\t    (eq_attr \"mode\" \"DF\")))\n+  \"r3k_alu*5\")\n+\n+(define_insn_reservation \"r3k_fdiv_single_alu\" 12\n+  (and (eq_attr \"cpu\" \"r3000\")\n+       (and (eq_attr \"type\" \"fdiv\")\n+\t    (eq_attr \"mode\" \"SF\")))\n+  \"r3k_alu*12\")\n+\n+(define_insn_reservation \"r3k_fdiv_double_alu\" 19\n+  (and (eq_attr \"cpu\" \"r3000\")\n+       (and (eq_attr \"type\" \"fdiv\")\n+\t    (eq_attr \"mode\" \"DF\")))\n+  \"r3k_alu*19\")"}, {"sha": "f481c4ba338cc261eed3aa82061ca8277ea196c8", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ac23d05c0467d9a3b49ec8795ae783626c73914/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ac23d05c0467d9a3b49ec8795ae783626c73914/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=2ac23d05c0467d9a3b49ec8795ae783626c73914", "patch": "@@ -9930,6 +9930,7 @@ mips_use_dfa_pipeline_interface (void)\n {\n   switch (mips_tune)\n     {\n+    case PROCESSOR_R3000:\n     case PROCESSOR_R4130:\n     case PROCESSOR_R5400:\n     case PROCESSOR_R5500:"}, {"sha": "3dfb98dc005d482a9e1c83a35d35b65355b5c716", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 21, "deletions": 20, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ac23d05c0467d9a3b49ec8795ae783626c73914/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ac23d05c0467d9a3b49ec8795ae783626c73914/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=2ac23d05c0467d9a3b49ec8795ae783626c73914", "patch": "@@ -326,12 +326,12 @@\n \n (define_function_unit \"memory\" 1 0\n   (and (eq_attr \"type\" \"load,fpload,fpidxload\")\n-       (eq_attr \"cpu\" \"!r3000,r3900,r4600,r4650,r4100,r4120,r4300,r5000\"))\n+       (eq_attr \"cpu\" \"r3900,r4600,r4650,r4100,r4120,r4300,r5000\"))\n   3 0)\n \n (define_function_unit \"memory\" 1 0\n   (and (eq_attr \"type\" \"load,fpload,fpidxload\")\n-       (eq_attr \"cpu\" \"r3000,r3900,r4600,r4650,r4100,r4120,r4300,r5000\"))\n+       (eq_attr \"cpu\" \"r3900,r4600,r4650,r4100,r4120,r4300,r5000\"))\n   2 0)\n \n (define_function_unit \"memory\"   1 0\n@@ -346,7 +346,7 @@\n \n (define_function_unit \"imuldiv\"  1 0\n   (and (eq_attr \"type\" \"imul,imadd\")\n-       (eq_attr \"cpu\" \"!r3000,r3900,r4000,r4600,r4650,r4100,r4120,r4300,r5000\"))\n+       (eq_attr \"cpu\" \"r3900,r4000,r4600,r4650,r4100,r4120,r4300,r5000\"))\n   17 17)\n \n ;; On them mips16, we want to stronly discourage a mult from appearing\n@@ -360,7 +360,7 @@\n   1 5)\n \n (define_function_unit \"imuldiv\"  1 0\n-  (and (eq_attr \"type\" \"imul,imadd\") (eq_attr \"cpu\" \"r3000,r3900\"))\n+  (and (eq_attr \"type\" \"imul,imadd\") (eq_attr \"cpu\" \"r3900\"))\n   12 12)\n \n (define_function_unit \"imuldiv\"  1 0\n@@ -398,11 +398,11 @@\n \n (define_function_unit \"imuldiv\"  1 0\n   (and (eq_attr \"type\" \"idiv\")\n-       (eq_attr \"cpu\" \"!r3000,r3900,r4000,r4600,r4650,r4100,r4120,r4300,r5000\"))\n+       (eq_attr \"cpu\" \"r3900,r4000,r4600,r4650,r4100,r4120,r4300,r5000\"))\n   38 38)\n \n (define_function_unit \"imuldiv\"  1 0\n-  (and (eq_attr \"type\" \"idiv\") (eq_attr \"cpu\" \"r3000,r3900\"))\n+  (and (eq_attr \"type\" \"idiv\") (eq_attr \"cpu\" \"r3900\"))\n   35 35)\n \n (define_function_unit \"imuldiv\"  1 0\n@@ -455,23 +455,23 @@\n ;; instructions to be processed in the \"imuldiv\" unit.\n \n (define_function_unit \"adder\" 1 1\n-  (and (eq_attr \"type\" \"fcmp\") (eq_attr \"cpu\" \"!r3000,r3900,r6000,r4300,r5000\"))\n+  (and (eq_attr \"type\" \"fcmp\") (eq_attr \"cpu\" \"r3900,r6000,r4300,r5000\"))\n   3 0)\n \n (define_function_unit \"adder\" 1 1\n-  (and (eq_attr \"type\" \"fcmp\") (eq_attr \"cpu\" \"r3000,r3900,r6000\"))\n+  (and (eq_attr \"type\" \"fcmp\") (eq_attr \"cpu\" \"r3900,r6000\"))\n   2 0)\n \n (define_function_unit \"adder\" 1 1\n   (and (eq_attr \"type\" \"fcmp\") (eq_attr \"cpu\" \"r5000\"))\n   1 0)\n \n (define_function_unit \"adder\" 1 1\n-  (and (eq_attr \"type\" \"fadd\") (eq_attr \"cpu\" \"!r3000,r3900,r6000,r4300\"))\n+  (and (eq_attr \"type\" \"fadd\") (eq_attr \"cpu\" \"r3900,r6000,r4300\"))\n   4 0)\n \n (define_function_unit \"adder\" 1 1\n-  (and (eq_attr \"type\" \"fadd\") (eq_attr \"cpu\" \"r3000,r3900\"))\n+  (and (eq_attr \"type\" \"fadd\") (eq_attr \"cpu\" \"r3900\"))\n   2 0)\n \n (define_function_unit \"adder\" 1 1\n@@ -480,22 +480,22 @@\n \n (define_function_unit \"adder\" 1 1\n   (and (eq_attr \"type\" \"fabs,fneg,fmove\")\n-       (eq_attr \"cpu\" \"!r3000,r3900,r4600,r4650,r4300,r5000\"))\n+       (eq_attr \"cpu\" \"r3900,r4600,r4650,r4300,r5000\"))\n   2 0)\n \n (define_function_unit \"adder\" 1 1\n-  (and (eq_attr \"type\" \"fabs,fneg,fmove\") (eq_attr \"cpu\" \"r3000,r3900,r4600,r4650,r5000\"))\n+  (and (eq_attr \"type\" \"fabs,fneg,fmove\") (eq_attr \"cpu\" \"r3900,r4600,r4650,r5000\"))\n   1 0)\n \n (define_function_unit \"mult\" 1 1\n   (and (eq_attr \"type\" \"fmul\")\n        (and (eq_attr \"mode\" \"SF\")\n-\t    (eq_attr \"cpu\" \"!r3000,r3900,r6000,r4600,r4650,r4300,r5000\")))\n+\t    (eq_attr \"cpu\" \"r3900,r6000,r4600,r4650,r4300,r5000\")))\n   7 0)\n \n (define_function_unit \"mult\" 1 1\n   (and (eq_attr \"type\" \"fmul\")\n-       (and (eq_attr \"mode\" \"SF\") (eq_attr \"cpu\" \"r3000,r3900,r5000\")))\n+       (and (eq_attr \"mode\" \"SF\") (eq_attr \"cpu\" \"r3900,r5000\")))\n   4 0)\n \n (define_function_unit \"mult\" 1 1\n@@ -510,12 +510,12 @@\n \n (define_function_unit \"mult\" 1 1\n   (and (eq_attr \"type\" \"fmul\")\n-       (and (eq_attr \"mode\" \"DF\") (eq_attr \"cpu\" \"!r3000,r3900,r6000,r4300,r5000\")))\n+       (and (eq_attr \"mode\" \"DF\") (eq_attr \"cpu\" \"r3900,r6000,r4300,r5000\")))\n   8 0)\n \n (define_function_unit \"mult\" 1 1\n   (and (eq_attr \"type\" \"fmul\")\n-       (and (eq_attr \"mode\" \"DF\") (eq_attr \"cpu\" \"r3000,r3900,r5000\")))\n+       (and (eq_attr \"mode\" \"DF\") (eq_attr \"cpu\" \"r3900,r5000\")))\n   5 0)\n \n (define_function_unit \"mult\" 1 1\n@@ -526,12 +526,12 @@\n (define_function_unit \"divide\" 1 1\n   (and (eq_attr \"type\" \"fdiv\")\n        (and (eq_attr \"mode\" \"SF\")\n-\t    (eq_attr \"cpu\" \"!r3000,r3900,r6000,r4600,r4650,r4300,r5000\")))\n+\t    (eq_attr \"cpu\" \"r3900,r6000,r4600,r4650,r4300,r5000\")))\n   23 0)\n \n (define_function_unit \"divide\" 1 1\n   (and (eq_attr \"type\" \"fdiv\")\n-       (and (eq_attr \"mode\" \"SF\") (eq_attr \"cpu\" \"r3000,r3900\")))\n+       (and (eq_attr \"mode\" \"SF\") (eq_attr \"cpu\" \"r3900\")))\n   12 0)\n \n (define_function_unit \"divide\" 1 1\n@@ -552,12 +552,12 @@\n (define_function_unit \"divide\" 1 1\n   (and (eq_attr \"type\" \"fdiv\")\n        (and (eq_attr \"mode\" \"DF\")\n-\t    (eq_attr \"cpu\" \"!r3000,r3900,r6000,r4600,r4650,r4300\")))\n+\t    (eq_attr \"cpu\" \"r3900,r6000,r4600,r4650,r4300\")))\n   36 0)\n \n (define_function_unit \"divide\" 1 1\n   (and (eq_attr \"type\" \"fdiv\")\n-       (and (eq_attr \"mode\" \"DF\") (eq_attr \"cpu\" \"r3000,r3900\")))\n+       (and (eq_attr \"mode\" \"DF\") (eq_attr \"cpu\" \"r3900\")))\n   19 0)\n \n (define_function_unit \"divide\" 1 1\n@@ -631,6 +631,7 @@\n \f\n ;; Include scheduling descriptions.\n \n+(include \"3000.md\")\n (include \"4130.md\")\n (include \"5400.md\")\n (include \"5500.md\")"}]}