{"sha": "40f2165e2de6ad91cd026f154abc32f1be456bd7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDBmMjE2NWUyZGU2YWQ5MWNkMDI2ZjE1NGFiYzMyZjFiZTQ1NmJkNw==", "commit": {"author": {"name": "Tobias Schl\u00fcter", "email": "tobias.schlueter@physik.uni-muenchen.de", "date": "2004-12-08T12:27:54Z"}, "committer": {"name": "Tobias Schl\u00fcter", "email": "tobi@gcc.gnu.org", "date": "2004-12-08T12:27:54Z"}, "message": "resolve.c (resolve_code): Impose correct restrictions on assigned variable.\n\nfortran/\n* resolve.c (resolve_code): Impose correct restrictions on\nassigned variable.\n\ntestsuite/\n* gfortran.dg/assign_1.f90: New test.\n\nFrom-SVN: r91898", "tree": {"sha": "951a9de75e76aabaafa96a1b09a9545d635165cf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/951a9de75e76aabaafa96a1b09a9545d635165cf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/40f2165e2de6ad91cd026f154abc32f1be456bd7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40f2165e2de6ad91cd026f154abc32f1be456bd7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/40f2165e2de6ad91cd026f154abc32f1be456bd7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40f2165e2de6ad91cd026f154abc32f1be456bd7/comments", "author": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "180684ebb290ed587f4727408ebcb72522428a27", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/180684ebb290ed587f4727408ebcb72522428a27", "html_url": "https://github.com/Rust-GCC/gccrs/commit/180684ebb290ed587f4727408ebcb72522428a27"}], "stats": {"total": 27, "additions": 24, "deletions": 3}, "files": [{"sha": "96c67b1fcea0d68065d872ea6ab5ae32e59ef515", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/40f2165e2de6ad91cd026f154abc32f1be456bd7/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/40f2165e2de6ad91cd026f154abc32f1be456bd7/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=40f2165e2de6ad91cd026f154abc32f1be456bd7", "patch": "@@ -1,3 +1,8 @@\n+2004-12-08  Tobias Schlueter  <tobias.schlueter@physik.uni-muenchen.de>\n+\n+\t* resolve.c (resolve_code): Impose correct restrictions on\n+\tassigned variable.\n+\n 2004-12-02  Steven G. Kargl  <kargls@comcast.net>\n \tPaul Brook  <paul@codesourcery.com>\n "}, {"sha": "ecc3a3520aefa1d7522cbd3929bd54cce308dcb5", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/40f2165e2de6ad91cd026f154abc32f1be456bd7/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/40f2165e2de6ad91cd026f154abc32f1be456bd7/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=40f2165e2de6ad91cd026f154abc32f1be456bd7", "patch": "@@ -3678,9 +3678,14 @@ resolve_code (gfc_code * code, gfc_namespace * ns)\n           if (code->label->defined == ST_LABEL_UNKNOWN)\n             gfc_error (\"Label %d referenced at %L is never defined\",\n                        code->label->value, &code->label->where);\n-          if (t == SUCCESS && code->expr->ts.type != BT_INTEGER)\n-\t    gfc_error (\"ASSIGN statement at %L requires an INTEGER \"\n-\t\t       \"variable\", &code->expr->where);\n+          if (t == SUCCESS\n+\t      && (code->expr->expr_type != EXPR_VARIABLE\n+\t\t  || code->expr->symtree->n.sym->ts.type != BT_INTEGER\n+\t\t  || code->expr->symtree->n.sym->ts.kind \n+\t\t        != gfc_default_integer_kind\n+\t\t  || code->expr->symtree->n.sym->as != NULL))\n+\t    gfc_error (\"ASSIGN statement at %L requires a scalar \"\n+\t\t       \"default INTEGER variable\", &code->expr->where);\n \t  break;\n \n \tcase EXEC_POINTER_ASSIGN:"}, {"sha": "81d2aa2d65408f14312356427c508f8bb5f74df8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/40f2165e2de6ad91cd026f154abc32f1be456bd7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/40f2165e2de6ad91cd026f154abc32f1be456bd7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=40f2165e2de6ad91cd026f154abc32f1be456bd7", "patch": "@@ -1,3 +1,7 @@\n+2004-12-08  Tobias Schlueter  <tobias.schlueter@physik.uni-muenchen.de>\n+\n+\t* gfortran.dg/assign_1.f90: New test.\n+\n 2004-12-08  Nick Clifton  <nickc@redhat.com>\n \n \t* gcc.target/xstormy16/bss_below100: New directory containing tests."}, {"sha": "ccfe866a8bc4d0ec12e130da256cecfc83bc20f6", "filename": "gcc/testsuite/gfortran.dg/assign_1.f90", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/40f2165e2de6ad91cd026f154abc32f1be456bd7/gcc%2Ftestsuite%2Fgfortran.dg%2Fassign_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/40f2165e2de6ad91cd026f154abc32f1be456bd7/gcc%2Ftestsuite%2Fgfortran.dg%2Fassign_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fassign_1.f90?ref=40f2165e2de6ad91cd026f154abc32f1be456bd7", "patch": "@@ -0,0 +1,7 @@\n+! { dg-do compile }\n+! Option passed to avoid excess errors from obsolete warning\n+! { dg-options \"-w\" }\n+      integer*4 i(5)\n+      assign 1000 to i   ! { dg-error \"scalar default INTEGER\" }\n+ 1000 continue\n+      end"}]}