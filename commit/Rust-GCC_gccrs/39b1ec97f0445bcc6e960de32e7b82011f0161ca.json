{"sha": "39b1ec97f0445bcc6e960de32e7b82011f0161ca", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzliMWVjOTdmMDQ0NWJjYzZlOTYwZGUzMmU3YjgyMDExZjAxNjFjYQ==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@kss-loka.si", "date": "2006-04-14T05:01:18Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2006-04-14T05:01:18Z"}, "message": "re PR middle-end/27134 (ICE with floor and -ffast-math)\n\n\tPR middle-end/27134\n\t* builtins.c (expand_builtin_int_roundingfn): Use expand_normal()\n\tto expand fallback builtin function call.\n\ntestsuite/ChangeLog:\n\n        PR middle-end/27134\n        * gcc.dg/pr27314.c: New test.\n\nFrom-SVN: r112949", "tree": {"sha": "921e8632d08bdb1418b18a6c4687b775cf30868e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/921e8632d08bdb1418b18a6c4687b775cf30868e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/39b1ec97f0445bcc6e960de32e7b82011f0161ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/39b1ec97f0445bcc6e960de32e7b82011f0161ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/39b1ec97f0445bcc6e960de32e7b82011f0161ca", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/39b1ec97f0445bcc6e960de32e7b82011f0161ca/comments", "author": null, "committer": null, "parents": [{"sha": "880864cfc6ea6e4ba41a5404ba8e4cc133a2a861", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/880864cfc6ea6e4ba41a5404ba8e4cc133a2a861", "html_url": "https://github.com/Rust-GCC/gccrs/commit/880864cfc6ea6e4ba41a5404ba8e4cc133a2a861"}], "stats": {"total": 27, "additions": 26, "deletions": 1}, "files": [{"sha": "f8fdd81962a62d6f291d1a3892011d366d121a86", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39b1ec97f0445bcc6e960de32e7b82011f0161ca/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39b1ec97f0445bcc6e960de32e7b82011f0161ca/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=39b1ec97f0445bcc6e960de32e7b82011f0161ca", "patch": "@@ -1,3 +1,9 @@\n+2005-04-13  Uros Bizjak  <uros@kss-loka.si>\n+\n+\tPR middle-end/27134\n+\t* builtins.c (expand_builtin_int_roundingfn): Use expand_normal()\n+\tto expand fallback builtin function call.\n+\n 2006-04-14  Alan Modra  <amodra@bigpond.net.au>\n \n \tPR middle-end/27095"}, {"sha": "836f965443287d3fbead3778d992c5f946685701", "filename": "gcc/builtins.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39b1ec97f0445bcc6e960de32e7b82011f0161ca/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39b1ec97f0445bcc6e960de32e7b82011f0161ca/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=39b1ec97f0445bcc6e960de32e7b82011f0161ca", "patch": "@@ -2312,7 +2312,7 @@ expand_builtin_int_roundingfn (tree exp, rtx target, rtx subtarget)\n   gcc_assert (fallback_fndecl != NULL_TREE);\n   exp = build_function_call_expr (fallback_fndecl, arglist);\n \n-  tmp = expand_builtin_mathfn (exp, NULL_RTX, NULL_RTX);\n+  tmp = expand_normal (exp);\n \n   /* Truncate the result of floating point optab to integer\n      via expand_fix ().  */"}, {"sha": "b19e82f66ce0590d13355420a06a9c37168b339c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39b1ec97f0445bcc6e960de32e7b82011f0161ca/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39b1ec97f0445bcc6e960de32e7b82011f0161ca/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=39b1ec97f0445bcc6e960de32e7b82011f0161ca", "patch": "@@ -1,3 +1,8 @@\n+2006-04-13  Uros Bizjak  <uros@kss-loka.si>\n+\n+\tPR middle-end/27134\n+\t* gcc.dg/pr27314.c: New test.\n+\n 2006-04-13  Richard Henderson  <rth@redhat.com>\n \n \t* g++.dg/gomp/block-0.C: Update expected matches."}, {"sha": "d99be5eb805f42d64da1b53e3a67e95304a77b34", "filename": "gcc/testsuite/gcc.dg/pr27314.c", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39b1ec97f0445bcc6e960de32e7b82011f0161ca/gcc%2Ftestsuite%2Fgcc.dg%2Fpr27314.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39b1ec97f0445bcc6e960de32e7b82011f0161ca/gcc%2Ftestsuite%2Fgcc.dg%2Fpr27314.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr27314.c?ref=39b1ec97f0445bcc6e960de32e7b82011f0161ca", "patch": "@@ -0,0 +1,14 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O1 -ffast-math\" } */\n+\n+extern double floor (double);\n+\n+inline int bar (double x)\n+{\n+  return (int) floor (x);\n+}\n+\n+int foo (int i)\n+{\n+  return bar (i);\n+}"}]}