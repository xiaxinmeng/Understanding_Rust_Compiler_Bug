{"sha": "4f44e38ac7b2d2bb146e512e71dd698e3c552e9e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGY0NGUzOGFjN2IyZDJiYjE0NmU1MTJlNzFkZDY5OGUzYzU1MmU5ZQ==", "commit": {"author": {"name": "Tristan Gingold", "email": "gingold@adacore.com", "date": "2011-11-03T11:47:12Z"}, "committer": {"name": "Tristan Gingold", "email": "gingold@gcc.gnu.org", "date": "2011-11-03T11:47:12Z"}, "message": "collect2.c (main): Add support of -f (response file) on AIX.\n\n2011-11-03  Tristan Gingold  <gingold@adacore.com>\n\n\t* collect2.c (main): Add support of -f (response file) on AIX.\n\nFrom-SVN: r180821", "tree": {"sha": "48a9c36cf383b31a8cce801cf84ff82924f28b0c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/48a9c36cf383b31a8cce801cf84ff82924f28b0c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4f44e38ac7b2d2bb146e512e71dd698e3c552e9e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f44e38ac7b2d2bb146e512e71dd698e3c552e9e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4f44e38ac7b2d2bb146e512e71dd698e3c552e9e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f44e38ac7b2d2bb146e512e71dd698e3c552e9e/comments", "author": {"login": "gingold-adacore", "id": 16334725, "node_id": "MDQ6VXNlcjE2MzM0NzI1", "avatar_url": "https://avatars.githubusercontent.com/u/16334725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gingold-adacore", "html_url": "https://github.com/gingold-adacore", "followers_url": "https://api.github.com/users/gingold-adacore/followers", "following_url": "https://api.github.com/users/gingold-adacore/following{/other_user}", "gists_url": "https://api.github.com/users/gingold-adacore/gists{/gist_id}", "starred_url": "https://api.github.com/users/gingold-adacore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gingold-adacore/subscriptions", "organizations_url": "https://api.github.com/users/gingold-adacore/orgs", "repos_url": "https://api.github.com/users/gingold-adacore/repos", "events_url": "https://api.github.com/users/gingold-adacore/events{/privacy}", "received_events_url": "https://api.github.com/users/gingold-adacore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "036da8303f6762d8f0a79a922a7c5979b798f724", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/036da8303f6762d8f0a79a922a7c5979b798f724", "html_url": "https://github.com/Rust-GCC/gccrs/commit/036da8303f6762d8f0a79a922a7c5979b798f724"}], "stats": {"total": 56, "additions": 56, "deletions": 0}, "files": [{"sha": "5fbc4bd00417ab3b3d3ae7021f4e7ffcffd9acbe", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f44e38ac7b2d2bb146e512e71dd698e3c552e9e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f44e38ac7b2d2bb146e512e71dd698e3c552e9e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4f44e38ac7b2d2bb146e512e71dd698e3c552e9e", "patch": "@@ -1,3 +1,7 @@\n+2011-11-03  Tristan Gingold  <gingold@adacore.com>\n+\n+\t* collect2.c (main): Add support of -f (response file) on AIX.\n+\n 2011-11-03  Ira Rosen  <ira.rosen@linaro.org>\n \n \tPR tree-optimization/50912"}, {"sha": "9240bc8684bf3ba432a9c3127be286687272eb79", "filename": "gcc/collect2.c", "status": "modified", "additions": 52, "deletions": 0, "changes": 52, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f44e38ac7b2d2bb146e512e71dd698e3c552e9e/gcc%2Fcollect2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f44e38ac7b2d2bb146e512e71dd698e3c552e9e/gcc%2Fcollect2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcollect2.c?ref=4f44e38ac7b2d2bb146e512e71dd698e3c552e9e", "patch": "@@ -1091,6 +1091,7 @@ main (int argc, char **argv)\n   const char **ld2;\n   char **object_lst;\n   const char **object;\n+  int object_nbr = argc;\n   int first_file;\n   int num_c_args;\n   char **old_argv;\n@@ -1440,6 +1441,57 @@ main (int argc, char **argv)\n \t\t\t \"configuration\");\n #endif\n \t\t}\n+#ifdef TARGET_AIX_VERSION\n+\t      else\n+\t\t{\n+\t\t  /* File containing a list of input files to process.  */\n+\n+\t\t  FILE *stream;\n+                  char buf[MAXPATHLEN + 2];\n+\t\t  /* Number of additionnal object files.  */\n+\t\t  int add_nbr = 0;\n+\t\t  /* Maximum of additionnal object files before vector\n+\t\t     expansion.  */\n+\t\t  int add_max = 0;\n+\t\t  const char *list_filename = arg + 2;\n+\n+\t\t  /* Accept -fFILENAME and -f FILENAME.  */\n+\t\t  if (*list_filename == '\\0' && argv[1])\n+\t\t    {\n+\t\t      ++argv;\n+\t\t      list_filename = *argv;\n+\t\t      *ld1++ = *ld2++ = *argv;\n+\t\t    }\n+\n+\t\t  stream = fopen (list_filename, \"r\");\n+\t\t  if (stream == NULL)\n+\t\t    fatal_error (\"can't open %s: %m\", list_filename);\n+\n+\t\t  while (fgets (buf, sizeof buf, stream) != NULL)\n+\t\t    {\n+\t\t      /* Remove end of line.  */\n+\t\t      int len = strlen (buf);\n+\t\t      if (len >= 1 && buf[len - 1] =='\\n')\n+\t\t\tbuf[len - 1] = '\\0';\n+\n+\t\t      /* Put on object vector.\n+\t\t\t Note: we only expanse vector here, so we must keep\n+\t\t\t extra space for remaining arguments.  */\n+\t\t      if (add_nbr >= add_max)\n+\t\t\t{\n+\t\t\t  int pos = object - (const char **)object_lst;\n+\t\t\t  add_max = (add_max == 0) ? 16 : add_max * 2;\n+\t\t\t  object_lst = XRESIZEVEC (char *, object_lst,\n+                                                   object_nbr + add_max);\n+\t\t\t  object = (const char **) object_lst + pos;\n+\t\t\t  object_nbr += add_max;\n+\t\t\t}\n+\t\t      *object++ = xstrdup (buf);\n+\t\t      add_nbr++;\n+\t\t    }\n+\t\t  fclose (stream);\n+\t\t}\n+#endif\n               break;\n \n \t    case 'l':"}]}