{"sha": "1338118928aa7368a01be65e40a95e7c4ba270d0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTMzODExODkyOGFhNzM2OGEwMWJlNjVlNDBhOTVlN2M0YmEyNzBkMA==", "commit": {"author": {"name": "Charles Baylis", "email": "charles.baylis@linaro.org", "date": "2014-06-18T15:42:53Z"}, "committer": {"name": "Charles Baylis", "email": "cbaylis@gcc.gnu.org", "date": "2014-06-18T15:42:53Z"}, "message": "bpabi.S (__aeabi_ldivmod): Perform division using __udivmoddi4, and fixups for negative operands.\n\n2014-06-18  Charles Baylis  <charles.baylis@linaro.org>\n\n\t* config/arm/bpabi.S (__aeabi_ldivmod): Perform division using\n\t__udivmoddi4, and fixups for negative operands.\n\nFrom-SVN: r211794", "tree": {"sha": "c02777dfb8b43a15090da4da1005bdf6493100fc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c02777dfb8b43a15090da4da1005bdf6493100fc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1338118928aa7368a01be65e40a95e7c4ba270d0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1338118928aa7368a01be65e40a95e7c4ba270d0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1338118928aa7368a01be65e40a95e7c4ba270d0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1338118928aa7368a01be65e40a95e7c4ba270d0/comments", "author": null, "committer": null, "parents": [{"sha": "f493def153699c9bc2c90c1d636cbef490f5b70f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f493def153699c9bc2c90c1d636cbef490f5b70f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f493def153699c9bc2c90c1d636cbef490f5b70f"}], "stats": {"total": 46, "additions": 45, "deletions": 1}, "files": [{"sha": "3d46032ce32f0f9d866f58b94423bf829db1f6a7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1338118928aa7368a01be65e40a95e7c4ba270d0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1338118928aa7368a01be65e40a95e7c4ba270d0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1338118928aa7368a01be65e40a95e7c4ba270d0", "patch": "@@ -1,3 +1,8 @@\n+2014-06-18  Charles Baylis  <charles.baylis@linaro.org>\n+\n+\t* config/arm/bpabi.S (__aeabi_ldivmod): Perform division using\n+\t__udivmoddi4, and fixups for negative operands.\n+\n 2014-06-18  Charles Baylis  <charles.baylis@linaro.org>\n \n \t* config/arm/bpabi.S (__aeabi_ldivmod): Optimise stack manipulation."}, {"sha": "c0441673029fe7247c14bacf65e3141cc2022113", "filename": "libgcc/config/arm/bpabi.S", "status": "modified", "additions": 40, "deletions": 1, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1338118928aa7368a01be65e40a95e7c4ba270d0/libgcc%2Fconfig%2Farm%2Fbpabi.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1338118928aa7368a01be65e40a95e7c4ba270d0/libgcc%2Fconfig%2Farm%2Fbpabi.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Farm%2Fbpabi.S?ref=1338118928aa7368a01be65e40a95e7c4ba270d0", "patch": "@@ -175,10 +175,49 @@ ARM_FUNC_START aeabi_ldivmod\n \ttest_div_by_zero\tsigned\n \n \tpush_for_divide\t__aeabi_ldivmod\n+\tcmp\txxh, #0\n+\tblt\t1f\n+\tcmp\tyyh, #0\n+\tblt\t2f\n+\t/* arguments in (r0:r1), (r2:r3) and *sp */\n+\tbl\tSYM(__udivmoddi4) __PLT__\n+\tpop_for_divide\n+\tRET\n+\n+1: /* xxh:xxl is negative */\n+\tnegs\txxl, xxl\n+\tsbc\txxh, xxh, xxh, lsl #1\t/* Thumb-2 has no RSC, so use X - 2X */\n+\tcmp\tyyh, #0\n+\tblt\t3f\n+\t/* arguments in (r0:r1), (r2:r3) and *sp */\n+\tbl\tSYM(__udivmoddi4) __PLT__\n+\tpop_for_divide\n+\tnegs\txxl, xxl\n+\tsbc\txxh, xxh, xxh, lsl #1\t/* Thumb-2 has no RSC, so use X - 2X */\n+\tnegs\tyyl, yyl\n+\tsbc\tyyh, yyh, yyh, lsl #1\t/* Thumb-2 has no RSC, so use X - 2X */\n+\tRET\n+\n+2: /* only yyh:yyl is negative */\n+\tnegs\tyyl, yyl\n+\tsbc\tyyh, yyh, yyh, lsl #1\t/* Thumb-2 has no RSC, so use X - 2X */\n+\t/* arguments in (r0:r1), (r2:r3) and *sp */\n+\tbl\tSYM(__udivmoddi4) __PLT__\n+\tpop_for_divide\n+\tnegs\txxl, xxl\n+\tsbc\txxh, xxh, xxh, lsl #1\t/* Thumb-2 has no RSC, so use X - 2X */\n+\tRET\n+\n+3: /* both xxh:xxl and yyh:yyl are negative */\n+\tnegs\tyyl, yyl\n+\tsbc\tyyh, yyh, yyh, lsl #1\t/* Thumb-2 has no RSC, so use X - 2X */\n \t/* arguments in (r0:r1), (r2:r3) and *sp */\n-\tbl\tSYM(__gnu_ldivmod_helper) __PLT__\n+\tbl\tSYM(__udivmoddi4) __PLT__\n \tpop_for_divide\n+\tnegs\tyyl, yyl\n+\tsbc\tyyh, yyh, yyh, lsl #1\t/* Thumb-2 has no RSC, so use X - 2X */\n \tRET\n+\n \tcfi_end\tLSYM(Lend_aeabi_ldivmod)\n \t\n #endif /* L_aeabi_ldivmod */"}]}