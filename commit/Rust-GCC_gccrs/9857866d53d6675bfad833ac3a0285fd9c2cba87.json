{"sha": "9857866d53d6675bfad833ac3a0285fd9c2cba87", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTg1Nzg2NmQ1M2Q2Njc1YmZhZDgzM2FjM2EwMjg1ZmQ5YzJjYmE4Nw==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2005-05-07T02:29:34Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2005-05-07T02:29:34Z"}, "message": "decl.c (wrapup_globals_for_namespace): Use VEC instead of VARRAY.\n\n\t* decl.c (wrapup_globals_for_namespace): Use VEC instead of\n\tVARRAY.\n\t* name-lookup.c (add_decl_to_level, begin_scope): Likewise.\n\t* name-lookup.h (cp_binding_level): Change the type of\n\tstatic_decls to VEC(tree,gc)*.\n\nFrom-SVN: r99346", "tree": {"sha": "9e44532889ee3de07440e82a17c4a52c51902938", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9e44532889ee3de07440e82a17c4a52c51902938"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9857866d53d6675bfad833ac3a0285fd9c2cba87", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9857866d53d6675bfad833ac3a0285fd9c2cba87", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9857866d53d6675bfad833ac3a0285fd9c2cba87", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9857866d53d6675bfad833ac3a0285fd9c2cba87/comments", "author": null, "committer": null, "parents": [{"sha": "8d9e4906a8d38d856f9a020dcb6f0d7b643b854b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d9e4906a8d38d856f9a020dcb6f0d7b643b854b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d9e4906a8d38d856f9a020dcb6f0d7b643b854b"}], "stats": {"total": 28, "additions": 18, "deletions": 10}, "files": [{"sha": "5b229ef230950e1a09f8e241c7c10f539a3e2667", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9857866d53d6675bfad833ac3a0285fd9c2cba87/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9857866d53d6675bfad833ac3a0285fd9c2cba87/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=9857866d53d6675bfad833ac3a0285fd9c2cba87", "patch": "@@ -1,3 +1,11 @@\n+2005-05-07  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* decl.c (wrapup_globals_for_namespace): Use VEC instead of\n+\tVARRAY.\n+\t* name-lookup.c (add_decl_to_level, begin_scope): Likewise.\n+\t* name-lookup.h (cp_binding_level): Change the type of\n+\tstatic_decls to VEC(tree,gc)*.\n+\n 2005-05-06  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* decl2.c (spew_debug): Remove."}, {"sha": "15f74c08d3fa92992998a3d183c7ecdbc22065dc", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9857866d53d6675bfad833ac3a0285fd9c2cba87/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9857866d53d6675bfad833ac3a0285fd9c2cba87/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=9857866d53d6675bfad833ac3a0285fd9c2cba87", "patch": "@@ -786,9 +786,9 @@ int\n wrapup_globals_for_namespace (tree namespace, void* data)\n {\n   struct cp_binding_level *level = NAMESPACE_LEVEL (namespace);\n-  varray_type statics = level->static_decls;\n-  tree *vec = &VARRAY_TREE (statics, 0);\n-  int len = VARRAY_ACTIVE_SIZE (statics);\n+  VEC(tree,gc) *statics = level->static_decls;\n+  tree *vec = VEC_address (tree, statics);\n+  int len = VEC_length (tree, statics);\n   int last_time = (data != 0);\n \n   if (last_time)"}, {"sha": "0bb8888e8a3871bbb503b1723ec38233284c583d", "filename": "gcc/cp/name-lookup.c", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9857866d53d6675bfad833ac3a0285fd9c2cba87/gcc%2Fcp%2Fname-lookup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9857866d53d6675bfad833ac3a0285fd9c2cba87/gcc%2Fcp%2Fname-lookup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fname-lookup.c?ref=9857866d53d6675bfad833ac3a0285fd9c2cba87", "patch": "@@ -546,7 +546,7 @@ add_decl_to_level (tree decl, cxx_scope *b)\n \t     && (TREE_STATIC (decl) || DECL_EXTERNAL (decl)))\n \t    || (TREE_CODE (decl) == FUNCTION_DECL\n \t\t&& (!TREE_PUBLIC (decl) || DECL_DECLARED_INLINE_P (decl))))\n-\t  VARRAY_PUSH_TREE (b->static_decls, decl);\n+\t  VEC_safe_push (tree, gc, b->static_decls, decl);\n     }\n }\n \n@@ -1264,11 +1264,11 @@ begin_scope (scope_kind kind, tree entity)\n \n     case sk_namespace:\n       NAMESPACE_LEVEL (entity) = scope;\n-      VARRAY_TREE_INIT (scope->static_decls,\n-                        DECL_NAME (entity) == std_identifier\n-                        || DECL_NAME (entity) == global_scope_name\n-                        ? 200 : 10,\n-                        \"Static declarations\");\n+      scope->static_decls =\n+\tVEC_alloc (tree, gc,\n+\t\t   DECL_NAME (entity) == std_identifier\n+\t\t   || DECL_NAME (entity) == global_scope_name\n+\t\t   ? 200 : 10);\n       break;\n \n     default:"}, {"sha": "19bcec0eba60d513b73d6ad61bbacf43ae989065", "filename": "gcc/cp/name-lookup.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9857866d53d6675bfad833ac3a0285fd9c2cba87/gcc%2Fcp%2Fname-lookup.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9857866d53d6675bfad833ac3a0285fd9c2cba87/gcc%2Fcp%2Fname-lookup.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fname-lookup.h?ref=9857866d53d6675bfad833ac3a0285fd9c2cba87", "patch": "@@ -188,7 +188,7 @@ struct cp_binding_level GTY(())\n     tree namespaces;\n \n     /* An array of static functions and variables (for namespaces only) */\n-    varray_type static_decls;\n+    VEC(tree,gc) *static_decls;\n \n     /* A chain of VTABLE_DECL nodes.  */\n     tree vtables; "}]}