{"sha": "a2383b317b9d082d5d8d1661d61adc3d902efa83", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTIzODNiMzE3YjlkMDgyZDVkOGQxNjYxZDYxYWRjM2Q5MDJlZmE4Mw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-09-22T07:18:45Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-09-22T07:18:45Z"}, "message": "runtime: Reject surrogate pairs in range over string.\n\nFrom-SVN: r191638", "tree": {"sha": "49b7fd4c0e56ed9951e50dbde6a9bf580b3a380f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/49b7fd4c0e56ed9951e50dbde6a9bf580b3a380f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a2383b317b9d082d5d8d1661d61adc3d902efa83", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2383b317b9d082d5d8d1661d61adc3d902efa83", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a2383b317b9d082d5d8d1661d61adc3d902efa83", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2383b317b9d082d5d8d1661d61adc3d902efa83/comments", "author": null, "committer": null, "parents": [{"sha": "1e39ea08122ef6db924f2ae622e03d4bedde8cd5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e39ea08122ef6db924f2ae622e03d4bedde8cd5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e39ea08122ef6db924f2ae622e03d4bedde8cd5"}], "stats": {"total": 8, "additions": 8, "deletions": 0}, "files": [{"sha": "acdecb02467b7ae6c60a9ea84373f1c28cf6f306", "filename": "libgo/runtime/go-rune.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2383b317b9d082d5d8d1661d61adc3d902efa83/libgo%2Fruntime%2Fgo-rune.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2383b317b9d082d5d8d1661d61adc3d902efa83/libgo%2Fruntime%2Fgo-rune.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fruntime%2Fgo-rune.c?ref=a2383b317b9d082d5d8d1661d61adc3d902efa83", "patch": "@@ -53,6 +53,14 @@ __go_get_rune (const unsigned char *str, size_t len, int *rune)\n       *rune = (((c & 0xf) << 12)\n \t       + ((c1 & 0x3f) << 6)\n \t       + (c2 & 0x3f));\n+\n+      if (*rune >= 0xd800 && *rune < 0xe000)\n+\t{\n+\t  /* Invalid surrogate half; return replace character.  */\n+\t  *rune = 0xfffd;\n+\t  return 1;\n+\t}\n+\n       return 3;\n     }\n "}]}