{"sha": "df94599f0b58ce81db5039ab2de9a31055990811", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGY5NDU5OWYwYjU4Y2U4MWRiNTAzOWFiMmRlOWEzMTA1NTk5MDgxMQ==", "commit": {"author": {"name": "Ilya Enkovich", "email": "enkovich.gnu@gmail.com", "date": "2015-11-17T13:22:40Z"}, "committer": {"name": "Ilya Enkovich", "email": "ienkovich@gcc.gnu.org", "date": "2015-11-17T13:22:40Z"}, "message": "re PR middle-end/68134 (float64x1_t comparison ICE on aarch64-none-elf)\n\ngcc/\n\n\tPR middle-end/68134\n\t* targhooks.c (default_get_mask_mode): Filter out\n\tscalar modes returned by mode_for_vector.\n\ngcc/testsuite/\n\n\tPR middle-end/68134\n\t* gcc.dg/pr68134.c: New test.\n\nFrom-SVN: r230463", "tree": {"sha": "b862ec477cf82f2b150bdd115f077a37f35a26e7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b862ec477cf82f2b150bdd115f077a37f35a26e7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/df94599f0b58ce81db5039ab2de9a31055990811", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df94599f0b58ce81db5039ab2de9a31055990811", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df94599f0b58ce81db5039ab2de9a31055990811", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df94599f0b58ce81db5039ab2de9a31055990811/comments", "author": null, "committer": null, "parents": [{"sha": "f17b0ebc79a09122a3ed86ded43c3c0e68640314", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f17b0ebc79a09122a3ed86ded43c3c0e68640314", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f17b0ebc79a09122a3ed86ded43c3c0e68640314"}], "stats": {"total": 34, "additions": 32, "deletions": 2}, "files": [{"sha": "95439145d917bdfe2ddcc5a692e4380a60c33424", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df94599f0b58ce81db5039ab2de9a31055990811/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df94599f0b58ce81db5039ab2de9a31055990811/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=df94599f0b58ce81db5039ab2de9a31055990811", "patch": "@@ -1,3 +1,9 @@\n+2015-11-17  Ilya Enkovich  <enkovich.gnu@gmail.com>\n+\n+\tPR middle-end/68134\n+\t* targhooks.c (default_get_mask_mode): Filter out\n+\tscalar modes returned by mode_for_vector.\n+\n 2015-11-17  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \tPR target/68143"}, {"sha": "66d983bfa04bf663695ab184efbfa33fe0ac191a", "filename": "gcc/targhooks.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df94599f0b58ce81db5039ab2de9a31055990811/gcc%2Ftarghooks.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df94599f0b58ce81db5039ab2de9a31055990811/gcc%2Ftarghooks.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftarghooks.c?ref=df94599f0b58ce81db5039ab2de9a31055990811", "patch": "@@ -1093,8 +1093,8 @@ default_get_mask_mode (unsigned nunits, unsigned vector_size)\n   gcc_assert (elem_size * nunits == vector_size);\n \n   vector_mode = mode_for_vector (elem_mode, nunits);\n-  if (VECTOR_MODE_P (vector_mode)\n-      && !targetm.vector_mode_supported_p (vector_mode))\n+  if (!VECTOR_MODE_P (vector_mode)\n+      || !targetm.vector_mode_supported_p (vector_mode))\n     vector_mode = BLKmode;\n \n   return vector_mode;"}, {"sha": "b8bb337b4d1765034406583a5ce74e02c6dcc062", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df94599f0b58ce81db5039ab2de9a31055990811/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df94599f0b58ce81db5039ab2de9a31055990811/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=df94599f0b58ce81db5039ab2de9a31055990811", "patch": "@@ -1,3 +1,8 @@\n+2015-11-17  Ilya Enkovich  <enkovich.gnu@gmail.com>\n+\n+\tPR middle-end/68134\n+\t* gcc.dg/pr68134.c: New test.\n+\n 2015-11-17  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \tPR target/68143"}, {"sha": "522b4c62f9b02880ae24aeeaadd252efdfb106b7", "filename": "gcc/testsuite/gcc.dg/pr68134.c", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df94599f0b58ce81db5039ab2de9a31055990811/gcc%2Ftestsuite%2Fgcc.dg%2Fpr68134.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df94599f0b58ce81db5039ab2de9a31055990811/gcc%2Ftestsuite%2Fgcc.dg%2Fpr68134.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr68134.c?ref=df94599f0b58ce81db5039ab2de9a31055990811", "patch": "@@ -0,0 +1,19 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-std=c99\" } */\n+\n+#include <stdint.h>\n+\n+typedef double float64x1_t __attribute__ ((vector_size (8)));\n+typedef uint64_t uint64x1_t;\n+\n+void\n+foo (void)\n+{\n+  float64x1_t arg1 = (float64x1_t) 0x3fedf9d4343c7c80;\n+  float64x1_t arg2 = (float64x1_t) 0x3fcdc53742ea9c40;\n+  uint64x1_t result = (uint64x1_t) (arg1 == arg2);\n+  uint64_t got = result;\n+  uint64_t exp = 0;\n+  if (got != 0)\n+    __builtin_abort ();\n+}"}]}