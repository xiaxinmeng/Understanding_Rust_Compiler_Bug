{"sha": "f316727e5f6a4c58b63bdee9ad6be785f97f5ee7", "node_id": "C_kwDOANBUbNoAKGYzMTY3MjdlNWY2YTRjNThiNjNiZGVlOWFkNmJlNzg1Zjk3ZjVlZTc", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2021-11-19T13:43:07Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2021-11-19T13:43:07Z"}, "message": "libphobos: Increase size of defaultStackPages on OSX X86_64 targets.\n\nAs of macOS 11, libunwind now requires more stack space than 16k, so\ndefault to a larger stack size. This is only applied to X86 as the\nPAGESIZE is still 4k, however on AArch64 it is 16k.\n\nlibphobos/ChangeLog:\n\n\t* libdruntime/core/thread/fiber.d (defaultStackPages): Increase size\n\ton OSX X86_64 targets.", "tree": {"sha": "c2095f3569056e4814f59956b9d84cd94a39390e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c2095f3569056e4814f59956b9d84cd94a39390e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f316727e5f6a4c58b63bdee9ad6be785f97f5ee7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f316727e5f6a4c58b63bdee9ad6be785f97f5ee7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f316727e5f6a4c58b63bdee9ad6be785f97f5ee7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f316727e5f6a4c58b63bdee9ad6be785f97f5ee7/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d686cb0d740b0278fdbd7915f43faff14b203888", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d686cb0d740b0278fdbd7915f43faff14b203888", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d686cb0d740b0278fdbd7915f43faff14b203888"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "2f90f179edb8c80ca6110b707b15b126995e5e29", "filename": "libphobos/libdruntime/core/thread/fiber.d", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f316727e5f6a4c58b63bdee9ad6be785f97f5ee7/libphobos%2Flibdruntime%2Fcore%2Fthread%2Ffiber.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f316727e5f6a4c58b63bdee9ad6be785f97f5ee7/libphobos%2Flibdruntime%2Fcore%2Fthread%2Ffiber.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Flibdruntime%2Fcore%2Fthread%2Ffiber.d?ref=f316727e5f6a4c58b63bdee9ad6be785f97f5ee7", "patch": "@@ -595,6 +595,16 @@ class Fiber\n         // the existence of debug symbols and other conditions. Avoid causing\n         // stack overflows by defaulting to a larger stack size\n         enum defaultStackPages = 8;\n+    else version (OSX)\n+    {\n+        version (X86_64)\n+            // libunwind on macOS 11 now requires more stack space than 16k, so\n+            // default to a larger stack size. This is only applied to X86 as\n+            // the PAGESIZE is still 4k, however on AArch64 it is 16k.\n+            enum defaultStackPages = 8;\n+        else\n+            enum defaultStackPages = 4;\n+    }\n     else\n         enum defaultStackPages = 4;\n "}]}