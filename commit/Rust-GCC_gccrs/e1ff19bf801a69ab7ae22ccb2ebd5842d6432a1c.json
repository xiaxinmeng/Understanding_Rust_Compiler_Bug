{"sha": "e1ff19bf801a69ab7ae22ccb2ebd5842d6432a1c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTFmZjE5YmY4MDFhNjlhYjdhZTIyY2NiMmViZDU4NDJkNjQzMmExYw==", "commit": {"author": {"name": "Ben Elliston", "email": "bje@au.ibm.com", "date": "2009-04-09T21:26:44Z"}, "committer": {"name": "Ben Elliston", "email": "bje@gcc.gnu.org", "date": "2009-04-09T21:26:44Z"}, "message": "re PR target/36800 (va_arg for _Decimal128 on 32-bit Power mishandled in certain cases)\n\nPR target/36800\n\n\tPR target/36800\n\t* config/rs6000/rs6000.c (rs6000_gimplify_va_arg): Do not set\n\tregalign for the reg == fpr and TDmode case.\n\ntestsuite/\n\t* gcc.dg/dfp/pr36800.c: New.\n\nCo-Authored-By: Joseph Myers <joseph@codesourcery.com>\n\nFrom-SVN: r145859", "tree": {"sha": "87b59095f02d4ac52ce5908376d92070707859f8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/87b59095f02d4ac52ce5908376d92070707859f8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e1ff19bf801a69ab7ae22ccb2ebd5842d6432a1c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e1ff19bf801a69ab7ae22ccb2ebd5842d6432a1c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e1ff19bf801a69ab7ae22ccb2ebd5842d6432a1c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e1ff19bf801a69ab7ae22ccb2ebd5842d6432a1c/comments", "author": null, "committer": null, "parents": [{"sha": "52daca759f7b5871df15ae7f92e7cf3f502d94b8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/52daca759f7b5871df15ae7f92e7cf3f502d94b8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/52daca759f7b5871df15ae7f92e7cf3f502d94b8"}], "stats": {"total": 45, "additions": 44, "deletions": 1}, "files": [{"sha": "3efe49a5748e75797e9071abdeb09c87c3447de0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e1ff19bf801a69ab7ae22ccb2ebd5842d6432a1c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e1ff19bf801a69ab7ae22ccb2ebd5842d6432a1c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e1ff19bf801a69ab7ae22ccb2ebd5842d6432a1c", "patch": "@@ -1,3 +1,9 @@\n+2009-04-10  Ben Elliston  <bje@au.ibm.com>\n+\n+\tPR target/36800\n+\t* config/rs6000/rs6000.c (rs6000_gimplify_va_arg): Do not set\n+\tregalign for the reg == fpr and TDmode case.\n+\n 2009-04-09  David Ayers  <ayers@fsfe.org>\n \n \tPR objc/29200"}, {"sha": "235298935c3ef04d0bed64cac38925163dc290b1", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e1ff19bf801a69ab7ae22ccb2ebd5842d6432a1c/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e1ff19bf801a69ab7ae22ccb2ebd5842d6432a1c/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=e1ff19bf801a69ab7ae22ccb2ebd5842d6432a1c", "patch": "@@ -7092,7 +7092,6 @@ rs6000_gimplify_va_arg (tree valist, tree type, gimple_seq *pre_p,\n \t reg number is 0 for f1, so we want to make it odd.  */\n       else if (reg == fpr && TYPE_MODE (type) == TDmode)\n \t{\n-\t  regalign = 1;\n \t  t = build2 (BIT_IOR_EXPR, TREE_TYPE (reg), unshare_expr (reg),\n \t\t      build_int_cst (TREE_TYPE (reg), 1));\n \t  u = build2 (MODIFY_EXPR, void_type_node, unshare_expr (reg), t);"}, {"sha": "c346b6129dab8ec879437342098fa784261c1627", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e1ff19bf801a69ab7ae22ccb2ebd5842d6432a1c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e1ff19bf801a69ab7ae22ccb2ebd5842d6432a1c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e1ff19bf801a69ab7ae22ccb2ebd5842d6432a1c", "patch": "@@ -1,3 +1,9 @@\n+2009-04-10  Ben Elliston  <bje@au.ibm.com>\n+\t    Joseph Myers  <joseph@codesourcery.com>\n+\n+\tPR target/36800\n+\t* gcc.dg/dfp/pr36800.c: New.\n+\n 2009-04-09  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>\n \t    Rafael Avila de Espindola  <espindola@google.com>\n "}, {"sha": "5b899cf0e7f948b6c7a849cd0e38b2b81e012c71", "filename": "gcc/testsuite/gcc.dg/dfp/pr36800.c", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e1ff19bf801a69ab7ae22ccb2ebd5842d6432a1c/gcc%2Ftestsuite%2Fgcc.dg%2Fdfp%2Fpr36800.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e1ff19bf801a69ab7ae22ccb2ebd5842d6432a1c/gcc%2Ftestsuite%2Fgcc.dg%2Fdfp%2Fpr36800.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdfp%2Fpr36800.c?ref=e1ff19bf801a69ab7ae22ccb2ebd5842d6432a1c", "patch": "@@ -0,0 +1,32 @@\n+/* { dg-do run } */\n+/* { dg-options \"-std=gnu99\" } */\n+\n+#include <stdarg.h>\n+extern void abort (void);\n+\n+void\n+f (int a, ...)\n+{\n+  va_list ap;\n+  if (a != 0)\n+    abort ();\n+  va_start (ap, a);\n+  if (va_arg (ap, _Decimal128) != 1.2DL)\n+    abort ();\n+  if (va_arg (ap, _Decimal128) != 2.34DL)\n+    abort ();\n+  if (va_arg (ap, _Decimal128) != 3.456DL)\n+    abort ();\n+  if (va_arg (ap, _Decimal128) != 4.567DL)\n+    abort ();\n+  if (va_arg (ap, double) != 5.125)\n+    abort ();\n+  va_end (ap);\n+}\n+\n+int\n+main (void)\n+{\n+  f (0, 1.2DL, 2.34DL, 3.456DL, 4.567DL, 5.125);\n+  return 0;\n+}"}]}