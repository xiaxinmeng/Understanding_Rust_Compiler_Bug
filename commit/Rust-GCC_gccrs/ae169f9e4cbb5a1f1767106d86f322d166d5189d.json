{"sha": "ae169f9e4cbb5a1f1767106d86f322d166d5189d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWUxNjlmOWU0Y2JiNWExZjE3NjcxMDZkODZmMzIyZDE2NmQ1MTg5ZA==", "commit": {"author": {"name": "Tobias Burnus", "email": "tobias@codesourcery.com", "date": "2019-12-07T08:24:14Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2019-12-07T08:24:14Z"}, "message": "re PR c/87488 (hyperlink filenames in diagnostics)\n\n\tPR c/87488\n\t* pretty-print.c (pp_begin_url, pp_end_url, test_urls): Use BEL\n\tinstead of ST sequence to terminate OSC 8 strings.\n\nCo-Authored-By: David Malcolm <dmalcolm@redhat.com>\nCo-Authored-By: Jakub Jelinek <jakub@redhat.com>\n\nFrom-SVN: r279073", "tree": {"sha": "bc227a76e9eda94d057f2a26ce5d2480c388e9b0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bc227a76e9eda94d057f2a26ce5d2480c388e9b0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ae169f9e4cbb5a1f1767106d86f322d166d5189d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae169f9e4cbb5a1f1767106d86f322d166d5189d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ae169f9e4cbb5a1f1767106d86f322d166d5189d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae169f9e4cbb5a1f1767106d86f322d166d5189d/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b69877c60d2e1ebc1922042974565cad15c6a23c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b69877c60d2e1ebc1922042974565cad15c6a23c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b69877c60d2e1ebc1922042974565cad15c6a23c"}], "stats": {"total": 19, "additions": 15, "deletions": 4}, "files": [{"sha": "0eda8e01d209360614153fc1f0fcb9f2ad7a53f7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae169f9e4cbb5a1f1767106d86f322d166d5189d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae169f9e4cbb5a1f1767106d86f322d166d5189d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ae169f9e4cbb5a1f1767106d86f322d166d5189d", "patch": "@@ -1,3 +1,11 @@\n+2019-12-07  Tobias Burnus  <tobias@codesourcery.com>\n+\t    David Malcolm  <dmalcolm@redhat.com>\n+\t    Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c/87488\n+\t* pretty-print.c (pp_begin_url, pp_end_url, test_urls): Use BEL\n+\tinstead of ST sequence to terminate OSC 8 strings.\n+\n 2019-12-06  Andreas Krebbel  <krebbel@linux.ibm.com>\n \t    Vladimir Makarov  <vmakarov@redhat.com>\n "}, {"sha": "3aa2c4b3281b55a7ecd76648fd49e8637dddbc87", "filename": "gcc/pretty-print.c", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae169f9e4cbb5a1f1767106d86f322d166d5189d/gcc%2Fpretty-print.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae169f9e4cbb5a1f1767106d86f322d166d5189d/gcc%2Fpretty-print.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpretty-print.c?ref=ae169f9e4cbb5a1f1767106d86f322d166d5189d", "patch": "@@ -2043,7 +2043,10 @@ identifier_to_locale (const char *ident)\n    >\n    > OSC 8 ; ; ST\n    >\n-   > OSC (operating system command) is typically ESC ].  */\n+   > OSC (operating system command) is typically ESC ].\n+\n+   Use BEL instead of ST, as that is currently rendered better in some\n+   terminal emulators that don't support OSC 8, like konsole.  */\n \n /* If URL-printing is enabled, write an \"open URL\" escape sequence to PP\n    for the given URL.  */\n@@ -2052,7 +2055,7 @@ void\n pp_begin_url (pretty_printer *pp, const char *url)\n {\n   if (pp->show_urls)\n-    pp_printf (pp, \"\\33]8;;%s\\33\\\\\", url);\n+    pp_printf (pp, \"\\33]8;;%s\\a\", url);\n }\n \n /* If URL-printing is enabled, write a \"close URL\" escape sequence to PP.  */\n@@ -2061,7 +2064,7 @@ void\n pp_end_url (pretty_printer *pp)\n {\n   if (pp->show_urls)\n-    pp_string (pp, \"\\33]8;;\\33\\\\\");\n+    pp_string (pp, \"\\33]8;;\\a\");\n }\n \n #if CHECKING_P\n@@ -2369,7 +2372,7 @@ test_urls ()\n     pp_begin_url (&pp, \"http://example.com\");\n     pp_string (&pp, \"This is a link\");\n     pp_end_url (&pp);\n-    ASSERT_STREQ (\"\\33]8;;http://example.com\\33\\\\This is a link\\33]8;;\\33\\\\\",\n+    ASSERT_STREQ (\"\\33]8;;http://example.com\\aThis is a link\\33]8;;\\a\",\n \t\t  pp_formatted_text (&pp));\n   }\n }"}]}