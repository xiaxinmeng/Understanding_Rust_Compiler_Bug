{"sha": "79e7840d22610f67d5247c2ac73d908fbc77838a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzllNzg0MGQyMjYxMGY2N2Q1MjQ3YzJhYzczZDkwOGZiYzc3ODM4YQ==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2007-06-22T01:50:09Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2007-06-22T01:50:09Z"}, "message": "re PR fortran/31162 (missing warning for real do-loops with implicit typed variables)\n\n2007-06-21  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR fortran/31162\n\t* resolve.c (gfc_resolve_iterator_expr): Add check for REAL using\n\tgfc_notify_standard. (gfc_resolve_iterator): Remove check.\n\t(resolve_branch): Change \"Obsolete\" to \"Deleted feature\".\n\t* io.c (resolve_tag): Ditto.\n\t* match.c (gfc_match_pause, gfc_match_assign, gfc_match_goto): Ditto.\n\nFrom-SVN: r125938", "tree": {"sha": "fe9a3d1004e1a4761c54706e236aad74348de33b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fe9a3d1004e1a4761c54706e236aad74348de33b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/79e7840d22610f67d5247c2ac73d908fbc77838a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/79e7840d22610f67d5247c2ac73d908fbc77838a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/79e7840d22610f67d5247c2ac73d908fbc77838a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/79e7840d22610f67d5247c2ac73d908fbc77838a/comments", "author": null, "committer": null, "parents": [{"sha": "49d2bde811fc53f864e611151e7fda1e0a506ddf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/49d2bde811fc53f864e611151e7fda1e0a506ddf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/49d2bde811fc53f864e611151e7fda1e0a506ddf"}], "stats": {"total": 52, "additions": 34, "deletions": 18}, "files": [{"sha": "befa318e0e9a155f0d6b0d8b91f19652a4f2d6c3", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79e7840d22610f67d5247c2ac73d908fbc77838a/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79e7840d22610f67d5247c2ac73d908fbc77838a/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=79e7840d22610f67d5247c2ac73d908fbc77838a", "patch": "@@ -1,3 +1,12 @@\n+2007-06-21  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR fortran/31162\n+\t* resolve.c (gfc_resolve_iterator_expr): Add check for REAL using\n+\tgfc_notify_standard. (gfc_resolve_iterator): Remove check.\n+\t(resolve_branch): Change \"Obsolete\" to \"Deleted feature\".\n+\t* io.c (resolve_tag): Ditto.\n+\t* match.c (gfc_match_pause, gfc_match_assign, gfc_match_goto): Ditto.\n+\n 2007-06-20  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n \tPR fortran/32361"}, {"sha": "aa299a3885abc95a0130f5af544dc90c35af6f84", "filename": "gcc/fortran/io.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79e7840d22610f67d5247c2ac73d908fbc77838a/gcc%2Ffortran%2Fio.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79e7840d22610f67d5247c2ac73d908fbc77838a/gcc%2Ffortran%2Fio.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fio.c?ref=79e7840d22610f67d5247c2ac73d908fbc77838a", "patch": "@@ -1072,7 +1072,7 @@ resolve_tag (const io_tag *tag, gfc_expr *e)\n \t    }\n \t  else if (e->ts.type == BT_INTEGER && e->expr_type == EXPR_VARIABLE)\n \t    {\n-\t      if (gfc_notify_std (GFC_STD_F95_DEL, \"Obsolete: ASSIGNED \"\n+\t      if (gfc_notify_std (GFC_STD_F95_DEL, \"Deleted feature: ASSIGNED \"\n \t\t\t\t  \"variable in FORMAT tag at %L\", &e->where)\n \t\t  == FAILURE)\n \t\treturn FAILURE;"}, {"sha": "e00c2853f0ce1b00856608ebca55cdca47e88dbc", "filename": "gcc/fortran/match.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79e7840d22610f67d5247c2ac73d908fbc77838a/gcc%2Ffortran%2Fmatch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79e7840d22610f67d5247c2ac73d908fbc77838a/gcc%2Ffortran%2Fmatch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fmatch.c?ref=79e7840d22610f67d5247c2ac73d908fbc77838a", "patch": "@@ -1578,7 +1578,8 @@ gfc_match_pause (void)\n   m = gfc_match_stopcode (ST_PAUSE);\n   if (m == MATCH_YES)\n     {\n-      if (gfc_notify_std (GFC_STD_F95_DEL, \"Obsolete: PAUSE statement at %C\")\n+      if (gfc_notify_std (GFC_STD_F95_DEL, \"Deleted feature: PAUSE statement\"\n+\t  \" at %C\")\n \t  == FAILURE)\n \tm = MATCH_ERROR;\n     }\n@@ -1625,7 +1626,7 @@ gfc_match_assign (void)\n \treturn MATCH_ERROR;\n       if (gfc_match (\" to %v%t\", &expr) == MATCH_YES)\n \t{\n-\t  if (gfc_notify_std (GFC_STD_F95_DEL, \"Obsolete: ASSIGN \"\n+\t  if (gfc_notify_std (GFC_STD_F95_DEL, \"Deleted feature: ASSIGN \"\n \t\t\t      \"statement at %C\")\n \t      == FAILURE)\n \t    return MATCH_ERROR;\n@@ -1671,7 +1672,7 @@ gfc_match_goto (void)\n \n   if (gfc_match_variable (&expr, 0) == MATCH_YES)\n     {\n-      if (gfc_notify_std (GFC_STD_F95_DEL, \"Obsolete: Assigned GOTO \"\n+      if (gfc_notify_std (GFC_STD_F95_DEL, \"Deleted feature: Assigned GOTO \"\n \t\t\t  \"statement at %C\")\n \t  == FAILURE)\n \treturn MATCH_ERROR;"}, {"sha": "8b3b29ec82a634e75033cfaee8279136fb862587", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 20, "deletions": 14, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79e7840d22610f67d5247c2ac73d908fbc77838a/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79e7840d22610f67d5247c2ac73d908fbc77838a/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=79e7840d22610f67d5247c2ac73d908fbc77838a", "patch": "@@ -3373,15 +3373,26 @@ gfc_resolve_iterator_expr (gfc_expr *expr, bool real_ok,\n       return FAILURE;\n     }\n \n-  if (!(expr->ts.type == BT_INTEGER\n-\t|| (expr->ts.type == BT_REAL && real_ok)))\n+  if (expr->ts.type != BT_INTEGER)\n     {\n-      if (real_ok)\n-\tgfc_error (\"%s at %L must be INTEGER or REAL\", _(name_msgid),\n-\t\t   &expr->where);\n+      if (expr->ts.type == BT_REAL)\n+\t{\n+\t  if (real_ok)\n+\t    return gfc_notify_std (GFC_STD_F95_DEL,\n+\t\t\t\t   \"Deleted feature: %s at %L must be integer\",\n+\t\t\t\t   _(name_msgid), &expr->where);\n+\t  else\n+\t    {\n+\t      gfc_error (\"%s at %L must be INTEGER\", _(name_msgid),\n+\t\t\t &expr->where);\n+\t      return FAILURE;\n+\t    }\n+\t}\n       else\n-\tgfc_error (\"%s at %L must be INTEGER\", _(name_msgid), &expr->where);\n-      return FAILURE;\n+\t{\n+\t  gfc_error (\"%s at %L must be INTEGER\", _(name_msgid), &expr->where);\n+\t  return FAILURE;\n+\t}\n     }\n   return SUCCESS;\n }\n@@ -3393,11 +3404,6 @@ gfc_resolve_iterator_expr (gfc_expr *expr, bool real_ok,\n try\n gfc_resolve_iterator (gfc_iterator *iter, bool real_ok)\n {\n-\n-  if (iter->var->ts.type == BT_REAL)\n-    gfc_notify_std (GFC_STD_F95_DEL, \"Obsolete: REAL DO loop iterator at %L\",\n-\t\t    &iter->var->where);\n-\n   if (gfc_resolve_iterator_expr (iter->var, real_ok, \"Loop variable\")\n       == FAILURE)\n     return FAILURE;\n@@ -4572,7 +4578,7 @@ resolve_branch (gfc_st_label *label, gfc_code *code)\n \n   if (stack && stack->current->next->op == EXEC_NOP)\n     {\n-      gfc_notify_std (GFC_STD_F95_DEL, \"Obsolete: GOTO at %L jumps to \"\n+      gfc_notify_std (GFC_STD_F95_DEL, \"Deleted feature: GOTO at %L jumps to \"\n \t\t      \"END of construct at %L\", &code->loc,\n \t\t      &stack->current->next->loc);\n       return;  /* We know this is not an END DO.  */\n@@ -4586,7 +4592,7 @@ resolve_branch (gfc_st_label *label, gfc_code *code)\n \t || stack->current->op == EXEC_DO_WHILE)\n \t&& stack->tail->here == label && stack->tail->op == EXEC_NOP)\n       {\n-\tgfc_notify_std (GFC_STD_F95_DEL, \"Obsolete: GOTO at %L jumps \"\n+\tgfc_notify_std (GFC_STD_F95_DEL, \"Deleted feature: GOTO at %L jumps \"\n \t\t\t\"to END of construct at %L\", &code->loc,\n \t\t\t&stack->tail->loc);\n \treturn;"}]}