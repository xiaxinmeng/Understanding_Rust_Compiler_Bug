{"sha": "6e75c1a9f04e5021b338ee7c09478d02bea435a8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmU3NWMxYTlmMDRlNTAyMWIzMzhlZTdjMDk0NzhkMDJiZWE0MzVhOA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2009-03-20T16:15:38Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2009-03-20T16:15:38Z"}, "message": "re PR debug/37890 (Incorrect nesting for DW_TAG_imported_declaration)\n\n\tPR debug/37890\n\t* dwarf2out.c (gen_namespace_die): Add context_die argument and use\n\tit for block local namespace aliases.\n\t(gen_decl_die): Pass context_die to gen_namespace_die.\n\nFrom-SVN: r144978", "tree": {"sha": "d0e0871f51c5c4244a1400d6cacd1f4df4a8469b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d0e0871f51c5c4244a1400d6cacd1f4df4a8469b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6e75c1a9f04e5021b338ee7c09478d02bea435a8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e75c1a9f04e5021b338ee7c09478d02bea435a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e75c1a9f04e5021b338ee7c09478d02bea435a8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e75c1a9f04e5021b338ee7c09478d02bea435a8/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e471a70a01a348b81d2a06802fdad4652106b998", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e471a70a01a348b81d2a06802fdad4652106b998", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e471a70a01a348b81d2a06802fdad4652106b998"}], "stats": {"total": 28, "additions": 19, "deletions": 9}, "files": [{"sha": "ed93f126b41ae059811ee0d91c55a9305835cb87", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e75c1a9f04e5021b338ee7c09478d02bea435a8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e75c1a9f04e5021b338ee7c09478d02bea435a8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6e75c1a9f04e5021b338ee7c09478d02bea435a8", "patch": "@@ -1,3 +1,10 @@\n+2009-03-20  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR debug/37890\n+\t* dwarf2out.c (gen_namespace_die): Add context_die argument and use\n+\tit for block local namespace aliases.\n+\t(gen_decl_die): Pass context_die to gen_namespace_die.\n+\n 2009-03-19  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c/39495"}, {"sha": "133136b5bc50646bf6e49911030138cb02d66d8e", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 12, "deletions": 9, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e75c1a9f04e5021b338ee7c09478d02bea435a8/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e75c1a9f04e5021b338ee7c09478d02bea435a8/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=6e75c1a9f04e5021b338ee7c09478d02bea435a8", "patch": "@@ -5172,7 +5172,7 @@ static void gen_type_die (tree, dw_die_ref);\n static void gen_block_die (tree, dw_die_ref, int);\n static void decls_for_scope (tree, dw_die_ref, int);\n static int is_redundant_typedef (const_tree);\n-static void gen_namespace_die (tree);\n+static void gen_namespace_die (tree, dw_die_ref);\n static void gen_decl_die (tree, tree, dw_die_ref);\n static dw_die_ref force_decl_die (tree);\n static dw_die_ref force_type_die (tree);\n@@ -15093,18 +15093,19 @@ declare_in_namespace (tree thing, dw_die_ref context_die)\n /* Generate a DIE for a namespace or namespace alias.  */\n \n static void\n-gen_namespace_die (tree decl)\n+gen_namespace_die (tree decl, dw_die_ref context_die)\n {\n-  dw_die_ref context_die = setup_namespace_context (decl, comp_unit_die);\n+  dw_die_ref namespace_die;\n \n   /* Namespace aliases have a DECL_ABSTRACT_ORIGIN of the namespace\n      they are an alias of.  */\n   if (DECL_ABSTRACT_ORIGIN (decl) == NULL)\n     {\n       /* Output a real namespace or module.  */\n-      dw_die_ref namespace_die\n-\t= new_die (is_fortran () ? DW_TAG_module : DW_TAG_namespace,\n-\t\t   context_die, decl);\n+      context_die = setup_namespace_context (decl, comp_unit_die);\n+      namespace_die = new_die (is_fortran ()\n+\t\t\t       ? DW_TAG_module : DW_TAG_namespace,\n+\t\t\t       context_die, decl);\n       /* For Fortran modules defined in different CU don't add src coords.  */\n       if (namespace_die->die_tag == DW_TAG_module && DECL_EXTERNAL (decl))\n \tadd_name_attribute (namespace_die, dwarf2_name (decl, 0));\n@@ -15122,9 +15123,11 @@ gen_namespace_die (tree decl)\n       dw_die_ref origin_die\n \t= force_decl_die (DECL_ABSTRACT_ORIGIN (decl));\n \n+      if (DECL_CONTEXT (decl) == NULL_TREE\n+\t  || TREE_CODE (DECL_CONTEXT (decl)) == NAMESPACE_DECL)\n+\tcontext_die = setup_namespace_context (decl, comp_unit_die);\n       /* Now create the namespace alias DIE.  */\n-      dw_die_ref namespace_die\n-\t= new_die (DW_TAG_imported_declaration, context_die, decl);\n+      namespace_die = new_die (DW_TAG_imported_declaration, context_die, decl);\n       add_name_and_src_coords_attributes (namespace_die, decl);\n       add_AT_die_ref (namespace_die, DW_AT_import, origin_die);\n       equate_decl_number_to_die (decl, namespace_die);\n@@ -15313,7 +15316,7 @@ gen_decl_die (tree decl, tree origin, dw_die_ref context_die)\n \n     case NAMESPACE_DECL:\n     case IMPORTED_DECL:\n-      gen_namespace_die (decl);\n+      gen_namespace_die (decl, context_die);\n       break;\n \n     default:"}]}