{"sha": "443728bba4b4ec9b9177121022571b036a8b01bf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDQzNzI4YmJhNGI0ZWM5YjkxNzcxMjEwMjI1NzFiMDM2YThiMDFiZg==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2004-09-04T00:15:42Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2004-09-04T00:15:42Z"}, "message": "re PR target/14925 (libunwind enabled gcc generates incompatible libgcc_s.so.1)\n\n2004-09-03  H.J. Lu  <hongjiu.lu@intel.com>\n\n\tPR target/14925:\n\tMakefile.in (LIB2ADDEHSTATIC): New.\n\t(LIB2ADDEHSHARED): New.\n\t(LIBUNWIND): New.\n\t(LIBUNWINDDEP): New.\n\t(SHLIBUNWIND_LINK): New.\n\t(SHLIBUNWIND_INSTALL): New.\n\t(libgcc.mk): Pass LIB2ADDEHSTATIC, LIB2ADDEHSHARED, LIBUNWIND,\n\tLIBUNWINDDEP, SHLIBUNWIND_LINK and SHLIBUNWIND_INSTALL.\n\t(clean): Remove libunwind*\n\t(stage1-start): Remove and copy stage1/libunwind*.\n\t(stage2-start): Remove and copy stage2/libunwind*.\n\t(stage3-start): Remove and copy stage3/libunwind*.\n\t(stage4-start): Remove and copy stage4/libunwind*.\n\t(stageprofile-start): Remove and copy stageprofile/libunwind*.\n\t(stagefeedback-start): Remove and copy stagefeedback/libunwind*.\n\n\t* config.gcc (ia64*-*-linux*): Always add t-libunwind to\n\ttmake_file. Add t-libunwind-elf and ia64/t-glibc-libunwind to\n\ttmake_file if --with-system-libunwind isn't used.\n\n\t* config/ia64/t-glibc-libunwind: New file.\n\t* config/t-libunwind-elf: Likewise.\n\t* unwind-compat.c: Likewise.\n\t* unwind-compat.h: Likewise.\n\t* unwind-dw2-fde-compat.c: Likewise.\n\n\t* config/ia64/t-glibc (LIB2ADDEH): Updated.\n\t* config/ia64/t-hpux (T_CFLAGS): Add -DUSE_LIBUNWIND_EXCEPTIONS.\n\n\t* config/ia64/unwind-ia64.c: Include \"unwind-compat.h\". Define\n\taliases if needed.\n\t* unwind-dw2-fde-glibc.c: Likewise.\n\t* unwind-dw2.c: Likewise.\n\n\t* config/t-libunwind (LIB2ADDEH): Updated.\n\t(LIB2ADDEHSTATIC): New.\n\t(T_CFLAGS): Add -DUSE_LIBUNWIND_EXCEPTIONS.\n\t(TARGET_LIBGCC2_CFLAGS): Set to -DUSE_GAS_SYMVER.\n\n\t* configure.ac: Change --enable-libunwind-exceptions to\n\t--with-system-libunwind. Don't define USE_LIBUNWIND_EXCEPTIONS.\n\t* configure: Regenerated.\n\t* config.in: Updated.\n\n\t* doc/install.texi (ia64-*-linux): Require libunwind 0.98 or\n\tabove and mention --with-system-libunwind.\n\t(ia64-*-hpux*): Mention --enable-libunwind-exceptions is\n\tremoved in gcc 3.4.3 and later.\n\n\t* gcc.c (init_spec): Add -lunwind to -lgcc_s if\n\tUSE_LIBUNWIND_EXCEPTIONS is defined.\n\n\t* mklibgcc.in: Support libunwind.\n\nFrom-SVN: r87066", "tree": {"sha": "7f137e56cfc324eb4fa83beb9e5fe8ca4d670570", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7f137e56cfc324eb4fa83beb9e5fe8ca4d670570"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/443728bba4b4ec9b9177121022571b036a8b01bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/443728bba4b4ec9b9177121022571b036a8b01bf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/443728bba4b4ec9b9177121022571b036a8b01bf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/443728bba4b4ec9b9177121022571b036a8b01bf/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d20bf446f61bf73a0f8a12838ddc8f92d6a87fce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d20bf446f61bf73a0f8a12838ddc8f92d6a87fce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d20bf446f61bf73a0f8a12838ddc8f92d6a87fce"}], "stats": {"total": 939, "additions": 754, "deletions": 185}, "files": [{"sha": "743aad8cafd360179965717d09f0a40cb9e597ba", "filename": "gcc/ChangeLog", "status": "modified", "additions": 57, "deletions": 0, "changes": 57, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=443728bba4b4ec9b9177121022571b036a8b01bf", "patch": "@@ -1,3 +1,60 @@\n+2004-09-03  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR target/14925:\n+\tMakefile.in (LIB2ADDEHSTATIC): New.\n+\t(LIB2ADDEHSHARED): New.\n+\t(LIBUNWIND): New.\n+\t(LIBUNWINDDEP): New.\n+\t(SHLIBUNWIND_LINK): New.\n+\t(SHLIBUNWIND_INSTALL): New.\n+\t(libgcc.mk): Pass LIB2ADDEHSTATIC, LIB2ADDEHSHARED, LIBUNWIND,\n+\tLIBUNWINDDEP, SHLIBUNWIND_LINK and SHLIBUNWIND_INSTALL.\n+\t(clean): Remove libunwind*\n+\t(stage1-start): Remove and copy stage1/libunwind*.\n+\t(stage2-start): Remove and copy stage2/libunwind*.\n+\t(stage3-start): Remove and copy stage3/libunwind*.\n+\t(stage4-start): Remove and copy stage4/libunwind*.\n+\t(stageprofile-start): Remove and copy stageprofile/libunwind*.\n+\t(stagefeedback-start): Remove and copy stagefeedback/libunwind*.\n+\n+\t* config.gcc (ia64*-*-linux*): Always add t-libunwind to\n+\ttmake_file. Add t-libunwind-elf and ia64/t-glibc-libunwind to\n+\ttmake_file if --with-system-libunwind isn't used.\n+\n+\t* config/ia64/t-glibc-libunwind: New file.\n+\t* config/t-libunwind-elf: Likewise.\n+\t* unwind-compat.c: Likewise.\n+\t* unwind-compat.h: Likewise.\n+\t* unwind-dw2-fde-compat.c: Likewise.\n+\n+\t* config/ia64/t-glibc (LIB2ADDEH): Updated.\n+\t* config/ia64/t-hpux (T_CFLAGS): Add -DUSE_LIBUNWIND_EXCEPTIONS.\n+\n+\t* config/ia64/unwind-ia64.c: Include \"unwind-compat.h\". Define\n+\taliases if needed.\n+\t* unwind-dw2-fde-glibc.c: Likewise.\n+\t* unwind-dw2.c: Likewise.\n+\n+\t* config/t-libunwind (LIB2ADDEH): Updated.\n+\t(LIB2ADDEHSTATIC): New.\n+\t(T_CFLAGS): Add -DUSE_LIBUNWIND_EXCEPTIONS.\n+\t(TARGET_LIBGCC2_CFLAGS): Set to -DUSE_GAS_SYMVER.\n+\n+\t* configure.ac: Change --enable-libunwind-exceptions to\n+\t--with-system-libunwind. Don't define USE_LIBUNWIND_EXCEPTIONS.\n+\t* configure: Regenerated.\n+\t* config.in: Updated.\n+\n+\t* doc/install.texi (ia64-*-linux): Require libunwind 0.98 or\n+\tabove and mention --with-system-libunwind.\n+\t(ia64-*-hpux*): Mention --enable-libunwind-exceptions is\n+\tremoved in gcc 3.4.3 and later.\n+\n+\t* gcc.c (init_spec): Add -lunwind to -lgcc_s if\n+\tUSE_LIBUNWIND_EXCEPTIONS is defined.\n+\n+\t* mklibgcc.in: Support libunwind.\n+\n 2004-09-03  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* config/i386/i386.c (x86_branch_hints): Remove m_PENT4 and"}, {"sha": "5990d2a7ec8e991d9a3e21c2c1d568272deab65e", "filename": "gcc/Makefile.in", "status": "modified", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=443728bba4b4ec9b9177121022571b036a8b01bf", "patch": "@@ -532,8 +532,16 @@ CRTSTUFF_CFLAGS = -O2 $(GCC_CFLAGS) $(INCLUDES) $(MULTILIB_CFLAGS) -g0 \\\n # Additional sources to handle exceptions; overridden by targets as needed.\n LIB2ADDEH = $(srcdir)/unwind-dw2.c $(srcdir)/unwind-dw2-fde.c \\\n    $(srcdir)/unwind-sjlj.c $(srcdir)/gthr-gnat.c $(srcdir)/unwind-c.c\n+LIB2ADDEHSTATIC = $(LIB2ADDEH)\n+LIB2ADDEHSHARED = $(LIB2ADDEH)\n LIB2ADDEHDEP = unwind.h unwind-pe.h unwind.inc unwind-dw2-fde.h unwind-dw2.h\n \n+# Don't build libunwind by default.\n+LIBUNWIND =\n+LIBUNWINDDEP =\n+SHLIBUNWIND_LINK =\n+SHLIBUNWIND_INSTALL =\n+\n # nm flags to list global symbols in libgcc object files.\n SHLIB_NM_FLAGS = -pg\n \n@@ -1205,7 +1213,13 @@ libgcc.mk: config.status Makefile mklibgcc $(LIB2ADD) $(LIB2ADD_ST) xgcc$(exeext\n \tLIB2ADD='$(LIB2ADD)' \\\n \tLIB2ADD_ST='$(LIB2ADD_ST)' \\\n \tLIB2ADDEH='$(LIB2ADDEH)' \\\n+\tLIB2ADDEHSTATIC='$(LIB2ADDEHSTATIC)' \\\n+\tLIB2ADDEHSHARED='$(LIB2ADDEHSHARED)' \\\n \tLIB2ADDEHDEP='$(LIB2ADDEHDEP)' \\\n+\tLIBUNWIND='$(LIBUNWIND)' \\\n+\tLIBUNWINDDEP='$(LIBUNWINDDEP)' \\\n+\tSHLIBUNWIND_LINK='$(SHLIBUNWIND_LINK)' \\\n+\tSHLIBUNWIND_INSTALL='$(SHLIBUNWIND_INSTALL)' \\\n \tFPBIT='$(FPBIT)' \\\n \tFPBIT_FUNCS='$(FPBIT_FUNCS)' \\\n \tLIB2_DIVMOD_FUNCS='$(LIB2_DIVMOD_FUNCS)' \\\n@@ -3051,6 +3065,7 @@ mostlyclean: lang.mostlyclean\n clean: mostlyclean lang.clean\n \t-rm -f libgcc.a libgcc_eh.a libgcov.a\n \t-rm -f libgcc_s$(SHLIB_EXT) libgcc_s$(SHLIB_EXT).1\n+\t-rm -f libunwind*\n \t-rm -f config.h tconfig.h bconfig.h tm_p.h tm.h\n \t-rm -f options.c options.h optionlist\n \t-rm -f cs-*\n@@ -3880,6 +3895,7 @@ stage1-start:\n \t-if [ -f collect-ld$(exeext) ] ; then (cd stage1 && $(LN_S) ../collect-ld$(exeext) .) ; else true ; fi\n \t-rm -f stage1/libgcc.a stage1/libgcc_eh.a stage1/libgcov.a\n \t-rm -f stage1/libgcc_s*$(SHLIB_EXT)\n+\t-rm -f stage1/libunwind*\n \t-cp libgcc.a stage1\n \t-$(RANLIB_FOR_TARGET) stage1/libgcc.a\n \t-cp libgcov.a stage1\n@@ -3888,6 +3904,7 @@ stage1-start:\n \t   $(RANLIB_FOR_TARGET) stage1/libgcc_eh.a; \\\n \tfi\n \t-cp libgcc_s*$(SHLIB_EXT) stage1\n+\t-cp libunwind* stage1\n \t-for f in .. $(EXTRA_MULTILIB_PARTS); do if [ x$${f} != x.. ]; then \\\n \t  cp stage1/$${f} . ; \\\n \telse true; \\\n@@ -3915,6 +3932,7 @@ stage2-start:\n \t-if [ -f collect-ld$(exeext) ] ; then (cd stage2 && $(LN_S) ../collect-ld$(exeext) .) ; else true ; fi\n \t-rm -f stage2/libgcc.a stage2/libgcov.a stage2/libgcc_eh.a\n \t-rm -f stage2/libgcc_s*$(SHLIB_EXT)\n+\t-rm -f stage2/libunwind*\n \t-cp libgcc.a stage2\n \t-$(RANLIB_FOR_TARGET) stage2/libgcc.a\n \t-cp libgcov.a stage2\n@@ -3923,6 +3941,7 @@ stage2-start:\n \t   $(RANLIB_FOR_TARGET) stage2/libgcc_eh.a; \\\n \tfi\n \t-cp libgcc_s*$(SHLIB_EXT) stage2\n+\t-cp libunwind* stage2\n \t-for f in .. $(EXTRA_MULTILIB_PARTS); do if [ x$${f} != x.. ]; then \\\n \t  cp stage2/$${f} . ; \\\n \telse true; \\\n@@ -3946,6 +3965,7 @@ stage3-start:\n \t-if [ -f collect-ld$(exeext) ] ; then (cd stage3 && $(LN_S) ../collect-ld$(exeext) .) ; else true ; fi\n \t-rm -f stage3/libgcc.a stage3/libgcov.a stage3/libgcc_eh.a\n \t-rm -f stage3/libgcc_s*$(SHLIB_EXT)\n+\t-rm -f stage3/libunwind*\n \t-cp libgcc.a stage3\n \t-$(RANLIB_FOR_TARGET) stage3/libgcc.a\n \t-cp libgcov.a stage3\n@@ -3954,6 +3974,7 @@ stage3-start:\n \t   $(RANLIB_FOR_TARGET) stage3/libgcc_eh.a; \\\n \tfi\n \t-cp libgcc_s*$(SHLIB_EXT) stage3\n+\t-cp libunwind* stage3\n \t-for f in .. $(EXTRA_MULTILIB_PARTS); do if [ x$${f} != x.. ]; then \\\n \t  cp stage3/$${f} . ; \\\n \telse true; \\\n@@ -3977,6 +3998,7 @@ stage4-start:\n \t-if [ -f collect-ld$(exeext) ] ; then (cd stage4 && $(LN_S) ../collect-ld$(exeext) .) ; else true ; fi\n \t-rm -f stage4/libgcc.a stage4/libgcov.a stage4/libgcc_eh.a\n \t-rm -f stage4/libgcc_s*$(SHLIB_EXT)\n+\t-rm -f stage4/libunwind*\n \t-cp libgcc.a stage4\n \t-$(RANLIB_FOR_TARGET) stage4/libgcc.a\n \t-cp libgcov.a stage4\n@@ -3985,6 +4007,7 @@ stage4-start:\n \t   $(RANLIB_FOR_TARGET) stage4/libgcc_eh.a; \\\n \tfi\n \t-cp libgcc_s*$(SHLIB_EXT) stage4\n+\t-cp libunwind* stage4\n \t-for f in .. $(EXTRA_MULTILIB_PARTS); do if [ x$${f} != x.. ]; then \\\n \t  cp stage4/$${f} . ; \\\n \telse true; \\\n@@ -4006,6 +4029,7 @@ stageprofile-start:\n \t-if [ -f collect-ld$(exeext) ] ; then (cd stageprofile && $(LN_S) ../collect-ld$(exeext) .) ; else true ; fi\n \t-rm -f stageprofile/libgcc.a stageprofile/libgcov.a stageprofile/libgcc_eh.a\n \t-rm -f stageprofile/libgcc_s*$(SHLIB_EXT)\n+\t-rm -f stageprofile/libunwind*\n \t-cp libgcc.a stageprofile\n \t-$(RANLIB_FOR_TARGET) stageprofile/libgcc.a\n \t-cp libgcov.a stageprofile\n@@ -4014,6 +4038,7 @@ stageprofile-start:\n \t   $(RANLIB_FOR_TARGET) stageprofile/libgcc_eh.a; \\\n \tfi\n \t-cp libgcc_s*$(SHLIB_EXT) stageprofile\n+\t-cp libunwind* stageprofile\n \t-for f in .. $(EXTRA_MULTILIB_PARTS); do if [ x$${f} != x.. ]; then \\\n \t  cp stageprofile/$${f} . ; \\\n \telse true; \\\n@@ -4035,6 +4060,7 @@ stagefeedback-start:\n \t-if [ -f collect-ld$(exeext) ] ; then (cd stagefeedback && $(LN_S) ../collect-ld$(exeext) .) ; else true ; fi\n \t-rm -f stagefeedback/libgcc.a stagefeedback/libgcov.a stagefeedback/libgcc_eh.a\n \t-rm -f stagefeedback/libgcc_s*$(SHLIB_EXT)\n+\t-rm -f stagefeedback/libunwind*\n \t-rm -f *.da\n \t-for dir in fixinc po testsuite $(SUBDIRS); \\\n \t do \\\n@@ -4048,6 +4074,7 @@ stagefeedback-start:\n \t   $(RANLIB_FOR_TARGET) stagefeedback/libgcc_eh.a; \\\n \tfi\n \t-cp libgcc_s*$(SHLIB_EXT) stagefeedback\n+\t-cp libunwind* stagefeedback\n \t-for f in .. $(EXTRA_MULTILIB_PARTS); do if [ x$${f} != x.. ]; then \\\n \t  cp stagefeedback/$${f} . ; \\\n \telse true; \\"}, {"sha": "4f955a02b620ef173a99964c00b6b379ed0893dc", "filename": "gcc/config.gcc", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=443728bba4b4ec9b9177121022571b036a8b01bf", "patch": "@@ -1148,12 +1148,12 @@ ia64*-*-freebsd*)\n \t;;\n ia64*-*-linux*)\n \ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h linux.h ia64/sysv4.h ia64/linux.h\"\n-\ttmake_file=\"${tmake_file} ia64/t-ia64 ia64/t-glibc\"\n+\ttmake_file=\"${tmake_file} ia64/t-ia64 t-libunwind ia64/t-glibc\"\n+\tif test x$with_system_libunwind != xyes ; then\n+\t\ttmake_file=\"${tmake_file} t-libunwind-elf ia64/t-glibc-libunwind\"\n+\tfi\n \ttarget_cpu_default=\"MASK_GNU_AS|MASK_GNU_LD\"\n \textra_parts=\"crtbegin.o crtend.o crtbeginS.o crtendS.o crtfastmath.o\"\n-\tif test x\"$use_libunwind_exceptions\" = xyes; then\n-\t  tmake_file=\"$tmake_file t-libunwind\"\n-\tfi\n \t;;\n ia64*-*-hpux*)\n \ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h ia64/sysv4.h ia64/hpux.h\""}, {"sha": "42e5795e6f6cbbe9a1b9f42c8e47e9ffbeb508ed", "filename": "gcc/config.in", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fconfig.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fconfig.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.in?ref=443728bba4b4ec9b9177121022571b036a8b01bf", "patch": "@@ -573,9 +573,6 @@\n /* Define if your assembler mis-optimizes .eh_frame data. */\n #undef USE_AS_TRADITIONAL_FORMAT\n \n-/* Define if gcc should use -lunwind. */\n-#undef USE_LIBUNWIND_EXCEPTIONS\n-\n /* Define to 1 if the 'long long' (or '__int64') is wider than 'long' but\n    still efficiently supported by the host hardware. */\n #undef USE_LONG_LONG_FOR_WIDEST_FAST_INT"}, {"sha": "df4fe9c4404a91ef1ab137443bf538f9a5bec610", "filename": "gcc/config/ia64/t-glibc", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fconfig%2Fia64%2Ft-glibc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fconfig%2Fia64%2Ft-glibc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Ft-glibc?ref=443728bba4b4ec9b9177121022571b036a8b01bf", "patch": "@@ -1 +1,3 @@\n-LIB2ADDEH += $(srcdir)/config/ia64/fde-glibc.c\n+# Use system libunwind library on IA-64 GLIBC based system.\n+LIB2ADDEH = $(srcdir)/unwind-sjlj.c $(srcdir)/unwind-c.c \\\n+  $(srcdir)/unwind-compat.c"}, {"sha": "df78f1d094f84d8969c424705f3711b57de9007c", "filename": "gcc/config/ia64/t-glibc-libunwind", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fconfig%2Fia64%2Ft-glibc-libunwind", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fconfig%2Fia64%2Ft-glibc-libunwind", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Ft-glibc-libunwind?ref=443728bba4b4ec9b9177121022571b036a8b01bf", "patch": "@@ -0,0 +1,4 @@\n+# Build libunwind for IA-64 GLIBC based system.\n+LIBUNWIND = $(srcdir)/config/ia64/fde-glibc.c \\\n+  $(srcdir)/config/ia64/unwind-ia64.c\n+LIBUNWINDDEP = unwind.inc"}, {"sha": "d89f174592c0436a11787b27f02679b15aba3922", "filename": "gcc/config/ia64/t-hpux", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fconfig%2Fia64%2Ft-hpux", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fconfig%2Fia64%2Ft-hpux", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Ft-hpux?ref=443728bba4b4ec9b9177121022571b036a8b01bf", "patch": "@@ -23,6 +23,8 @@ LIBGCC1_TEST =\n # We do not want to include the EH stuff that linux uses, we want to use\n # the HP-UX libunwind library.\n \n+T_CFLAGS += -DUSE_LIBUNWIND_EXCEPTIONS\n+\n LIB2ADDEH =\n \n SHLIB_EXT = .so"}, {"sha": "692f07b1adfb3f823fd059da3b116d8e850f2662", "filename": "gcc/config/ia64/unwind-ia64.c", "status": "modified", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fconfig%2Fia64%2Funwind-ia64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fconfig%2Fia64%2Funwind-ia64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Funwind-ia64.c?ref=443728bba4b4ec9b9177121022571b036a8b01bf", "patch": "@@ -37,6 +37,7 @@\n #include \"tm.h\"\n #include \"unwind.h\"\n #include \"unwind-ia64.h\"\n+#include \"unwind-compat.h\"\n #include \"ia64intrin.h\"\n \n /* This isn't thread safe, but nice for occasional tests.  */\n@@ -2381,4 +2382,24 @@ uw_identify_context (struct _Unwind_Context *context)\n }\n \n #include \"unwind.inc\"\n+\n+#if defined (USE_GAS_SYMVER) && defined (SHARED) && defined (USE_LIBUNWIND_EXCEPTIONS)\n+alias (_Unwind_Backtrace);\n+alias (_Unwind_DeleteException);\n+alias (_Unwind_FindEnclosingFunction);\n+alias (_Unwind_FindTableEntry);\n+alias (_Unwind_ForcedUnwind);\n+alias (_Unwind_GetBSP);\n+alias (_Unwind_GetCFA);\n+alias (_Unwind_GetGR);\n+alias (_Unwind_GetIP);\n+alias (_Unwind_GetLanguageSpecificData);\n+alias (_Unwind_GetRegionStart);\n+alias (_Unwind_RaiseException);\n+alias (_Unwind_Resume);\n+alias (_Unwind_Resume_or_Rethrow);\n+alias (_Unwind_SetGR);\n+alias (_Unwind_SetIP);\n+#endif\n+\n #endif"}, {"sha": "121ce2e47b6be446b08ce85b252d535869f906d8", "filename": "gcc/config/t-libunwind", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fconfig%2Ft-libunwind", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fconfig%2Ft-libunwind", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-libunwind?ref=443728bba4b4ec9b9177121022571b036a8b01bf", "patch": "@@ -1,5 +1,12 @@\n+# Use the system libunwind library.\n+#\n # Override the default value from t-slibgcc-elf-ver and mention -lunwind\n # so that the resulting libgcc_s.so has the necessary DT_NEEDED entry for\n # libunwind.\n SHLIB_LC = -lunwind -lc\n-LIB2ADDEH = $(srcdir)/unwind-sjlj.c $(srcdir)/unwind-c.c\n+LIB2ADDEH = $(srcdir)/unwind-sjlj.c $(srcdir)/unwind-c.c \\\n+  $(srcdir)/unwind-compat.c $(srcdir)/unwind-dw2-fde-compat.c\n+LIB2ADDEHSTATIC = $(srcdir)/unwind-sjlj.c $(srcdir)/unwind-c.c\n+\n+T_CFLAGS += -DUSE_LIBUNWIND_EXCEPTIONS\n+TARGET_LIBGCC2_CFLAGS += -DUSE_GAS_SYMVER"}, {"sha": "ac94fac4ab0fcde466d81966ba4f5f5ecdf175b0", "filename": "gcc/config/t-libunwind-elf", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fconfig%2Ft-libunwind-elf", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fconfig%2Ft-libunwind-elf", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-libunwind-elf?ref=443728bba4b4ec9b9177121022571b036a8b01bf", "patch": "@@ -0,0 +1,26 @@\n+# Build libunwind for ELF with the GNU linker.\n+\n+# Use unwind-dw2-fde-glibc\n+LIBUNWIND = $(srcdir)/unwind-dw2.c $(srcdir)/unwind-dw2-fde-glibc.c\n+LIBUNWINDDEP = unwind.inc unwind-dw2-fde.h unwind-dw2-fde.c\n+\n+SHLIBUNWIND_SOVERSION = 7\n+SHLIBUNWIND_SONAME = @shlib_so_name@.so.$(SHLIBUNWIND_SOVERSION)\n+SHLIBUNWIND_NAME = @shlib_dir@@shlib_so_name@.so.$(SHLIBUNWIND_SOVERSION)\n+\n+SHLIBUNWIND_LINK = $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -shared \\\n+\t-nodefaultlibs -Wl,-h,$(SHLIBUNWIND_SONAME) \\\n+\t-Wl,-z,text -Wl,-z,defs \\\n+\t-o $(SHLIBUNWIND_NAME) @multilib_flags@ $(SHLIB_OBJS) -lc && \\\n+\trm -f $(SHLIB_SOLINK) && \\\n+\t$(LN_S) $(SHLIBUNWIND_NAME) $(SHLIB_SOLINK)\n+\n+# $(slibdir) double quoted to protect it from expansion while building\n+# libgcc.mk.  We want this delayed until actual install time.\n+SHLIBUNWIND_INSTALL = \\\n+\t$$(SHELL) $$(srcdir)/mkinstalldirs $$(DESTDIR)$$(slibdir)$(SHLIB_SLIBDIR_QUAL); \\\n+\t$(INSTALL_DATA) $(SHLIBUNWIND_NAME) \\\n+\t  $$(DESTDIR)$$(slibdir)$(SHLIB_SLIBDIR_QUAL)/$(SHLIBUNWIND_SONAME); \\\n+\trm -f $$(DESTDIR)$$(slibdir)$(SHLIB_SLIBDIR_QUAL)/$(SHLIB_SOLINK); \\\n+\t$(LN_S) $(SHLIBUNWIND_SONAME) \\\n+\t  $$(DESTDIR)$$(slibdir)$(SHLIB_SLIBDIR_QUAL)/$(SHLIB_SOLINK)"}, {"sha": "d6e2e1731dab1422c87e9b1ffb747393be60d239", "filename": "gcc/configure", "status": "modified", "additions": 129, "deletions": 150, "changes": 279, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=443728bba4b4ec9b9177121022571b036a8b01bf", "patch": "@@ -309,7 +309,7 @@ ac_includes_default=\"\\\n # include <unistd.h>\n #endif\"\n \n-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical build_subdir host_subdir target_subdir GENINSRC CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT NO_MINUS_C_MINUS_O OUTPUT_OPTION CPP strict1_warn warn_cflags WERROR nocommon_flag TREEBROWSER EGREP valgrind_path valgrind_path_defines valgrind_command coverage_flags enable_multilib enable_shared TARGET_SYSTEM_ROOT TARGET_SYSTEM_ROOT_DEFINE CROSS_SYSTEM_HEADER_DIR onestep SET_MAKE AWK LN_S LN RANLIB ac_ct_RANLIB ranlib_flags INSTALL INSTALL_PROGRAM INSTALL_DATA make_compare_target have_mktemp_command MAKEINFO BUILD_INFO GENERATED_MANPAGES FLEX BISON NM AR stage1_cflags COLLECT2_LIBS GNAT_LIBEXC LDEXP_LIB TARGET_GETGROUPS_T LIBICONV LIBICONV_DEP manext objext gthread_flags extra_modes_file PACKAGE VERSION USE_NLS LIBINTL LIBINTL_DEP INCINTL XGETTEXT GMSGFMT POSUB CATALOGS CROSS ALL SYSTEM_HEADER_DIR inhibit_libc CC_FOR_BUILD BUILD_CFLAGS STMP_FIXINC STMP_FIXPROTO collect2 libgcc_visibility GGC zlibdir zlibinc MAINT ANDER BANSHEEINC BANSHEELIB gcc_tooldir dollar slibdir objdir subdirs srcdir all_boot_languages all_compilers all_gtfiles all_gtfiles_files_langs all_gtfiles_files_files all_lang_makefrags all_lang_makefiles all_languages all_stagestuff build_exeext build_install_headers_dir build_xm_file_list build_xm_include_list build_xm_defines check_languages cc_set_by_configure quoted_cc_set_by_configure cpp_install_dir xmake_file tmake_file extra_gcc_objs extra_headers_list extra_objs extra_parts extra_passes extra_programs float_h_file gcc_config_arguments gcc_gxx_include_dir libstdcxx_incdir gcc_version gcc_version_full gcc_version_trigger host_exeext host_xm_file_list host_xm_include_list host_xm_defines out_host_hook_obj install lang_opt_files lang_specs_files lang_tree_files local_prefix md_file objc_boehm_gc out_file out_object_file stage_prefix_set_by_configure quoted_stage_prefix_set_by_configure symbolic_link thread_file tm_file_list tm_include_list tm_defines tm_p_file_list tm_p_include_list xm_file_list xm_include_list xm_defines c_target_objs cxx_target_objs target_cpu_default GMPLIBS GMPINC LIBOBJS LTLIBOBJS'\n+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os build_subdir host_subdir target_subdir GENINSRC CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT NO_MINUS_C_MINUS_O OUTPUT_OPTION CPP strict1_warn warn_cflags WERROR nocommon_flag TREEBROWSER EGREP valgrind_path valgrind_path_defines valgrind_command coverage_flags enable_multilib enable_shared TARGET_SYSTEM_ROOT TARGET_SYSTEM_ROOT_DEFINE CROSS_SYSTEM_HEADER_DIR onestep SET_MAKE AWK LN_S LN RANLIB ac_ct_RANLIB ranlib_flags INSTALL INSTALL_PROGRAM INSTALL_DATA make_compare_target have_mktemp_command MAKEINFO BUILD_INFO GENERATED_MANPAGES FLEX BISON NM AR stage1_cflags COLLECT2_LIBS GNAT_LIBEXC LDEXP_LIB TARGET_GETGROUPS_T LIBICONV LIBICONV_DEP manext objext gthread_flags extra_modes_file PACKAGE VERSION USE_NLS LIBINTL LIBINTL_DEP INCINTL XGETTEXT GMSGFMT POSUB CATALOGS CROSS ALL SYSTEM_HEADER_DIR inhibit_libc CC_FOR_BUILD BUILD_CFLAGS STMP_FIXINC STMP_FIXPROTO collect2 libgcc_visibility GGC zlibdir zlibinc MAINT ANDER BANSHEEINC BANSHEELIB gcc_tooldir dollar slibdir objdir subdirs srcdir all_boot_languages all_compilers all_gtfiles all_gtfiles_files_langs all_gtfiles_files_files all_lang_makefrags all_lang_makefiles all_languages all_stagestuff build_exeext build_install_headers_dir build_xm_file_list build_xm_include_list build_xm_defines check_languages cc_set_by_configure quoted_cc_set_by_configure cpp_install_dir xmake_file tmake_file extra_gcc_objs extra_headers_list extra_objs extra_parts extra_passes extra_programs float_h_file gcc_config_arguments gcc_gxx_include_dir libstdcxx_incdir gcc_version gcc_version_full gcc_version_trigger host_exeext host_xm_file_list host_xm_include_list host_xm_defines out_host_hook_obj install lang_opt_files lang_specs_files lang_tree_files local_prefix md_file objc_boehm_gc out_file out_object_file stage_prefix_set_by_configure quoted_stage_prefix_set_by_configure symbolic_link thread_file tm_file_list tm_include_list tm_defines tm_p_file_list tm_p_include_list xm_file_list xm_include_list xm_defines c_target_objs cxx_target_objs target_cpu_default GMPLIBS GMPINC LIBOBJS LTLIBOBJS'\n ac_subst_files='language_hooks'\n \n # Initialize some variables set by options.\n@@ -890,7 +890,6 @@ Optional Features:\n   --enable-initfini-array\tuse .init_array/.fini_array sections\n   --enable-sjlj-exceptions\n                           arrange to use setjmp/longjmp exception handling\n-  --enable-libunwind-exceptions  force use libunwind for exceptions\n   --disable-win32-registry\n                           disable lookup of installation paths in the\n                           Registry on Windows hosts\n@@ -923,6 +922,7 @@ Optional Packages:\n   --with-dwarf2           force the default debug format to be DWARF 2\n   --with-sysroot=DIR Search for usr/lib, usr/include, et al, within DIR.\n   --with-libiconv-prefix=DIR  search for libiconv in DIR/include and DIR/lib\n+  --with-system-libunwind use installed libunwind\n   --with-gc={page,zone}   choose the garbage collection mechanism to use\n                           with the compiler\n   --with-system-zlib      use installed libz\n@@ -1031,7 +1031,7 @@ esac\n     else\n       echo \"$as_me: WARNING: no configuration information is in $ac_dir\" >&2\n     fi\n-    cd \"$ac_popdir\"\n+    cd $ac_popdir\n   done\n fi\n \n@@ -1495,6 +1495,9 @@ test -n \"$target_alias\" &&\n   program_prefix=${target_alias}-\n \n # Determine the noncanonical target name, for directory use.\n+ACX_NONCANONICAL_TARGET\n+\n+# Determine the target- and build-specific subdirectories\n  case ${build_alias} in\n   \"\") build_noncanonical=${build} ;;\n   *) build_noncanonical=${build_alias} ;;\n@@ -1510,10 +1513,6 @@ esac\n   *) target_noncanonical=${target_alias} ;;\n esac\n \n-\n-\n-\n-# Determine the target- and build-specific subdirectories\n   # Prefix 'build-' so this never conflicts with target_subdir.\n build_subdir=\"build-${build_noncanonical}\"\n # Not really a subdirectory, but here for completeness.\n@@ -2383,7 +2382,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -2441,7 +2441,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -2557,7 +2558,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -2611,7 +2613,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -2656,7 +2659,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -2700,7 +2704,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3106,7 +3111,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3177,7 +3183,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3236,7 +3243,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3302,7 +3310,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3372,7 +3381,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3442,7 +3452,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3512,7 +3523,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3583,7 +3595,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3655,7 +3668,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3728,7 +3742,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3778,7 +3793,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3836,7 +3852,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -4071,7 +4088,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -4241,7 +4259,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -4304,7 +4323,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5269,7 +5289,7 @@ if test \"${gcc_cv_prog_makeinfo_modern+set}\" = set; then\n else\n     ac_prog_version=`$MAKEINFO --version 2>&1 |\n                    sed -n 's/^.*GNU texinfo.* \\([0-9][0-9.]*\\).*$/\\1/p'`\n-  echo \"configure:5272: version of makeinfo is $ac_prog_version\" >&5\n+  echo \"configure:5292: version of makeinfo is $ac_prog_version\" >&5\n   case $ac_prog_version in\n     '')     gcc_cv_prog_makeinfo_modern=no;;\n     4.[2-9]*)\n@@ -5524,7 +5544,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5594,7 +5615,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5759,7 +5781,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5820,7 +5843,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5890,7 +5914,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -6164,7 +6189,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -6237,7 +6263,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -6278,7 +6305,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -6480,7 +6508,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -6554,7 +6583,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -6608,7 +6638,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -6686,7 +6717,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -6740,7 +6772,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -6808,7 +6841,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -6938,7 +6972,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -7059,7 +7094,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -7410,7 +7446,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -7527,7 +7564,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -7639,7 +7677,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -7797,7 +7836,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -8166,7 +8206,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -8216,7 +8257,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -8291,7 +8333,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -8365,7 +8408,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -8467,7 +8511,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -8552,7 +8597,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -8621,7 +8667,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -8690,7 +8737,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -8773,7 +8821,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -8849,7 +8898,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -8915,7 +8965,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -9051,7 +9102,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -9101,88 +9153,14 @@ _ACEOF\n \n fi;\n \n-if test x$host = x$target; then\n-   echo \"$as_me:$LINENO: checking for main in -lunwind\" >&5\n-echo $ECHO_N \"checking for main in -lunwind... $ECHO_C\" >&6\n-if test \"${ac_cv_lib_unwind_main+set}\" = set; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-else\n-  ac_check_lib_save_LIBS=$LIBS\n-LIBS=\"-lunwind  $LIBS\"\n-cat >conftest.$ac_ext <<_ACEOF\n-/* confdefs.h.  */\n-_ACEOF\n-cat confdefs.h >>conftest.$ac_ext\n-cat >>conftest.$ac_ext <<_ACEOF\n-/* end confdefs.h.  */\n+# For platforms with the unwind ABI which includes an unwind library,\n+# libunwind, we can choose to use the system libunwind.\n \n+# Check whether --with-system-libunwind or --without-system-libunwind was given.\n+if test \"${with_system_libunwind+set}\" = set; then\n+  withval=\"$with_system_libunwind\"\n \n-int\n-main ()\n-{\n-main ();\n-  ;\n-  return 0;\n-}\n-_ACEOF\n-rm -f conftest.$ac_objext conftest$ac_exeext\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n-  (eval $ac_link) 2>conftest.er1\n-  ac_status=$?\n-  grep -v '^ *+' conftest.er1 >conftest.err\n-  rm -f conftest.er1\n-  cat conftest.err >&5\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; } &&\n-\t { ac_try='test -s conftest$ac_exeext'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; }; then\n-  ac_cv_lib_unwind_main=yes\n-else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n-\n-ac_cv_lib_unwind_main=no\n-fi\n-rm -f conftest.err conftest.$ac_objext \\\n-      conftest$ac_exeext conftest.$ac_ext\n-LIBS=$ac_check_lib_save_LIBS\n-fi\n-echo \"$as_me:$LINENO: result: $ac_cv_lib_unwind_main\" >&5\n-echo \"${ECHO_T}$ac_cv_lib_unwind_main\" >&6\n-if test $ac_cv_lib_unwind_main = yes; then\n-  use_libunwind_default=yes\n-else\n-  use_libunwind_default=no\n-fi\n-\n-else\n-   use_libunwind_default=no\n-fi\n-# Use libunwind based exception handling.\n-# Check whether --enable-libunwind-exceptions or --disable-libunwind-exceptions was given.\n-if test \"${enable_libunwind_exceptions+set}\" = set; then\n-  enableval=\"$enable_libunwind_exceptions\"\n-  use_libunwind_exceptions=$enableval\n-else\n-  use_libunwind_exceptions=$use_libunwind_default\n fi;\n-if test x\"$use_libunwind_exceptions\" = xyes; then\n-\n-cat >>confdefs.h <<\\_ACEOF\n-#define USE_LIBUNWIND_EXCEPTIONS 1\n-_ACEOF\n-\n-fi\n \n # --------------------------------------------------------\n # Build, host, and target specific configuration fragments\n@@ -9432,7 +9410,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -9699,7 +9678,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -9753,7 +9733,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -13182,7 +13163,6 @@ s,@target@,$target,;t t\n s,@target_cpu@,$target_cpu,;t t\n s,@target_vendor@,$target_vendor,;t t\n s,@target_os@,$target_os,;t t\n-s,@target_noncanonical@,$target_noncanonical,;t t\n s,@build_subdir@,$build_subdir,;t t\n s,@host_subdir@,$host_subdir,;t t\n s,@target_subdir@,$target_subdir,;t t\n@@ -13506,6 +13486,11 @@ esac\n \n \n \n+  if test x\"$ac_file\" != x-; then\n+    { echo \"$as_me:$LINENO: creating $ac_file\" >&5\n+echo \"$as_me: creating $ac_file\" >&6;}\n+    rm -f \"$ac_file\"\n+  fi\n   # Let's still pretend it is `configure' which instantiates (i.e., don't\n   # use $as_me), people would be surprised to read:\n   #    /* config.h.  Generated by config.status.  */\n@@ -13544,12 +13529,6 @@ echo \"$as_me: error: cannot find input file: $f\" >&2;}\n \t fi;;\n       esac\n     done` || { (exit 1); exit 1; }\n-\n-  if test x\"$ac_file\" != x-; then\n-    { echo \"$as_me:$LINENO: creating $ac_file\" >&5\n-echo \"$as_me: creating $ac_file\" >&6;}\n-    rm -f \"$ac_file\"\n-  fi\n _ACEOF\n cat >>$CONFIG_STATUS <<_ACEOF\n   sed \"$ac_vpsub"}, {"sha": "1da2417c6084447e08e3927c22740932623fe2b9", "filename": "gcc/configure.ac", "status": "modified", "additions": 4, "deletions": 14, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=443728bba4b4ec9b9177121022571b036a8b01bf", "patch": "@@ -1114,20 +1114,10 @@ AC_ARG_ENABLE(sjlj-exceptions,\n AC_DEFINE_UNQUOTED(CONFIG_SJLJ_EXCEPTIONS, $sjlj,\n   [Define 0/1 to force the choice for exception handling model.])])\n \n-if test x$host = x$target; then\n-   AC_CHECK_LIB(unwind, main, use_libunwind_default=yes, use_libunwind_default=no)\n-else\n-   use_libunwind_default=no\n-fi\n-# Use libunwind based exception handling.\n-AC_ARG_ENABLE(libunwind-exceptions,\n-[  --enable-libunwind-exceptions  force use libunwind for exceptions],\n-use_libunwind_exceptions=$enableval,\n-use_libunwind_exceptions=$use_libunwind_default)\n-if test x\"$use_libunwind_exceptions\" = xyes; then\n-   AC_DEFINE(USE_LIBUNWIND_EXCEPTIONS, 1,\n-\t[Define if gcc should use -lunwind.])\n-fi\n+# For platforms with the unwind ABI which includes an unwind library,\n+# libunwind, we can choose to use the system libunwind.\n+AC_ARG_WITH(system-libunwind,\n+[  --with-system-libunwind use installed libunwind])\n \n # --------------------------------------------------------\n # Build, host, and target specific configuration fragments"}, {"sha": "7a2d3e59266595e3a5b8f8da6edefacb82e0c94d", "filename": "gcc/doc/install.texi", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fdoc%2Finstall.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fdoc%2Finstall.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finstall.texi?ref=443728bba4b4ec9b9177121022571b036a8b01bf", "patch": "@@ -2933,8 +2933,9 @@ have installed.\n IA-64 processor (also known as IPF, or Itanium Processor Family)\n running GNU/Linux.\n \n-If you are using the optional libunwind library, then you must use\n-libunwind 0.96 or later.\n+If you are using the installed system libunwind library with\n+@option{--with-system-libunwind}, then you must use libunwind 0.98 or\n+later.\n \n None of the following versions of GCC has an ABI that is compatible\n with any of the other versions in this list, with the exception that\n@@ -2956,6 +2957,8 @@ the option @option{--with-gnu-as} may be necessary.\n The GCC libunwind library has not been ported to HPUX. This means that for\n GCC versions 3.2.3 and earlier, @option{--enable-libunwind-exceptions}\n is required to build GCC. For GCC 3.3 and later, this is the default.\n+For gcc 3.4.3 and later, @option{--enable-libunwind-exceptions} is\n+removed and the system libunwind library will always be used.\n \n @html\n <hr />"}, {"sha": "8076f51c9124891bdb050dd004737296cbd66df9", "filename": "gcc/gcc.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=443728bba4b4ec9b9177121022571b036a8b01bf", "patch": "@@ -1702,6 +1702,9 @@ init_spec (void)\n \t\t\t    \"-lgcc_s\"\n #else\n \t\t\t    \"-lgcc_s%M\"\n+#endif\n+#ifdef USE_LIBUNWIND_EXCEPTIONS\n+\t\t\t    \" -lunwind\"\n #endif\n \t\t\t    ,\n \t\t\t    \"-lgcc\","}, {"sha": "ebf0a81edb4608e28367cf255f9165308af151d6", "filename": "gcc/mklibgcc.in", "status": "modified", "additions": 149, "deletions": 10, "changes": 159, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fmklibgcc.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Fmklibgcc.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmklibgcc.in?ref=443728bba4b4ec9b9177121022571b036a8b01bf", "patch": "@@ -14,7 +14,13 @@\n # LIB2ADD\n # LIB2ADD_ST \n # LIB2ADDEH\n+# LIB2ADDEHSTATIC\n+# LIB2ADDEHSHARED\n # LIB2ADDEHDEP\n+# LIBUNWIND\n+# LIBUNWINDDEP\n+# SHLIBUNWIND_LINK\n+# SHLIBUNWIND_INSTALL\n # FPBIT\n # FPBIT_FUNCS\n # LIB2_DIVMOD_FUNCS\n@@ -117,7 +123,8 @@ done\n \n libgcc2_objs=\"\"\n libgcc2_st_objs=\"\"\n-libgcc2_eh_objs=\"\"\n+libgcc2_eh_static_objs=\"\"\n+libgcc2_eh_shared_objs=\"\"\n \n for name in $lib2funcs; do\n   for ml in $MULTILIBS; do\n@@ -236,13 +243,27 @@ for file in $LIB2ADDEH; do\n     echo $out: stmp-dirs $file $LIB2ADDEHDEP $libgcc_dep\n     echo \"\t$gcc_compile\" $flags -fexceptions -c $file -o $out\n   done\n-  if [ \"$SHLIB_LINK\" ]; then\n-    libgcc2_eh_objs=\"$libgcc2_eh_objs ${oname}${objext}\"\n-  else\n+  if [ -z \"$SHLIB_LINK\" ]; then\n     libgcc2_objs=\"$libgcc2_objs ${oname}${objext}\"\n   fi\n done\n \n+if [ \"$SHLIB_LINK\" ]; then\n+  # Those should be in libgcc_eh.a.\n+  for file in $LIB2ADDEHSTATIC; do\n+    name=`echo $file | sed -e 's/[.][cSo]$//' -e 's/[.]asm$//' -e 's/[.]txt$//'`\n+    oname=`echo $name | sed -e 's,.*/,,'`\n+    libgcc2_eh_static_objs=\"$libgcc2_eh_static_objs ${oname}${objext}\"\n+  done\n+\n+  # Those should be in libgcc.so.\n+  for file in $LIB2ADDEHSHARED; do\n+    name=`echo $file | sed -e 's/[.][cSo]$//' -e 's/[.]asm$//' -e 's/[.]txt$//'`\n+    oname=`echo $name | sed -e 's,.*/,,'`\n+    libgcc2_eh_shared_objs=\"$libgcc2_eh_shared_objs ${oname}${objext}\"\n+  done\n+fi\n+\n for file in $LIB2ADD_ST; do\n   name=`echo $file | sed -e 's/[.][cSo]$//' -e 's/[.]asm$//' -e 's/[.]txt$//'`\n   oname=`echo $name | sed -e 's,.*/,,'`\n@@ -261,6 +282,31 @@ for file in $LIB2ADD_ST; do\n   libgcc2_st_objs=\"$libgcc2_st_objs ${oname}${objext}\"\n done\n \n+if [ \"$LIBUNWIND\" ]; then\n+  libunwind_static_objs=\"\"\n+  libunwind_shared_objs=\"\"\n+  for file in $LIBUNWIND; do\n+    name=`echo $file | sed -e 's/[.][cSo]$//' -e 's/[.]asm$//' -e 's/[.]txt$//'`\n+    oname=`echo $name | sed -e 's,.*/,,'`\n+\n+    for ml in $MULTILIBS; do\n+      dir=`echo ${ml} | sed -e 's/;.*$//' -e 's/=/$(EQ)/g'`\n+      flags=`echo ${ml} | sed -e 's/^[^;]*;//' -e 's/@/ -/g'`;\n+      out=\"libgcc/${dir}/${oname}${objext}\"\n+      if [ ${name}.asm = ${file} ]; then\n+\tflags=\"$flags -xassembler-with-cpp\"\n+      fi\n+\n+      echo $out: stmp-dirs $file $LIBUNWINDDEP\n+      echo \"\t$gcc_compile\" $flags -fexceptions -c $file -o $out\n+      echo ${out}s: stmp-dirs $file $LIBUNWINDDEP\n+      echo \"\t$gcc_compile\" $flags -fexceptions -DSHARED -c $file -o ${out}s\n+    done\n+    libunwind_static_objs=\"$libunwind_static_objs ${oname}${objext}\"\n+    libunwind_shared_objs=\"$libunwind_shared_objs ${oname}${objext}s\"\n+  done\n+fi\n+\n #\n # build libgcov components\n #\n@@ -288,17 +334,21 @@ for ml in $MULTILIBS; do\n   flags=`echo ${ml} | sed -e 's/^[^;]*;//' -e 's/@/ -/g'`;\n \n   libgcc_objs=\"\"\n-  libgcc_eh_objs=\"\"\n+  libgcc_eh_static_objs=\"\"\n+  libgcc_eh_shared_objs=\"\"\n   for o in $libgcc1_objs; do\n     libgcc_objs=\"$libgcc_objs libgcc/${dir}/$o\"\n   done\n   for o in $libgcc2_objs; do\n     libgcc_objs=\"$libgcc_objs libgcc/${dir}/$o\"\n   done\n-  for o in $libgcc2_eh_objs; do\n-    libgcc_eh_objs=\"$libgcc_eh_objs libgcc/${dir}/$o\"\n+  for o in $libgcc2_eh_static_objs; do\n+    libgcc_eh_static_objs=\"$libgcc_eh_static_objs libgcc/${dir}/$o\"\n   done\n-  libgcc_sh_objs=\"$libgcc_objs $libgcc_eh_objs\"\n+  for o in $libgcc2_eh_shared_objs; do\n+    libgcc_eh_shared_objs=\"$libgcc_eh_shared_objs libgcc/${dir}/$o\"\n+  done\n+  libgcc_sh_objs=\"$libgcc_objs $libgcc_eh_shared_objs\"\n   shlib_deps=\"$libgcc_sh_objs\"\n \n   libgcc_st_objs=\"\"\n@@ -310,6 +360,18 @@ for ml in $MULTILIBS; do\n   for o in $libgcov_objs; do\n     libgcov_a_objs=\"$libgcov_a_objs libgcc/${dir}/$o\"\n   done\n+\n+  if [ \"$LIBUNWIND\" ]; then\n+    libunwind_a_objs=\"\"\n+    for o in $libunwind_static_objs; do\n+      libunwind_a_objs=\"$libunwind_a_objs libgcc/${dir}/$o\"\n+    done\n+    libunwind_sh_objs=\"\"\n+    for o in $libunwind_shared_objs; do\n+      libunwind_sh_objs=\"$libunwind_sh_objs libgcc/${dir}/$o\"\n+    done\n+    shlibunwind_deps=\"$libunwind_sh_objs\"\n+  fi\n   \n   if [ \"$SHLIB_LINK\" -a \"$SHLIB_MKMAP\" ]; then\n     mapfile=\"libgcc/${dir}/libgcc.map\"\n@@ -375,21 +437,37 @@ EOF\n   echo '\t$(AR_CREATE_FOR_TARGET)' ${dir}/libgcov.a $libgcov_a_objs\n   echo '\t$(RANLIB_FOR_TARGET)' ${dir}/libgcov.a\n \n+  if [ \"$LIBUNWIND\" ]; then\n+    echo \"\"\n+    echo \"${dir}/libunwind.a: stmp-dirs $libunwind_a_objs\"\n+    echo \"\t-rm -rf ${dir}/libunwind.a\"\n+    echo '\t$(AR_CREATE_FOR_TARGET)' ${dir}/libunwind.a $libunwind_a_objs\n+    echo '\t$(RANLIB_FOR_TARGET)' ${dir}/libunwind.a\n+    echo \"\"\n+    echo \"${dir}/libgcc.a: ${dir}/libunwind.a\"\n+  fi\n+\n   if [ \"$SHLIB_LINK\" ]; then\n \n     echo \"\"\n-    echo \"${dir}/libgcc_eh.a: stmp-dirs $libgcc_eh_objs\"\n+    echo \"${dir}/libgcc_eh.a: stmp-dirs $libgcc_eh_static_objs\"\n     echo \"\t-rm -rf ${dir}/libgcc_eh.a\"\n-    echo '\t$(AR_CREATE_FOR_TARGET)' ${dir}/libgcc_eh.a $libgcc_eh_objs\n+    echo '\t$(AR_CREATE_FOR_TARGET)' ${dir}/libgcc_eh.a $libgcc_eh_static_objs\n     echo '\t$(RANLIB_FOR_TARGET)' ${dir}/libgcc_eh.a\n \n     if [ -z \"$SHLIB_MULTILIB\" ]; then\n       if [ \"$dir\" = . ]; then\n \tshlib_base_name=libgcc_s\n+\tshlibunwind_base_name=libunwind\n       else\n \tshlib_base_name=libgcc_s_`echo $dir | sed s,/,_,g`\n+\tshlibunwind_base_name=libunwind_`echo $dir | sed s,/,_,g`\n       fi\n       shlib_so_name=\"$shlib_base_name\"\n+      shlibunwind_so_name=\"$shlibunwind_base_name\"\n+      if [ \"$LIBUNWIND\" ]; then\n+\tshlib_deps=\"$shlib_deps ${dir}/${shlibunwind_base_name}${SHLIB_EXT}\"\n+      fi\n       shlib_dir=\n       shlib_slibdir_qual=\n       if [ -n \"$MULTILIB_OSDIRNAMES\" ]; then\n@@ -401,11 +479,13 @@ EOF\n \t  os_multilib_base=`echo $os_multilib_dir | sed -n \"s~/${gcc_multilib_sup}\\$~~p\"`\n \t  if [ -z \"$os_multilib_base\" ]; then\n \t    shlib_so_name=libgcc_s\n+\t    shlibunwind_so_name=libunwind\n \t    if [ \"$os_multilib_dir\" != \".\" ]; then\n \t\tshlib_slibdir_qual=\"/$os_multilib_dir\"\n \t    fi\n \t  else\n \t    shlib_so_name=libgcc_s_`echo $gcc_multilib_sup | sed s,/,_,g`\n+\t    shlibunwind_so_name=libunwind_`echo $gcc_multilib_sup | sed s,/,_,g`\n \t    shlib_slibdir_qual=\"/$os_multilib_base\"\n \t  fi\n \tfi\n@@ -421,8 +501,21 @@ EOF\n \t       -e \"s%@shlib_so_name@%$shlib_so_name%g\" \\\n \t       -e \"s%@shlib_dir@%$shlib_dir%g\" \\\n \t       -e \"s%@shlib_slibdir_qual@%%g\"\n+      if [ \"$LIBUNWIND\" ]; then\n+\techo \"\"\n+\techo \"${dir}/${shlibunwind_base_name}${SHLIB_EXT}: $shlibunwind_deps\"\n+\techo \"\t$SHLIBUNWIND_LINK\" \\\n+\t   | sed -e \"s%@multilib_flags@%$flags%g\" \\\n+\t\t -e \"s%@multilib_dir@%$dir%g\" \\\n+\t\t -e \"s%@shlib_objs@%$libunwind_sh_objs%g\" \\\n+\t\t -e \"s%@shlib_base_name@%$shlibunwind_base_name%g\" \\\n+\t\t -e \"s%@shlib_so_name@%$shlibunwind_so_name%g\" \\\n+\t\t -e \"s%@shlib_dir@%$shlib_dir%g\" \\\n+\t\t -e \"s%@shlib_slibdir_qual@%%g\"\n+      fi\n     elif [ \"$SHLIB_MULTILIB\" = \"$dir\" ]; then\n       shlib_base_name=\"libgcc_s\";\n+      shlibunwind_base_name=\"libunwind\";\n       echo \"\"\n       echo \"${shlib_base_name}${SHLIB_EXT}: $shlib_deps\"\n       echo \"\t$SHLIB_LINK\" \\\n@@ -434,6 +527,18 @@ EOF\n \t       -e \"s%@shlib_so_name@%$shlib_base_name%g\" \\\n \t       -e \"s%@shlib_dir@%%g\" \\\n \t       -e \"s%@shlib_slibdir_qual@%%g\"\n+      if [ \"$LIBUNWIND\" ]; then\n+\techo \"\"\n+\techo \"${shlibunwind_base_name}${SHLIB_EXT}: $shlibunwind_deps\"\n+\techo \"\t$SHLIBUNWIND_LINK\" \\\n+\t   | sed -e \"s%@multilib_flags@%$flags%g\" \\\n+\t\t -e \"s%@multilib_dir@%$dir%g\" \\\n+\t\t -e \"s%@shlib_objs@%$libgcc_sh_objs%g\" \\\n+\t\t -e \"s%@shlib_base_name@%$shlibunwind_base_name%g\" \\\n+\t\t -e \"s%@shlib_so_name@%$shlibunwind_base_name%g\" \\\n+\t\t -e \"s%@shlib_dir@%%g\" \\\n+\t\t -e \"s%@shlib_slibdir_qual@%%g\"\n+      fi\n     fi\n   fi\n done\n@@ -466,6 +571,9 @@ for ml in $MULTILIBS; do\n     dirs=\"$dirs ${dir} libgcc/${dir}\"\n   fi\n   all=\"$all ${dir}/libgcc.a ${dir}/libgcov.a\"\n+  if [ \"$LIBUNWIND\" ]; then\n+    all=\"$all ${dir}/libunwind.a\"\n+  fi\n   if [ \"$SHLIB_LINK\" ]; then\n     all=\"$all ${dir}/libgcc_eh.a\"\n     if [ -z \"$SHLIB_MULTILIB\" ]; then\n@@ -475,8 +583,14 @@ for ml in $MULTILIBS; do\n \tsuff=_`echo $dir | sed s,/,_,g`\n       fi\n       all=\"$all ${dir}/libgcc_s${suff}${SHLIB_EXT}\"\n+      if [ \"$LIBUNWIND\" ]; then\n+\tall=\"$all ${dir}/${dir}/libunwind${suff}${SHLIB_EXT}\"\n+      fi\n     elif [ \"$SHLIB_MULTILIB\" = \"$dir\" ]; then\n       all=\"$all libgcc_s${SHLIB_EXT}\"\n+      if [ \"$LIBUNWIND\" ]; then\n+\tall=\"$all ${dir}/${dir}/libunwind${SHLIB_EXT}\"\n+      fi\n     fi\n   fi\n done\n@@ -536,10 +650,13 @@ for ml in $MULTILIBS; do\n     if [ -z \"$SHLIB_MULTILIB\" ]; then\n       if [ \"$dir\" = . ]; then\n \tshlib_base_name=libgcc_s\n+\tshlibunwind_base_name=libunwind\n       else\n \tshlib_base_name=libgcc_s_`echo $dir | sed s,/,_,g`\n+\tshlibunwind_base_name=libunwind_`echo $dir | sed s,/,_,g`\n       fi\n       shlib_so_name=\"$shlib_base_name\"\n+      shlibunwind_so_name=\"$shlibunwind_base_name\"\n       shlib_dir=\n       shlib_slibdir_qual=\n       if [ -n \"$MULTILIB_OSDIRNAMES\" ]; then\n@@ -552,11 +669,13 @@ for ml in $MULTILIBS; do\n \tos_multilib_base=`echo $os_multilib_dir | sed -n \"s~/${gcc_multilib_sup}\\$~~p\"`\n \tif [ -z \"$os_multilib_base\" ]; then\n \t  shlib_so_name=libgcc_s\n+\t  shlibunwind_so_name=libunwind\n \t  if [ \"$os_multilib_dir\" != \".\" ]; then\n \t    shlib_slibdir_qual=\"/$os_multilib_dir\"\n \t  fi\n \telse\n \t  shlib_so_name=libgcc_s_`echo $gcc_multilib_sup | sed s,/,_,g`\n+\t  shlibunwind_so_name=libunwind_`echo $gcc_multilib_sup | sed s,/,_,g`\n \t  shlib_slibdir_qual=\"/$os_multilib_base\"\n \tfi\n       fi\n@@ -565,13 +684,33 @@ for ml in $MULTILIBS; do\n \t      -e \"s%@shlib_so_name@%$shlib_so_name%g\" \\\n \t      -e \"s%@shlib_dir@%$shlib_dir%g\" \\\n \t      -e \"s%@shlib_slibdir_qual@%$shlib_slibdir_qual%g\"\n+      if [ \"$LIBUNWIND\" ]; then\n+\techo \"\t$SHLIBUNWIND_INSTALL\" \\\n+\t   | sed -e \"s%@shlib_base_name@%$shlibunwind_base_name%g\" \\\n+\t\t -e \"s%@shlib_so_name@%$shlibunwind_so_name%g\" \\\n+\t\t -e \"s%@shlib_dir@%$shlib_dir%g\" \\\n+\t\t -e \"s%@shlib_slibdir_qual@%$shlib_slibdir_qual%g\"\n+\tlibunwinddir='$(DESTDIR)$(slibdir)$(shlib_slibdir_qual)/$(shlib_dir)'\n+\techo '\t$(INSTALL_DATA)' ${dir}/libunwind.a ${libunwinddir}/\n+\techo '\t$(RANLIB_FOR_TARGET)' ${libunwinddir}/libunwind.a\n+      fi\n     elif [ \"$SHLIB_MULTILIB\" = \"$dir\" ]; then\n       shlib_base_name=\"libgcc_s\";\n       echo \"\t$SHLIB_INSTALL\" \\\n \t| sed -e \"s%@shlib_base_name@%$shlib_base_name%g\" \\\n \t      -e \"s%@shlib_so_name@%$shlib_base_name%g\" \\\n \t      -e \"s%@shlib_dir@%%g\" \\\n \t      -e \"s%@shlib_slibdir_qual@%%g\"\n+      if [ \"$LIBUNWIND\" ]; then\n+\techo \"\t$SHLIBUNWIND_INSTALL\" \\\n+\t   | sed -e \"s%@shlib_base_name@%$shlibunwind_base_name%g\" \\\n+\t\t -e \"s%@shlib_so_name@%$shlibunwind_base_name%g\" \\\n+\t\t -e \"s%@shlib_dir@%%g\" \\\n+\t\t -e \"s%@shlib_slibdir_qual@%%g\"\n+\tlibunwinddir='$(DESTDIR)$(slibdir)'\n+\techo '\t$(INSTALL_DATA)' ${dir}/libunwind.a ${libunwinddir}/\n+\techo '\t$(RANLIB_FOR_TARGET)' ${libunwinddir}/libunwind.a\n+      fi\n     fi\n   fi\n done"}, {"sha": "26f45ac8e576e88d8caecd2e1b4d39f73e9dd635", "filename": "gcc/unwind-compat.c", "status": "added", "additions": 206, "deletions": 0, "changes": 206, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Funwind-compat.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Funwind-compat.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Funwind-compat.c?ref=443728bba4b4ec9b9177121022571b036a8b01bf", "patch": "@@ -0,0 +1,206 @@\n+/* Backward compatibility unwind routines.\n+   Copyright (C) 2004\n+   Free Software Foundation, Inc.\n+\n+   This file is part of GCC.\n+\n+   GCC is free software; you can redistribute it and/or modify it\n+   under the terms of the GNU General Public License as published by\n+   the Free Software Foundation; either version 2, or (at your option)\n+   any later version.\n+\n+   In addition to the permissions in the GNU General Public License, the\n+   Free Software Foundation gives you unlimited permission to link the\n+   compiled version of this file into combinations with other programs,\n+   and to distribute those combinations without any restriction coming\n+   from the use of this file.  (The General Public License restrictions\n+   do apply in other respects; for example, they cover modification of\n+   the file, and distribution when not linked into a combined\n+   executable.)\n+\n+   GCC is distributed in the hope that it will be useful, but WITHOUT\n+   ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n+   or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public\n+   License for more details.\n+\n+   You should have received a copy of the GNU General Public License\n+   along with GCC; see the file COPYING.  If not, write to the Free\n+   Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n+   02111-1307, USA.  */\n+\n+#if defined (USE_GAS_SYMVER) && defined (USE_LIBUNWIND_EXCEPTIONS)\n+#include \"unwind.h\"\n+#include \"unwind-dw2-fde.h\"\n+#include \"unwind-compat.h\"\n+\n+extern _Unwind_Reason_Code __libunwind_Unwind_Backtrace\n+  (_Unwind_Trace_Fn, void *);\n+\n+_Unwind_Reason_Code\n+_Unwind_Backtrace (_Unwind_Trace_Fn trace, void *trace_argument)\n+{\n+  return __libunwind_Unwind_Backtrace (trace, trace_argument);\n+}\n+symver (_Unwind_Backtrace, GCC_3.3);\n+\n+extern void __libunwind_Unwind_DeleteException\n+  (struct _Unwind_Exception *);\n+\n+void\n+_Unwind_DeleteException (struct _Unwind_Exception *exc)\n+{\n+  return __libunwind_Unwind_DeleteException (exc);\n+}\n+symver (_Unwind_DeleteException, GCC_3.0);\n+\n+extern void * __libunwind_Unwind_FindEnclosingFunction (void *);\n+\n+void *\n+_Unwind_FindEnclosingFunction (void *pc)\n+{\n+  return __libunwind_Unwind_FindEnclosingFunction (pc);\n+}\n+symver (_Unwind_FindEnclosingFunction, GCC_3.3);\n+\n+extern _Unwind_Reason_Code __libunwind_Unwind_ForcedUnwind\n+  (struct _Unwind_Exception *, _Unwind_Stop_Fn, void *);\n+\n+_Unwind_Reason_Code\n+_Unwind_ForcedUnwind (struct _Unwind_Exception *exc,\n+\t\t      _Unwind_Stop_Fn stop, void * stop_argument)\n+{\n+  return __libunwind_Unwind_ForcedUnwind (exc, stop, stop_argument);\n+}\n+symver (_Unwind_ForcedUnwind, GCC_3.0);\n+\n+extern _Unwind_Word __libunwind_Unwind_GetCFA\n+  (struct _Unwind_Context *);\n+\n+_Unwind_Word\n+_Unwind_GetCFA (struct _Unwind_Context *context)\n+{\n+  return __libunwind_Unwind_GetCFA (context);\n+}\n+symver (_Unwind_GetCFA, GCC_3.3);\n+\n+#ifdef __ia64__\n+extern _Unwind_Word __libunwind_Unwind_GetBSP\n+  (struct _Unwind_Context *);\n+\n+_Unwind_Word\n+_Unwind_GetBSP (struct _Unwind_Context * context)\n+{\n+  return __libunwind_Unwind_GetBSP (context);\n+}\n+symver (_Unwind_GetBSP, GCC_3.3.2);\n+#else\n+extern _Unwind_Ptr __libunwind_Unwind_GetDataRelBase\n+  (struct _Unwind_Context *);\n+\n+_Unwind_Ptr\n+_Unwind_GetDataRelBase (struct _Unwind_Context *context)\n+{\n+  return __libunwind_Unwind_GetDataRelBase (context);\n+}\n+symver (_Unwind_GetDataRelBase, GCC_3.0);\n+\n+extern _Unwind_Ptr __libunwind_Unwind_GetTextRelBase\n+  (struct _Unwind_Context *);\n+\n+_Unwind_Ptr\n+_Unwind_GetTextRelBase (struct _Unwind_Context *context)\n+{\n+  return __libunwind_Unwind_GetTextRelBase (context);\n+}\n+symver (_Unwind_GetTextRelBase, GCC_3.0);\n+#endif\n+\n+extern _Unwind_Word __libunwind_Unwind_GetGR\n+  (struct _Unwind_Context *, int );\n+\n+_Unwind_Word\n+_Unwind_GetGR (struct _Unwind_Context *context, int index)\n+{\n+  return __libunwind_Unwind_GetGR (context, index);\n+}\n+symver (_Unwind_GetGR, GCC_3.0);\n+\n+extern _Unwind_Ptr __libunwind_Unwind_GetIP (struct _Unwind_Context *);\n+\n+_Unwind_Ptr\n+_Unwind_GetIP (struct _Unwind_Context *context)\n+{\n+  return __libunwind_Unwind_GetIP (context);\n+}\n+symver (_Unwind_GetIP, GCC_3.0);\n+\n+extern void *__libunwind_Unwind_GetLanguageSpecificData\n+  (struct _Unwind_Context *);\n+\n+void *\n+_Unwind_GetLanguageSpecificData (struct _Unwind_Context *context)\n+{\n+  return __libunwind_Unwind_GetLanguageSpecificData (context);\n+}\n+symver (_Unwind_GetLanguageSpecificData, GCC_3.0);\n+\n+extern _Unwind_Ptr __libunwind_Unwind_GetRegionStart\n+  (struct _Unwind_Context *);\n+\n+_Unwind_Ptr\n+_Unwind_GetRegionStart (struct _Unwind_Context *context)\n+{\n+  return __libunwind_Unwind_GetRegionStart (context);\n+}\n+symver (_Unwind_GetRegionStart, GCC_3.0);\n+\n+extern _Unwind_Reason_Code __libunwind_Unwind_RaiseException\n+  (struct _Unwind_Exception *);\n+\n+_Unwind_Reason_Code\n+_Unwind_RaiseException(struct _Unwind_Exception *exc)\n+{\n+  return __libunwind_Unwind_RaiseException (exc);\n+}\n+symver (_Unwind_RaiseException, GCC_3.0);\n+\n+extern void __libunwind_Unwind_Resume (struct _Unwind_Exception *);\n+\n+void\n+_Unwind_Resume (struct _Unwind_Exception *exc)\n+{\n+  __libunwind_Unwind_Resume (exc);\n+}\n+symver (_Unwind_Resume, GCC_3.0);\n+\n+extern _Unwind_Reason_Code __libunwind_Unwind_Resume_or_Rethrow\n+   (struct _Unwind_Exception *);\n+\n+_Unwind_Reason_Code\n+_Unwind_Resume_or_Rethrow (struct _Unwind_Exception *exc)\n+{\n+  return __libunwind_Unwind_Resume_or_Rethrow (exc);\n+}\n+symver (_Unwind_Resume_or_Rethrow, GCC_3.3);\n+\n+extern void __libunwind_Unwind_SetGR\n+  (struct _Unwind_Context *, int, _Unwind_Word);\n+\n+void\n+_Unwind_SetGR (struct _Unwind_Context *context, int index,\n+\t       _Unwind_Word val) \n+{\n+  __libunwind_Unwind_SetGR (context, index, val);\n+}\n+symver (_Unwind_SetGR, GCC_3.0);\n+\n+extern void __libunwind_Unwind_SetIP\n+  (struct _Unwind_Context *, _Unwind_Ptr);\n+\n+void\n+_Unwind_SetIP (struct _Unwind_Context *context, _Unwind_Ptr val)\n+{\n+  return __libunwind_Unwind_SetIP (context, val);\n+}\n+symver (_Unwind_SetIP, GCC_3.0);\n+#endif"}, {"sha": "051cea1d05d8c48d56464f679399446dc72a1d0e", "filename": "gcc/unwind-compat.h", "status": "added", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Funwind-compat.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Funwind-compat.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Funwind-compat.h?ref=443728bba4b4ec9b9177121022571b036a8b01bf", "patch": "@@ -0,0 +1,35 @@\n+/* Backward compatibility unwind routines.\n+   Copyright (C) 2004\n+   Free Software Foundation, Inc.\n+\n+   This file is part of GCC.\n+\n+   GCC is free software; you can redistribute it and/or modify it\n+   under the terms of the GNU General Public License as published by\n+   the Free Software Foundation; either version 2, or (at your option)\n+   any later version.\n+\n+   In addition to the permissions in the GNU General Public License, the\n+   Free Software Foundation gives you unlimited permission to link the\n+   compiled version of this file into combinations with other programs,\n+   and to distribute those combinations without any restriction coming\n+   from the use of this file.  (The General Public License restrictions\n+   do apply in other respects; for example, they cover modification of\n+   the file, and distribution when not linked into a combined\n+   executable.)\n+\n+   GCC is distributed in the hope that it will be useful, but WITHOUT\n+   ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n+   or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public\n+   License for more details.\n+\n+   You should have received a copy of the GNU General Public License\n+   along with GCC; see the file COPYING.  If not, write to the Free\n+   Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n+   02111-1307, USA.  */\n+\n+#define symver(name, version) \\\n+  __asm__ (\".symver \" #name\",\" #name \"@\" #version)\n+\n+#define alias(name) \\\n+  __typeof(name) __libunwind##name __attribute__ ((alias (#name)))"}, {"sha": "5e8c0a30c65fe1d0f5003cfd09707bc7ca1e51c2", "filename": "gcc/unwind-dw2-fde-compat.c", "status": "added", "additions": 46, "deletions": 0, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Funwind-dw2-fde-compat.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Funwind-dw2-fde-compat.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Funwind-dw2-fde-compat.c?ref=443728bba4b4ec9b9177121022571b036a8b01bf", "patch": "@@ -0,0 +1,46 @@\n+/* Backward compatibility unwind routines.\n+   Copyright (C) 2004\n+   Free Software Foundation, Inc.\n+\n+   This file is part of GCC.\n+\n+   GCC is free software; you can redistribute it and/or modify it\n+   under the terms of the GNU General Public License as published by\n+   the Free Software Foundation; either version 2, or (at your option)\n+   any later version.\n+\n+   In addition to the permissions in the GNU General Public License, the\n+   Free Software Foundation gives you unlimited permission to link the\n+   compiled version of this file into combinations with other programs,\n+   and to distribute those combinations without any restriction coming\n+   from the use of this file.  (The General Public License restrictions\n+   do apply in other respects; for example, they cover modification of\n+   the file, and distribution when not linked into a combined\n+   executable.)\n+\n+   GCC is distributed in the hope that it will be useful, but WITHOUT\n+   ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n+   or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public\n+   License for more details.\n+\n+   You should have received a copy of the GNU General Public License\n+   along with GCC; see the file COPYING.  If not, write to the Free\n+   Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n+   02111-1307, USA.  */\n+\n+#if defined (USE_GAS_SYMVER) && defined (USE_LIBUNWIND_EXCEPTIONS)\n+#include \"unwind.h\"\n+#include \"unwind-dw2-fde.h\"\n+#include \"unwind-compat.h\"\n+\n+extern const fde * __libunwind__Unwind_Find_FDE\n+  (void *, struct dwarf_eh_bases *);\n+\n+const fde *\n+_Unwind_Find_FDE (void *pc, struct dwarf_eh_bases *bases)\n+{\n+  __libunwind__Unwind_Find_FDE (pc, bases);\n+}\n+\n+symver (_Unwind_Find_FDE, GCC_3.0);\n+#endif"}, {"sha": "96d7946291a074fe0b6b39eaf3f56d2da6e10eec", "filename": "gcc/unwind-dw2-fde-glibc.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Funwind-dw2-fde-glibc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Funwind-dw2-fde-glibc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Funwind-dw2-fde-glibc.c?ref=443728bba4b4ec9b9177121022571b036a8b01bf", "patch": "@@ -46,6 +46,7 @@\n #define NO_BASE_OF_ENCODED_VALUE\n #include \"unwind-pe.h\"\n #include \"unwind-dw2-fde.h\"\n+#include \"unwind-compat.h\"\n #include \"gthr.h\"\n \n #if !defined(inhibit_libc) && defined(HAVE_LD_EH_FRAME_HDR) \\\n@@ -306,3 +307,7 @@ _Unwind_Find_FDE (void *pc, struct dwarf_eh_bases *bases)\n #define _Unwind_Find_FDE _Unwind_Find_FDE\n #include \"unwind-dw2-fde.c\"\n #endif\n+\n+#if defined (USE_GAS_SYMVER) && defined (SHARED) && defined (USE_LIBUNWIND_EXCEPTIONS)\n+alias (_Unwind_Find_FDE);\n+#endif"}, {"sha": "db8f3f5e20aa85bd899e72f2911d3a0cbcf7b86d", "filename": "gcc/unwind-dw2.c", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Funwind-dw2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/443728bba4b4ec9b9177121022571b036a8b01bf/gcc%2Funwind-dw2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Funwind-dw2.c?ref=443728bba4b4ec9b9177121022571b036a8b01bf", "patch": "@@ -1317,4 +1317,24 @@ uw_identify_context (struct _Unwind_Context *context)\n \n #include \"unwind.inc\"\n \n+#if defined (USE_GAS_SYMVER) && defined (SHARED) && defined (USE_LIBUNWIND_EXCEPTIONS)\n+alias (_Unwind_Backtrace);\n+alias (_Unwind_DeleteException);\n+alias (_Unwind_FindEnclosingFunction);\n+alias (_Unwind_FindTableEntry);\n+alias (_Unwind_ForcedUnwind);\n+alias (_Unwind_GetDataRelBase);\n+alias (_Unwind_GetTextRelBase);\n+alias (_Unwind_GetCFA);\n+alias (_Unwind_GetGR);\n+alias (_Unwind_GetIP);\n+alias (_Unwind_GetLanguageSpecificData);\n+alias (_Unwind_GetRegionStart);\n+alias (_Unwind_RaiseException);\n+alias (_Unwind_Resume);\n+alias (_Unwind_Resume_or_Rethrow);\n+alias (_Unwind_SetGR);\n+alias (_Unwind_SetIP);\n+#endif\n+\n #endif /* !USING_SJLJ_EXCEPTIONS */"}]}