{"sha": "1c69e5e28ad0829ba71198317bd4771f643e337d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWM2OWU1ZTI4YWQwODI5YmE3MTE5ODMxN2JkNDc3MWY2NDNlMzM3ZA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-02-02T22:58:54Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-02-02T22:58:54Z"}, "message": "runtime: Correct ENOSYS functions.\n\nFrom-SVN: r183852", "tree": {"sha": "bc3c11d53c2fa3f5e88785cb84214e84696cb83a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bc3c11d53c2fa3f5e88785cb84214e84696cb83a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1c69e5e28ad0829ba71198317bd4771f643e337d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c69e5e28ad0829ba71198317bd4771f643e337d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1c69e5e28ad0829ba71198317bd4771f643e337d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c69e5e28ad0829ba71198317bd4771f643e337d/comments", "author": null, "committer": null, "parents": [{"sha": "b6422b3755f39ebc4f942c5f92bd242aee948539", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b6422b3755f39ebc4f942c5f92bd242aee948539", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b6422b3755f39ebc4f942c5f92bd242aee948539"}], "stats": {"total": 48, "additions": 32, "deletions": 16}, "files": [{"sha": "6b328544f0d446ef553057db3f2ee6f6a7198bce", "filename": "libgo/runtime/go-nosys.c", "status": "modified", "additions": 32, "deletions": 16, "changes": 48, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c69e5e28ad0829ba71198317bd4771f643e337d/libgo%2Fruntime%2Fgo-nosys.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c69e5e28ad0829ba71198317bd4771f643e337d/libgo%2Fruntime%2Fgo-nosys.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fruntime%2Fgo-nosys.c?ref=1c69e5e28ad0829ba71198317bd4771f643e337d", "patch": "@@ -31,7 +31,8 @@ typedef off64_t loff_t;\n int\n epoll_create1 (int flags __attribute__ ((unused)))\n {\n-  return ENOSYS;\n+  errno = ENOSYS;\n+  return -1;\n }\n #endif\n \n@@ -42,7 +43,8 @@ faccessat (int fd __attribute__ ((unused)),\n \t   int mode __attribute__ ((unused)),\n \t   int flags __attribute__ ((unused)))\n {\n-  return ENOSYS;\n+  errno = ENOSYS;\n+  return -1;\n }\n #endif\n \n@@ -53,7 +55,8 @@ fchmodat (int dirfd __attribute__ ((unused)),\n \t  mode_t mode __attribute__ ((unused)),\n \t  int flags __attribute__ ((unused)))\n {\n-  return ENOSYS;\n+  errno = ENOSYS;\n+  return -1;\n }\n #endif\n \n@@ -65,7 +68,8 @@ fchownat (int dirfd __attribute__ ((unused)),\n \t  gid_t group __attribute__ ((unused)),\n \t  int flags __attribute__ ((unused)))\n {\n-  return ENOSYS;\n+  errno = ENOSYS;\n+  return -1;\n }\n #endif\n \n@@ -75,7 +79,8 @@ futimesat (int dirfd __attribute__ ((unused)),\n \t   const char *pathname __attribute__ ((unused)),\n \t   const struct timeval times[2] __attribute__ ((unused)))\n {\n-  return ENOSYS;\n+  errno = ENOSYS;\n+  return -1;\n }\n #endif\n \n@@ -85,15 +90,17 @@ inotify_add_watch (int fd __attribute__ ((unused)),\n \t\t   const char* pathname __attribute__ ((unused)),\n \t\t   uint32_t mask __attribute__ ((unused)))\n {\n-  return ENOSYS;\n+  errno = ENOSYS;\n+  return -1;\n }\n #endif\n \n #ifndef HAVE_INOTIFY_INIT\n int\n inotify_init (void)\n {\n-  return ENOSYS;\n+  errno = ENOSYS;\n+  return -1;\n }\n #endif\n \n@@ -102,7 +109,8 @@ int\n inotify_rm_watch (int fd __attribute__ ((unused)),\n \t\t  uint32_t wd __attribute__ ((unused)))\n {\n-  return ENOSYS;\n+  errno = ENOSYS;\n+  return -1;\n }\n #endif\n \n@@ -112,7 +120,8 @@ mkdirat (int dirfd __attribute__ ((unused)),\n \t const char *pathname __attribute__ ((unused)),\n \t mode_t mode __attribute__ ((unused)))\n {\n-  return ENOSYS;\n+  errno = ENOSYS;\n+  return -1;\n }\n #endif\n \n@@ -123,7 +132,8 @@ mknodat (int dirfd __attribute__ ((unused)),\n \t mode_t mode __attribute__ ((unused)),\n \t dev_t dev __attribute__ ((unused)))\n {\n-  return ENOSYS;\n+  errno = ENOSYS;\n+  return -1;\n }\n #endif\n \n@@ -134,7 +144,8 @@ openat (int dirfd __attribute__ ((unused)),\n \tint oflag __attribute__ ((unused)),\n \t...)\n {\n-  return ENOSYS;\n+  errno = ENOSYS;\n+  return -1;\n }\n #endif\n \n@@ -145,7 +156,8 @@ renameat (int olddirfd __attribute__ ((unused)),\n \t  int newdirfd __attribute__ ((unused)),\n \t  const char *newpath __attribute__ ((unused)))\n {\n-  return ENOSYS;\n+  errno = ENOSYS;\n+  return -1;\n }\n #endif\n \n@@ -158,7 +170,8 @@ splice (int fd __attribute__ ((unused)),\n \tsize_t len __attribute__ ((unused)),\n \tunsigned int flags __attribute__ ((unused)))\n {\n-  return ENOSYS;\n+  errno = ENOSYS;\n+  return -1;\n }\n #endif\n \n@@ -169,7 +182,8 @@ tee (int fd_in __attribute__ ((unused)),\n      size_t len __attribute__ ((unused)),\n      unsigned int flags __attribute__ ((unused)))\n {\n-  return ENOSYS;\n+  errno = ENOSYS;\n+  return -1;\n }\n #endif\n \n@@ -179,14 +193,16 @@ unlinkat (int dirfd __attribute__ ((unused)),\n \t  const char *pathname __attribute__ ((unused)),\n \t  int flags __attribute__ ((unused)))\n {\n-  return ENOSYS;\n+  errno = ENOSYS;\n+  return -1;\n }\n #endif\n \n #ifndef HAVE_UNSHARE\n int\n unshare (int flags __attribute__ ((unused)))\n {\n-  return ENOSYS;\n+  errno = ENOSYS;\n+  return -1;\n }\n #endif"}]}