{"sha": "cfb3ee16db4fc9138f2df3524c32c580bb505460", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2ZiM2VlMTZkYjRmYzkxMzhmMmRmMzUyNGMzMmM1ODBiYjUwNTQ2MA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-04-13T18:30:13Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-04-13T18:30:13Z"}, "message": "(do_include): Diagnose #import and #include_next if pedantic and if not in a system header.\n\n(do_include): Diagnose #import and #include_next if pedantic and if\nnot in a system header.\n(do_warning): #warning now causes an error if -pedantic-errors is\ngiven; this is needed since #warning isn't ANSI.\n\nFrom-SVN: r13887", "tree": {"sha": "5fea26b882fbfca80ad8463d09355f8519f060e7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5fea26b882fbfca80ad8463d09355f8519f060e7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cfb3ee16db4fc9138f2df3524c32c580bb505460", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cfb3ee16db4fc9138f2df3524c32c580bb505460", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cfb3ee16db4fc9138f2df3524c32c580bb505460", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cfb3ee16db4fc9138f2df3524c32c580bb505460/comments", "author": null, "committer": null, "parents": [{"sha": "31418d3513edce4366a45f622701fbc858c3dad8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31418d3513edce4366a45f622701fbc858c3dad8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/31418d3513edce4366a45f622701fbc858c3dad8"}], "stats": {"total": 24, "additions": 22, "deletions": 2}, "files": [{"sha": "0725465841c9ee26a0f2f13158d5b51d9646f158", "filename": "gcc/cccp.c", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cfb3ee16db4fc9138f2df3524c32c580bb505460/gcc%2Fcccp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cfb3ee16db4fc9138f2df3524c32c580bb505460/gcc%2Fcccp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcccp.c?ref=cfb3ee16db4fc9138f2df3524c32c580bb505460", "patch": "@@ -4220,6 +4220,14 @@ do_include (buf, limit, op, keyword)\n   char *pcfbuflimit;\n   int pcfnum;\n \n+  if (pedantic && !instack[indepth].system_header_p)\n+    {\n+      if (importing)\n+\tpedwarn (\"ANSI C does not allow `#import'\");\n+      if (skip_dirs)\n+\tpedwarn (\"ANSI C does not allow `#include_next'\");\n+    }\n+\n   if (importing && warn_import && !inhibit_warnings\n       && !instack[indepth].system_header_p && !import_warning) {\n     import_warning = 1;\n@@ -6752,7 +6760,9 @@ do_warning (buf, limit, op, keyword)\n   bcopy ((char *) buf, (char *) copy, length);\n   copy[length] = 0;\n   SKIP_WHITE_SPACE (copy);\n-  warning (\"#warning %s\", copy);\n+  /* Use `pedwarn' not `warning', because #warning isn't in the C Standard;\n+     if -pedantic-errors is given, #warning should cause an error.  */\n+  pedwarn (\"#warning %s\", copy);\n   return 0;\n }\n "}, {"sha": "697cea8f71f6533f80cec94c475239c8ccdb9508", "filename": "gcc/cpplib.c", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cfb3ee16db4fc9138f2df3524c32c580bb505460/gcc%2Fcpplib.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cfb3ee16db4fc9138f2df3524c32c580bb505460/gcc%2Fcpplib.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpplib.c?ref=cfb3ee16db4fc9138f2df3524c32c580bb505460", "patch": "@@ -3112,6 +3112,14 @@ do_include (pfile, keyword, unused1, unused2)\n   int pcfnum;\n   f= -1;\t\t\t/* JF we iz paranoid! */\n \n+  if (CPP_PEDANTIC (pfile) && !CPP_BUFFER (pfile)->system_header_p)\n+    {\n+      if (importing)\n+\tcpp_pedwarn (pfile, \"ANSI C does not allow `#import'\");\n+      if (skip_dirs)\n+\tcpp_pedwarn (pfile, \"ANSI C does not allow `#include_next'\");\n+    }\n+\n   if (importing && CPP_OPTIONS (pfile)->warn_import\n       && !CPP_OPTIONS (pfile)->inhibit_warnings\n       && !CPP_BUFFER (pfile)->system_header_p && !pfile->import_warning)\n@@ -3905,7 +3913,9 @@ do_warning (pfile, keyword, buf, limit)\n   bcopy (buf, copy, length);\n   copy[length] = 0;\n   SKIP_WHITE_SPACE (copy);\n-  cpp_warning (pfile, \"#warning %s\", copy);\n+  /* Use `pedwarn' not `warning', because #warning isn't in the C Standard;\n+     if -pedantic-errors is given, #warning should cause an error.  */\n+  cpp_pedwarn (pfile, \"#warning %s\", copy);\n   return 0;\n }\n "}]}