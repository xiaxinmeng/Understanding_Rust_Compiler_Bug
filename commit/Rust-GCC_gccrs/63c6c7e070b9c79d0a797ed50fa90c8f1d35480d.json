{"sha": "63c6c7e070b9c79d0a797ed50fa90c8f1d35480d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjNjNmM3ZTA3MGI5Yzc5ZDBhNzk3ZWQ1MGZhOTBjOGYxZDM1NDgwZA==", "commit": {"author": {"name": "Kai Tietz", "email": "ktietz@gcc.gnu.org", "date": "2009-09-20T09:22:11Z"}, "committer": {"name": "Kai Tietz", "email": "ktietz@gcc.gnu.org", "date": "2009-09-20T09:22:11Z"}, "message": "[multiple changes]\n\n2009-09-20  Paolo Bonzini <bonzini@gnu.org>\n\n\tPR/39886\n\t* combine.c (update_cfg_for_uncondjump): Set EDGE_FALLTHRU\n\tjust when insn is equal to BB_END (bb).\n\n2009-09-20  Kai Tietz  <kai.tietz@onevision.com>\n\n\t* gcc.c-tortue/compile/pr39886.c: New.\n\nFrom-SVN: r151895", "tree": {"sha": "c3683f21b52e4c4bfad4e1cad30f679a4f171041", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c3683f21b52e4c4bfad4e1cad30f679a4f171041"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/63c6c7e070b9c79d0a797ed50fa90c8f1d35480d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63c6c7e070b9c79d0a797ed50fa90c8f1d35480d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/63c6c7e070b9c79d0a797ed50fa90c8f1d35480d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63c6c7e070b9c79d0a797ed50fa90c8f1d35480d/comments", "author": null, "committer": null, "parents": [{"sha": "ed6d9a1b9bcd377da8fe8fadae73f316536f2160", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed6d9a1b9bcd377da8fe8fadae73f316536f2160", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ed6d9a1b9bcd377da8fe8fadae73f316536f2160"}], "stats": {"total": 29, "additions": 26, "deletions": 3}, "files": [{"sha": "9ed696d931b449dc66685183596e4b7d771f1ebc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63c6c7e070b9c79d0a797ed50fa90c8f1d35480d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63c6c7e070b9c79d0a797ed50fa90c8f1d35480d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=63c6c7e070b9c79d0a797ed50fa90c8f1d35480d", "patch": "@@ -1,3 +1,9 @@\n+2009-09-20  Paolo Bonzini <bonzini@gnu.org>\n+\n+\tPR/39886\n+\t* combine.c (update_cfg_for_uncondjump): Set EDGE_FALLTHRU\n+\tjust when insn is equal to BB_END (bb).\n+\n 2009-09-19  Adam Nemet  <anemet@caviumnetworks.com>\n \n \t* config/mips/mips.opt (mrelax-pic-calls): New option."}, {"sha": "35ab576d612fb64df6ec852c4ccf15ed49a22270", "filename": "gcc/combine.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63c6c7e070b9c79d0a797ed50fa90c8f1d35480d/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63c6c7e070b9c79d0a797ed50fa90c8f1d35480d/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=63c6c7e070b9c79d0a797ed50fa90c8f1d35480d", "patch": "@@ -2363,7 +2363,7 @@ propagate_for_debug (rtx insn, rtx last, rtx dest, rtx src, bool move)\n     }\n }\n \n-/* Delete the conditional jump INSN and adjust the CFG correspondingly.\n+/* Delete the unconditional jump INSN and adjust the CFG correspondingly.\n    Note that the INSN should be deleted *after* removing dead edges, so\n    that the kept edge is the fallthrough edge for a (set (pc) (pc))\n    but not for a (set (pc) (label_ref FOO)).  */\n@@ -2372,12 +2372,13 @@ static void\n update_cfg_for_uncondjump (rtx insn)\n {\n   basic_block bb = BLOCK_FOR_INSN (insn);\n+  bool at_end = (BB_END (bb) == insn);\n \n-  if (BB_END (bb) == insn)\n+  if (at_end)\n     purge_dead_edges (bb);\n \n   delete_insn (insn);\n-  if (EDGE_COUNT (bb->succs) == 1)\n+  if (at_end && EDGE_COUNT (bb->succs) == 1)\n     single_succ_edge (bb)->flags |= EDGE_FALLTHRU;\n }\n "}, {"sha": "6481b993bea41ae480eefae6cf33866bf3b87f3a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63c6c7e070b9c79d0a797ed50fa90c8f1d35480d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63c6c7e070b9c79d0a797ed50fa90c8f1d35480d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=63c6c7e070b9c79d0a797ed50fa90c8f1d35480d", "patch": "@@ -1,3 +1,7 @@\n+2009-09-20  Kai Tietz  <kai.tietz@onevision.com>\n+\n+\t* gcc.c-tortue/compile/pr39886.c: New.\n+\n 2009-09-20  Chris Demetriou  <cgd@google.com>\n \n \tPR preprocessor/28435:"}, {"sha": "e85dbb3418d3d8ffb7cfe6e765e83973a7b7b9a1", "filename": "gcc/testsuite/gcc.c-torture/compile/pr39886.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63c6c7e070b9c79d0a797ed50fa90c8f1d35480d/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr39886.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63c6c7e070b9c79d0a797ed50fa90c8f1d35480d/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr39886.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr39886.c?ref=63c6c7e070b9c79d0a797ed50fa90c8f1d35480d", "patch": "@@ -0,0 +1,12 @@\n+/* PR middle-end/39886 */\n+\n+int foo (int);\n+\n+volatile unsigned char g;\n+\n+void bar (int p)\n+{\n+  char l = 0xE1;\n+  func ((foo ((p & g) <= l), 1));\n+}\n+"}]}