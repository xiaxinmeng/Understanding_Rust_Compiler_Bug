{"sha": "ff39b79b8fe48e0f47c2798b71732250264baaa7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmYzOWI3OWI4ZmU0OGUwZjQ3YzI3OThiNzE3MzIyNTAyNjRiYWFhNw==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2007-02-08T22:04:22Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2007-02-08T22:04:22Z"}, "message": "tree-cfg.c (bsi_replace): Shortcut when replacing the statement with the same one; always update histograms.\n\n\t* tree-cfg.c (bsi_replace): Shortcut when replacing the statement with\n\tthe same one; always update histograms.\n\nFrom-SVN: r121724", "tree": {"sha": "005a5588bd4009ec67f5c701943e2dd2382287ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/005a5588bd4009ec67f5c701943e2dd2382287ae"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ff39b79b8fe48e0f47c2798b71732250264baaa7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff39b79b8fe48e0f47c2798b71732250264baaa7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff39b79b8fe48e0f47c2798b71732250264baaa7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff39b79b8fe48e0f47c2798b71732250264baaa7/comments", "author": null, "committer": null, "parents": [{"sha": "b3f7d793a97a705948e5b86b8987c4ac685ed247", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3f7d793a97a705948e5b86b8987c4ac685ed247", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3f7d793a97a705948e5b86b8987c4ac685ed247"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "3a51bb5eaa82bc1038148906274c56aec5446a23", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff39b79b8fe48e0f47c2798b71732250264baaa7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff39b79b8fe48e0f47c2798b71732250264baaa7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ff39b79b8fe48e0f47c2798b71732250264baaa7", "patch": "@@ -1,3 +1,8 @@\n+2007-02-08  Jan Hubicka  <jh@suse.cz>\n+\n+\t* tree-cfg.c (bsi_replace): Shortcut when replacing the statement with\n+\tthe same one; always update histograms.\n+\n 2007-02-08  Diego Novillo  <dnovillo@redhat.com>\n \n \t* passes.c (init_optimization_passes): Tidy comment."}, {"sha": "e3e21342b0091d198c029fe33b632c369167a6eb", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff39b79b8fe48e0f47c2798b71732250264baaa7/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff39b79b8fe48e0f47c2798b71732250264baaa7/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=ff39b79b8fe48e0f47c2798b71732250264baaa7", "patch": "@@ -2840,6 +2840,8 @@ bsi_replace (const block_stmt_iterator *bsi, tree stmt, bool update_eh_info)\n   int eh_region;\n   tree orig_stmt = bsi_stmt (*bsi);\n \n+  if (stmt == orig_stmt)\n+    return;\n   SET_EXPR_LOCUS (stmt, EXPR_LOCUS (orig_stmt));\n   set_bb_for_stmt (stmt, bsi->bb);\n \n@@ -2852,11 +2854,11 @@ bsi_replace (const block_stmt_iterator *bsi, tree stmt, bool update_eh_info)\n \t{\n \t  remove_stmt_from_eh_region (orig_stmt);\n \t  add_stmt_to_eh_region (stmt, eh_region);\n-\t  gimple_duplicate_stmt_histograms (cfun, stmt, cfun, orig_stmt);\n-          gimple_remove_stmt_histograms (cfun, orig_stmt);\n \t}\n     }\n \n+  gimple_duplicate_stmt_histograms (cfun, stmt, cfun, orig_stmt);\n+  gimple_remove_stmt_histograms (cfun, orig_stmt);\n   delink_stmt_imm_use (orig_stmt);\n   *bsi_stmt_ptr (*bsi) = stmt;\n   mark_stmt_modified (stmt);"}]}