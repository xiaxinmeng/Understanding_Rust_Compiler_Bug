{"sha": "12050e44231e61cf3cf595deb7b828e8fa197cd7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTIwNTBlNDQyMzFlNjFjZjNjZjU5NWRlYjdiODI4ZThmYTE5N2NkNw==", "commit": {"author": {"name": "Volker Reichelt", "email": "reichelt@igpm.rwth-aachen.de", "date": "2006-07-18T10:08:22Z"}, "committer": {"name": "Volker Reichelt", "email": "reichelt@gcc.gnu.org", "date": "2006-07-18T10:08:22Z"}, "message": "re PR c/28286 (ICE with invalid value in #pragma pack)\n\n\tPR c/28286\n\t* c-pragma.c (handle_pragma_pack): Handle invalid constants.\n\n\t* gcc.dg/pragma-pack-4.c: New test.\n\nFrom-SVN: r115548", "tree": {"sha": "3d17b916a205737a2d3169bbb5685b59b41c28ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3d17b916a205737a2d3169bbb5685b59b41c28ad"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/12050e44231e61cf3cf595deb7b828e8fa197cd7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12050e44231e61cf3cf595deb7b828e8fa197cd7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/12050e44231e61cf3cf595deb7b828e8fa197cd7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12050e44231e61cf3cf595deb7b828e8fa197cd7/comments", "author": null, "committer": null, "parents": [{"sha": "e1cf56b1d989c6e50b4cd89b2956532588bd9881", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e1cf56b1d989c6e50b4cd89b2956532588bd9881", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e1cf56b1d989c6e50b4cd89b2956532588bd9881"}], "stats": {"total": 20, "additions": 20, "deletions": 0}, "files": [{"sha": "8a295d6c324b2030d98e59538189670b1f25a560", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12050e44231e61cf3cf595deb7b828e8fa197cd7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12050e44231e61cf3cf595deb7b828e8fa197cd7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=12050e44231e61cf3cf595deb7b828e8fa197cd7", "patch": "@@ -1,3 +1,8 @@\n+2006-07-18  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n+\n+\tPR c/28286\n+\t* c-pragma.c (handle_pragma_pack): Handle invalid constants.\n+\n 2006-07-18  Alexandre Oliva  <aoliva@redhat.com>\n \n \tPR c/26993"}, {"sha": "b2712acc93798b2f305373b81530d1b6c7fb0cd1", "filename": "gcc/c-pragma.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12050e44231e61cf3cf595deb7b828e8fa197cd7/gcc%2Fc-pragma.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12050e44231e61cf3cf595deb7b828e8fa197cd7/gcc%2Fc-pragma.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-pragma.c?ref=12050e44231e61cf3cf595deb7b828e8fa197cd7", "patch": "@@ -160,6 +160,8 @@ handle_pragma_pack (cpp_reader * ARG_UNUSED (dummy))\n     }\n   else if (token == CPP_NUMBER)\n     {\n+      if (TREE_CODE (x) != INTEGER_CST)\n+\tGCC_BAD (\"invalid constant in %<#pragma pack%> - ignored\");\n       align = TREE_INT_CST_LOW (x);\n       action = set;\n       if (pragma_lex (&x) != CPP_CLOSE_PAREN)\n@@ -190,6 +192,8 @@ handle_pragma_pack (cpp_reader * ARG_UNUSED (dummy))\n \t    }\n \t  else if (token == CPP_NUMBER && action == push && align == -1)\n \t    {\n+\t      if (TREE_CODE (x) != INTEGER_CST)\n+\t\tGCC_BAD (\"invalid constant in %<#pragma pack%> - ignored\");\n \t      align = TREE_INT_CST_LOW (x);\n \t      if (align == -1)\n \t\taction = set;"}, {"sha": "0828f4aaa2a72cfe1d06d1eb636aef5b6f7c432b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12050e44231e61cf3cf595deb7b828e8fa197cd7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12050e44231e61cf3cf595deb7b828e8fa197cd7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=12050e44231e61cf3cf595deb7b828e8fa197cd7", "patch": "@@ -1,3 +1,8 @@\n+2006-07-18  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n+\n+\tPR c/28286\n+\t* gcc.dg/pragma-pack-4.c: New test.\n+\n 2006-07-17  Steve Ellcey  <sje@cup.hp.com>\n \n \tPR c++/28291"}, {"sha": "1765591f43c8b2de677a9baeea61953b4a295de1", "filename": "gcc/testsuite/gcc.dg/pragma-pack-4.c", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12050e44231e61cf3cf595deb7b828e8fa197cd7/gcc%2Ftestsuite%2Fgcc.dg%2Fpragma-pack-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12050e44231e61cf3cf595deb7b828e8fa197cd7/gcc%2Ftestsuite%2Fgcc.dg%2Fpragma-pack-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpragma-pack-4.c?ref=12050e44231e61cf3cf595deb7b828e8fa197cd7", "patch": "@@ -0,0 +1,6 @@\n+/* PR c/28286 */\n+/* { dg-do compile } */\n+\n+#pragma pack(0.5)         /* { dg-warning \"invalid constant\" } */\n+#pragma pack(push,0.5)    /* { dg-warning \"invalid constant\" } */\n+#pragma pack(push,x,0.5)  /* { dg-warning \"invalid constant\" } */"}]}