{"sha": "c531dd016b224f94eef10fdb562443aef5f64e61", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzUzMWRkMDE2YjIyNGY5NGVlZjEwZmRiNTYyNDQzYWVmNWY2NGU2MQ==", "commit": {"author": {"name": "Michael Koch", "email": "konqueror@gmx.de", "date": "2003-12-02T15:23:23Z"}, "committer": {"name": "Michael Koch", "email": "mkoch@gcc.gnu.org", "date": "2003-12-02T15:23:23Z"}, "message": "2003-12-02  Michael Koch  <konqueror@gmx.de>\n\n\t* java/net/DatagramSocket.java\n\t(close): Close associated DatagramChannel object.\n\t* java/net/ServerSocket.java\n\t* java/net/Socket.java\n\t(close): Reset impl and bound before calling getChannel().close() to\n\tprevent from loops.\n\nFrom-SVN: r74183", "tree": {"sha": "f699b4a047d88781fc13f0b65df2ec13628f274e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f699b4a047d88781fc13f0b65df2ec13628f274e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c531dd016b224f94eef10fdb562443aef5f64e61", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c531dd016b224f94eef10fdb562443aef5f64e61", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c531dd016b224f94eef10fdb562443aef5f64e61", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c531dd016b224f94eef10fdb562443aef5f64e61/comments", "author": null, "committer": null, "parents": [{"sha": "d9b526cc1d071648d66917b021aac9c459f9082c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9b526cc1d071648d66917b021aac9c459f9082c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9b526cc1d071648d66917b021aac9c459f9082c"}], "stats": {"total": 31, "additions": 24, "deletions": 7}, "files": [{"sha": "82873fe60bd1504bebd33c797cc2ec19a2cc8342", "filename": "libjava/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c531dd016b224f94eef10fdb562443aef5f64e61/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c531dd016b224f94eef10fdb562443aef5f64e61/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=c531dd016b224f94eef10fdb562443aef5f64e61", "patch": "@@ -1,3 +1,12 @@\n+2003-12-02  Michael Koch  <konqueror@gmx.de>\n+\n+\t* java/net/DatagramSocket.java\n+\t(close): Close associated DatagramChannel object.\n+\t* java/net/ServerSocket.java\n+\t* java/net/Socket.java\n+\t(close): Reset impl and bound before calling getChannel().close() to\n+\tprevent from loops.\n+\n 2003-12-02  Michael Koch  <konqueror@gmx.de>\n \n \t* java/nio/channels/spi/AbstractInterruptibleChannel.java"}, {"sha": "e3edfcd6c39ec62daa5889332e558e82c4d74e73", "filename": "libjava/java/net/DatagramSocket.java", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c531dd016b224f94eef10fdb562443aef5f64e61/libjava%2Fjava%2Fnet%2FDatagramSocket.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c531dd016b224f94eef10fdb562443aef5f64e61/libjava%2Fjava%2Fnet%2FDatagramSocket.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fnet%2FDatagramSocket.java?ref=c531dd016b224f94eef10fdb562443aef5f64e61", "patch": "@@ -232,6 +232,16 @@ public void close()\n \t    remotePort = -1;\n \t    impl = null;\n \t  }\n+\n+\ttry\n+\t  {\n+\t    if (getChannel() != null)\n+\t      getChannel().close();\n+\t  }\n+\tcatch (IOException e)\n+\t  {\n+\t    // Do nothing.\n+\t  }\n       }\n   }\n "}, {"sha": "4e7f58a7cfcf17ea09486097d0e3f5ed8d2c04aa", "filename": "libjava/java/net/ServerSocket.java", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c531dd016b224f94eef10fdb562443aef5f64e61/libjava%2Fjava%2Fnet%2FServerSocket.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c531dd016b224f94eef10fdb562443aef5f64e61/libjava%2Fjava%2Fnet%2FServerSocket.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fnet%2FServerSocket.java?ref=c531dd016b224f94eef10fdb562443aef5f64e61", "patch": "@@ -356,12 +356,11 @@ public void close () throws IOException\n     if (!isClosed())\n       {\n \timpl.close();\n+\timpl = null;\n+\tbound = false;\n \n \tif (getChannel() != null)\n \t  getChannel().close();\n-    \n-\timpl = null;\n-\tbound = false;\n       }\n   }\n \n@@ -543,7 +542,7 @@ public String toString ()\n     if (!isBound())\n       return \"ServerSocket[unbound]\";\n     \n-    return (\"ServerSocket[addr=\" + impl.getInetAddress()\n+    return (\"ServerSocket[addr=\" + getInetAddress()\n \t    + \",port=\" + impl.getPort()\n \t    + \",localport=\" + impl.getLocalPort()\n \t    + \"]\");"}, {"sha": "a0f831c17015374540e1fa624a9cf9a5b94e0364", "filename": "libjava/java/net/Socket.java", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c531dd016b224f94eef10fdb562443aef5f64e61/libjava%2Fjava%2Fnet%2FSocket.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c531dd016b224f94eef10fdb562443aef5f64e61/libjava%2Fjava%2Fnet%2FSocket.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fnet%2FSocket.java?ref=c531dd016b224f94eef10fdb562443aef5f64e61", "patch": "@@ -1006,12 +1006,11 @@ public synchronized void close ()  throws IOException\n       throw new SocketException(\"socket is closed\");\n     \n     getImpl().close();\n+    impl = null;\n+    bound = false;\n \n     if (getChannel() != null)\n       getChannel().close();\n-    \n-    impl = null;\n-    bound = false;\n   }\n \n   /**"}]}