{"sha": "82e8c3da7408bc0695511ee13f88d451c8adadd8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODJlOGMzZGE3NDA4YmMwNjk1NTExZWUxM2Y4OGQ0NTFjOGFkYWRkOA==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2019-04-23T10:27:14Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2019-04-23T10:27:14Z"}, "message": "Corrections for C++2a std::unwrap_reference traits\n\nThe P0318R1 paper added to the C++2a draft recently was not the latest\nversion of the paper, and should have included these changes. These\nchanges will be made to the working draft via a Defect Report, so I'm\napplying them to libstdc++ now.\n\n\t* include/std/type_traits (unwrap_reference_t): Define for C++2a.\n\t(unwrap_ref_decay): Remove inheritance from unwrap_reference.\n\t* testsuite/20_util/unwrap_reference/1.cc: Adjust test to use alias.\n\nFrom-SVN: r270506", "tree": {"sha": "ca42dfd0254e48fb5f3394614fc4449da1d17d5a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ca42dfd0254e48fb5f3394614fc4449da1d17d5a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/82e8c3da7408bc0695511ee13f88d451c8adadd8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82e8c3da7408bc0695511ee13f88d451c8adadd8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/82e8c3da7408bc0695511ee13f88d451c8adadd8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82e8c3da7408bc0695511ee13f88d451c8adadd8/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6e271009792ce0c070aad42d96032c38e9bd4aa3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e271009792ce0c070aad42d96032c38e9bd4aa3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e271009792ce0c070aad42d96032c38e9bd4aa3"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "f04a7e009a55ea6449affd504906ce6b6932de8f", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/82e8c3da7408bc0695511ee13f88d451c8adadd8/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/82e8c3da7408bc0695511ee13f88d451c8adadd8/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=82e8c3da7408bc0695511ee13f88d451c8adadd8", "patch": "@@ -1,3 +1,9 @@\n+2019-04-23  Jonathan Wakely  <jwakely@redhat.com>\n+\n+\t* include/std/type_traits (unwrap_reference_t): Define for C++2a.\n+\t(unwrap_ref_decay): Remove inheritance from unwrap_reference.\n+\t* testsuite/20_util/unwrap_reference/1.cc: Adjust test to use alias.\n+\n 2019-04-23  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>\n \t    Bernd Edlinger  <bernd.edlinger@hotmail.de>\n \t    Jakub Jelinek  <jakub@redhat.com>"}, {"sha": "e0ac5c88dfc3fd13bbfab79829cec9e94252201d", "filename": "libstdc++-v3/include/std/type_traits", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/82e8c3da7408bc0695511ee13f88d451c8adadd8/libstdc%2B%2B-v3%2Finclude%2Fstd%2Ftype_traits", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/82e8c3da7408bc0695511ee13f88d451c8adadd8/libstdc%2B%2B-v3%2Finclude%2Fstd%2Ftype_traits", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Ftype_traits?ref=82e8c3da7408bc0695511ee13f88d451c8adadd8", "patch": "@@ -3067,9 +3067,12 @@ template <typename _From, typename _To>\n   template<typename _Tp>\n     struct unwrap_reference<reference_wrapper<_Tp>> { using type = _Tp&; };\n \n+  template<typename _Tp>\n+    using unwrap_reference_t = typename unwrap_reference<_Tp>::type;\n+\n   /// Decay type and if it's a reference_wrapper, unwrap it\n   template<typename _Tp>\n-    struct unwrap_ref_decay : unwrap_reference<decay_t<_Tp>> { };\n+    struct unwrap_ref_decay { using type = unwrap_reference_t<decay_t<_Tp>>; };\n \n   template<typename _Tp>\n     using unwrap_ref_decay_t = typename unwrap_ref_decay<_Tp>::type;"}, {"sha": "243526725a0f95bde2d028413e81a8796ef4b097", "filename": "libstdc++-v3/testsuite/20_util/unwrap_reference/1.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/82e8c3da7408bc0695511ee13f88d451c8adadd8/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Funwrap_reference%2F1.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/82e8c3da7408bc0695511ee13f88d451c8adadd8/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Funwrap_reference%2F1.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Funwrap_reference%2F1.cc?ref=82e8c3da7408bc0695511ee13f88d451c8adadd8", "patch": "@@ -28,7 +28,7 @@ template<typename T, typename U = T>\n   {\n     using std::unwrap_reference;\n     using T2 = typename unwrap_reference<T>::type;\n-    static_assert(expect_same<T2, typename unwrap_reference<T2>::type>::value);\n+    static_assert(expect_same<T2, std::unwrap_reference_t<T2>>::value);\n     return expect_same<T2, U>::value;\n   }\n "}]}