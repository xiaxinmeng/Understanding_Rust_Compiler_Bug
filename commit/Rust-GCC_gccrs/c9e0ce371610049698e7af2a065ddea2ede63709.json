{"sha": "c9e0ce371610049698e7af2a065ddea2ede63709", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzllMGNlMzcxNjEwMDQ5Njk4ZTdhZjJhMDY1ZGRlYTJlZGU2MzcwOQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@redhat.com", "date": "2004-03-01T18:17:35Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2004-03-01T18:17:35Z"}, "message": "mips.c (mips_output_division): Use the division instruction to fill the delay slot of a zero check.\n\n\t* config/mips/mips.c (mips_output_division): Use the division\n\tinstruction to fill the delay slot of a zero check.\n\t(mips_idiv_insns): Adjust accordingly.\n\nFrom-SVN: r78712", "tree": {"sha": "56c64be2c0d31a73e383b47141548fad6360b0ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/56c64be2c0d31a73e383b47141548fad6360b0ae"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c9e0ce371610049698e7af2a065ddea2ede63709", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9e0ce371610049698e7af2a065ddea2ede63709", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c9e0ce371610049698e7af2a065ddea2ede63709", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9e0ce371610049698e7af2a065ddea2ede63709/comments", "author": null, "committer": null, "parents": [{"sha": "6728336267457f71da6261ab59e3fedd4f987d8d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6728336267457f71da6261ab59e3fedd4f987d8d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6728336267457f71da6261ab59e3fedd4f987d8d"}], "stats": {"total": 29, "additions": 18, "deletions": 11}, "files": [{"sha": "512467ba5276c74167897e33d6430e45b7966bb9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9e0ce371610049698e7af2a065ddea2ede63709/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9e0ce371610049698e7af2a065ddea2ede63709/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c9e0ce371610049698e7af2a065ddea2ede63709", "patch": "@@ -1,3 +1,9 @@\n+2004-03-01  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* config/mips/mips.c (mips_output_division): Use the division\n+\tinstruction to fill the delay slot of a zero check.\n+\t(mips_idiv_insns): Adjust accordingly.\n+\n 2004-03-01  Nathanael Nerode  <neroden@gcc.gnu.org>\n \n \t* config.gcc: Create a default tmake_file for linux, and use"}, {"sha": "c200af7f1509a1535cbfae69f80775e73e12eb40", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 12, "deletions": 11, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9e0ce371610049698e7af2a065ddea2ede63709/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9e0ce371610049698e7af2a065ddea2ede63709/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=c9e0ce371610049698e7af2a065ddea2ede63709", "patch": "@@ -1359,12 +1359,7 @@ mips_idiv_insns (void)\n \n   count = 1;\n   if (TARGET_CHECK_ZERO_DIV)\n-    {\n-      if (TARGET_MIPS16)\n-\tcount += 2;\n-      else\n-\tcount += 3;\n-    }\n+    count += 2;\n   if (TARGET_FIX_R4000)\n     count++;\n   return count;\n@@ -9225,16 +9220,22 @@ mips_output_conditional_branch (rtx insn, rtx *operands, int two_operands_p,\n const char *\n mips_output_division (const char *division, rtx *operands)\n {\n-  const char *s = division;\n+  const char *s;\n \n+  s = division;\n   if (TARGET_CHECK_ZERO_DIV)\n     {\n-      output_asm_insn (s, operands);\n-\n       if (TARGET_MIPS16)\n-\ts = \"bnez\\t%2,1f\\n\\tbreak\\t7\\n1:\";\n+\t{\n+\t  output_asm_insn (s, operands);\n+\t  s = \"bnez\\t%2,1f\\n\\tbreak\\t7\\n1:\";\n+\t}\n       else\n-\ts = \"bne\\t%2,%.,1f%#\\n\\tbreak\\t7\\n1:\";\n+\t{\n+\t  output_asm_insn (\"%(bne\\t%2,%.,1f\", operands);\n+\t  output_asm_insn (s, operands);\n+\t  s = \"break\\t7%)\\n1:\";\n+\t}\n     }\n   if (TARGET_FIX_R4000)\n     {"}]}