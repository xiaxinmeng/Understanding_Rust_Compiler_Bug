{"sha": "b87cfcfbe3f534de2736136b6f36d87b77f0b002", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yjg3Y2ZjZmJlM2Y1MzRkZTI3MzYxMzZiNmYzNmQ4N2I3N2YwYjAwMg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2004-01-03T00:40:31Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2004-01-03T00:40:31Z"}, "message": "i386.md (fp constant pool splitter): Reorg suppression for sse and 387; add suppression for mmx.\n\n        * config/i386/i386.md (fp constant pool splitter): Reorg suppression\n        for sse and 387; add suppression for mmx.\n\nFrom-SVN: r75349", "tree": {"sha": "76a1c3fc1b6573077a5660eb27b75a87d9a9b44a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/76a1c3fc1b6573077a5660eb27b75a87d9a9b44a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b87cfcfbe3f534de2736136b6f36d87b77f0b002", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b87cfcfbe3f534de2736136b6f36d87b77f0b002", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b87cfcfbe3f534de2736136b6f36d87b77f0b002", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b87cfcfbe3f534de2736136b6f36d87b77f0b002/comments", "author": null, "committer": null, "parents": [{"sha": "af4490a4c8d464573589426a96c205d833a40b59", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af4490a4c8d464573589426a96c205d833a40b59", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af4490a4c8d464573589426a96c205d833a40b59"}], "stats": {"total": 43, "additions": 30, "deletions": 13}, "files": [{"sha": "41db1bedac3d1f6a5c24ffa165adff43b75d2252", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b87cfcfbe3f534de2736136b6f36d87b77f0b002/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b87cfcfbe3f534de2736136b6f36d87b77f0b002/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b87cfcfbe3f534de2736136b6f36d87b77f0b002", "patch": "@@ -1,3 +1,8 @@\n+2004-01-02  Richard Henderson  <rth@redhat.com>\n+\n+\t* config/i386/i386.md (fp constant pool splitter): Reorg suppression\n+\tfor sse and 387; add suppression for mmx.\n+\n 2004-01-02  Andrew Pinski  <pinskia@physics.uc.edu>\n \n \t* loop.c (loop_optimize): Free all loops_info's mems."}, {"sha": "75fd86a40d43e3a7d8c05a8d9aea3c60d1abb2e8", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 25, "deletions": 13, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b87cfcfbe3f534de2736136b6f36d87b77f0b002/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b87cfcfbe3f534de2736136b6f36d87b77f0b002/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=b87cfcfbe3f534de2736136b6f36d87b77f0b002", "patch": "@@ -1,6 +1,6 @@\n ;; GCC machine description for IA-32 and x86-64.\n ;; Copyright (C) 1988, 1994, 1995, 1996, 1997, 1998, 1999, 2000,\n-;; 2001, 2002, 2003\n+;; 2001, 2002, 2003, 2004\n ;; Free Software Foundation, Inc.\n ;; Mostly by William Schelter.\n ;; x86_64 support added by Jan Hubicka\n@@ -2880,18 +2880,30 @@\n    && (GET_MODE (operands[0]) == XFmode\n        || GET_MODE (operands[0]) == SFmode || GET_MODE (operands[0]) == DFmode)\n    && GET_CODE (XEXP (operands[1], 0)) == SYMBOL_REF\n-   && CONSTANT_POOL_ADDRESS_P (XEXP (operands[1], 0))\n-   && (!(SSE_REG_P (operands[0]) || \n-\t (GET_CODE (operands[0]) == SUBREG\n-\t  && SSE_REG_P (SUBREG_REG (operands[0]))))\n-       || standard_sse_constant_p (get_pool_constant (XEXP (operands[1], 0))))\n-   && (!(FP_REG_P (operands[0]) || \n-\t (GET_CODE (operands[0]) == SUBREG\n-\t  && FP_REG_P (SUBREG_REG (operands[0]))))\n-       || standard_80387_constant_p (get_pool_constant (XEXP (operands[1], 0))))\"\n-  [(set (match_dup 0)\n-\t(match_dup 1))]\n-  \"operands[1] = get_pool_constant (XEXP (operands[1], 0));\")\n+   && CONSTANT_POOL_ADDRESS_P (XEXP (operands[1], 0))\"\n+  [(set (match_dup 0) (match_dup 1))]\n+{\n+  rtx c = get_pool_constant (XEXP (operands[1], 0));\n+  rtx r = operands[0];\n+\n+  if (GET_CODE (r) == SUBREG)\n+    r = SUBREG_REG (r);\n+\n+  if (SSE_REG_P (r))\n+    {\n+      if (!standard_sse_constant_p (c))\n+\tFAIL;\n+    }\n+  else if (FP_REG_P (r))\n+    {\n+      if (!standard_80387_constant_p (c))\n+\tFAIL;\n+    }\n+  else if (MMX_REG_P (r))\n+    FAIL;\n+\n+  operands[1] = c;\n+})\n \n (define_insn \"swapxf\"\n   [(set (match_operand:XF 0 \"register_operand\" \"+f\")"}]}