{"sha": "a760c9774c0b7027b5f04e89af99e0f322ff0305", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTc2MGM5Nzc0YzBiNzAyN2I1ZjA0ZTg5YWY5OWUwZjMyMmZmMDMwNQ==", "commit": {"author": {"name": "Andreas Schwab", "email": "schwab@gcc.gnu.org", "date": "2009-02-27T09:54:25Z"}, "committer": {"name": "Andreas Schwab", "email": "schwab@gcc.gnu.org", "date": "2009-02-27T09:54:25Z"}, "message": "Makefile.in (srcdir): Set to @top_srcdir@ instead of @srcdir@.\n\ngcc/ada/:\n\t* Makefile.in (srcdir): Set to @top_srcdir@ instead of @srcdir@.\n\t* gcc-interface/Makefile.in: Change all uses of $(srcdir),\n\t$(fsrcdir) and $(fsrcpfx) to add ada subdir.\n\t(AWK): Substitute.\n\t(target_cpu_default): Substitute.\n\ngnattools/:\n\t* Makefile.in (fsrcdir): Point to gcc directory, not gcc/ada.\n\t(INCLUDES_FOR_SUBDIR): Adjust.\n\t(ADA_INCLUDES_FOR_SUBDIR): Adjust.\n\nFrom-SVN: r144463", "tree": {"sha": "fa3ae0a85c45c6afcda17a71b72ccdb9606a7692", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fa3ae0a85c45c6afcda17a71b72ccdb9606a7692"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a760c9774c0b7027b5f04e89af99e0f322ff0305", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a760c9774c0b7027b5f04e89af99e0f322ff0305", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a760c9774c0b7027b5f04e89af99e0f322ff0305", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a760c9774c0b7027b5f04e89af99e0f322ff0305/comments", "author": null, "committer": null, "parents": [{"sha": "30929a13efacd1522c5ddff69145c1eaf127debb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30929a13efacd1522c5ddff69145c1eaf127debb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/30929a13efacd1522c5ddff69145c1eaf127debb"}], "stats": {"total": 89, "additions": 51, "deletions": 38}, "files": [{"sha": "54fbac0c0fa9e6af60860312f3e330d09c49a694", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 15, "deletions": 6, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a760c9774c0b7027b5f04e89af99e0f322ff0305/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a760c9774c0b7027b5f04e89af99e0f322ff0305/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=a760c9774c0b7027b5f04e89af99e0f322ff0305", "patch": "@@ -1,12 +1,21 @@\n+2009-02-26  Andreas Schwab  <schwab@suse.de>\n+\n+\t* Makefile.in (srcdir): Set to @top_srcdir@ instead of @srcdir@.\n+\n+\t* gcc-interface/Makefile.in: Change all uses of $(srcdir),\n+\t$(fsrcdir) and $(fsrcpfx) to add ada subdir.\n+\t(AWK): Substitute.\n+\t(target_cpu_default): Substitute.\n+\n 2009-02-25  Laurent GUERBY  <laurent@guerby.net>\n \n-        * a-teioed.adb (Expand): Fix Result overflow.\n-        \n+\t* a-teioed.adb (Expand): Fix Result overflow.\n+\n 2009-02-25  Laurent GUERBY <laurent@guerby.net>\n \n-        * gcc-interface/Makefile.in: Fix multilib handling for\n-        sparc64-linux.\n-\t\n+\t* gcc-interface/Makefile.in: Fix multilib handling for\n+\tsparc64-linux.\n+\n 2009-02-23  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>\n \n \t* s-oscons-tmplt.c [__osf__ && !_SS_MAXSIZE]: Undef AF_UNIX6.\n@@ -53,7 +62,7 @@\n 2009-01-31  Laurent GUERBY  <laurent@guerby.net>\n \n \t* gcc-interface/Makefile.in: Fix mipsel linux handling.\n-\t\n+\n 2009-01-16  Jakub Jelinek  <jakub@redhat.com>\n \n \t* gcc-interface/Makefile.in: Fix multilib handling for"}, {"sha": "a662b20474ff7f8454806ba602a09beb1d49890f", "filename": "gcc/ada/Makefile.in", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a760c9774c0b7027b5f04e89af99e0f322ff0305/gcc%2Fada%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a760c9774c0b7027b5f04e89af99e0f322ff0305/gcc%2Fada%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FMakefile.in?ref=a760c9774c0b7027b5f04e89af99e0f322ff0305", "patch": "@@ -1,3 +1,5 @@\n-srcdir = @srcdir@\n+# All makefile fragments assume that $(srcdir) points to the gcc\n+# directory, not the language subdir\n+srcdir = @top_srcdir@\n -include ./gcc-interface/Makefile\n -include ../gcc-interface/Makefile"}, {"sha": "cec096e77e3f6121067c2195ea5cd8ce73d1a793", "filename": "gcc/ada/gcc-interface/Makefile.in", "status": "modified", "additions": 19, "deletions": 22, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a760c9774c0b7027b5f04e89af99e0f322ff0305/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a760c9774c0b7027b5f04e89af99e0f322ff0305/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMakefile.in?ref=a760c9774c0b7027b5f04e89af99e0f322ff0305", "patch": "@@ -90,6 +90,7 @@ AR_FLAGS = rc\n LS = ls\n RANLIB = @RANLIB@\n RANLIB_FLAGS = @ranlib_flags@\n+AWK = @AWK@\n \n SHELL = @SHELL@\n PWD_COMMAND = $${PWDCMD-pwd}\n@@ -148,11 +149,12 @@ target=@target@\n xmake_file = @xmake_file@\n tmake_file = @tmake_file@\n host_canonical=@host@\n+target_cpu_default=@target_cpu_default@\n #version=`sed -e 's/.*\\\"\\([^ \\\"]*\\)[ \\\"].*/\\1/' < $(srcdir)/version.c`\n #mainversion=`sed -e 's/.*\\\"\\([0-9]*\\.[0-9]*\\).*/\\1/' < $(srcdir)/version.c`\n \n # Directory where sources are, from where we are.\n-VPATH = $(srcdir)\n+VPATH = $(srcdir)/ada\n \n fsrcdir := $(shell cd $(srcdir);${PWD_COMMAND})\n fsrcpfx := $(shell cd $(srcdir);${PWD_COMMAND})/\n@@ -189,19 +191,14 @@ all: all.indirect\n # This tells GNU Make version 3 not to put all variables in the environment.\n .NOEXPORT:\n \n-# tmake_file and xmake_file expand to lists with entries of the form\n-# $(srcdir)/config/...  but here $(srcdir) is the ada subdirectory so we\n-# need to adjust the paths.  There can't be spaces in the subst arguments\n-# or we get spurious spaces in the actual list of files to include.\n-\n # target overrides\n ifneq ($(tmake_file),)\n-include $(subst /config,/../config,$(tmake_file))\n+include $(tmake_file)\n endif\n \n # host overrides\n ifneq ($(xmake_file),)\n-include $(subst /config,/../config,$(xmake_file))\n+include $(xmake_file)\n endif\n \f\n # Now figure out from those variables how to compile and link.\n@@ -236,14 +233,14 @@ TOOLS_LIBS = $(EXTRA_GNATTOOLS_OBJS) targext.o link.o $(LIBGNAT) ../../../libibe\n # Both . and srcdir are used, in that order,\n # so that tm.h and config.h will be found in the compilation\n # subdirectory rather than in the source directory.\n-INCLUDES = -I- -I. -I.. -I$(srcdir) -I$(srcdir)/.. -I$(srcdir)/../config \\\n-\t-I$(srcdir)/../../include\n+INCLUDES = -I- -I. -I.. -I$(srcdir)/ada -I$(srcdir) -I$(srcdir)/config \\\n+\t-I$(srcdir)/../include\n \n-ADA_INCLUDES = -I- -I. -I$(srcdir)\n+ADA_INCLUDES = -I- -I. -I$(srcdir)/ada\n \n-INCLUDES_FOR_SUBDIR = -I. -I.. -I../.. -I$(fsrcdir) -I$(fsrcdir)/../config \\\n-\t-I$(fsrcdir)/../../include -I$(fsrcdir)/..\n-ADA_INCLUDES_FOR_SUBDIR = -I. -I$(fsrcdir) -I$(fsrcdir)/gcc\n+INCLUDES_FOR_SUBDIR = -I. -I.. -I../.. -I$(fsrcdir)/ada -I$(fsrcdir)/config \\\n+\t-I$(fsrcdir)/../include -I$(fsrcdir)\n+ADA_INCLUDES_FOR_SUBDIR = -I. -I$(fsrcdir)/ada\n \n # Avoid a lot of time thinking about remaking Makefile.in and *.def.\n .SUFFIXES: .in .def\n@@ -266,7 +263,7 @@ ADA_INCLUDES_FOR_SUBDIR = -I. -I$(fsrcdir) -I$(fsrcdir)/gcc\n \t$(CC) -c $(ALL_ADAFLAGS) $(ADA_INCLUDES) $< $(OUTPUT_OPTION)\n \n # how to regenerate this file\n-Makefile: ../config.status $(srcdir)/gcc-interface/Makefile.in $(srcdir)/Makefile.in $(srcdir)/../version.c\n+Makefile: ../config.status $(srcdir)/ada/gcc-interface/Makefile.in $(srcdir)/ada/Makefile.in $(srcdir)/version.c\n \tcd ..; \\\n \tLANGUAGES=\"$(CONFIG_LANGUAGES)\" \\\n \tCONFIG_HEADERS= \\\n@@ -392,7 +389,7 @@ DUMMY_SOCKETS_TARGET_PAIRS = \\\n   g-sothco.ads<g-sothco-dummy.ads \\\n   g-sttsne.ads<g-sttsne-dummy.ads\n \n-LIB_VERSION = $(strip $(shell grep ' Library_Version :' $(fsrcpfx)gnatvsn.ads | sed -e 's/.*\"\\(.*\\)\".*/\\1/'))\n+LIB_VERSION = $(strip $(shell grep ' Library_Version :' $(fsrcpfx)ada/gnatvsn.ads | sed -e 's/.*\"\\(.*\\)\".*/\\1/'))\n \n # $(filter-out PATTERN...,TEXT) removes all PATTERN words from TEXT.\n # $(strip STRING) removes leading and trailing spaces from STRING.\n@@ -1334,7 +1331,7 @@ endif\n      ../../vms_help$(exeext) \\\n      ../../gnat.hlp\n   # This command transforms (YYYYMMDD) into YY,MMDD\n-  GSMATCH_VERSION := $(shell grep \"^ *Gnat_Static_Version_String\" $(fsrcpfx)gnatvsn.ads | sed -e 's/.*(\\(.*\\)).*/\\1/' -e 's/\\(..\\)\\(..\\)\\(....\\).*/\\2,\\3/')\n+  GSMATCH_VERSION := $(shell grep \"^ *Gnat_Static_Version_String\" $(fsrcpfx)ada/gnatvsn.ads | sed -e 's/.*(\\(.*\\)).*/\\1/' -e 's/\\(..\\)\\(..\\)\\(....\\).*/\\2,\\3/')\n   TOOLS_LIBS_LO := --for-linker=sys\\\\$$\\$$library:trace.exe\n   LIBRARY_VERSION := $(subst .,_,$(LIB_VERSION))\n endif\n@@ -1808,7 +1805,7 @@ LIBGNAT_OBJS = adaint.o argv.o cio.o cstreams.o ctrl_c.o errno.o exit.o env.o \\\n # GNATRTL_NONTASKING_OBJS and GNATRTL_TASKING_OBJS can be found in\n # the following include file:\n \n-include $(fsrcdir)/Makefile.rtl\n+include $(fsrcdir)/ada/Makefile.rtl\n \n GNATRTL_LINEARALGEBRA_OBJS = a-nlcoar.o a-nllcar.o a-nllrar.o a-nlrear.o \\\n   a-nucoar.o a-nurear.o i-forbla.o i-forlap.o s-gearop.o\n@@ -1993,14 +1990,14 @@ install-gnatlib: ../stamp-gnatlib-$(RTSDIR)\n \t$(CHMOD) u+w $(RTSDIR)\n # Copy target independent sources\n \t$(foreach f,$(ADA_INCLUDE_SRCS) $(LIBGNAT_SRCS), \\\n-\t  $(LN_S) $(fsrcpfx)$(f) $(RTSDIR) ;) true\n+\t  $(LN_S) $(fsrcpfx)ada/$(f) $(RTSDIR) ;) true\n # Remove files to be replaced by target dependent sources\n \t$(RM) $(foreach PAIR,$(LIBGNAT_TARGET_PAIRS), \\\n \t                $(RTSDIR)/$(word 1,$(subst <, ,$(PAIR))))\n \t$(RM) $(RTSDIR)/*-*-*.ads $(RTSDIR)/*-*-*.adb\n # Copy new target dependent sources\n \t$(foreach PAIR,$(LIBGNAT_TARGET_PAIRS), \\\n-\t          $(LN_S) $(fsrcpfx)$(word 2,$(subst <, ,$(PAIR))) \\\n+\t          $(LN_S) $(fsrcpfx)ada/$(word 2,$(subst <, ,$(PAIR))) \\\n \t                $(RTSDIR)/$(word 1,$(subst <, ,$(PAIR)));)\n # Copy generated target dependent sources\n \t$(RM) $(RTSDIR)/s-oscons.ads\n@@ -2372,5 +2369,5 @@ force:\n \t$(GNATLINK) -v vms_help -o $@ --GCC=\"$(GCC_LINK)\" $(TOOLS_LIBS)\n \n ../../gnat.hlp: ../../vms_help$(exeext)\n-\t../../vms_help$(exeext) $(fsrcdir)/gnat.help_in \\\n-\t                        $(fsrcdir)/vms_data.ads ../../gnat.hlp\n+\t../../vms_help$(exeext) $(fsrcdir)/ada/gnat.help_in \\\n+\t                        $(fsrcdir)/ada/vms_data.ads ../../gnat.hlp"}, {"sha": "7139322df5bf6755d169ec5192ec427946104095", "filename": "gnattools/ChangeLog", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a760c9774c0b7027b5f04e89af99e0f322ff0305/gnattools%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a760c9774c0b7027b5f04e89af99e0f322ff0305/gnattools%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gnattools%2FChangeLog?ref=a760c9774c0b7027b5f04e89af99e0f322ff0305", "patch": "@@ -1,3 +1,9 @@\n+2009-02-26  Andreas Schwab  <schwab@suse.de>\n+\n+\t* Makefile.in (fsrcdir): Point to gcc directory, not gcc/ada.\n+\t(INCLUDES_FOR_SUBDIR): Adjust.\n+\t(ADA_INCLUDES_FOR_SUBDIR): Adjust.\n+\n 2008-08-01  Paolo Bonzini  <bonzini@gnu.org>\n \n \t* configure.ac (warn_cflags): Substitute.\n@@ -105,8 +111,8 @@\n \n 2005-02-02  Nathanael Nerode  <neroden@gcc.gnu.org>\n \n-        * Makefile.in: Remove use of cc_set_by_configure; just use\n-        plain old CC from the top level in this case.\n+\t* Makefile.in: Remove use of cc_set_by_configure; just use\n+\tplain old CC from the top level in this case.\n \n 2005-01-30  Nathanael Nerode  <neroden@gcc.gnu.org>\n \tMerge from mainline at tag libada-gnattools-merge-20050129:\n@@ -115,7 +121,7 @@\n \n 2004-12-13  Nathanael Nerode  <neroden@gcc.gnu.org>\n \n-        * Makefile.in: Reinstate stamp-gnatlib check.\n+\t* Makefile.in: Reinstate stamp-gnatlib check.\n \n 2004-12-02  Nathanael Nerode  <neroden@gcc.gnu.org>\n \n@@ -146,4 +152,3 @@ Copyright 2004, 2005 Free Software Foundation, Inc.\n \n This ChangeLog is free software; the Free Software Foundation gives\n unlimited permission to copy, distribute, and modify it.\n-"}, {"sha": "de887c0a537f4d83fe2e36d167d8bd6938eaa5aa", "filename": "gnattools/Makefile.in", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a760c9774c0b7027b5f04e89af99e0f322ff0305/gnattools%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a760c9774c0b7027b5f04e89af99e0f322ff0305/gnattools%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gnattools%2FMakefile.in?ref=a760c9774c0b7027b5f04e89af99e0f322ff0305", "patch": "@@ -56,13 +56,13 @@ ADAFLAGS= -gnatpg -gnata\n # For finding the GCC build dir, which is used far too much\n GCC_DIR=../gcc\n \n-# Absolute srcdir for gcc/ada (why do we want absolute?  I dunno)\n-fsrcdir := $(shell cd $(srcdir)/../gcc/ada/; ${PWD_COMMAND})\n+# Absolute srcdir for gcc (why do we want absolute?  I dunno)\n+fsrcdir := $(shell cd $(srcdir)/../gcc/; ${PWD_COMMAND})\n \n # Useful \"subroutines\" for the excess includes\n-INCLUDES_FOR_SUBDIR = -I. -I.. -I../.. -I$(fsrcdir) -I$(fsrcdir)/../config \\\n-\t-I$(fsrcdir)/../../include -I$(fsrcdir)/..\n-ADA_INCLUDES_FOR_SUBDIR = -I. -I$(fsrcdir)\n+INCLUDES_FOR_SUBDIR = -I. -I.. -I../.. -I$(fsrcdir)/ada -I$(fsrcdir)/config \\\n+\t-I$(fsrcdir)/../include -I$(fsrcdir)\n+ADA_INCLUDES_FOR_SUBDIR = -I. -I$(fsrcdir)/ada\n \n # Variables for gnattools1, native\n TOOLS_FLAGS_TO_PASS_1= \\"}]}