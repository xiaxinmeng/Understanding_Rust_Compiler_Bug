{"sha": "bb394606fd725089772c6b03e8c2f8847b400b61", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmIzOTQ2MDZmZDcyNTA4OTc3MmM2YjAzZThjMmY4ODQ3YjQwMGI2MQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2004-06-09T21:00:35Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2004-06-09T21:00:35Z"}, "message": "* expmed.c (emit_store_flag): Cope with FLOAT_STORE_FLAG_VALUE.\n\nFrom-SVN: r82854", "tree": {"sha": "381c0300036ca69eea30d3412062cfaead54789d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/381c0300036ca69eea30d3412062cfaead54789d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bb394606fd725089772c6b03e8c2f8847b400b61", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb394606fd725089772c6b03e8c2f8847b400b61", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bb394606fd725089772c6b03e8c2f8847b400b61", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb394606fd725089772c6b03e8c2f8847b400b61/comments", "author": null, "committer": null, "parents": [{"sha": "d8044160b7047642e312fb5f713fe0db46171dd8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8044160b7047642e312fb5f713fe0db46171dd8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8044160b7047642e312fb5f713fe0db46171dd8"}], "stats": {"total": 31, "additions": 26, "deletions": 5}, "files": [{"sha": "1d85f75ebbd388de25b95629f09f4b9621987759", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb394606fd725089772c6b03e8c2f8847b400b61/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb394606fd725089772c6b03e8c2f8847b400b61/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bb394606fd725089772c6b03e8c2f8847b400b61", "patch": "@@ -1,3 +1,7 @@\n+2004-06-09  Richard Henderson  <rth@redhat.com>\n+\n+\t* expmed.c (emit_store_flag): Cope with FLOAT_STORE_FLAG_VALUE.\n+\n 2004-06-09  Geoffrey Keating  <geoffk@apple.com>\n \n \t* Makefile.in (CPPLIB_H): Put files in order of inclusion."}, {"sha": "96ef1e7d2e5c6fb0fd3a4cda5c27f3cb78206bba", "filename": "gcc/expmed.c", "status": "modified", "additions": 22, "deletions": 5, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb394606fd725089772c6b03e8c2f8847b400b61/gcc%2Fexpmed.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb394606fd725089772c6b03e8c2f8847b400b61/gcc%2Fexpmed.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpmed.c?ref=bb394606fd725089772c6b03e8c2f8847b400b61", "patch": "@@ -4559,11 +4559,28 @@ emit_store_flag (rtx target, enum rtx_code code, rtx op0, rtx op1,\n \n       comparison\n \t= compare_from_rtx (op0, op1, code, unsignedp, mode, NULL_RTX);\n-      if (GET_CODE (comparison) == CONST_INT)\n-\treturn (comparison == const0_rtx ? const0_rtx\n-\t\t: normalizep == 1 ? const1_rtx\n-\t\t: normalizep == -1 ? constm1_rtx\n-\t\t: const_true_rtx);\n+      if (CONSTANT_P (comparison))\n+\t{\n+\t  if (GET_CODE (comparison) == CONST_INT)\n+\t    {\n+\t      if (comparison == const0_rtx)\n+\t\treturn const0_rtx;\n+\t    }\n+#ifdef FLOAT_STORE_FLAG_VALUE\n+\t  else if (GET_CODE (comparison) == CONST_DOUBLE)\n+\t    {\n+\t      if (comparison == CONST0_RTX (GET_MODE (comparison)))\n+\t\treturn const0_rtx;\n+\t    }\n+#endif\n+\t  else\n+\t    abort ();\n+\t  if (normalizep == 1)\n+\t    return const1_rtx;\n+\t  if (normalizep == -1)\n+\t    return constm1_rtx;\n+\t  return const_true_rtx;\n+\t}\n \n       /* The code of COMPARISON may not match CODE if compare_from_rtx\n \t decided to swap its operands and reverse the original code."}]}