{"sha": "f6541401407b0d09169fd716ab6d5e02c8d60642", "node_id": "C_kwDOANBUbNoAKGY2NTQxNDAxNDA3YjBkMDkxNjlmZDcxNmFiNmQ1ZTAyYzhkNjA2NDI", "commit": {"author": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2022-04-27T16:40:18Z"}, "committer": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2022-04-27T16:40:18Z"}, "message": "Split test to remove failing run time test and add check for ICE.\n\ngcc/testsuite/ChangeLog:\n\n\tPR fortran/70673\n\tPR fortran/78054\n\t* gfortran.dg/pr70673.f90: Remove invalid statement.\n\t* gfortran.dg/pr70673_2.f90: New test to check that\n\tICE does not re-appear.", "tree": {"sha": "9106eb7fa19b42eba4abcd630d50e219f1069c53", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9106eb7fa19b42eba4abcd630d50e219f1069c53"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f6541401407b0d09169fd716ab6d5e02c8d60642", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6541401407b0d09169fd716ab6d5e02c8d60642", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f6541401407b0d09169fd716ab6d5e02c8d60642", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6541401407b0d09169fd716ab6d5e02c8d60642/comments", "author": null, "committer": null, "parents": [{"sha": "a71b107013cbf59d9f98e902bf50cd0e7a119508", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a71b107013cbf59d9f98e902bf50cd0e7a119508", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a71b107013cbf59d9f98e902bf50cd0e7a119508"}], "stats": {"total": 26, "additions": 25, "deletions": 1}, "files": [{"sha": "1449130274b64c94d31b1261153c337417213a58", "filename": "gcc/testsuite/gfortran.dg/pr70673.f90", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f6541401407b0d09169fd716ab6d5e02c8d60642/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr70673.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f6541401407b0d09169fd716ab6d5e02c8d60642/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr70673.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr70673.f90?ref=f6541401407b0d09169fd716ab6d5e02c8d60642", "patch": "@@ -16,7 +16,6 @@ subroutine s(inp)\n     a = a(2:3)      ! Make sure that temporary creation is not broken.\n     if ((len (a) .ne. 2) .or. (a .ne. \"el\")) STOP 2\n     deallocate (a)\n-    a = a           ! This would ICE too.\n   end subroutine s\n end module m\n "}, {"sha": "ba2ce2f2a966f1f032c141d9cc518476541eb6b2", "filename": "gcc/testsuite/gfortran.dg/pr70673_2.f90", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f6541401407b0d09169fd716ab6d5e02c8d60642/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr70673_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f6541401407b0d09169fd716ab6d5e02c8d60642/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr70673_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr70673_2.f90?ref=f6541401407b0d09169fd716ab6d5e02c8d60642", "patch": "@@ -0,0 +1,25 @@\n+! { dg-do compile }\n+!\n+! Test the fix for PR70673\n+!\n+! Contributed by David Kinniburgh  <davidgkinniburgh@yahoo.co.uk>\n+!\n+module m\n+contains\n+  subroutine s(inp)\n+    character(*), intent(in) :: inp\n+    character(:), allocatable :: a\n+    a = a           ! This used to ICE.\n+    a = inp\n+    a = a           ! This used to ICE too\n+    if ((len (a) .ne. 5) .or. (a .ne. \"hello\")) STOP 1\n+    a = a(2:3)      ! Make sure that temporary creation is not broken.\n+    if ((len (a) .ne. 2) .or. (a .ne. \"el\")) STOP 2\n+    deallocate (a)\n+    a = a           ! This would ICE too.\n+  end subroutine s\n+end module m\n+\n+  use m\n+  call s(\"hello\")\n+end"}]}