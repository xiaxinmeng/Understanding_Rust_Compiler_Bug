{"sha": "3874585e2e5521585d1733f177c25a5a0e224142", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mzg3NDU4NWUyZTU1MjE1ODVkMTczM2YxNzdjMjVhNWEwZTIyNDE0Mg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@vlsi1.ultra.nyu.edu", "date": "2001-11-28T12:21:07Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "2001-11-28T12:21:07Z"}, "message": "stor-layout.c (put_pending_size): Look for SAVE_EXPR if not at top level; only add to pending_sizes if find it.\n\n\t* stor-layout.c (put_pending_size): Look for SAVE_EXPR if not at top\n\tlevel; only add to pending_sizes if find it.\n\nFrom-SVN: r47415", "tree": {"sha": "7f69598c8d9e75767d6a7fc9fd507ca3e7686a08", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7f69598c8d9e75767d6a7fc9fd507ca3e7686a08"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3874585e2e5521585d1733f177c25a5a0e224142", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3874585e2e5521585d1733f177c25a5a0e224142", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3874585e2e5521585d1733f177c25a5a0e224142", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3874585e2e5521585d1733f177c25a5a0e224142/comments", "author": null, "committer": null, "parents": [{"sha": "d6d709cdb5c2ece5e682c97271b6c82a949c1330", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d6d709cdb5c2ece5e682c97271b6c82a949c1330", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d6d709cdb5c2ece5e682c97271b6c82a949c1330"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "cedd190d0d35bd800a74527901e5f36aced109ea", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3874585e2e5521585d1733f177c25a5a0e224142/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3874585e2e5521585d1733f177c25a5a0e224142/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3874585e2e5521585d1733f177c25a5a0e224142", "patch": "@@ -1,5 +1,8 @@\n Wed Nov 28 08:21:47 2001  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \n+\t* stor-layout.c (put_pending_size): Look for SAVE_EXPR if not at top\n+\tlevel; only add to pending_sizes if find it.\n+\n \t* langhooks.c (lhd_safe_from_p): Add ATTRIBUTE_UNUSED.\n \n \t* df.c (iterate_dataflow_sbitmap, iterate_dataflow_bitmap):"}, {"sha": "e4d8744faf1c92023f50183cedb6e5c87e5cda97", "filename": "gcc/stor-layout.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3874585e2e5521585d1733f177c25a5a0e224142/gcc%2Fstor-layout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3874585e2e5521585d1733f177c25a5a0e224142/gcc%2Fstor-layout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstor-layout.c?ref=3874585e2e5521585d1733f177c25a5a0e224142", "patch": "@@ -114,7 +114,15 @@ void\n put_pending_size (expr)\n      tree expr;\n {\n-  pending_sizes = tree_cons (NULL_TREE, expr, pending_sizes);\n+  /* Strip any simple arithmetic from EXPR to see if it has an underlying\n+     SAVE_EXPR.  */\n+  while (TREE_CODE_CLASS (TREE_CODE (expr)) == '1'\n+\t || (TREE_CODE_CLASS (TREE_CODE (expr)) == '2'\n+\t    && TREE_CONSTANT (TREE_OPERAND (expr, 1))))\n+    expr = TREE_OPERAND (expr, 0);\n+\n+  if (TREE_CODE (expr) == SAVE_EXPR)\n+    pending_sizes = tree_cons (NULL_TREE, expr, pending_sizes);\n }\n \n /* Put a chain of objects into the pending sizes list, which must be"}]}