{"sha": "f05df2ac59209394588ac62b629bb9c190029a50", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjA1ZGYyYWM1OTIwOTM5NDU4OGFjNjJiNjI5YmI5YzE5MDAyOWE1MA==", "commit": {"author": {"name": "Aaron Sawdey", "email": "acsawdey@gcc.gnu.org", "date": "2017-02-20T17:09:40Z"}, "committer": {"name": "Aaron Sawdey", "email": "acsawdey@gcc.gnu.org", "date": "2017-02-20T17:09:40Z"}, "message": "strncmp-2.c: Portability fixes.\n\n2017-02-14  Aaron Sawdey  <acsawdey@linux.vnet.ibm.com>\n\n        * gcc.dg/strncmp-2.c: Portability fixes.\n\nFrom-SVN: r245608", "tree": {"sha": "9e2912eb25b7e907a134909eb7037fa6138ed6dc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9e2912eb25b7e907a134909eb7037fa6138ed6dc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f05df2ac59209394588ac62b629bb9c190029a50", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f05df2ac59209394588ac62b629bb9c190029a50", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f05df2ac59209394588ac62b629bb9c190029a50", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f05df2ac59209394588ac62b629bb9c190029a50/comments", "author": null, "committer": null, "parents": [{"sha": "027a9dd50982526525b9793646ef1e3d958869f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/027a9dd50982526525b9793646ef1e3d958869f2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/027a9dd50982526525b9793646ef1e3d958869f2"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "ed6c5fa08809c82e2fe556f8eece8805486e15de", "filename": "gcc/testsuite/gcc.dg/strncmp-2.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f05df2ac59209394588ac62b629bb9c190029a50/gcc%2Ftestsuite%2Fgcc.dg%2Fstrncmp-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f05df2ac59209394588ac62b629bb9c190029a50/gcc%2Ftestsuite%2Fgcc.dg%2Fstrncmp-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fstrncmp-2.c?ref=f05df2ac59209394588ac62b629bb9c190029a50", "patch": "@@ -19,7 +19,12 @@ static void test_driver_strncmp (void (test_strncmp)(const char *, const char *,\n {\n   long pgsz = sysconf(_SC_PAGESIZE);\n   char buf1[sz+1];\n-  char *buf2 = aligned_alloc(pgsz,2*pgsz);\n+  char *buf2;\n+#if _POSIX_C_SOURCE >= 200112L\n+  if ( posix_memalign ((void **)&buf2, pgsz, 2*pgsz) ) abort ();\n+#else\n+  if ( !(buf2 = valloc(2*pgsz))) abort ();\n+#endif\n   char *p2;\n   int r,i,e;\n \n@@ -35,6 +40,7 @@ static void test_driver_strncmp (void (test_strncmp)(const char *, const char *,\n     e = lib_memcmp(buf1,p2,sz);\n     (*test_memcmp)(buf1,p2,e);\n   }\n+  free(buf2);\n }\n \n #define RUN_TEST(SZ) test_driver_strncmp (test_strncmp_ ## SZ, test_memcmp_ ## SZ, SZ);"}]}