{"sha": "ee1315aa922e5c7baef0b2d288be0ead90f547e7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWUxMzE1YWE5MjJlNWM3YmFlZjBiMmQyODhiZTBlYWQ5MGY1NDdlNw==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2001-09-21T20:42:14Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2001-09-21T20:42:14Z"}, "message": "optabs.c (init_one_libfunc): Gen a FUNCTION_DECL for use by ENCODE_SECTION_INFO...\n\n        * optabs.c (init_one_libfunc): Gen a FUNCTION_DECL for use by\n        ENCODE_SECTION_INFO; get SYMBOL_REF from make_decl_rtl.\n\nFrom-SVN: r45737", "tree": {"sha": "d19867fbccbbeb6e48319d84fbc1d2e273b6f322", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d19867fbccbbeb6e48319d84fbc1d2e273b6f322"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ee1315aa922e5c7baef0b2d288be0ead90f547e7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee1315aa922e5c7baef0b2d288be0ead90f547e7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee1315aa922e5c7baef0b2d288be0ead90f547e7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee1315aa922e5c7baef0b2d288be0ead90f547e7/comments", "author": null, "committer": null, "parents": [{"sha": "9defc9b7ac96fd51c70aff0e452c753d1f6159b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9defc9b7ac96fd51c70aff0e452c753d1f6159b3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9defc9b7ac96fd51c70aff0e452c753d1f6159b3"}], "stats": {"total": 19, "additions": 16, "deletions": 3}, "files": [{"sha": "69bc75f007fc26a9b280c1af4809a4c879508b8e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee1315aa922e5c7baef0b2d288be0ead90f547e7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee1315aa922e5c7baef0b2d288be0ead90f547e7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ee1315aa922e5c7baef0b2d288be0ead90f547e7", "patch": "@@ -1,3 +1,8 @@\n+2001-09-21  Richard Henderson  <rth@redhat.com>\n+\n+\t* optabs.c (init_one_libfunc): Gen a FUNCTION_DECL for use by\n+\tENCODE_SECTION_INFO; get SYMBOL_REF from make_decl_rtl.\n+\n 2001-09-21  Richard Henderson  <rth@redhat.com>\n \n \t* rtl.h (LCT_RETURNS_TWICE): New."}, {"sha": "6421adf6ef3d239bb210fa23db29e5ab39edf7ac", "filename": "gcc/optabs.c", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee1315aa922e5c7baef0b2d288be0ead90f547e7/gcc%2Foptabs.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee1315aa922e5c7baef0b2d288be0ead90f547e7/gcc%2Foptabs.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Foptabs.c?ref=ee1315aa922e5c7baef0b2d288be0ead90f547e7", "patch": "@@ -4687,9 +4687,17 @@ rtx\n init_one_libfunc (name)\n      register const char *name;\n {\n-  name = ggc_strdup (name);\n-\n-  return gen_rtx_SYMBOL_REF (Pmode, name);\n+  /* Create a FUNCTION_DECL that can be passed to ENCODE_SECTION_INFO.  */\n+  /* ??? We don't have any type information except for this is\n+     a function.  See if error_mark_node is good enough.  */\n+  tree decl = build_decl (FUNCTION_DECL, get_identifier (name),\n+\t\t\t  error_mark_node);\n+  DECL_ARTIFICIAL (decl) = 1;\n+  DECL_EXTERNAL (decl) = 1;\n+  TREE_PUBLIC (decl) = 1;\n+\n+  /* Return the symbol_ref from the mem rtx.  */\n+  return XEXP (DECL_RTL (decl), 0);\n }\n \n /* Mark ARG (which is really an OPTAB *) for GC.  */"}]}