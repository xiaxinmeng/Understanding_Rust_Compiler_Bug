{"sha": "a0bdd4b03b87a01a5984aa5c7ad94f66b2a7bc9e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTBiZGQ0YjAzYjg3YTAxYTU5ODRhYTVjN2FkOTRmNjZiMmE3YmM5ZQ==", "commit": {"author": {"name": "Doug Rupp", "email": "rupp@adacore.com", "date": "2021-04-26T04:52:09Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2021-07-05T13:09:12Z"}, "message": "[Ada] The Unix Epochalyse of 2038 - OS_Time\n\ngcc/ada/\n\n\t* adaint.h (OS_Time): typedef as long long.\n\t* osint.adb (Underlying_OS_Time): Declare as 64-bit signed type.\n\t* libgnat/s-os_lib.adb (\"<\"): Compare OS_Time as\n\tLong_Long_Integer.\n\t(\"<=\"): Likewise.\n\t(\">\"): Likewise.\n\t(\">=\"): Likewise.\n\t* libgnat/s-os_lib.ads (OS_Time): Declare as 64-bit signed type.", "tree": {"sha": "65506f7ae0df06decc27986f88f53539a2aa4534", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/65506f7ae0df06decc27986f88f53539a2aa4534"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a0bdd4b03b87a01a5984aa5c7ad94f66b2a7bc9e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a0bdd4b03b87a01a5984aa5c7ad94f66b2a7bc9e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a0bdd4b03b87a01a5984aa5c7ad94f66b2a7bc9e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a0bdd4b03b87a01a5984aa5c7ad94f66b2a7bc9e/comments", "author": {"login": "Cementitious", "id": 115579865, "node_id": "U_kgDOBuOb2Q", "avatar_url": "https://avatars.githubusercontent.com/u/115579865?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Cementitious", "html_url": "https://github.com/Cementitious", "followers_url": "https://api.github.com/users/Cementitious/followers", "following_url": "https://api.github.com/users/Cementitious/following{/other_user}", "gists_url": "https://api.github.com/users/Cementitious/gists{/gist_id}", "starred_url": "https://api.github.com/users/Cementitious/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Cementitious/subscriptions", "organizations_url": "https://api.github.com/users/Cementitious/orgs", "repos_url": "https://api.github.com/users/Cementitious/repos", "events_url": "https://api.github.com/users/Cementitious/events{/privacy}", "received_events_url": "https://api.github.com/users/Cementitious/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e7b17be97330d2e42dd7e8e84a5b16a167241931", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7b17be97330d2e42dd7e8e84a5b16a167241931", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e7b17be97330d2e42dd7e8e84a5b16a167241931"}], "stats": {"total": 18, "additions": 6, "deletions": 12}, "files": [{"sha": "b03294f2b18d4773d80a85c182de10acd9e39aad", "filename": "gcc/ada/adaint.h", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a0bdd4b03b87a01a5984aa5c7ad94f66b2a7bc9e/gcc%2Fada%2Fadaint.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a0bdd4b03b87a01a5984aa5c7ad94f66b2a7bc9e/gcc%2Fada%2Fadaint.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fadaint.h?ref=a0bdd4b03b87a01a5984aa5c7ad94f66b2a7bc9e", "patch": "@@ -101,11 +101,7 @@ extern \"C\" {\n #endif\n \n /* Type corresponding to GNAT.OS_Lib.OS_Time */\n-#if defined (_WIN64)\n typedef long long OS_Time;\n-#else\n-typedef long OS_Time;\n-#endif\n \n #define __int64 long long\n GNAT_STRUCT_STAT;"}, {"sha": "7591f27903d3463f1848ae4aa796c20aeb9084b7", "filename": "gcc/ada/libgnat/s-os_lib.adb", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a0bdd4b03b87a01a5984aa5c7ad94f66b2a7bc9e/gcc%2Fada%2Flibgnat%2Fs-os_lib.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a0bdd4b03b87a01a5984aa5c7ad94f66b2a7bc9e/gcc%2Fada%2Flibgnat%2Fs-os_lib.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flibgnat%2Fs-os_lib.adb?ref=a0bdd4b03b87a01a5984aa5c7ad94f66b2a7bc9e", "patch": "@@ -139,7 +139,7 @@ package body System.OS_Lib is\n \n    function \"<\"  (X, Y : OS_Time) return Boolean is\n    begin\n-      return Long_Integer (X) < Long_Integer (Y);\n+      return Long_Long_Integer (X) < Long_Long_Integer (Y);\n    end \"<\";\n \n    ----------\n@@ -148,7 +148,7 @@ package body System.OS_Lib is\n \n    function \"<=\"  (X, Y : OS_Time) return Boolean is\n    begin\n-      return Long_Integer (X) <= Long_Integer (Y);\n+      return Long_Long_Integer (X) <= Long_Long_Integer (Y);\n    end \"<=\";\n \n    ---------\n@@ -157,7 +157,7 @@ package body System.OS_Lib is\n \n    function \">\"  (X, Y : OS_Time) return Boolean is\n    begin\n-      return Long_Integer (X) > Long_Integer (Y);\n+      return Long_Long_Integer (X) > Long_Long_Integer (Y);\n    end \">\";\n \n    ----------\n@@ -166,7 +166,7 @@ package body System.OS_Lib is\n \n    function \">=\"  (X, Y : OS_Time) return Boolean is\n    begin\n-      return Long_Integer (X) >= Long_Integer (Y);\n+      return Long_Long_Integer (X) >= Long_Long_Integer (Y);\n    end \">=\";\n \n    -----------------"}, {"sha": "1d0af9b73a8946432e458904c9a792d764d781e6", "filename": "gcc/ada/libgnat/s-os_lib.ads", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a0bdd4b03b87a01a5984aa5c7ad94f66b2a7bc9e/gcc%2Fada%2Flibgnat%2Fs-os_lib.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a0bdd4b03b87a01a5984aa5c7ad94f66b2a7bc9e/gcc%2Fada%2Flibgnat%2Fs-os_lib.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flibgnat%2Fs-os_lib.ads?ref=a0bdd4b03b87a01a5984aa5c7ad94f66b2a7bc9e", "patch": "@@ -1098,8 +1098,7 @@ private\n    pragma Import (C, Current_Process_Id, \"__gnat_current_process_id\");\n \n    type OS_Time is\n-     range -(2 ** (Standard'Address_Size - Integer'(1))) ..\n-           +(2 ** (Standard'Address_Size - Integer'(1)) - 1);\n+     range -(2 ** 63) ..  +(2 ** 63 - 1);\n    --  Type used for timestamps in the compiler. This type is used to hold\n    --  time stamps, but may have a different representation than C's time_t.\n    --  This type needs to match the declaration of OS_Time in adaint.h."}, {"sha": "3e5db3612d6148ab9da19303a1baa1ccd02227be", "filename": "gcc/ada/osint.adb", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a0bdd4b03b87a01a5984aa5c7ad94f66b2a7bc9e/gcc%2Fada%2Fosint.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a0bdd4b03b87a01a5984aa5c7ad94f66b2a7bc9e/gcc%2Fada%2Fosint.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fosint.adb?ref=a0bdd4b03b87a01a5984aa5c7ad94f66b2a7bc9e", "patch": "@@ -2191,8 +2191,7 @@ package body Osint is\n       GNAT_Time : Time_Stamp_Type;\n \n       type Underlying_OS_Time is\n-        range -(2 ** (Standard'Address_Size - Integer'(1))) ..\n-              +(2 ** (Standard'Address_Size - Integer'(1)) - 1);\n+        range -(2 ** 63) ..  +(2 ** 63 - 1);\n       --  Underlying_OS_Time is a redeclaration of OS_Time to allow integer\n       --  manipulation. Remove this in favor of To_Ada/To_C once newer\n       --  GNAT releases are available with these functions."}]}