{"sha": "3d47e9caa973bedd3344b50d5c4b2ae80e809563", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2Q0N2U5Y2FhOTczYmVkZDMzNDRiNTBkNWM0YjJhZTgwZTgwOTU2Mw==", "commit": {"author": {"name": "Kaz Kojima", "email": "kkojima@gcc.gnu.org", "date": "2004-10-02T07:02:41Z"}, "committer": {"name": "Kaz Kojima", "email": "kkojima@gcc.gnu.org", "date": "2004-10-02T07:02:41Z"}, "message": "* testsuite/libffi.call/negint.c: New test case.\n\nFrom-SVN: r88421", "tree": {"sha": "7a1de4ecc6ddc01adefc722c56cf839279e287a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7a1de4ecc6ddc01adefc722c56cf839279e287a3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3d47e9caa973bedd3344b50d5c4b2ae80e809563", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3d47e9caa973bedd3344b50d5c4b2ae80e809563", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3d47e9caa973bedd3344b50d5c4b2ae80e809563", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3d47e9caa973bedd3344b50d5c4b2ae80e809563/comments", "author": null, "committer": null, "parents": [{"sha": "12d3155f3b807b8ad6ea5085d6008e5f1d944326", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12d3155f3b807b8ad6ea5085d6008e5f1d944326", "html_url": "https://github.com/Rust-GCC/gccrs/commit/12d3155f3b807b8ad6ea5085d6008e5f1d944326"}], "stats": {"total": 58, "additions": 58, "deletions": 0}, "files": [{"sha": "40e9396466851227f5104d8c9e2d1a371f306602", "filename": "libffi/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3d47e9caa973bedd3344b50d5c4b2ae80e809563/libffi%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3d47e9caa973bedd3344b50d5c4b2ae80e809563/libffi%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2FChangeLog?ref=3d47e9caa973bedd3344b50d5c4b2ae80e809563", "patch": "@@ -1,3 +1,7 @@\n+2004-10-02  Kaz Kojima  <kkojima@gcc.gnu.org>\n+\n+\t* testsuite/libffi.call/negint.c: New test case.\n+\n 2004-09-14  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR libgcj/17465"}, {"sha": "1c8ed61356213222e9ec74e63fc5843db943aacb", "filename": "libffi/testsuite/libffi.call/negint.c", "status": "added", "additions": 54, "deletions": 0, "changes": 54, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3d47e9caa973bedd3344b50d5c4b2ae80e809563/libffi%2Ftestsuite%2Flibffi.call%2Fnegint.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3d47e9caa973bedd3344b50d5c4b2ae80e809563/libffi%2Ftestsuite%2Flibffi.call%2Fnegint.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2Ftestsuite%2Flibffi.call%2Fnegint.c?ref=3d47e9caa973bedd3344b50d5c4b2ae80e809563", "patch": "@@ -0,0 +1,54 @@\n+/* Area:\tffi_call\n+   Purpose:\tCheck that negative integers are passed correctly.\n+   Limitations:\tnone.\n+   PR:\t\tnone.\n+   Originator:\tFrom the original ffitest.c  */\n+\n+/* { dg-do run } */\n+/* { dg-options -O2 } */\n+\n+#include \"ffitest.h\"\n+\n+static int checking(int a, short b, signed char c)\n+{\n+  int i;\n+\n+  return (a < 0 && b < 0 && c < 0);\n+}\n+\n+int main (void)\n+{\n+  ffi_cif cif;\n+  ffi_type *args[MAX_ARGS];\n+  void *values[MAX_ARGS];\n+  ffi_arg rint;\n+\n+  signed int si;\n+  signed short ss;\n+  signed char sc;\n+\n+  args[0] = &ffi_type_sint;\n+  values[0] = &si;\n+  args[1] = &ffi_type_sshort;\n+  values[1] = &ss;\n+  args[2] = &ffi_type_schar;\n+  values[2] = &sc;\n+\n+  /* Initialize the cif */\n+  CHECK(ffi_prep_cif(&cif, FFI_DEFAULT_ABI, 3,\n+\t\t     &ffi_type_sint, args) == FFI_OK);\n+\n+  si = -6;\n+  ss = -12;\n+  sc = -1;\n+\n+  checking (si, ss, sc);\n+\n+  ffi_call(&cif, FFI_FN(checking), &rint, values);\n+\n+  printf (\"%d vs %d\\n\", (int)rint, checking (si, ss, sc));\n+\n+  CHECK(rint != 0);\n+\n+  exit (0);\n+}"}]}