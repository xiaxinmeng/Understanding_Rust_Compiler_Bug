{"sha": "058330951de0cd5db55aa5ece905689faf0de920", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDU4MzMwOTUxZGUwY2Q1ZGI1NWFhNWVjZTkwNTY4OWZhZjBkZTkyMA==", "commit": {"author": {"name": "Bryce McKinlay", "email": "bryce@waitaki.otago.ac.nz", "date": "2002-03-27T08:27:27Z"}, "committer": {"name": "Bryce McKinlay", "email": "bryce@gcc.gnu.org", "date": "2002-03-27T08:27:27Z"}, "message": "re PR java/5850 (resolving inherited member variables with same name works poorly)\n\n        Fix for PR java/5850:\n        * parse.y (lookup_field_wrapper): Call itself recursively for enclosing\n        context if field was not found in the current scope.\n        * expr.c (lookup_field): Don't look in enclosing contexts.\n\nFrom-SVN: r51438", "tree": {"sha": "8ae6cfc4e900d10e7d90077f2bd75059564303ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8ae6cfc4e900d10e7d90077f2bd75059564303ee"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/058330951de0cd5db55aa5ece905689faf0de920", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/058330951de0cd5db55aa5ece905689faf0de920", "html_url": "https://github.com/Rust-GCC/gccrs/commit/058330951de0cd5db55aa5ece905689faf0de920", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/058330951de0cd5db55aa5ece905689faf0de920/comments", "author": null, "committer": null, "parents": [{"sha": "473aef78b4cd09a11ff492d1a3ae6945bbdaf1bd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/473aef78b4cd09a11ff492d1a3ae6945bbdaf1bd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/473aef78b4cd09a11ff492d1a3ae6945bbdaf1bd"}], "stats": {"total": 24, "additions": 14, "deletions": 10}, "files": [{"sha": "8fc8e7b1b0454a27feb9084c162c22d7ff01f14f", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/058330951de0cd5db55aa5ece905689faf0de920/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/058330951de0cd5db55aa5ece905689faf0de920/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=058330951de0cd5db55aa5ece905689faf0de920", "patch": "@@ -1,3 +1,10 @@\n+2002-03-27  Bryce McKinlay  <bryce@waitaki.otago.ac.nz>\n+\n+\tFix for PR java/5850:\n+\t* parse.y (lookup_field_wrapper): Call itself recursively for enclosing\n+\tcontext if field was not found in the current scope.\n+\t* expr.c (lookup_field): Don't look in enclosing contexts.\n+\n 2002-03-26  Tom Tromey  <tromey@redhat.com>\n \n \tFix for PR java/5942:"}, {"sha": "a1ec3320e2aac8f644d35096caa0599231093409", "filename": "gcc/java/expr.c", "status": "modified", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/058330951de0cd5db55aa5ece905689faf0de920/gcc%2Fjava%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/058330951de0cd5db55aa5ece905689faf0de920/gcc%2Fjava%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fexpr.c?ref=058330951de0cd5db55aa5ece905689faf0de920", "patch": "@@ -1517,16 +1517,6 @@ lookup_field (typep, name)\n \tif (DECL_NAME (field) == name)\n \t  return field;\n \n-      /* If *typep is an innerclass, lookup the field in its enclosing\n-         contexts */\n-      if (INNER_CLASS_TYPE_P (*typep))\n-\t{\n-\t  tree outer_type = TREE_TYPE (DECL_CONTEXT (TYPE_NAME (*typep)));\n-\n-\t  if ((field = lookup_field (&outer_type, name)))\n-\t    return field;\n-\t}\n-\n       /* Process implemented interfaces. */\n       basetype_vec = TYPE_BINFO_BASETYPES (*typep);\n       n = TREE_VEC_LENGTH (basetype_vec);"}, {"sha": "50ed45d4bad834ac0f94f89fb4079edece8581a2", "filename": "gcc/java/parse.y", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/058330951de0cd5db55aa5ece905689faf0de920/gcc%2Fjava%2Fparse.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/058330951de0cd5db55aa5ece905689faf0de920/gcc%2Fjava%2Fparse.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fparse.y?ref=058330951de0cd5db55aa5ece905689faf0de920", "patch": "@@ -4209,6 +4209,13 @@ lookup_field_wrapper (class, name)\n       decl = lookup_field (&type, name);\n     }\n \n+  /* If the field still hasn't been found, try the next enclosing context. */\n+  if (!decl && INNER_CLASS_TYPE_P (class))\n+    {\n+      tree outer_type = TREE_TYPE (DECL_CONTEXT (TYPE_NAME (class)));\n+      decl = lookup_field_wrapper (outer_type, name);\n+    }\n+\n   java_parser_context_restore_global ();\n   return decl == error_mark_node ? NULL : decl;\n }"}]}