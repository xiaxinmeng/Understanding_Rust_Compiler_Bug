{"sha": "3c94db20be9af3cb0376292e2d4672b515558231", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2M5NGRiMjBiZTlhZjNjYjAzNzYyOTJlMmQ0NjcyYjUxNTU1ODIzMQ==", "commit": {"author": {"name": "Sebastian Huber", "email": "sebastian.huber@embedded-brains.de", "date": "2021-08-06T07:57:43Z"}, "committer": {"name": "Sebastian Huber", "email": "sebastian.huber@embedded-brains.de", "date": "2021-08-06T10:27:48Z"}, "message": "gcov: Remove <stdint.h> from libgcov-driver.c\n\nIn the patch to add __gcov_info_to_gcda(), the include of <stdint.h> was added\nto libgcov-driver.c even if inhibit_libc is defined.  It turned out that this\nheader file is not always available.  Remove the include of <stdint.h> and\nreplace the intptr_t with the compiler provided __INTPTR_TYPE__.\n\nlibgcc/\n\n\t* libgcov-driver.c (#include <stdint.h>): Remove.\n\t(write_topn_counters): Use __INTPTR_TYPE__ instead of intptr_t.", "tree": {"sha": "d495316d2f1d284db065de164813a7f1fade7eb1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d495316d2f1d284db065de164813a7f1fade7eb1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3c94db20be9af3cb0376292e2d4672b515558231", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c94db20be9af3cb0376292e2d4672b515558231", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3c94db20be9af3cb0376292e2d4672b515558231", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c94db20be9af3cb0376292e2d4672b515558231/comments", "author": {"login": "sebhub", "id": 932056, "node_id": "MDQ6VXNlcjkzMjA1Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/932056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebhub", "html_url": "https://github.com/sebhub", "followers_url": "https://api.github.com/users/sebhub/followers", "following_url": "https://api.github.com/users/sebhub/following{/other_user}", "gists_url": "https://api.github.com/users/sebhub/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebhub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebhub/subscriptions", "organizations_url": "https://api.github.com/users/sebhub/orgs", "repos_url": "https://api.github.com/users/sebhub/repos", "events_url": "https://api.github.com/users/sebhub/events{/privacy}", "received_events_url": "https://api.github.com/users/sebhub/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sebhub", "id": 932056, "node_id": "MDQ6VXNlcjkzMjA1Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/932056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebhub", "html_url": "https://github.com/sebhub", "followers_url": "https://api.github.com/users/sebhub/followers", "following_url": "https://api.github.com/users/sebhub/following{/other_user}", "gists_url": "https://api.github.com/users/sebhub/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebhub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebhub/subscriptions", "organizations_url": "https://api.github.com/users/sebhub/orgs", "repos_url": "https://api.github.com/users/sebhub/repos", "events_url": "https://api.github.com/users/sebhub/events{/privacy}", "received_events_url": "https://api.github.com/users/sebhub/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bc181adf26eae77eacb73d4397ac479dac114d2d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc181adf26eae77eacb73d4397ac479dac114d2d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bc181adf26eae77eacb73d4397ac479dac114d2d"}], "stats": {"total": 6, "additions": 2, "deletions": 4}, "files": [{"sha": "087f71e0107781f89429c3a8674de82523ac44ad", "filename": "libgcc/libgcov-driver.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3c94db20be9af3cb0376292e2d4672b515558231/libgcc%2Flibgcov-driver.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3c94db20be9af3cb0376292e2d4672b515558231/libgcc%2Flibgcov-driver.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Flibgcov-driver.c?ref=3c94db20be9af3cb0376292e2d4672b515558231", "patch": "@@ -26,8 +26,6 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n #include \"libgcov.h\"\n #include \"gcov-io.h\"\n \n-#include <stdint.h>\n-\n /* Return 1, if all counter values are zero, otherwise 0. */\n \n static inline int\n@@ -453,7 +451,7 @@ write_topn_counters (const struct gcov_ctr_info *ci_ptr,\n       gcov_type start = ci_ptr->values[GCOV_TOPN_MEM_COUNTERS * i + 2];\n       unsigned sizes = 0;\n \n-      for (struct gcov_kvp *node = (struct gcov_kvp *)(intptr_t)start;\n+      for (struct gcov_kvp *node = (struct gcov_kvp *)(__INTPTR_TYPE__)start;\n \t   node != NULL; node = node->next)\n \t++sizes;\n \n@@ -472,7 +470,7 @@ write_topn_counters (const struct gcov_ctr_info *ci_ptr,\n       gcov_type start = ci_ptr->values[GCOV_TOPN_MEM_COUNTERS * i + 2];\n \n       unsigned j = 0;\n-      for (struct gcov_kvp *node = (struct gcov_kvp *)(intptr_t)start;\n+      for (struct gcov_kvp *node = (struct gcov_kvp *)(__INTPTR_TYPE__)start;\n \t   j < list_sizes[i]; node = node->next, j++)\n \t{\n \t  dump_counter (node->value, dump_fn, arg);"}]}