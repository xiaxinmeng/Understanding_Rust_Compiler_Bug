{"sha": "fc2a6c89825977ce23e606de67c95d11afa61d5c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmMyYTZjODk4MjU5NzdjZTIzZTYwNmRlNjdjOTVkMTFhZmE2MWQ1Yw==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@net-b.de", "date": "2011-11-28T14:21:33Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2011-11-28T14:21:33Z"}, "message": "re PR fortran/51308 (PARAMETER attribute conflicts with SAVE attribute)\n\n2011-11-28  Tobias Burnus  <burnus@net-b.de>\n            Steven G. Kargl  <kargl@gcc.gnu.org>\n\n        PR fortran/51308\n        * symbol.c (check_conflict): Ignore BIND(C) + PARAMETER\n        conflicts for ISO_C_BINDING variables.\n        (gen_special_c_interop_ptr): Don't mark c_ptr_null/c_funptr_null\n        as SAVE.\n\n2011-11-28  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/51308\n        * gfortran.dg/iso_c_binding_compiler_4.f90: New.\n\n\nCo-Authored-By: Steven G. Kargl <kargl@gcc.gnu.org>\n\nFrom-SVN: r181778", "tree": {"sha": "1beb6b16b624edf198b324e3cc351236a09f1755", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1beb6b16b624edf198b324e3cc351236a09f1755"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fc2a6c89825977ce23e606de67c95d11afa61d5c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc2a6c89825977ce23e606de67c95d11afa61d5c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fc2a6c89825977ce23e606de67c95d11afa61d5c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc2a6c89825977ce23e606de67c95d11afa61d5c/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "1a30353af83ec6fd6b8e7862511bec5c897e0790", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1a30353af83ec6fd6b8e7862511bec5c897e0790", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1a30353af83ec6fd6b8e7862511bec5c897e0790"}], "stats": {"total": 24, "additions": 17, "deletions": 7}, "files": [{"sha": "393f2a05076bdda25d338352ad3c0746753f5996", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fc2a6c89825977ce23e606de67c95d11afa61d5c/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fc2a6c89825977ce23e606de67c95d11afa61d5c/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=fc2a6c89825977ce23e606de67c95d11afa61d5c", "patch": "@@ -1,3 +1,12 @@\n+2011-11-28  Tobias Burnus  <burnus@net-b.de>\n+\t    Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/51308\n+\t* symbol.c (check_conflict): Ignore BIND(C) + PARAMETER\n+\tconflicts for ISO_C_BINDING variables.\n+\t(gen_special_c_interop_ptr): Don't mark c_ptr_null/c_funptr_null\n+\tas SAVE.\n+\n 2011-11-25  Mikael Morin  <mikael@gcc.gnu.org>\n \n \t* trans-array.c (set_loop_bounds): Remove dead conditions."}, {"sha": "de42297981eb6f86d7582421f0e6953449eb9fd6", "filename": "gcc/fortran/symbol.c", "status": "modified", "additions": 3, "deletions": 7, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fc2a6c89825977ce23e606de67c95d11afa61d5c/gcc%2Ffortran%2Fsymbol.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fc2a6c89825977ce23e606de67c95d11afa61d5c/gcc%2Ffortran%2Fsymbol.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fsymbol.c?ref=fc2a6c89825977ce23e606de67c95d11afa61d5c", "patch": "@@ -742,9 +742,10 @@ check_conflict (symbol_attribute *attr, const char *name, locus *where)\n       conf2 (asynchronous);\n       conf2 (threadprivate);\n       conf2 (value);\n-      conf2 (is_bind_c);\n       conf2 (codimension);\n       conf2 (result);\n+      if (!attr->is_iso_c)\n+\tconf2 (is_bind_c);\n       break;\n \n     default:\n@@ -3763,13 +3764,11 @@ gen_special_c_interop_ptr (int ptr_id, const char *ptr_name,\n                           \"create symbol for %s\", ptr_name);\n     }\n \n-  /* Set up the symbol's important fields.  Save attr required so we can\n-     initialize the ptr to NULL.  */\n-  tmp_sym->attr.save = SAVE_EXPLICIT;\n   tmp_sym->ts.is_c_interop = 1;\n   tmp_sym->attr.is_c_interop = 1;\n   tmp_sym->ts.is_iso_c = 1;\n   tmp_sym->ts.type = BT_DERIVED;\n+  tmp_sym->attr.flavor = FL_PARAMETER;\n \n   /* The c_ptr and c_funptr derived types will provide the\n      definition for c_null_ptr and c_null_funptr, respectively.  */\n@@ -3817,9 +3816,6 @@ gen_special_c_interop_ptr (int ptr_id, const char *ptr_name,\n   c->expr = gfc_get_expr ();\n   c->expr->expr_type = EXPR_NULL;\n   c->expr->ts.is_iso_c = 1;\n-  /* Must declare c_null_ptr and c_null_funptr as having the\n-     PARAMETER attribute so they can be used in init expressions.  */\n-  tmp_sym->attr.flavor = FL_PARAMETER;\n \n   return SUCCESS;\n }"}, {"sha": "a6a077c9b88a2ef6b8db341b5c63e42747508ff3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fc2a6c89825977ce23e606de67c95d11afa61d5c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fc2a6c89825977ce23e606de67c95d11afa61d5c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fc2a6c89825977ce23e606de67c95d11afa61d5c", "patch": "@@ -1,3 +1,8 @@\n+2011-11-28  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/51308\n+\t* gfortran.dg/iso_c_binding_compiler_4.f90: New.\n+\n 2011-11-27  Aldy Hernandez  <aldyh@redhat.com>\n \t    Iain Sandoe  <iains@gcc.gnu.org>\n "}]}