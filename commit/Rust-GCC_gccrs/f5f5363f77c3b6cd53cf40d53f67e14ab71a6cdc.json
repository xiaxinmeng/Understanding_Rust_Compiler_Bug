{"sha": "f5f5363f77c3b6cd53cf40d53f67e14ab71a6cdc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjVmNTM2M2Y3N2MzYjZjZDUzY2Y0MGQ1M2Y2N2UxNGFiNzFhNmNkYw==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@vlsi1.ultra.nyu.edu", "date": "2001-01-22T18:59:36Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "2001-01-22T18:59:36Z"}, "message": "explow.c (probe_stack_range): Ensure value passed to stack_check_libfunc is ptr_mode, not Pmode.\n\n\t* explow.c (probe_stack_range): Ensure value passed to\n\tstack_check_libfunc is ptr_mode, not Pmode.\n\nFrom-SVN: r39185", "tree": {"sha": "f5e8f6715a0be21af19590c3f435a3e5898db37a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f5e8f6715a0be21af19590c3f435a3e5898db37a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f5f5363f77c3b6cd53cf40d53f67e14ab71a6cdc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5f5363f77c3b6cd53cf40d53f67e14ab71a6cdc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f5f5363f77c3b6cd53cf40d53f67e14ab71a6cdc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5f5363f77c3b6cd53cf40d53f67e14ab71a6cdc/comments", "author": null, "committer": null, "parents": [{"sha": "a09b9232cd7029bde88a5d23514b169d78f02a72", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a09b9232cd7029bde88a5d23514b169d78f02a72", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a09b9232cd7029bde88a5d23514b169d78f02a72"}], "stats": {"total": 25, "additions": 19, "deletions": 6}, "files": [{"sha": "421766e1c6187ec4b6b51d6e12dad83169271e3c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5f5363f77c3b6cd53cf40d53f67e14ab71a6cdc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5f5363f77c3b6cd53cf40d53f67e14ab71a6cdc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f5f5363f77c3b6cd53cf40d53f67e14ab71a6cdc", "patch": "@@ -1,3 +1,8 @@\n+Mon Jan 22 13:59:09 2001  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n+\n+\t* explow.c (probe_stack_range): Ensure value passed to\n+\tstack_check_libfunc is ptr_mode, not Pmode.\n+\n Mon Jan 22 16:53:06 2001  J\"orn Rennecke <amylaar@redhat.com>\n \n \t* recog.c (validate_replace_rtx_1): In ZERO_EXTEND / SIGN_EXTEND"}, {"sha": "aa1e8a6927031c1e3d9400c9f0f08f4dbbd4d1f2", "filename": "gcc/explow.c", "status": "modified", "additions": 14, "deletions": 6, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5f5363f77c3b6cd53cf40d53f67e14ab71a6cdc/gcc%2Fexplow.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5f5363f77c3b6cd53cf40d53f67e14ab71a6cdc/gcc%2Fexplow.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexplow.c?ref=f5f5363f77c3b6cd53cf40d53f67e14ab71a6cdc", "patch": "@@ -1558,12 +1558,20 @@ probe_stack_range (first, size)\n   /* First see if the front end has set up a function for us to call to\n      check the stack.  */\n   if (stack_check_libfunc != 0)\n-    emit_library_call (stack_check_libfunc, 0, VOIDmode, 1,\n-\t\t       memory_address (QImode,\n-\t\t\t\t       gen_rtx (STACK_GROW_OP, Pmode,\n-\t\t\t\t\t\tstack_pointer_rtx,\n-\t\t\t\t\t\tplus_constant (size, first))),\n-\t\t       ptr_mode);\n+    {\n+      rtx addr = memory_address (QImode,\n+\t\t\t\t gen_rtx (STACK_GROW_OP, Pmode,\n+\t\t\t\t\t  stack_pointer_rtx,\n+\t\t\t\t\t  plus_constant (size, first)));\n+\n+#ifdef POINTERS_EXTEND_UNSIGNED\n+      if (GET_MODE (addr) != ptr_mode)\n+\taddr = convert_memory_address (ptr_mode, addr);\n+#endif\n+\n+      emit_library_call (stack_check_libfunc, 0, VOIDmode, 1, addr,\n+\t\t\t ptr_mode);\n+    }\n \n   /* Next see if we have an insn to check the stack.  Use it if so.  */\n #ifdef HAVE_check_stack"}]}