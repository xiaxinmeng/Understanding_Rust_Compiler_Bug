{"sha": "790199856aab807f3810413867f739c702c6a3e9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzkwMTk5ODU2YWFiODA3ZjM4MTA0MTM4NjdmNzM5YzcwMmM2YTNlOQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2003-07-18T21:33:36Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2003-07-18T21:33:36Z"}, "message": "cfgrtl.c (force_nonfallthru_and_redirect): Use tablejump_p to skip the addr_vec.\n\n        * cfgrtl.c (force_nonfallthru_and_redirect): Use tablejump_p\n        to skip the addr_vec.\n\nFrom-SVN: r69569", "tree": {"sha": "1ccec1956d15f6572d3371b13f7ca67d192d41c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1ccec1956d15f6572d3371b13f7ca67d192d41c9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/790199856aab807f3810413867f739c702c6a3e9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/790199856aab807f3810413867f739c702c6a3e9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/790199856aab807f3810413867f739c702c6a3e9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/790199856aab807f3810413867f739c702c6a3e9/comments", "author": null, "committer": null, "parents": [{"sha": "cecc892aea3942bff3009a3573ca46d7862e116e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cecc892aea3942bff3009a3573ca46d7862e116e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cecc892aea3942bff3009a3573ca46d7862e116e"}], "stats": {"total": 22, "additions": 12, "deletions": 10}, "files": [{"sha": "0b711da0476bc26006b6f59434deb4db829685d4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/790199856aab807f3810413867f739c702c6a3e9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/790199856aab807f3810413867f739c702c6a3e9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=790199856aab807f3810413867f739c702c6a3e9", "patch": "@@ -1,3 +1,8 @@\n+2003-07-18  Richard Henderson  <rth@redhat.com>\n+\n+\t* cfgrtl.c (force_nonfallthru_and_redirect): Use tablejump_p\n+\tto skip the addr_vec.\n+\n Fri Jul 18 15:22:28 2003  Alexandre Oliva  <aoliva@redhat.com>\n \n \t* combine.c (combinable_i3pat): Don't forbid occurrences of"}, {"sha": "903f57eac3fdd06f9427e3c9aed35da60eb5e729", "filename": "gcc/cfgrtl.c", "status": "modified", "additions": 7, "deletions": 10, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/790199856aab807f3810413867f739c702c6a3e9/gcc%2Fcfgrtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/790199856aab807f3810413867f739c702c6a3e9/gcc%2Fcfgrtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgrtl.c?ref=790199856aab807f3810413867f739c702c6a3e9", "patch": "@@ -1036,19 +1036,16 @@ force_nonfallthru_and_redirect (edge e, basic_block target)\n     {\n       /* Create the new structures.  */\n \n+      /* If the old block ended with a tablejump, skip its table\n+\t by searching forward from there.  Otherwise start searching\n+\t forward from the last instruction of the old block.  */\n+      if (!tablejump_p (e->src->end, NULL, &note))\n+\tnote = e->src->end;\n+\n       /* Position the new block correctly relative to loop notes.  */\n-      note = last_loop_beg_note (e->src->end);\n+      note = last_loop_beg_note (note);\n       note = NEXT_INSN (note);\n \n-      /* ... and ADDR_VECs.  */\n-      if (note != NULL\n-\t  && GET_CODE (note) == CODE_LABEL\n-\t  && NEXT_INSN (note)\n-\t  && GET_CODE (NEXT_INSN (note)) == JUMP_INSN\n-\t  && (GET_CODE (PATTERN (NEXT_INSN (note))) == ADDR_DIFF_VEC\n-\t      || GET_CODE (PATTERN (NEXT_INSN (note))) == ADDR_VEC))\n-\tnote = NEXT_INSN (NEXT_INSN (note));\n-\n       jump_block = create_basic_block (note, NULL, e->src);\n       jump_block->count = e->count;\n       jump_block->frequency = EDGE_FREQUENCY (e);"}]}