{"sha": "14292418cbbeec96857d8920e66e43038f0f3194", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTQyOTI0MThjYmJlZWM5Njg1N2Q4OTIwZTY2ZTQzMDM4ZjBmMzE5NA==", "commit": {"author": {"name": "Bernd Schmidt", "email": "bernds@codesourcery.com", "date": "2010-08-02T20:17:59Z"}, "committer": {"name": "Bernd Schmidt", "email": "bernds@gcc.gnu.org", "date": "2010-08-02T20:17:59Z"}, "message": "re PR target/45063 (ICE: Segmentation fault (cc1) compiling matmul_i1.c)\n\n\tPR target/45063\n\t* caller-save.c (save_call_clobbered_regs): Remove regs from\n\thard_regs_saved when they are set.\n\nFrom-SVN: r162828", "tree": {"sha": "0ffc9ab78ee641e805a69ce10d99a3c7d5a26661", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0ffc9ab78ee641e805a69ce10d99a3c7d5a26661"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/14292418cbbeec96857d8920e66e43038f0f3194", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14292418cbbeec96857d8920e66e43038f0f3194", "html_url": "https://github.com/Rust-GCC/gccrs/commit/14292418cbbeec96857d8920e66e43038f0f3194", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14292418cbbeec96857d8920e66e43038f0f3194/comments", "author": null, "committer": null, "parents": [{"sha": "fea8c257250f4535a05716673597577fe3a7a605", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fea8c257250f4535a05716673597577fe3a7a605", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fea8c257250f4535a05716673597577fe3a7a605"}], "stats": {"total": 19, "additions": 18, "deletions": 1}, "files": [{"sha": "5bdb9deb1ebbc8eb60fda875695e36836c58665d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14292418cbbeec96857d8920e66e43038f0f3194/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14292418cbbeec96857d8920e66e43038f0f3194/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=14292418cbbeec96857d8920e66e43038f0f3194", "patch": "@@ -1,3 +1,9 @@\n+2010-08-02  Bernd Schmidt  <bernds@codesourcery.com>\n+\n+\tPR target/45063\n+\t* caller-save.c (save_call_clobbered_regs): Remove regs from\n+\thard_regs_saved when they are set.\n+\n 2010-08-02  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/41089"}, {"sha": "60c47477e89e2df0bfdd8cfdf0bd9dd8dc92c2a8", "filename": "gcc/caller-save.c", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14292418cbbeec96857d8920e66e43038f0f3194/gcc%2Fcaller-save.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14292418cbbeec96857d8920e66e43038f0f3194/gcc%2Fcaller-save.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcaller-save.c?ref=14292418cbbeec96857d8920e66e43038f0f3194", "patch": "@@ -763,6 +763,7 @@ save_call_clobbered_regs (void)\n \t  if (n_regs_saved)\n \t    {\n \t      int regno;\n+\t      HARD_REG_SET this_insn_sets;\n \n \t      if (code == JUMP_INSN)\n \t\t/* Restore all registers if this is a JUMP_INSN.  */\n@@ -777,7 +778,17 @@ save_call_clobbered_regs (void)\n \n \t      for (regno = 0; regno < FIRST_PSEUDO_REGISTER; regno++)\n \t\tif (TEST_HARD_REG_BIT (referenced_regs, regno))\n-\t\t  regno += insert_restore (chain, 1, regno, MOVE_MAX_WORDS, save_mode);\n+\t\t  regno += insert_restore (chain, 1, regno, MOVE_MAX_WORDS,\n+\t\t\t\t\t   save_mode);\n+\t      /* If a saved register is set after the call, this means we no\n+\t\t longer should restore it.  This can happen when parts of a\n+\t\t multi-word pseudo do not conflict with other pseudos, so\n+\t\t IRA may allocate the same hard register for both.  One may\n+\t\t be live across the call, while the other is set\n+\t\t afterwards.  */\n+\t      CLEAR_HARD_REG_SET (this_insn_sets);\n+\t      note_stores (PATTERN (insn), mark_set_regs, &this_insn_sets);\n+\t      AND_COMPL_HARD_REG_SET (hard_regs_saved, this_insn_sets);\n \t    }\n \n \t  if (code == CALL_INSN"}]}